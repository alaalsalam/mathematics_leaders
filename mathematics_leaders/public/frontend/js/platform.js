const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/ScoresView.js","js/vue.js","js/SettingsView.js"])))=>i.map(i=>d[i]);
import{r as Tt,c as s,o as l,a as B,b as L,d as V,w as me,e as ge,f as Ye,g as e,t,u as W,F as te,h as ne,i as re,n as oe,j as be,T as ke,k as Ge,l as Me,v as Ee,m as Y,p as Je,q as ve,s as De,x as Re,y as ue,z as Et,A as tt,B as Nt,C as Lt,D as Pt,E as zt,G as jt,H as Ot}from"./vue.js";(function(){const x=document.createElement("link").relList;if(x&&x.supports&&x.supports("modulepreload"))return;for(const w of document.querySelectorAll('link[rel="modulepreload"]'))a(w);new MutationObserver(w=>{for(const P of w)if(P.type==="childList")for(const y of P.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&a(y)}).observe(document,{childList:!0,subtree:!0});function n(w){const P={};return w.integrity&&(P.integrity=w.integrity),w.referrerPolicy&&(P.referrerPolicy=w.referrerPolicy),w.crossOrigin==="use-credentials"?P.credentials="include":w.crossOrigin==="anonymous"?P.credentials="omit":P.credentials="same-origin",P}function a(w){if(w.ep)return;w.ep=!0;const P=n(w);fetch(w.href,P)}})();const pe=(ee,x)=>{const n=ee.__vccOpts||ee;for(const[a,w]of x)n[a]=w;return n},Rt={},It={class:"p-6"};function Bt(ee,x){const n=Tt("RouterView");return l(),s("main",It,[B(n)])}const Ft=pe(Rt,[["render",Bt]]),Ut="modulepreload",Qt=function(ee){return"/assets/mathematics_leaders/frontend/"+ee},rt={},ct=function(x,n,a){let w=Promise.resolve();if(n&&n.length>0){let Q=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),T=(y==null?void 0:y.nonce)||(y==null?void 0:y.getAttribute("nonce"));w=Q(n.map(f=>{if(f=Qt(f),f in rt)return;rt[f]=!0;const m=f.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const h=document.createElement("link");if(h.rel=m?"stylesheet":Ut,m||(h.as="script"),h.crossOrigin="",h.href=f,T&&h.setAttribute("nonce",T),document.head.appendChild(h),m)return new Promise((C,D)=>{h.addEventListener("load",C),h.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${f}`)))})}))}function P(y){const T=new Event("vite:preloadError",{cancelable:!0});if(T.payload=y,window.dispatchEvent(T),!T.defaultPrevented)throw y}return w.then(y=>{for(const T of y||[])T.status==="rejected"&&P(T.reason);return x().catch(P)})},qt=["dir"],Gt={class:"floating-controls"},Vt=["aria-label"],Wt={class:"control-icon","aria-hidden":"true"},Ht={key:0,viewBox:"0 0 24 24",focusable:"false"},Kt={key:1,viewBox:"0 0 24 24",focusable:"false"},Yt={class:"control-text"},Jt=["aria-label"],Xt={class:"landing__wrapper"},Zt={class:"landing__intro"},ea={class:"logo-card"},ta=["src"],aa={class:"intro__title"},na={class:"intro__subtitle"},la={class:"feature-grid"},sa={class:"feature-index"},oa={class:"feature-text"},ra={class:"stats-row"},ca={class:"stat-value"},ia={class:"stat-label"},ua={class:"landing__auth"},da={class:"auth-card"},va={class:"auth-tabs",role:"tablist"},ha=["aria-selected"],pa=["aria-selected"],fa={class:"input-field"},ma=["for"],ga=["id","placeholder"],_a={class:"input-field"},ba=["for"],ya=["id","placeholder"],ka={class:"form-meta"},wa={href:"#"},$a=["disabled"],Ca={class:"switch-text"},Sa={class:"input-field"},xa=["for"],Aa=["id","placeholder"],Da={class:"input-field"},Ma=["for"],Ta=["id","placeholder"],Ea={class:"input-field"},Na=["for"],La=["id","placeholder"],Pa=["disabled"],za={class:"switch-text"},ja={key:0,class:"auth-notice"},Oa="",Ra={__name:"Index",setup(ee){const x=L(localStorage.getItem("ml_lang")||"ar"),n=V(()=>x.value==="ar"?"rtl":"ltr"),a=b=>({en:{signin:"Sign In",signup:"Create Account",username:"Username",password:"Password",confirm:"Confirm Password",login:"Login",register:"Signup",toSignup:"Create account",toSignin:"Back to login",forgot:"Forgot password?"},ar:{signin:"تسجيل الدخول",signup:"إنشاء حساب",username:"اسم المستخدم",password:"كلمة المرور",confirm:"تأكيد كلمة المرور",login:"دخول",register:"تسجيل",toSignup:"إنشاء حساب",toSignin:"العودة لتسجيل الدخول",forgot:"نسيت كلمة المرور؟"}})[x.value][b],w=V(()=>x.value==="ar");function P(){x.value=w.value?"en":"ar"}const y=L(localStorage.getItem("ml_theme")||"light"),T=V(()=>y.value==="dark"),Q=V(()=>w.value?T.value?"فاتح":"داكن":T.value?"Light":"Dark"),f=V(()=>w.value?T.value?"التبديل إلى الوضع الفاتح":"التبديل إلى الوضع الداكن":T.value?"Switch to light theme":"Switch to dark theme");function m(){y.value=T.value?"light":"dark"}function p(b){document.documentElement.setAttribute("data-ml-theme",b)}me(x,b=>{localStorage.setItem("ml_lang",b),document.documentElement.dir=n.value,document.documentElement.lang=b}),me(y,b=>{localStorage.setItem("ml_theme",b),p(b)}),ge(()=>{document.documentElement.dir=n.value,document.documentElement.lang=x.value,p(y.value)});const h=L(!1),C=L({username:"",password:""}),D=L({username:"",password:"",confirm:""}),O=L(!1),E=L(null);me(h,()=>{E.value=null});const K=new URL("/assets/mathematics_leaders/frontend/assets/logo3.jpeg",import.meta.url).href,Z=V(()=>w.value?"منصة زعماء الرياضيات":"Mathematics Leaders Platform"),R=V(()=>w.value?"تعلم الرياضيات بأسلوب ممتع وتفاعلي مصمم للقادة الصغار.":"Master mathematics with playful, interactive journeys built for young leaders."),G=V(()=>w.value?["برامج تفاعلية مدعومة بالذكاء الاصطناعي","تتبع تقدّم ذكي ومباشر","مجتمع محفّز من المعلمين والطلاب"]:["Interactive, AI-guided programmes","Real-time progress insights","A supportive teacher & student community"]),I=V(()=>w.value?[{value:"12+",label:"وحدة تعليمية متدرجة"},{value:"4K",label:"طالب نشط"},{value:"92%",label:"نسبة إكمال المهام"}]:[{value:"12+",label:"Adaptive learning tracks"},{value:"4K",label:"Active learners"},{value:"92%",label:"Task completion rate"}]);async function F(b,i={}){const u=new URLSearchParams(i).toString(),r=await fetch(Oa+b+(u?`?${u}`:""),{method:"GET",credentials:"include"}),o=await r.json().catch(()=>({}));if(!r.ok)throw o;return o}function z(b){if(typeof b=="string")return b;if(b!=null&&b._server_messages)try{const i=JSON.parse(b._server_messages),u=(i==null?void 0:i[0])&&JSON.parse(i[0]);return(u==null?void 0:u.message)||(u==null?void 0:u._error_message)||"Invalid Request"}catch{}return(b==null?void 0:b.message)||(b==null?void 0:b.exc)||"Invalid Request"}function S(b){const i=b||{username:C.value.username};localStorage.setItem("ml_profile",JSON.stringify({...i,language:x.value})),window.location.href="/math-leaders-games/#/home"}async function _(){var b,i;O.value=!0,E.value=null;try{if(h.value){if(!D.value.username||!D.value.password||!D.value.confirm)throw{message:w.value?"الرجاء ملء كل الحقول.":"Please fill all fields."};if(D.value.password!==D.value.confirm)throw{message:w.value?"كلمتا المرور غير متطابقتين.":"Passwords do not match."};await F("/api/method/mathematics_leaders.api.signup_and_login.signup_user",{username:D.value.username,password:D.value.password,language:x.value});const u=await F("/api/method/mathematics_leaders.api.signup_and_login.verify_login",{usr:D.value.username,pwd:D.value.password});S(((b=u==null?void 0:u.message)==null?void 0:b.profile)||{username:D.value.username})}else{const u=await F("/api/method/mathematics_leaders.api.signup_and_login.verify_login",{usr:C.value.username,pwd:C.value.password});S(((i=u==null?void 0:u.message)==null?void 0:i.profile)||{username:C.value.username})}}catch(u){E.value=z(u)}finally{O.value=!1}}return(b,i)=>(l(),s("section",{class:oe(["landing",y.value]),dir:n.value},[i[11]||(i[11]=Ye('<div class="background" aria-hidden="true" data-v-9ae221db><span class="glow glow-one" data-v-9ae221db></span><span class="glow glow-two" data-v-9ae221db></span><span class="glow glow-three" data-v-9ae221db></span><span class="grid" data-v-9ae221db></span></div>',1)),e("div",Gt,[e("button",{type:"button",class:"control-btn theme-toggle","aria-label":f.value,onClick:m},[e("span",Wt,[T.value?(l(),s("svg",Ht,[...i[9]||(i[9]=[Ye('<circle cx="12" cy="12" r="4.2" fill="none" stroke="currentColor" stroke-width="1.6" data-v-9ae221db></circle><line x1="12" y1="2.4" x2="12" y2="5.4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" data-v-9ae221db></line><line x1="12" y1="18.6" x2="12" y2="21.6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" data-v-9ae221db></line><line x1="2.4" y1="12" x2="5.4" y2="12" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" data-v-9ae221db></line><line x1="18.6" y1="12" x2="21.6" y2="12" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" data-v-9ae221db></line><line x1="5.4" y1="5.4" x2="7.7" y2="7.7" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" data-v-9ae221db></line><line x1="16.3" y1="16.3" x2="18.6" y2="18.6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" data-v-9ae221db></line><line x1="5.4" y1="18.6" x2="7.7" y2="16.3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" data-v-9ae221db></line><line x1="16.3" y1="7.7" x2="18.6" y2="5.4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" data-v-9ae221db></line>',9)])])):(l(),s("svg",Kt,[...i[10]||(i[10]=[e("path",{d:"M15.8 21.2a7.6 7.6 0 0 1-6.9-10.6 6.9 6.9 0 0 0 8.5 8.5 7.6 7.6 0 0 1-1.6 2.1Z",fill:"none",stroke:"currentColor","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),e("span",Yt,t(Q.value),1)],8,Vt),e("button",{type:"button",class:"control-btn lang-toggle","aria-label":w.value?"Switch to English":"التبديل إلى العربية",onClick:P},[e("span",null,t(w.value?"EN":"ع"),1)],8,Jt)]),e("div",Xt,[e("div",Zt,[e("div",ea,[e("img",{src:W(K),alt:"شعار زعماء الرياضيات"},null,8,ta)]),e("h1",aa,t(Z.value),1),e("p",na,t(R.value),1),e("ul",la,[(l(!0),s(te,null,ne(G.value,(u,r)=>(l(),s("li",{key:r,class:"feature-item"},[e("span",sa,"0"+t(r+1),1),e("span",oa,t(u),1)]))),128))]),e("div",ra,[(l(!0),s(te,null,ne(I.value,(u,r)=>(l(),s("div",{key:r,class:"stat-card"},[e("span",ca,t(u.value),1),e("span",ia,t(u.label),1)]))),128))])]),e("div",ua,[e("div",da,[e("div",va,[e("button",{type:"button",class:oe(["tab-btn",{active:!h.value}]),role:"tab","aria-selected":!h.value,onClick:i[0]||(i[0]=u=>h.value=!1)},t(a("signin")),11,ha),e("button",{type:"button",class:oe(["tab-btn",{active:h.value}]),role:"tab","aria-selected":h.value,onClick:i[1]||(i[1]=u=>h.value=!0)},t(a("signup")),11,pa)]),B(ke,{name:"slide-fade",mode:"out-in"},{default:be(()=>[h.value?(l(),s("form",{key:"signup",class:"auth-form",onSubmit:Ge(_,["prevent"])},[e("div",Sa,[e("label",{for:w.value?"signup-username-ar":"signup-username-en"},t(a("username")),9,xa),Me(e("input",{id:w.value?"signup-username-ar":"signup-username-en","onUpdate:modelValue":i[5]||(i[5]=u=>D.value.username=u),type:"text",placeholder:a("username"),autocomplete:"username",required:""},null,8,Aa),[[Ee,D.value.username]])]),e("div",Da,[e("label",{for:w.value?"signup-password-ar":"signup-password-en"},t(a("password")),9,Ma),Me(e("input",{id:w.value?"signup-password-ar":"signup-password-en","onUpdate:modelValue":i[6]||(i[6]=u=>D.value.password=u),type:"password",placeholder:a("password"),autocomplete:"new-password",required:""},null,8,Ta),[[Ee,D.value.password]])]),e("div",Ea,[e("label",{for:w.value?"signup-confirm-ar":"signup-confirm-en"},t(a("confirm")),9,Na),Me(e("input",{id:w.value?"signup-confirm-ar":"signup-confirm-en","onUpdate:modelValue":i[7]||(i[7]=u=>D.value.confirm=u),type:"password",placeholder:a("confirm"),autocomplete:"new-password",required:""},null,8,La),[[Ee,D.value.confirm]])]),e("button",{class:"primary-btn",type:"submit",disabled:O.value},[e("span",null,t(a("register")),1)],8,Pa),e("p",za,[Y(t(w.value?"لديك حساب بالفعل؟":"Already have an account?")+" ",1),e("button",{type:"button",onClick:i[8]||(i[8]=u=>h.value=!1)},t(a("toSignin")),1)])],32)):(l(),s("form",{key:"signin",class:"auth-form",onSubmit:Ge(_,["prevent"])},[e("div",fa,[e("label",{for:w.value?"signin-username-ar":"signin-username-en"},t(a("username")),9,ma),Me(e("input",{id:w.value?"signin-username-ar":"signin-username-en","onUpdate:modelValue":i[2]||(i[2]=u=>C.value.username=u),type:"text",placeholder:a("username"),autocomplete:"username",required:""},null,8,ga),[[Ee,C.value.username]])]),e("div",_a,[e("label",{for:w.value?"signin-password-ar":"signin-password-en"},t(a("password")),9,ba),Me(e("input",{id:w.value?"signin-password-ar":"signin-password-en","onUpdate:modelValue":i[3]||(i[3]=u=>C.value.password=u),type:"password",placeholder:a("password"),autocomplete:"current-password",required:""},null,8,ya),[[Ee,C.value.password]])]),e("div",ka,[e("a",wa,t(a("forgot")),1)]),e("button",{class:"primary-btn",type:"submit",disabled:O.value},[e("span",null,t(a("login")),1)],8,$a),e("p",Ca,[Y(t(w.value?"لا تملك حساباً؟":"Don't have an account?")+" ",1),e("button",{type:"button",onClick:i[4]||(i[4]=u=>h.value=!0)},t(a("toSignup")),1)])],32))]),_:1}),E.value?(l(),s("p",ja,t(E.value),1)):re("",!0)])])])],10,qt))}},Ia=pe(Ra,[["__scopeId","data-v-9ae221db"]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=ee=>ee.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ba=ee=>ee.replace(/^([A-Z])|[\s-_]+(\w)/g,(x,n,a)=>a?a.toUpperCase():n.toLowerCase()),Fa=ee=>{const x=Ba(ee);return x.charAt(0).toUpperCase()+x.slice(1)},Ua=(...ee)=>ee.filter((x,n,a)=>!!x&&x.trim()!==""&&a.indexOf(x)===n).join(" ").trim(),ut=ee=>ee==="";/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ie={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=({name:ee,iconNode:x,absoluteStrokeWidth:n,"absolute-stroke-width":a,strokeWidth:w,"stroke-width":P,size:y=Ie.width,color:T=Ie.stroke,...Q},{slots:f})=>Je("svg",{...Ie,...Q,width:y,height:y,stroke:T,"stroke-width":ut(n)||ut(a)||n===!0||a===!0?Number(w||P||Ie["stroke-width"])*24/Number(y):w||P||Ie["stroke-width"],class:Ua("lucide",Q.class,...ee?[`lucide-${it(Fa(ee))}-icon`,`lucide-${it(ee)}`]:["lucide-icon"])},[...x.map(m=>Je(...m)),...f.default?[f.default()]:[]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=(ee,x)=>(n,{slots:a,attrs:w})=>Je(Qa,{...w,...n,iconNode:x,name:ee},a);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=fe("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=fe("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=fe("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=fe("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=fe("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=fe("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=fe("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=fe("diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=fe("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=fe("hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=fe("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=fe("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=fe("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=fe("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=fe("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=fe("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=fe("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=fe("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=fe("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=fe("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=fe("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=fe("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=fe("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=fe("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=fe("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=fe("triangle",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=fe("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),gt="/assets/mathematics_leaders/frontend/assets/success.mp3",$e="/assets/mathematics_leaders/frontend/assets/clap.mp3",at="/assets/mathematics_leaders/frontend/assets/wrong.mp3",on=["dir","data-theme"],rn={class:"hdr"},cn={class:"sub"},un={class:"board"},dn={class:"assign",dir:"ltr"},vn=["onDrop"],hn={class:"actions"},pn=["disabled"],fn={class:"col-sum",dir:"ltr"},mn={class:"row"},gn={key:0},_n={class:"row"},bn={key:0},yn={class:"row"},kn={key:0},wn={class:"digits",dir:"ltr"},$n={class:"tiles"},Cn=["onDragstart"],Sn={key:0,class:"overlay"},xn={class:"sheet"},An={class:"big"},Dn={class:"toasts"},Mn={__name:"challenge_1",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n=L(x.lang),a=L(x.theme);me(()=>x.lang,N=>n.value=N),me(()=>x.theme,N=>a.value=N);async function w(N,j={}){const k=new URLSearchParams(j).toString(),c=await fetch(N+(k?`?${k}`:""),{method:"GET",credentials:"include"}),d=await c.json().catch(()=>({}));if(!c.ok)throw d;return d}const P=V(()=>n.value==="ar"?"rtl":"ltr"),y={ar:{title:"التحدي 1: عملية جمع عمودية بأرقام مفقودة (رموز)",subtitle:"اسحب الأرقام وضعها مكان الرموز حتى تكتمل العملية.",digits:"الأرقام",check:"تحقق",reset:"إعادة ضبط",newQ:"سؤال جديد",correctBig:"أحسنت!",correctSub:"حل صحيح 👏 لقد كسبت نقطة.",wrong:"حاول مرة أخرى 🤔"},en:{title:"Challenge 1: Column addition with missing (symbol) digits",subtitle:"Drag digits onto symbols until the addition becomes correct.",digits:"Digits",check:"Check",reset:"Reset",newQ:"New Question",correctBig:"Great!",correctSub:"Correct 👏 You earned a point.",wrong:"Try again 🤔"}},T=N=>y[n.value][N],Q=new Audio(gt),f=new Audio($e),m=new Audio(at);Q.preload="auto",f.preload="auto",m.preload="auto";const p={circle:vt,square:tn,triangle:ln,diamond:Wa},h=["circle","square","triangle","diamond"],C=N=>p[N]||vt;function D(N,j){return N+Math.floor(Math.random()*(j-N+1))}function O(N){return N.slice().sort(()=>Math.random()-.5)}const E=ve({aStr:"",bStr:"",sStr:"",hiddenMap:{},assignMap:{},usedShapes:[]}),K=L([]),Z=L([]),R=L([]);function G(){const N=D(2,3),j=D(2,3),k=D(10**(N-1),10**N-1),c=D(10**(j-1),10**j-1),d=k+c;E.aStr=String(k),E.bStr=String(c),E.sStr=String(d);const v=Array.from(new Set((E.aStr+E.bStr+E.sStr).split("").map(J=>+J))),$=Math.min(D(2,3),v.length),H=O(v).slice(0,$),M=O(h).slice(0,$);E.hiddenMap={},H.forEach((J,X)=>{E.hiddenMap[M[X]]=J});const A=new Set;function U(J){return J.split("").map(X=>{var de;const le=+X,ce=(de=Object.entries(E.hiddenMap).find(([xe,he])=>he===le))==null?void 0:de[0];return ce?(A.add(ce),{t:"shape",v:ce}):{t:"digit",v:X}})}K.value=U(E.aStr),Z.value=U(E.bStr),R.value=U(E.sStr),E.usedShapes=Array.from(A),E.assignMap=Object.fromEntries(E.usedShapes.map(J=>[J,null])),E.usedShapes.length===0&&G()}function I(N,j){N.dataTransfer.setData("text/plain",String(j))}function F(N,j){const k=Number(N.dataTransfer.getData("text/plain"));Number.isNaN(k)||Object.values(E.assignMap).includes(k)&&E.assignMap[j]!==k||(E.assignMap[j]=k,r())}function z(N){N.preventDefault()}function S(){Object.keys(E.assignMap).forEach(N=>E.assignMap[N]=null)}const _=V(()=>E.usedShapes.every(N=>Number.isInteger(E.assignMap[N])));function b(N){return Number(N.map(j=>{var k;return j.t==="digit"?j.v:(k=E.assignMap[j.v])!=null?k:"?"}).join(""))}function i(){if(!_.value)return!1;const N=b(K.value),j=b(Z.value),k=b(R.value);return![N,j,k].some(c=>String(c).includes("?"))&&N+j===k}const u=ve({open:!1,good:!0});async function r(){if(_.value)if(i()){try{Q.currentTime=0,Q.play().catch(()=>{})}catch{}try{f.currentTime=0,f.play().catch(()=>{})}catch{}u.open=!0,u.good=!0,w("/api/method/mathematics_leaders.api.game_points.add_point",{amount:1}).catch(()=>{})}else{try{m.currentTime=0,m.play().catch(()=>{})}catch{}q(T("wrong"),"warn")}}function o(){u.open=!1,G()}const g=L([]);function q(N,j="ok"){const k=Math.random().toString(36).slice(2);g.value.push({id:k,msg:N,type:j}),setTimeout(()=>g.value=g.value.filter(c=>c.id!==k),1800)}return ge(()=>G()),(N,j)=>(l(),s("section",{class:"wrap challenge-surface",dir:P.value,"data-theme":a.value},[e("header",rn,[e("h2",null,t(T("title")),1),e("p",cn,t(T("subtitle")),1)]),e("div",un,[e("div",dn,[(l(!0),s(te,null,ne(E.usedShapes,k=>(l(),s("div",{key:k,class:"slot",onDrop:c=>F(c,k),onDragover:z},[(l(),De(Re(C(k)),{class:"shape-ico",size:26,stroke:"var(--shape-stroke)","stroke-width":2,style:{fill:"var(--shape-fill)"}})),e("div",{class:oe(["val",{empty:E.assignMap[k]==null}])},t(E.assignMap[k]==null?"…":E.assignMap[k]),3)],40,vn))),128)),e("div",hn,[e("button",{class:"ghost",onClick:S},t(T("reset")),1),e("button",{class:"primary",disabled:!_.value,onClick:r},t(T("check")),9,pn),e("button",{class:"ghost",onClick:G},t(T("newQ")),1)])]),e("div",fn,[e("div",mn,[(l(!0),s(te,null,ne(K.value,(k,c)=>(l(),s("span",{key:"a"+c,class:oe(["cell",k.t])},[k.t==="digit"?(l(),s("span",gn,t(k.v),1)):(l(),De(Re(C(k.v)),{key:1,class:"shape-ico",size:26,stroke:"var(--shape-stroke)","stroke-width":2,style:{fill:"var(--shape-fill)"}}))],2))),128))]),j[0]||(j[0]=e("div",{class:"row plus"},[e("span",null,"+")],-1)),e("div",_n,[(l(!0),s(te,null,ne(Z.value,(k,c)=>(l(),s("span",{key:"b"+c,class:oe(["cell",k.t])},[k.t==="digit"?(l(),s("span",bn,t(k.v),1)):(l(),De(Re(C(k.v)),{key:1,class:"shape-ico",size:26,stroke:"var(--shape-stroke)","stroke-width":2,style:{fill:"var(--shape-fill)"}}))],2))),128))]),j[1]||(j[1]=e("div",{class:"line"},null,-1)),e("div",yn,[(l(!0),s(te,null,ne(R.value,(k,c)=>(l(),s("span",{key:"s"+c,class:oe(["cell",k.t])},[k.t==="digit"?(l(),s("span",kn,t(k.v),1)):(l(),De(Re(C(k.v)),{key:1,class:"shape-ico",size:26,stroke:"var(--shape-stroke)","stroke-width":2,style:{fill:"var(--shape-fill)"}}))],2))),128))])]),e("div",wn,[e("h4",null,t(T("digits")),1),e("div",$n,[(l(),s(te,null,ne(10,k=>e("button",{key:k-1,class:"tile",draggable:"true",onDragstart:c=>I(c,k-1)},t(k-1),41,Cn)),64))])])]),B(ke,{name:"fade"},{default:be(()=>[u.open?(l(),s("div",Sn,[e("div",xn,[e("div",An,t(T("correctBig")),1),e("p",null,t(T("correctSub")),1),e("button",{class:"primary",onClick:o},t(T("newQ")),1)])])):re("",!0)]),_:1}),e("div",Dn,[(l(!0),s(te,null,ne(g.value,k=>(l(),s("div",{key:k.id,class:oe(["toast",k.type])},t(k.msg),3))),128))])],8,on))}},Tn=pe(Mn,[["__scopeId","data-v-9c65b80b"]]),Ne="/assets/mathematics_leaders/frontend/assets/success2.mp3",Le="/assets/mathematics_leaders/frontend/assets/wrong2.mp3",En=["data-theme"],Nn={class:"title"},Ln={class:"rule"},Pn={class:"layout"},zn={class:"grid"},jn=["onDrop"],On={key:1,class:"placeholder"},Rn=["value","onInput","onChange","onBlur","placeholder"],In=["onClick"],Bn={class:"bank"},Fn={class:"bank-title"},Un={class:"bank-items"},Qn=["onDragstart"],qn={class:"actions"},Gn={key:0,class:"overlay"},Vn={class:"card"},Wn={class:"big"},Hn={__name:"challenge_2",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"التحدي 2: شبكة أعداد تزيد بمقدار {STEP}",rule:"كل خانة تزيد {STEP} عن اليسار وعن الأعلى. اسحب الأعداد المفقودة إلى أماكنها.",newQ:"سؤال جديد",check:"تحقّق",reset:"إعادة تعيين",correct:"إجابة صحيحة",wrong:"تحقق من القيم",bank:"لوحة الأعداد",clear:"تفريغ الخلية"},en:{title:"Challenge 2: Number grid with step {STEP}",rule:"Each cell increases by {STEP} from its left and its top. Drag the missing numbers into place.",newQ:"New puzzle",check:"Check",reset:"Reset",correct:"Correct answer",wrong:"Check your values",bank:"Number bank",clear:"Clear cell"}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Ne):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(Le):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");const T=[100,200,500,1e3,2e3];function Q(M,A){return Math.floor(Math.random()*(A-M+1))+M}function f(M){const A=M.slice();for(let U=A.length-1;U>0;U--){const J=Math.floor(Math.random()*(U+1));[A[U],A[J]]=[A[J],A[U]]}return A}const m=L(3),p=L(1e3),h=L(0),C=L([]),D=L(new Set),O=L({}),E=L({}),K=L({}),Z=L(!1),R=L(null),G=V(()=>n[a.value].title.replaceAll("{STEP}",p.value)),I=V(()=>n[a.value].rule.replaceAll("{STEP}",p.value)),F=(M,A)=>`${M},${A}`;function z(M,A,U){const J=[];for(let X=0;X<M;X++){const le=[];for(let ce=0;ce<M;ce++)le.push(A+U*(X+ce));J.push(le)}return J}function S(M){const A=[];for(let X=0;X<M;X++)for(let le=0;le<M;le++)A.push([X,le]);const U=A.filter(([X,le])=>!(X===0&&le===0)),J=Q(3,5);return new Set(f(U).slice(0,J).map(([X,le])=>F(X,le)))}function _(){const M={};D.value.forEach(A=>{const[U,J]=A.split(",").map(Number),X=C.value[U][J];M[X]=(M[X]||0)+1}),K.value=M}const b=V(()=>{const M=[];for(const[A,U]of Object.entries(K.value))for(let J=0;J<U;J++)M.push(Number(A));return f(M)});function i(){Z.value=!1,R.value=null,O.value={},E.value={},p.value=T[Q(0,T.length-1)];const M=Q(5,19)*100;h.value=M;const A=m.value;C.value=z(A,h.value,p.value),D.value=S(A),_()}function u(){for(const M of D.value)if(O.value[M]==null)return!1;return!0}function r(){if(!u())return!1;for(const M of D.value){const[A,U]=M.split(",").map(Number);if(O.value[M]!==C.value[A][U])return!1}return!0}async function o(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function g(){if(!u()){R.value=a.value==="ar"?"أكمل كل الخانات":"Fill all blanks",y&&y.play();return}r()?(Z.value=!0,R.value=n[a.value].correct,w&&w.play(),P&&P.play(),await o()):(R.value=n[a.value].wrong,y&&y.play())}function q(){O.value={},E.value={},_(),R.value=null,Z.value=!1}function N(M,A,{fromManual:U=!1}={}){if(!Number.isNaN(A)){if(O.value[M]!=null){const J=O.value[M];K.value[J]=(K.value[J]||0)+1}if(U)(K.value[A]||0)>0&&(K.value[A]-=1);else{if((K.value[A]||0)===0)return;K.value[A]-=1}O.value[M]=A,E.value={...E.value,[M]:String(A)},R.value=null}}function j(M,A){M.dataTransfer.setData("text/plain",String(A))}function k(M){M.preventDefault()}function c(M,A){M.preventDefault();const U=Number(M.dataTransfer.getData("text/plain"));N(A,U)}function d(M){if(O.value[M]!=null){const A=O.value[M];K.value[A]=(K.value[A]||0)+1,delete O.value[M]}E.value={...E.value,[M]:""}}function v(M,A){E.value={...E.value,[M]:A}}function $(M){var J;const A=((J=E.value[M])!=null?J:"").trim();if(A===""){d(M);return}const U=Number(A);Number.isFinite(U)&&N(M,U,{fromManual:!0})}const H=V(()=>({direction:"ltr",unicodeBidi:"isolate"}));return ge(i),me(()=>x.lang,()=>R.value=null),(M,A)=>(l(),s("div",{class:"challenge2 challenge-surface","data-theme":x.theme},[e("h2",Nn,t(G.value),1),e("p",Ln,t(I.value),1),e("div",Pn,[e("div",zn,[(l(!0),s(te,null,ne(m.value,U=>(l(),s("div",{key:"r"+U,class:"row"},[(l(!0),s(te,null,ne(m.value,J=>{var X;return l(),s("div",{key:"c"+U+"-"+J,class:"cell"},[D.value.has(`${U-1},${J-1}`)?(l(),s(te,{key:1},[e("div",{class:"dropzone",onDragover:k,onDrop:le=>c(le,`${U-1},${J-1}`)},[O.value[`${U-1},${J-1}`]!=null?(l(),s("span",{key:0,class:"num",style:ue(H.value)},t(O.value[`${U-1},${J-1}`]),5)):(l(),s("span",On,"؟"))],40,jn),e("input",{class:"manual-entry",type:"number",value:(X=E.value[`${U-1},${J-1}`])!=null?X:"",onInput:le=>v(`${U-1},${J-1}`,le.target.value),onChange:le=>$(`${U-1},${J-1}`),onBlur:le=>$(`${U-1},${J-1}`),placeholder:x.lang==="ar"?"أدخل رقمًا":"Enter value"},null,40,Rn),e("button",{class:"clear",onClick:le=>d(`${U-1},${J-1}`)},[B(W(Ce),{class:"ic"}),Y(" "+t(n[a.value].clear),1)],8,In)],64)):(l(),s("span",{key:0,class:"num",style:ue(H.value)},t(C.value[U-1][J-1]),5))])}),128))]))),128))]),e("div",Bn,[e("div",Fn,t(n[a.value].bank),1),e("div",Un,[(l(!0),s(te,null,ne(b.value,U=>(l(),s("button",{key:U+"_"+Math.random(),class:"chip",draggable:"true",onDragstart:J=>j(J,U),style:ue(H.value)},t(U),45,Qn))),128))]),e("div",qn,[e("button",{class:"btn",onClick:q},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:g},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:i},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),R.value?(l(),s("div",{key:0,class:oe(["toast",{ok:Z.value}])},t(R.value),3)):re("",!0)])]),Z.value?(l(),s("div",Gn,[e("div",Vn,[e("div",Wn,t(n[a.value].correct),1),e("button",{class:"btn",onClick:i},t(n[a.value].newQ),1)])])):re("",!0)],8,En))}},Kn=pe(Hn,[["__scopeId","data-v-f172099e"]]),Te="/assets/mathematics_leaders/frontend/assets/success3.mp3",je="/assets/mathematics_leaders/frontend/assets/wrong3.mp3",Yn=["data-theme"],Jn={class:"title"},Xn={class:"rule"},Zn={class:"qs"},el={class:"qtext"},tl={class:"opts"},al=["onClick"],nl=["onClick"],ll={class:"toolbar"},sl={class:"status"},ol={key:0,class:"done"},rl={class:"actions"},cl=4,il={__name:"challenge_3",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"التحدي 3: إيجاد عددين من المجموع والفرق",rule:"اختر الزوج الصحيح (أكبر، أصغر) بحيث يكون مجموعهما S والفرق بينهما D.",newQ:"سؤال جديد",reset:"إعادة تعيين",check:"تحقّق",correct:"إجابة صحيحة",wrong:"إجابة غير صحيحة",done:"أكملت هذه الجولة",q:(R,G,I)=>`(${R}) جد عددين ناتج جمعهما ${G} والفرق بينهما ${I}`},en:{title:"Challenge 3: Find two numbers from sum and difference",rule:"Pick the correct pair (greater, smaller) with sum S and difference D.",newQ:"New puzzle",reset:"Reset",check:"Check",correct:"Correct",wrong:"Incorrect",done:"Round completed",q:(R,G,I)=>`(${R}) Find two numbers with sum ${G} and difference ${I}`}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Te):null,P=typeof Audio!="undefined"?new Audio(je):null;w&&(w.preload="auto"),P&&(P.preload="auto");function y(R,G){return Math.floor(Math.random()*(G-R+1))+R}function T(R){const G=R.slice();for(let I=G.length-1;I>0;I--){const F=Math.floor(Math.random()*(I+1));[G[I],G[F]]=[G[F],G[I]]}return G}const Q=L([]),f=V(()=>Q.value.filter(R=>{var G;return R.judged&&((G=R.options[R.pickedIndex])==null?void 0:G.isAns)}).length),m=V(()=>Q.value.length>0&&Q.value.every(R=>R.judged));function p(R,G){return[(R+G)/2,(R-G)/2]}function h(R){return Number.isInteger(R)&&R>=0}function C(){let R,G,I,F;for(;R=y(10,60),G=y(0,20),!((R&1)===(G&1)&&!(R<G)&&([I,F]=p(R,G),h(I)&&h(F))););const z=new Set,S=(b,i)=>{const u=`${b},${i}`;b>=0&&i>=0&&Number.isInteger(b)&&Number.isInteger(i)&&u!==`${I},${F}`&&z.add(u)};S(I+1,F-1),S(I-1,F+1),S(I+2,F-2),S(I-2,F+2),S(I+1,F),S(I,F+1);const _=[{a:I,b:F,isAns:!0}];for(const b of Array.from(z).slice(0,3)){const[i,u]=b.split(",").map(r=>Number(r));if(_.push({a:i,b:u,isAns:!1}),_.length===4)break}for(;_.length<4;){const b=y(-3,3),i=y(-3,3),u=Math.max(0,I+b),r=Math.max(0,F+i);u===I&&r===F||_.push({a:u,b:r,isAns:!1})}return{S:R,D:G,ans:[I,F],options:T(_),pickedIndex:null,judged:!1,firstTry:!0}}function D(){Q.value=Array.from({length:cl},()=>C())}function O(){for(const R of Q.value)R.pickedIndex=null,R.judged=!1,R.firstTry=!0}async function E(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function K(R,G){if(R.judged)return;R.pickedIndex=G,R.judged=!0,R.options[G].isAns?(w&&w.play(),m.value&&w&&w.play(),R.firstTry&&await E()):P&&P.play()}function Z(R){R.judged=!1,R.firstTry=!1,R.pickedIndex=null}return ge(D),me(()=>x.lang,()=>{}),(R,G)=>(l(),s("div",{class:"challenge3 challenge-surface","data-theme":x.theme},[e("h2",Jn,t(n[a.value].title),1),e("p",Xn,t(n[a.value].rule),1),e("div",Zn,[(l(!0),s(te,null,ne(Q.value,(I,F)=>(l(),s("div",{key:F,class:"qcard"},[e("div",el,t(n[a.value].q(F+1,I.S,I.D)),1),e("div",tl,[(l(!0),s(te,null,ne(I.options,(z,S)=>(l(),s("button",{key:S,class:oe(["opt",{chosen:I.pickedIndex===S,ok:I.judged&&I.options[S].isAns,bad:I.judged&&I.pickedIndex===S&&!I.options[S].isAns}]),onClick:_=>K(I,S)}," ( "+t(z.a)+" ، "+t(z.b)+" ) ",11,al))),128))]),I.judged?(l(),s("div",{key:0,class:oe(["feedback",{ok:I.options[I.pickedIndex].isAns}])},[Y(t(I.options[I.pickedIndex].isAns?n[a.value].correct:n[a.value].wrong)+" ",1),I.options[I.pickedIndex].isAns?re("",!0):(l(),s("button",{key:0,class:"retry",onClick:z=>Z(I)},"↺",8,nl))],2)):re("",!0)]))),128))]),e("div",ll,[e("div",sl,[B(W(ye),{class:"ic"}),Y(" "+t(f.value)+" / "+t(Q.value.length)+" ",1),m.value&&f.value===Q.value.length?(l(),s("span",ol," · "+t(n[a.value].done),1)):re("",!0)]),e("div",rl,[e("button",{class:"btn",onClick:O},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:D},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])])])],8,Yn))}},ul=pe(il,[["__scopeId","data-v-c37b354f"]]),_t="/assets/mathematics_leaders/frontend/assets/success4.mp3",bt="/assets/mathematics_leaders/frontend/assets/wrong4.mp3",dl=["data-theme"],vl={class:"title"},hl={class:"rule"},pl={class:"table"},fl=["onDrop"],ml={key:1,class:"placeholder"},gl=["value","onInput","onChange","onBlur","placeholder"],_l=["onClick"],bl={class:"side"},yl={class:"bank-title"},kl={class:"bank-items"},wl=["onDragstart"],$l={class:"actions"},Cl={key:0,class:"overlay"},Sl={class:"card"},xl={class:"big"},Oe=3,Al={__name:"challenge_4",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"التحدي 4: أكمل جدول الضرب",rule:"جدول ضرب بعناوين صفوف وأعمدة. اسحب القيم الصحيحة من الأسفل إلى الخانات الفارغة.",bank:"لوحة الأعداد",newQ:"سؤال جديد",reset:"إعادة تعيين",check:"تحقّق",correct:"إجابة صحيحة",wrong:"تحقق من القيم",clear:"تفريغ الخلية"},en:{title:"Challenge 4: Complete the multiplication table",rule:"A multiplication table with row/column headers. Drag correct values into the blanks.",bank:"Number bank",newQ:"New puzzle",reset:"Reset",check:"Check",correct:"Correct",wrong:"Check your values",clear:"Clear cell"}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(_t):null,P=typeof Audio!="undefined"?new Audio(bt):null;w&&(w.preload="auto"),P&&(P.preload="auto");function y(c,d){return Math.floor(Math.random()*(d-c+1))+c}function T(c){const d=c.slice();for(let v=d.length-1;v>0;v--){const $=Math.floor(Math.random()*(v+1));[d[v],d[$]]=[d[$],d[v]]}return d}const Q=L([]),f=L([]),m=L(new Set),p=L({}),h=L({}),C=L({}),D=L(!1),O=L(null);function E(c,d){return c===0&&d===0?"×":c===0?f.value[d-1]:d===0?Q.value[c-1]:Q.value[c-1]*f.value[d-1]}const K=(c,d)=>c===0||d===0?`h:${c},${d}`:`c:${c},${d}`;function Z(c){return T([1,2,3,4,5,6,7,8,9]).slice(0,c).sort((d,v)=>d-v)}function R(){const c=[];for(let A=0;A<=Oe;A++)for(let U=0;U<=Oe;U++)A===0&&U===0||c.push([A,U]);const d=c.filter(([A,U])=>A>0&&U>0),v=T(d)[0],$=c.filter(([A,U])=>!(A===v[0]&&U===v[1])),H=y(5,8),M=T($).slice(0,H);return new Set(M.map(([A,U])=>K(A,U)))}function G(){const c={};m.value.forEach(d=>{const[v,$]=d.split(":"),[H,M]=$.split(",").map(Number),A=E(H,M);c[A]=(c[A]||0)+1});for(const[d,v]of Object.entries(p.value))c[v]=(c[v]||0)-1;for(const[d,v]of Object.entries(c))v<=0&&delete c[d];C.value=c}const I=V(()=>{const c=[];for(const[d,v]of Object.entries(C.value))for(let $=0;$<v;$++)c.push(Number(d));return T(c)});function F(){D.value=!1,O.value=null,p.value={},h.value={},Q.value=Z(Oe),f.value=Z(Oe),m.value=R(),G()}function z(){for(const c of m.value)if(p.value[c]==null)return!1;return!0}function S(){if(!z())return!1;for(const c of m.value){const[d,v]=c.split(":"),[$,H]=v.split(",").map(Number);if(p.value[c]!==E($,H))return!1}return!0}async function _(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function b(){if(!z()){O.value=a.value==="ar"?"أكمل كل الخانات":"Fill all blanks",P&&P.play();return}S()?(D.value=!0,O.value=n[a.value].correct,w&&w.play(),await _()):(O.value=n[a.value].wrong,P&&P.play())}function i(){p.value={},h.value={},G(),O.value=null,D.value=!1}function u(c,d,{fromManual:v=!1}={}){if(!Number.isNaN(d)){if(p.value[c]!=null){const $=p.value[c];C.value[$]=(C.value[$]||0)+1}if(v)(C.value[d]||0)>0&&(C.value[d]-=1);else{if((C.value[d]||0)===0)return;C.value[d]-=1}p.value[c]=d,h.value={...h.value,[c]:String(d)},O.value=null}}function r(c,d){c.dataTransfer.setData("text/plain",String(d))}function o(c){c.preventDefault()}function g(c,d){c.preventDefault();const v=Number(c.dataTransfer.getData("text/plain"));u(d,v)}function q(c){if(p.value[c]!=null){const d=p.value[c];C.value[d]=(C.value[d]||0)+1,delete p.value[c]}h.value={...h.value,[c]:""}}function N(c,d){h.value={...h.value,[c]:d}}function j(c){var $;const d=(($=h.value[c])!=null?$:"").trim();if(d===""){q(c);return}const v=Number(d);Number.isFinite(v)&&u(c,v,{fromManual:!0})}const k=V(()=>({direction:"ltr",unicodeBidi:"isolate"}));return ge(F),me(()=>x.lang,()=>{}),(c,d)=>(l(),s("div",{class:"challenge4 challenge-surface","data-theme":x.theme},[e("h2",vl,t(n[a.value].title),1),e("p",hl,t(n[a.value].rule),1),e("div",pl,[(l(!0),s(te,null,ne(Oe+1,v=>(l(),s("div",{class:"row",key:"r"+v},[(l(!0),s(te,null,ne(Oe+1,$=>{var H;return l(),s("div",{class:oe(["cell header",{th:v===1||$===1,corner:v===1&&$===1}]),key:"c"+v+"-"+$},[v===1&&$===1?(l(),s(te,{key:0},[Y(" × ")],64)):m.value.has(v===1||$===1?`h:${v-1},${$-1}`:`c:${v-1},${$-1}`)?(l(),s(te,{key:2},[e("div",{class:"dropzone",onDragover:o,onDrop:M=>g(M,v===1||$===1?`h:${v-1},${$-1}`:`c:${v-1},${$-1}`)},[p.value[v===1||$===1?`h:${v-1},${$-1}`:`c:${v-1},${$-1}`]!=null?(l(),s("span",{key:0,class:"num",style:ue(k.value)},t(p.value[v===1||$===1?`h:${v-1},${$-1}`:`c:${v-1},${$-1}`]),5)):(l(),s("span",ml,"؟"))],40,fl),e("input",{class:"manual-entry",type:"number",value:(H=h.value[v===1||$===1?`h:${v-1},${$-1}`:`c:${v-1},${$-1}`])!=null?H:"",onInput:M=>N(v===1||$===1?`h:${v-1},${$-1}`:`c:${v-1},${$-1}`,M.target.value),onChange:M=>j(v===1||$===1?`h:${v-1},${$-1}`:`c:${v-1},${$-1}`),onBlur:M=>j(v===1||$===1?`h:${v-1},${$-1}`:`c:${v-1},${$-1}`),placeholder:x.lang==="ar"?"أدخل رقمًا":"Enter value"},null,40,gl),e("button",{class:"clear",onClick:M=>q(v===1||$===1?`h:${v-1},${$-1}`:`c:${v-1},${$-1}`)},[B(W(Ce),{class:"ic"}),Y(" "+t(n[a.value].clear),1)],8,_l)],64)):(l(),s("span",{key:1,class:"num",style:ue(k.value)},t(E(v-1,$-1)),5))],2)}),128))]))),128))]),e("div",bl,[e("div",yl,t(n[a.value].bank),1),e("div",kl,[(l(!0),s(te,null,ne(I.value,v=>(l(),s("button",{key:v+"_"+Math.random(),class:"chip",draggable:"true",onDragstart:$=>r($,v),style:ue(k.value)},t(v),45,wl))),128))]),e("div",$l,[e("button",{class:"btn",onClick:i},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:b},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:F},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),O.value?(l(),s("div",{key:0,class:oe(["toast",{ok:D.value}])},t(O.value),3)):re("",!0)]),D.value?(l(),s("div",Cl,[e("div",Sl,[e("div",xl,t(n[a.value].correct),1),e("button",{class:"btn",onClick:F},t(n[a.value].newQ),1)])])):re("",!0)],8,dl))}},Dl=pe(Al,[["__scopeId","data-v-f63f0f22"]]),Ml="/assets/mathematics_leaders/frontend/assets/wrong5.mp3",Tl=["data-theme"],El={class:"title"},Nl={class:"rule"},Ll={class:"tri-wrap"},Pl={class:"square left-sq"},zl={key:1,class:"placeholder"},jl=["value","placeholder"],Ol={class:"square right-sq"},Rl={key:1,class:"placeholder"},Il=["value","placeholder"],Bl={class:"square base-sq"},Fl={key:1,class:"placeholder"},Ul=["value","placeholder"],Ql={class:"side"},ql={class:"bank-title"},Gl={class:"bank-items"},Vl=["onDragstart"],Wl={class:"actions"},Hl={key:0,class:"overlay"},Kl={class:"card"},Yl={class:"big"},Jl=4,Xl={__name:"challenge_5",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"التحدي 5: مخطط مثلث (ضرب)",rule:"كل مربع على الضلع يساوي حاصل ضرب العدديْن في الدائرتيْن المجاورتين له. اسحب القيم المفقودة إلى المربعات.",bank:"لوحة الأعداد",newQ:"سؤال جديد",reset:"إعادة تعيين",check:"تحقّق",correct:"إجابة صحيحة",wrong:"تحقق من القيم",clear:"تفريغ الخلية"},en:{title:"Challenge 5: Triangle product",rule:"Each edge-square equals the product of the two adjacent circles. Drag missing values into the squares.",bank:"Number bank",newQ:"New puzzle",reset:"Reset",check:"Check",correct:"Correct answer",wrong:"Check your values",clear:"Clear cell"}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Ne):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(Ml):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");function T(k,c){return Math.floor(Math.random()*(c-k+1))+k}function Q(k){const c=k.slice();for(let d=c.length-1;d>0;d--){const v=Math.floor(Math.random()*(d+1));[c[d],c[v]]=[c[v],c[d]]}return c}const f=L([2,3,4]),m=L({t:0,l:0,r:0}),p=L(new Set),h=L({}),C=L({}),D=L({}),O=L(!1),E=L(null);function K(){const k=Q([2,3,4,5,6,7,8,9]).slice(0,3);f.value=[k[0],k[1],k[2]];const[c,d,v]=f.value;m.value={l:c*d,r:c*v,t:d*v}}function Z(){const k=["l","r","t"],c=T(2,3);p.value=new Set(Q(k).slice(0,c))}function R(){const k={};p.value.forEach(d=>{const v=m.value[d];k[v]=(k[v]||0)+1});for(const[d,v]of Object.entries(h.value))k[v]=(k[v]||0)-1;for(const[d,v]of Object.entries(k))v<=0&&delete k[d];const c=Jl;{const d=new Set(Object.keys(k).map(Number)),v=new Set(Object.values(m.value)),$=[];for(let H=4;H<=81;H++)!d.has(H)&&!v.has(H)&&$.push(H);for(let H=0;H<c&&$.length;H++){const M=Math.floor(Math.random()*$.length),A=$.splice(M,1)[0];k[A]=(k[A]||0)+1}}D.value=k}const G=V(()=>{const k=[];for(const[c,d]of Object.entries(D.value))for(let v=0;v<d;v++)k.push(Number(c));return Q(k)});function I(){O.value=!1,E.value=null,h.value={},C.value={},K(),Z(),R()}function F(){for(const k of p.value)if(h.value[k]==null)return!1;return!0}function z(){if(!F())return!1;for(const k of p.value)if(h.value[k]!==m.value[k])return!1;return!0}async function S(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function _(){if(!F()){E.value=a.value==="ar"?"أكمل كل الخانات":"Fill all blanks",y&&y.play();return}z()?(O.value=!0,E.value=n[a.value].correct,w&&w.play(),P&&P.play(),await S()):(E.value=n[a.value].wrong,y&&y.play())}function b(){h.value={},R(),E.value=null,O.value=!1}function i(k,c){k.dataTransfer.setData("text/plain",String(c))}function u(k){k.preventDefault()}function r(k,c,{fromManual:d=!1}={}){if(!Number.isNaN(c)){if(h.value[k]!=null){const v=h.value[k];D.value[v]=(D.value[v]||0)+1}if(d)(D.value[c]||0)>0&&(D.value[c]-=1);else{if((D.value[c]||0)===0)return;D.value[c]-=1}h.value[k]=c,C.value={...C.value,[k]:String(c)},E.value=null}}function o(k,c){k.preventDefault();const d=Number(k.dataTransfer.getData("text/plain"));r(c,d)}function g(k){if(h.value[k]!=null){const c=h.value[k];D.value[c]=(D.value[c]||0)+1,delete h.value[k]}C.value={...C.value,[k]:""}}function q(k,c){C.value={...C.value,[k]:c}}function N(k){var v;const c=((v=C.value[k])!=null?v:"").trim();if(c===""){g(k);return}const d=Number(c);Number.isFinite(d)&&r(k,d,{fromManual:!0})}const j=V(()=>({direction:"ltr",unicodeBidi:"isolate"}));return ge(I),me(()=>x.lang,()=>{}),(k,c)=>{var d,v,$;return l(),s("div",{class:"challenge5 challenge-surface","data-theme":x.theme},[e("h2",El,t(n[a.value].title),1),e("p",Nl,t(n[a.value].rule),1),e("div",Ll,[c[15]||(c[15]=e("svg",{class:"links",viewBox:"0 0 300 260",preserveAspectRatio:"none"},[e("line",{x1:"150",y1:"40",x2:"60",y2:"140"}),e("line",{x1:"150",y1:"40",x2:"240",y2:"140"}),e("line",{x1:"60",y1:"140",x2:"240",y2:"140"})],-1)),e("div",{class:"circle top",style:ue(j.value)},t(f.value[0]),5),e("div",{class:"circle left",style:ue(j.value)},t(f.value[1]),5),e("div",{class:"circle right",style:ue(j.value)},t(f.value[2]),5),e("div",Pl,[p.value.has("l")?(l(),s(te,{key:1},[e("div",{class:"dropzone",onDragover:u,onDrop:c[0]||(c[0]=H=>o(H,"l"))},[h.value.l!=null?(l(),s("span",{key:0,class:"num",style:ue(j.value)},t(h.value.l),5)):(l(),s("span",zl,"؟"))],32),e("input",{class:"manual-entry",type:"number",value:(d=C.value.l)!=null?d:"",onInput:c[1]||(c[1]=H=>q("l",H.target.value)),onChange:c[2]||(c[2]=H=>N("l")),onBlur:c[3]||(c[3]=H=>N("l")),placeholder:x.lang==="ar"?"أدخل رقمًا":"Enter value"},null,40,jl),e("button",{class:"clear",onClick:c[4]||(c[4]=H=>g("l"))},[B(W(Ce),{class:"ic"}),Y(" "+t(n[a.value].clear),1)])],64)):(l(),s("span",{key:0,class:"num",style:ue(j.value)},t(m.value.l),5))]),e("div",Ol,[p.value.has("r")?(l(),s(te,{key:1},[e("div",{class:"dropzone",onDragover:u,onDrop:c[5]||(c[5]=H=>o(H,"r"))},[h.value.r!=null?(l(),s("span",{key:0,class:"num",style:ue(j.value)},t(h.value.r),5)):(l(),s("span",Rl,"؟"))],32),e("input",{class:"manual-entry",type:"number",value:(v=C.value.r)!=null?v:"",onInput:c[6]||(c[6]=H=>q("r",H.target.value)),onChange:c[7]||(c[7]=H=>N("r")),onBlur:c[8]||(c[8]=H=>N("r")),placeholder:x.lang==="ar"?"أدخل رقمًا":"Enter value"},null,40,Il),e("button",{class:"clear",onClick:c[9]||(c[9]=H=>g("r"))},[B(W(Ce),{class:"ic"}),Y(" "+t(n[a.value].clear),1)])],64)):(l(),s("span",{key:0,class:"num",style:ue(j.value)},t(m.value.r),5))]),e("div",Bl,[p.value.has("t")?(l(),s(te,{key:1},[e("div",{class:"dropzone",onDragover:u,onDrop:c[10]||(c[10]=H=>o(H,"t"))},[h.value.t!=null?(l(),s("span",{key:0,class:"num",style:ue(j.value)},t(h.value.t),5)):(l(),s("span",Fl,"؟"))],32),e("input",{class:"manual-entry",type:"number",value:($=C.value.t)!=null?$:"",onInput:c[11]||(c[11]=H=>q("t",H.target.value)),onChange:c[12]||(c[12]=H=>N("t")),onBlur:c[13]||(c[13]=H=>N("t")),placeholder:x.lang==="ar"?"أدخل رقمًا":"Enter value"},null,40,Ul),e("button",{class:"clear",onClick:c[14]||(c[14]=H=>g("t"))},[B(W(Ce),{class:"ic"}),Y(" "+t(n[a.value].clear),1)])],64)):(l(),s("span",{key:0,class:"num",style:ue(j.value)},t(m.value.t),5))])]),e("div",Ql,[e("div",ql,t(n[a.value].bank),1),e("div",Gl,[(l(!0),s(te,null,ne(G.value,H=>(l(),s("button",{key:H+"_"+Math.random(),class:"chip",draggable:"true",onDragstart:M=>i(M,H),style:ue(j.value)},t(H),45,Vl))),128))]),e("div",Wl,[e("button",{class:"btn",onClick:b},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:_},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:I},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),E.value?(l(),s("div",{key:0,class:oe(["toast",{ok:O.value}])},t(E.value),3)):re("",!0)]),O.value?(l(),s("div",Hl,[e("div",Kl,[e("div",Yl,t(n[a.value].correct),1),e("button",{class:"btn",onClick:I},t(n[a.value].newQ),1)])])):re("",!0)],8,Tl)}}},Zl=pe(Xl,[["__scopeId","data-v-d3434538"]]),es=["data-theme"],ts={class:"title"},as={class:"rule"},ns=["onClick"],ls={class:"panel"},ss={class:"status"},os={class:"actions"},rs={__name:"challenge_6",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"التحدي 6: اختر ثلاث خلايا من شبكة بحيث لا تكون في الصف أو العمود نفسه ويكون مجموعها الهدف",rule:(S,_)=>`شبكة ${S}×${S}. اختر ثلاث خلايا كلٌّ منها في صف وعمود مختلفين بحيث يساوي مجموعها ${_}.`,newQ:"سؤال جديد",reset:"إعادة تعيين",check:"تحقّق",correct:"إجابة صحيحة",wrong:"تحقق من القيود أو من المجموع",picked:"المختار: "},en:{title:"Challenge 6: Pick 3 cells in different rows and columns to reach the target sum",rule:(S,_)=>`A ${S}×${S} grid. Pick three cells, one per distinct row and column, whose sum equals ${_}.`,newQ:"New puzzle",reset:"Reset",check:"Check",correct:"Correct",wrong:"Check the constraints or the sum",picked:"Picked: "}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(gt):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(je):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");function T(S,_){return Math.floor(Math.random()*(_-S+1))+S}function Q(S){const _=S.slice();for(let b=_.length-1;b>0;b--){const i=Math.floor(Math.random()*(b+1));[_[b],_[i]]=[_[i],_[b]]}return _}const f=L(3),m=L([]),p=L(0),h=L([]),C=L(!1),D=L(null),O=V(()=>({direction:"ltr",unicodeBidi:"isolate"})),E=V(()=>h.value.reduce((S,_)=>S+m.value[_.r][_.c],0));function K(){C.value=!1,D.value=null,h.value=[],f.value=[3,4][T(0,1)],m.value=Array.from({length:f.value},()=>Array.from({length:f.value},()=>T(1,9)));const S=Q([...Array(f.value).keys()]).slice(0,3),_=Q([...Array(f.value).keys()]).slice(0,3),b=Q(_.slice()),i=S.map((u,r)=>({r:u,c:b[r]}));p.value=i.reduce((u,r)=>u+m.value[r.r][r.c],0)}function Z(){h.value=[],D.value=null,C.value=!1}function R(S,_){if(C.value)return;const b=h.value.findIndex(i=>i.r===S&&i.c===_);if(b>=0){h.value.splice(b,1);return}h.value.length!==3&&h.value.push({r:S,c:_})}function G(){const S=h.value.map(_=>_.r);return new Set(S).size===h.value.length}function I(){const S=h.value.map(_=>_.c);return new Set(S).size===h.value.length}async function F(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function z(){if(h.value.length!==3){D.value=a.value==="ar"?"اختر ثلاث خلايا":"Pick three cells",y&&y.play();return}if(!G()||!I()){D.value=n[a.value].wrong,y&&y.play();return}E.value===p.value?(C.value=!0,D.value=n[a.value].correct,w&&w.play(),P&&P.play(),await F()):(D.value=n[a.value].wrong,y&&y.play())}return ge(K),(S,_)=>(l(),s("div",{class:"challenge6 challenge-surface","data-theme":x.theme},[e("h2",ts,t(n[a.value].title),1),e("p",as,t(n[a.value].rule(f.value,p.value)),1),(l(!0),s(te,null,ne(m.value,(b,i)=>(l(),s("div",{class:"grid",key:"r"+i,style:ue({"--n":f.value})},[(l(!0),s(te,null,ne(b,(u,r)=>(l(),s("button",{key:i+"-"+r,class:oe(["cell",{picked:h.value.some(o=>o.r===i&&o.c===r)}]),onClick:o=>R(i,r),style:ue(O.value)},t(u),15,ns))),128))],4))),128)),e("div",ls,[e("div",ss,t(n[a.value].picked)+" "+t(h.value.length)+" · "+t(E.value),1),e("div",os,[e("button",{class:"btn",onClick:Z},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:z},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:K},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),D.value?(l(),s("div",{key:0,class:oe(["toast",{ok:C.value}])},t(D.value),3)):re("",!0)])],8,es))}},cs=pe(rs,[["__scopeId","data-v-69ee6918"]]),is=["data-theme"],us={class:"title"},ds={class:"rule"},vs={class:"pyramid"},hs=["onDrop"],ps={key:1,class:"placeholder"},fs=["value","onInput","onChange","onBlur","placeholder"],ms=["onClick"],gs={class:"side"},_s={class:"bank-title"},bs={class:"bank-items"},ys=["onDragstart"],ks={class:"actions"},ws=6,$s={__name:"challenge_7",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"التحدي 7: جدار أعداد (هرم جمع)",rule:"كل خانة تساوي مجموع الخليتين اللتين تحتها مباشرة. اسحب القيم المفقودة لإكمال الهرم.",bank:"لوحة الأعداد",newQ:"سؤال جديد",reset:"إعادة تعيين",check:"تحقّق",correct:"إجابة صحيحة",wrong:"تحقق من القيم",clear:"تفريغ الخلية"},en:{title:"Challenge 7: Sum Pyramid",rule:"Each cell equals the sum of the two cells directly below. Drag missing values to complete the pyramid.",bank:"Number bank",newQ:"New puzzle",reset:"Reset",check:"Check",correct:"Correct answer",wrong:"Check your values",clear:"Clear cell"}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Te):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(at):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");function T(c,d){return Math.floor(Math.random()*(d-c+1))+c}function Q(c){const d=c.slice();for(let v=d.length-1;v>0;v--){const $=Math.floor(Math.random()*(v+1));[d[v],d[$]]=[d[$]]=[d[$],d[v]]}return d}const f=L(4),m=L([]),p=L(new Set),h=L({}),C=L({}),D=L({}),O=L(!1),E=L(null),K=V(()=>({direction:"ltr",unicodeBidi:"isolate"}));function Z(c){const d=[];d[0]=Array.from({length:c},()=>T(1,9));for(let v=1;v<c;v++)d[v]=Array.from({length:c-v},($,H)=>d[v-1][H]+d[v-1][H+1]);return d}function R(c,d){return`${c},${d}`}function G(c){const d=[];for(let A=0;A<c;A++)for(let U=0;U<m.value[A].length;U++)d.push([A,U]);const v=new Set;for(let A=1;A<c;A++){const U=T(0,m.value[A].length-1);v.add(R(A,U))}const $=d.filter(([A,U])=>A>0&&!v.has(R(A,U))),H=T(4,6),M=Q($).slice(0,H);return new Set(M.map(([A,U])=>R(A,U)))}function I(){const c={};p.value.forEach(d=>{const[v,$]=d.split(",").map(Number),H=m.value[v][$];c[H]=(c[H]||0)+1});for(const[d,v]of Object.entries(h.value))c[v]=(c[v]||0)-1;for(const[d,v]of Object.entries(c))v<=0&&delete c[d];{const d=new Set(Object.keys(c).map(Number)),v=new Set;m.value.forEach(A=>A.forEach(U=>v.add(U)));const $=[],H=2,M=120;for(let A=H;A<=M;A++)!d.has(A)&&!v.has(A)&&$.push(A);for(let A=0;A<ws&&$.length;A++){const U=Math.floor(Math.random()*$.length),J=$.splice(U,1)[0];c[J]=(c[J]||0)+1}}D.value=c}const F=V(()=>{const c=[];for(const[d,v]of Object.entries(D.value))for(let $=0;$<v;$++)c.push(Number(d));return Q(c)});function z(){O.value=!1,E.value=null,h.value={},C.value={},m.value=Z(f.value),p.value=G(f.value),I()}function S(){for(const c of p.value)if(h.value[c]==null)return!1;return!0}function _(){if(!S())return!1;for(const c of p.value){const[d,v]=c.split(",").map(Number);if(h.value[c]!==m.value[d][v])return!1}return!0}async function b(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function i(){if(!S()){E.value=a.value==="ar"?"أكمل كل الخانات":"Fill all blanks",y&&y.play();return}_()?(O.value=!0,E.value=n[a.value].correct,w&&w.play(),P&&P.play(),await b()):(E.value=n[a.value].wrong,y&&y.play())}function u(){h.value={},C.value={},I(),E.value=null,O.value=!1}function r(c,d,{fromManual:v=!1}={}){if(!Number.isNaN(d)){if(h.value[c]!=null){const $=h.value[c];D.value[$]=(D.value[$]||0)+1}if(v)(D.value[d]||0)>0&&(D.value[d]-=1);else{if((D.value[d]||0)===0)return;D.value[d]-=1}h.value[c]=d,C.value={...C.value,[c]:String(d)},E.value=null}}function o(c,d){c.dataTransfer.setData("text/plain",String(d))}function g(c){c.preventDefault()}function q(c,d){c.preventDefault();const v=Number(c.dataTransfer.getData("text/plain"));r(d,v)}function N(c){if(h.value[c]!=null){const d=h.value[c];D.value[d]=(D.value[d]||0)+1,delete h.value[c]}C.value={...C.value,[c]:""}}ge(z),me(()=>x.lang,()=>{});function j(c,d){C.value={...C.value,[c]:d}}function k(c){var $;const d=(($=C.value[c])!=null?$:"").trim();if(d===""){N(c);return}const v=Number(d);Number.isFinite(v)&&r(c,v,{fromManual:!0})}return(c,d)=>(l(),s("div",{class:"challenge7 challenge-surface","data-theme":x.theme},[e("h2",us,t(n[a.value].title),1),e("p",ds,t(n[a.value].rule),1),e("div",vs,[(l(!0),s(te,null,ne(m.value,(v,$)=>(l(),s("div",{class:"prow",key:"r"+$,style:ue({"--cols":v.length})},[(l(!0),s(te,null,ne(v,(H,M)=>{var A;return l(),s("div",{class:"cell",key:$+"-"+M},[p.value.has(`${$},${M}`)?(l(),s(te,{key:1},[e("div",{class:"dropzone",onDragover:g,onDrop:U=>q(U,`${$},${M}`)},[h.value[`${$},${M}`]!=null?(l(),s("span",{key:0,class:"num",style:ue(K.value)},t(h.value[`${$},${M}`]),5)):(l(),s("span",ps,"؟"))],40,hs),e("input",{class:"manual-entry",type:"number",value:(A=C.value[`${$},${M}`])!=null?A:"",onInput:U=>j(`${$},${M}`,U.target.value),onChange:U=>k(`${$},${M}`),onBlur:U=>k(`${$},${M}`),placeholder:x.lang==="ar"?"أدخل رقمًا":"Enter value"},null,40,fs),e("button",{class:"clear",onClick:U=>N(`${$},${M}`)},[B(W(Ce),{class:"ic"}),Y(" "+t(n[a.value].clear),1)],8,ms)],64)):(l(),s("span",{key:0,class:"num",style:ue(K.value)},t(H),5))])}),128))],4))),128))]),e("div",gs,[e("div",_s,t(n[a.value].bank),1),e("div",bs,[(l(!0),s(te,null,ne(F.value,v=>(l(),s("button",{key:v+"_"+Math.random(),class:"chip",draggable:"true",onDragstart:$=>o($,v),style:ue(K.value)},t(v),45,ys))),128))]),e("div",ks,[e("button",{class:"btn",onClick:u},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:i},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:z},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),E.value?(l(),s("div",{key:0,class:oe(["toast",{ok:O.value}])},t(E.value),3)):re("",!0)])],8,is))}},Cs=pe($s,[["__scopeId","data-v-48f5f33c"]]),Ss="/assets/mathematics_leaders/frontend/assets/oh_no.mp3",xs=["data-theme"],As={class:"title"},Ds={class:"rule"},Ms={class:"panel"},Ts=["placeholder"],Es={class:"usage"},Ns={class:"keypad"},Ls={class:"label"},Ps={class:"row"},zs=["onClick"],js=["onClick"],Os={class:"actions"},Rs={class:"hint"},Is={__name:"challenge_level_two_1",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"التحدي 1 (المستوى الثاني): كوّن جملة عددية تستعمل 1،2،3،4،5 دون تكرار",rule:S=>`اكتب تعبيراً حسابياً يستخدم الأرقام ١،٢،٣،٤،٥ كلٌّ مرة واحدة فقط ويكون ناتجه ${S}. يمكن استعمال + - × ÷ والأقواس، ولا يُسمح بأي أرقام أخرى أو تكرار.`,inputPH:"اكتب التعبير هنا… مثل: (5*4)*(3+2)*1",keys:"لوحة المفاتيح",newQ:"سؤال جديد",reset:"مسح",check:"تحقّق",correct:"إجابة صحيحة",wrong:"تحقق من الشروط أو من النتيجة",used:"استخدام الأرقام:",note:"تلميح: يمكنك دائماً استعمال ×1 دون تغيير النتيجة."},en:{title:"Level 2 – Challenge 1: Build an expression with 1..5 once each",rule:S=>`Write an expression that uses digits 1,2,3,4,5 exactly once and evaluates to ${S}. Allowed: + - * / and parentheses. No other digits or repeats.`,inputPH:"Type expression… e.g., (5*4)*(3+2)*1",keys:"Keypad",newQ:"New puzzle",reset:"Clear",check:"Check",correct:"Correct",wrong:"Check constraints or value",used:"Digits usage:",note:"Hint: multiplying by 1 keeps the value unchanged."}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Ne):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(Ss):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");function T(S,_){return Math.floor(Math.random()*(_-S+1))+S}function Q(S){const _=S.slice();for(let b=_.length-1;b>0;b--){const i=Math.floor(Math.random()*(b+1));[_[b],_[i]]=[_[i],_[b]]}return _}const f=L(""),m=L(0),p=L(null),h=L(!1),C=[1,2,3,4,5],D=["+","-","*","/","(",")"];function O(){const S=Q([2,3,4,5]),[_,b,i,u]=S,r=d=>d[T(0,d.length-1)],o=r(["+","-","*","/"]),g=r(["+","-","*","/"]),q=r(["+","-","*","/"]),N=d=>{try{return Function(`return (${d});`)()}catch{return null}};let j=`( ${_} ${o} ${b} ) ${g} ( ${i} ${q} ${u} )`,k=N(j),c=0;for(;(k==null||!isFinite(k))&&c<20;)return O();Math.random()<.7?(j=`(${j}) * 1`,k=N(j)):(j=`((${j}) + 1) - 1`,k=N(j)),m.value=k,f.value="",p.value=null,h.value=!1}function E(S){f.value+=S}function K(){f.value=f.value.slice(0,-1)}function Z(){f.value="",p.value=null,h.value=!1}const R=V(()=>{const S={1:0,2:0,3:0,4:0,5:0};for(const _ of f.value)"12345".includes(_)&&S[_]++;return S});function G(S){return/^[\d\+\-\*\/\(\)\s]*$/.test(S)}function I(){if(/[06789]/.test(f.value))return!1;const S=R.value;return C.every(_=>S[_]===1)}function F(S){try{return!G(S)||(S=S.replace(/×/g,"*").replace(/÷/g,"/"),/\b(?![1-5]\b)\d+\b/.test(S))?null:Function(`"use strict"; return (${S});`)()}catch{return null}}async function z(){const S=F(f.value);if(S==null||!isFinite(S)||!I()){p.value=n[a.value].wrong,y&&y.play();return}if(Math.abs(S-m.value)<1e-9){h.value=!0,p.value=n[a.value].correct,w&&w.play(),P&&P.play();try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}else p.value=n[a.value].wrong,y&&y.play()}return ge(O),(S,_)=>(l(),s("div",{class:"lvl2c1 challenge-surface","data-theme":x.theme},[e("h2",As,t(n[a.value].title),1),e("p",Ds,t(n[a.value].rule(m.value)),1),e("div",Ms,[Me(e("input",{class:"expr",placeholder:n[a.value].inputPH,"onUpdate:modelValue":_[0]||(_[0]=b=>f.value=b),dir:"ltr",inputmode:"numeric",autocomplete:"off",spellcheck:"false"},null,8,Ts),[[Ee,f.value]]),e("div",Es,[Y(t(n[a.value].used)+" ",1),(l(),s(te,null,ne(C,b=>e("span",{key:b,class:oe(["u",{ok:R.value[b]===1,bad:R.value[b]>1}])},t(b)+": "+t(R.value[b]),3)),64))]),e("div",Ns,[e("div",Ls,t(n[a.value].keys),1),e("div",Ps,[(l(),s(te,null,ne(C,b=>e("button",{class:"k",key:"d"+b,onClick:i=>E(String(b))},t(b),9,zs)),64)),(l(),s(te,null,ne(D,b=>e("button",{class:"k",key:"o"+b,onClick:i=>E(b)},t(b),9,js)),64)),e("button",{class:"k wide",onClick:K},"⌫")])]),e("div",Os,[e("button",{class:"btn",onClick:Z},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:z},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:O},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),e("div",Rs,t(n[a.value].note),1),p.value?(l(),s("div",{key:0,class:oe(["toast",{ok:h.value}])},t(p.value),3)):re("",!0)])],8,xs))}},Bs=pe(Is,[["__scopeId","data-v-ac84a4b0"]]),Fs=["data-theme"],Us={class:"title"},Qs={class:"rule"},qs={class:"board"},Gs=["onDrop"],Vs={key:1,class:"placeholder"},Ws=["onClick"],Hs={class:"side"},Ks={class:"bank-title"},Ys={class:"bank-items"},Js=["onDragstart"],Xs={class:"actions"},Zs={__name:"challenge_level_two_2",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"المستوى الثاني – التحدي 2: أكمل مربعاً سحرياً",rule:d=>`ضع الأعداد بحيث يكون مجموع كل صف وعمود وقطر مساوياً ${d}. اسحب القيم المفقودة إلى أماكنها. الأعداد جميعها مختلفة.`,bank:"لوحة الأعداد",newQ:"سؤال جديد",reset:"إعادة تعيين",check:"تحقّق",correct:"إجابة صحيحة",wrong:"تحقق من المجاميع أو التكرار",clear:"تفريغ الخلية"},en:{title:"Level 2 – Challenge 2: Complete a magic square",rule:d=>`Place numbers so each row, column, and diagonal sums to ${d}. Drag the missing values into place. All numbers are distinct.`,bank:"Number bank",newQ:"New puzzle",reset:"Reset",check:"Check",correct:"Correct answer",wrong:"Check sums or duplicates",clear:"Clear cell"}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Ne):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(Le):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");function T(d,v){return Math.floor(Math.random()*(v-d+1))+d}function Q(d){const v=d.slice();for(let $=v.length-1;$>0;$--){const H=Math.floor(Math.random()*($+1));[v[$],v[H]]=[v[H],v[$]]}return v}const f=[[8,1,6],[3,5,7],[4,9,2]];function m(d){const v=J=>[[J[2][0],J[1][0],J[0][0]],[J[2][1],J[1][1],J[0][1]],[J[2][2],J[1][2],J[0][2]]],$=J=>J.map(X=>X.slice().reverse()),H=[];let M=d;for(let J=0;J<4;J++)H.push(M),H.push($(M)),M=v(M);const A=[],U=new Set;for(const J of H){const X=JSON.stringify(J);U.has(X)||(A.push(J),U.add(X))}return A}const p=m(f),h=L([[0,0,0],[0,0,0],[0,0,0]]),C=L(0),D=L(new Set),O=L({}),E=L({}),K=L(!1),Z=L(null),R=V(()=>({direction:"ltr",unicodeBidi:"isolate"})),G=(d,v)=>`${d},${v}`;function I(){const d=p[T(0,p.length-1)],v=[1,2,3,4,5][T(0,4)],$=T(0,6),H=Array.from({length:3},()=>Array(3).fill(0));for(let M=0;M<3;M++)for(let A=0;A<3;A++)H[M][A]=$+v*d[M][A];h.value=H,C.value=v*15+3*$}function F(){const d=[];for(let M=0;M<3;M++)for(let A=0;A<3;A++)d.push([M,A]);const v=Q(d).slice(0,T(3,4)),$=new Set(v.map(([M,A])=>G(M,A))),H=d.filter(([M,A])=>!$.has(G(M,A)));D.value=new Set(H.map(([M,A])=>G(M,A)))}function z(){const d={};D.value.forEach(v=>{const[$,H]=v.split(",").map(Number),M=h.value[$][H];d[M]=(d[M]||0)+1});for(const[v,$]of Object.entries(O.value))d[$]=(d[$]||0)-1;for(const[v,$]of Object.entries(d))$<=0&&delete d[v];E.value=d}const S=V(()=>{const d=[];for(const[v,$]of Object.entries(E.value))for(let H=0;H<$;H++)d.push(Number(v));return Q(d)});function _(){K.value=!1,Z.value=null,O.value={},I(),F(),z()}function b(){for(const d of D.value)if(O.value[d]==null)return!1;return!0}function i(){const d=h.value.map(v=>v.slice());for(const v of D.value){const[$,H]=v.split(",").map(Number);d[$][H]=O.value[v]}return d}function u(d){const v=new Set;for(const $ of d)for(const H of $){if(v.has(H))return!1;v.add(H)}return!0}function r(d){const v=($,H,M)=>$+H+M;for(let $=0;$<3;$++)if(v(d[$][0],d[$][1],d[$][2])!==C.value||v(d[0][$],d[1][$],d[2][$])!==C.value)return!1;return!(v(d[0][0],d[1][1],d[2][2])!==C.value||v(d[0][2],d[1][1],d[2][0])!==C.value)}async function o(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function g(){if(!b()){Z.value=a.value==="ar"?"أكمل كل الخانات":"Fill all blanks",y&&y.play();return}const d=i();u(d)&&r(d)?(K.value=!0,Z.value=n[a.value].correct,w&&w.play(),P&&P.play(),await o()):(Z.value=n[a.value].wrong,y&&y.play())}function q(){O.value={},z(),Z.value=null,K.value=!1}function N(d,v){d.dataTransfer.setData("text/plain",String(v))}function j(d){d.preventDefault()}function k(d,v){d.preventDefault();const $=Number(d.dataTransfer.getData("text/plain"));if(O.value[v]!=null){const H=O.value[v];E.value[H]=(E.value[H]||0)+1}(E.value[$]||0)!==0&&(E.value[$]-=1,O.value[v]=$,Z.value=null)}function c(d){if(O.value[d]!=null){const v=O.value[d];E.value[v]=(E.value[v]||0)+1,delete O.value[d]}}return ge(_),me(()=>x.lang,()=>{}),(d,v)=>(l(),s("div",{class:"lvl2c2 challenge-surface","data-theme":x.theme},[e("h2",Us,t(n[a.value].title),1),e("p",Qs,t(n[a.value].rule(C.value)),1),e("div",qs,[(l(),s(te,null,ne(3,$=>e("div",{class:"row",key:"r"+$},[(l(),s(te,null,ne(3,H=>e("div",{class:"cell",key:"c"+$+"-"+H},[D.value.has(`${$-1},${H-1}`)?(l(),s(te,{key:1},[e("div",{class:"dropzone",onDragover:j,onDrop:M=>k(M,`${$-1},${H-1}`)},[O.value[`${$-1},${H-1}`]!=null?(l(),s("span",{key:0,class:"num",style:ue(R.value)},t(O.value[`${$-1},${H-1}`]),5)):(l(),s("span",Vs,"؟"))],40,Gs),e("button",{class:"clear",onClick:M=>c(`${$-1},${H-1}`)},[B(W(Ce),{class:"ic"}),Y(" "+t(n[a.value].clear),1)],8,Ws)],64)):(l(),s("span",{key:0,class:"num",style:ue(R.value)},t(h.value[$-1][H-1]),5))])),64))])),64))]),e("div",Hs,[e("div",Ks,t(n[a.value].bank),1),e("div",Ys,[(l(!0),s(te,null,ne(S.value,$=>(l(),s("button",{key:$+"_"+Math.random(),class:"chip",draggable:"true",onDragstart:H=>N(H,$),style:ue(R.value)},t($),45,Js))),128))]),e("div",Xs,[e("button",{class:"btn",onClick:q},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:g},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:_},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),Z.value?(l(),s("div",{key:0,class:oe(["toast",{ok:K.value}])},t(Z.value),3)):re("",!0)])],8,Fs))}},eo=pe(Zs,[["__scopeId","data-v-741125f1"]]),to=["data-theme"],ao={class:"title"},no={class:"rule"},lo={class:"cards"},so={class:"card"},oo={class:"label"},ro={key:0,class:"num"},co={key:1,class:"placeholder"},io={class:"card"},uo={class:"label"},vo={key:0,class:"num"},ho={key:1,class:"placeholder"},po={class:"card"},fo={class:"label"},mo={key:0,class:"num"},go={key:1,class:"placeholder"},_o={class:"card"},bo={class:"label"},yo={key:0,class:"num"},ko={key:1,class:"placeholder"},wo={class:"bank"},$o={class:"bank-title"},Co={class:"bank-items"},So=["disabled","onDragstart"],xo={key:0},Ao={class:"actions"},Do={__name:"challenge_level_two_3",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"المستوى الثاني – التحدي 3: أوصل المسألة بالنتيجة الصحيحة",rule:"اسحب عدداً من ستة أرقام إلى كل خانة بحسب الخاصية المطلوبة: مضاعف 2، 3، 4، 5. كل عدد يُستخدم مرة واحدة.",bank:"لوحة الأعداد",newQ:"سؤال جديد",reset:"إعادة تعيين",check:"تحقّق",correct:"إجابة صحيحة",wrong:"تحقق من الخواص",clear:"تفريغ الخلية",lab2:"مضاعفًا للعدد 2",lab3:"مضاعفًا للعدد 3",lab4:"مضاعفًا للعدد 4",lab5:"مضاعفًا للعدد 5"},en:{title:"Level 2 – Challenge 3: Match each rule to a six-digit number",rule:"Drag one six-digit number to each rule: multiple of 2, 3, 4, 5. Each number can be used once.",bank:"Number bank",newQ:"New puzzle",reset:"Reset",check:"Check",correct:"Correct",wrong:"Check the properties",clear:"Clear cell",lab2:"Multiple of 2",lab3:"Multiple of 3",lab4:"Multiple of 4",lab5:"Multiple of 5"}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Te):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(Le):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");function T(o,g){return Math.floor(Math.random()*(g-o+1))+o}function Q(o){const g=o.slice();for(let q=g.length-1;q>0;q--){const N=Math.floor(Math.random()*(q+1));[g[q],g[N]]=[g[N],g[q]]}return g}const f=L([]),m=L({}),p=L({m2:null,m3:null,m4:null,m5:null}),h=L(null),C=L(!1),D=o=>o%2===0,O=o=>String(o).split("").reduce((g,q)=>g+ +q,0)%3===0,E=o=>o%100%4===0,K=o=>o%10===0||o%10===5;function Z(o=g=>!0){for(;;){const g=T(1,9);let q=String(g);for(let j=0;j<5;j++)q+=String(T(0,9));const N=Number(q);if(o(N))return N}}function R(o,g=()=>!0){for(;;){const q=T(1,9);let N=String(q);for(let k=0;k<4;k++)N+=String(T(0,9));N+=String(o);const j=Number(N);if(g(j))return j}}function G(){C.value=!1,h.value=null,p.value={m2:null,m3:null,m4:null,m5:null};const o=new Set,g=v=>{const $=String(v);return o.has($)?!1:(o.add($),!0)};let q=R(5,v=>!O(v)||T(0,1));for(;!g(q);)q=R(5);let N=R([0,2,4,6,8][T(0,4)],v=>!K(v)&&!E(v));for(;!g(N);)N=R([0,2,4,6,8][T(0,4)],v=>!K(v)&&!E(v));let j=Z(v=>E(v));for(;!g(j);)j=Z(v=>E(v));let k=Z(v=>O(v)&&!K(v));for(;!g(k);)k=Z(v=>O(v)&&!K(v));const c=[N,k,j,q],d=[];for(;d.length<4;){let v=Z($=>$%2!==0&&!O($)&&!K($)&&!E($));g(v)&&d.push(v)}f.value=Q(c.concat(d)),m.value=Object.fromEntries(f.value.map(v=>[v,1]))}function I(o,g){o.dataTransfer.setData("text/plain",String(g))}function F(o){o.preventDefault()}function z(o,g){g.preventDefault();const q=Number(g.dataTransfer.getData("text/plain"));(m.value[q]||0)!==0&&(p.value[o]!=null&&(m.value[p.value[o]]=(m.value[p.value[o]]||0)+1),p.value[o]=q,m.value[q]-=1,h.value=null)}function S(o){p.value[o]!=null&&(m.value[p.value[o]]=(m.value[p.value[o]]||0)+1,p.value[o]=null)}function _(){return["m2","m3","m4","m5"].every(o=>p.value[o]!=null)}function b(){return D(p.value.m2)&&O(p.value.m3)&&E(p.value.m4)&&K(p.value.m5)}async function i(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function u(){if(!_()){h.value=a.value==="ar"?"أكمل كل الخانات":"Fill all blanks",y&&y.play();return}b()?(C.value=!0,h.value=n[a.value].correct,w&&w.play(),P&&P.play(),await i()):(h.value=n[a.value].wrong,y&&y.play())}function r(){p.value={m2:null,m3:null,m4:null,m5:null},m.value=Object.fromEntries(f.value.map(o=>[o,1])),h.value=null,C.value=!1}return ge(G),me(()=>x.lang,()=>{}),(o,g)=>(l(),s("div",{class:"lvl2c3 challenge-surface","data-theme":x.theme},[e("h2",ao,t(n[a.value].title),1),e("p",no,t(n[a.value].rule),1),e("div",lo,[e("div",so,[e("div",oo,t(n[a.value].lab2),1),e("div",{class:"drop",onDragover:F,onDrop:g[0]||(g[0]=q=>z("m2",q))},[p.value.m2!=null?(l(),s("span",ro,t(p.value.m2),1)):(l(),s("span",co,"؟"))],32),e("button",{class:"clear",onClick:g[1]||(g[1]=q=>S("m2"))},[B(W(Ce),{class:"ic"}),Y(t(n[a.value].clear),1)])]),e("div",io,[e("div",uo,t(n[a.value].lab3),1),e("div",{class:"drop",onDragover:F,onDrop:g[2]||(g[2]=q=>z("m3",q))},[p.value.m3!=null?(l(),s("span",vo,t(p.value.m3),1)):(l(),s("span",ho,"؟"))],32),e("button",{class:"clear",onClick:g[3]||(g[3]=q=>S("m3"))},[B(W(Ce),{class:"ic"}),Y(t(n[a.value].clear),1)])]),e("div",po,[e("div",fo,t(n[a.value].lab4),1),e("div",{class:"drop",onDragover:F,onDrop:g[4]||(g[4]=q=>z("m4",q))},[p.value.m4!=null?(l(),s("span",mo,t(p.value.m4),1)):(l(),s("span",go,"؟"))],32),e("button",{class:"clear",onClick:g[5]||(g[5]=q=>S("m4"))},[B(W(Ce),{class:"ic"}),Y(t(n[a.value].clear),1)])]),e("div",_o,[e("div",bo,t(n[a.value].lab5),1),e("div",{class:"drop",onDragover:F,onDrop:g[6]||(g[6]=q=>z("m5",q))},[p.value.m5!=null?(l(),s("span",yo,t(p.value.m5),1)):(l(),s("span",ko,"؟"))],32),e("button",{class:"clear",onClick:g[7]||(g[7]=q=>S("m5"))},[B(W(Ce),{class:"ic"}),Y(t(n[a.value].clear),1)])])]),e("div",wo,[e("div",$o,t(n[a.value].bank),1),e("div",Co,[(l(!0),s(te,null,ne(f.value,q=>(l(),s("button",{key:q,class:"chip",disabled:(m.value[q]||0)===0,draggable:"true",onDragstart:N=>I(N,q)},[Y(t(q)+" ",1),(m.value[q]||0)===0?(l(),s("small",xo,"✓")):re("",!0)],40,So))),128))])]),e("div",Ao,[e("button",{class:"btn",onClick:r},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:u},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:G},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),h.value?(l(),s("div",{key:0,class:oe(["toast",{ok:C.value}])},t(h.value),3)):re("",!0)],8,to))}},Mo=pe(Do,[["__scopeId","data-v-a01ad243"]]),To=["data-theme"],Eo={class:"title"},No={class:"rule"},Lo={class:"choices"},Po=["onClick"],zo=["checked"],jo={class:"pair"},Oo={class:"hint"},Ro={class:"actions"},Io={__name:"challenge_level_two_4",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"المستوى الثاني – التحدي 4: اختر الإجابة الصحيحة",rule:(G,I)=>`ما العددان اللذان حاصل جمعهما ${G} والفرق بينهما ${I}؟ اختر الزوج الصحيح.`,choices:"الخيارات",newQ:"سؤال جديد",reset:"إعادة تعيين",check:"تحقّق",correct:"إجابة صحيحة",wrong:"إجابة غير صحيحة"},en:{title:"Level 2 – Challenge 4: Pick the correct pair",rule:(G,I)=>`Which two numbers have sum ${G} and difference ${I}? Pick the correct pair.`,choices:"Choices",newQ:"New puzzle",reset:"Reset",check:"Check",correct:"Correct",wrong:"Incorrect"}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(_t):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(bt):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");function T(G,I){return Math.floor(Math.random()*(I-G+1))+G}function Q(G){const I=G.slice();for(let F=I.length-1;F>0;F--){const z=Math.floor(Math.random()*(F+1));[I[F],I[z]]=[I[z],I[F]]}return I}const f=L(0),m=L(0),p=L([0,0]),h=L([]),C=L(null),D=L(null),O=L(!1);function E(){O.value=!1,D.value=null,C.value=null;let G,I;G=T(6,60),I=T(1,G-1);const F=Math.max(G,I),z=Math.min(G,I);f.value=F+z,m.value=F-z,p.value=[F,z];const S=[[F,z]],_=()=>{let b=T(1,65),i=T(1,65);return b<i&&([b,i]=[i,b]),[b,i]};for(;S.length<6;){let b=_();if(!(b[0]+b[1]===f.value&&b[0]-b[1]===m.value)){if(T(0,1)===0){const i=f.value,u=T(1,i-1),r=i-u,o=[Math.max(u,r),Math.min(u,r)];o[0]-o[1]!==m.value&&(b=o)}else{const i=m.value,u=T(1,50),o=[u+i,u];o[0]+o[1]!==f.value&&(b=o)}S.some(i=>i[0]===b[0]&&i[1]===b[1])||S.push(b)}}h.value=Q(S)}async function K(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function Z(){if(C.value==null){D.value=a.value==="ar"?"اختر إجابة":"Pick an answer",y&&y.play();return}const G=h.value[C.value];G[0]+G[1]===f.value&&G[0]-G[1]===m.value?(O.value=!0,D.value=n[a.value].correct,w&&w.play(),P&&P.play(),await K()):(D.value=n[a.value].wrong,y&&y.play())}function R(){C.value=null,D.value=null,O.value=!1}return ge(E),me(()=>x.lang,()=>{}),(G,I)=>(l(),s("div",{class:"lvl2c4 challenge-surface","data-theme":x.theme},[e("h2",Eo,t(n[a.value].title),1),e("p",No,t(n[a.value].rule(f.value,m.value)),1),e("div",Lo,[(l(!0),s(te,null,ne(h.value,(F,z)=>(l(),s("div",{class:oe(["choice",{sel:C.value===z}]),key:z,onClick:S=>C.value=z},[e("input",{type:"radio",checked:C.value===z},null,8,zo),e("span",jo,t(F[0])+" ، "+t(F[1]),1),e("small",Oo,"("+t(F[0]+F[1])+" ، "+t(F[0]-F[1])+")",1)],10,Po))),128))]),e("div",Ro,[e("button",{class:"btn",onClick:R},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:Z},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:E},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),D.value?(l(),s("div",{key:0,class:oe(["toast",{ok:O.value}])},t(D.value),3)):re("",!0)],8,To))}},Bo=pe(Io,[["__scopeId","data-v-3bc97670"]]),Fo=["data-theme"],Uo={class:"title"},Qo={class:"rule"},qo={class:"equation",dir:"ltr"},Go={class:"frac"},Vo={class:"top"},Wo={class:"bot"},Ho={class:"frac"},Ko={class:"bot"},Yo={key:0,class:"num"},Jo={key:1,class:"placeholder"},Xo={class:"frac"},Zo={class:"top"},er={key:0,class:"num"},tr={key:1,class:"placeholder"},ar={class:"bot"},nr={class:"bank"},lr={class:"bank-title"},sr={class:"bank-items"},or=["onDragstart"],rr={class:"actions"},cr={__name:"challenge_level_two_5",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"المستوى الثاني – التحدي 5: أكمل طرح الكسور",rule:u=>`ضع عددًا كليًا في كل مربع لتصبح المعادلة صحيحة:  ${u.num}/${u.den} =  ١/□  −  □/${u.d2}.  اسحب الرقمين من لوحة الأعداد.`,bank:"لوحة الأعداد",newQ:"سؤال جديد",reset:"إعادة تعيين",check:"تحقّق",correct:"إجابة صحيحة",wrong:"تحقق من القيم",clear:"تفريغ الخلية"},en:{title:"Level 2 – Challenge 5: Complete the fraction subtraction",rule:u=>`Place integers to make the equation true:  ${u.num}/${u.den} =  1/□  −  □/${u.d2}.  Drag the two numbers from the bank.`,bank:"Number bank",newQ:"New puzzle",reset:"Reset",check:"Check",correct:"Correct answer",wrong:"Check values",clear:"Clear"}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Ne):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(Le):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");function T(u,r){return Math.floor(Math.random()*(r-u+1))+u}function Q(u){const r=u.slice();for(let o=r.length-1;o>0;o--){const g=Math.floor(Math.random()*(o+1));[r[o],r[g]]=[r[g],r[o]]}return r}const f=L({num:3,den:10,d2:5}),m=L(2),p=L(1),h=L([]),C=L({A:null,N:null}),D=L(null),O=L(!1),E=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];function K(u){const r=String(u);return x.lang==="ar"?r.replace(/[0-9]/g,o=>E[Number(o)]):r}const Z=V(()=>a.value==="ar"?`ضع عددًا كليًا في كل مربع لتصبح المعادلة صحيحة:  ${K(f.value.num)}/${K(f.value.den)} =  ١/□  −  □/${K(f.value.d2)}.`:`Place integers to make the equation true:  ${f.value.num}/${f.value.den} =  1/□  −  □/${f.value.d2}.`);function R(){O.value=!1,D.value=null,C.value={A:null,N:null};let u=!1;for(let o=0;o<200&&!u;o++){const q=T(1,9),N=Q([4,5,6,8,9,10])[0];for(let j=2;j<=12&&!u;j++){const k=1/j-q/10;if(k<=0)continue;const c=Math.round(N*k);if(Math.abs(N*k-c)<1e-9&&c>=1&&c<N){const d=1/j-c/N;Math.abs(d-q/10)<1e-9&&(f.value={num:q,den:10,d2:N},m.value=j,p.value=c,u=!0)}}}const r=new Set([m.value,p.value]);for(;r.size<8;){const o=T(1,12);r.add(o)}h.value=Q([...r])}function G(u,r){u.dataTransfer.setData("text/plain",String(r))}function I(u){u.preventDefault()}function F(u,r){r.preventDefault();const o=Number(r.dataTransfer.getData("text/plain"));C.value[u]=o,D.value=null}function z(){return C.value.A!=null&&C.value.N!=null}function S(){if(!z())return!1;const u=C.value.A,r=C.value.N;if(!u||!r)return!1;const o=f.value.d2-u*r,g=u*f.value.d2,q=f.value.num,N=f.value.den;return o*N===q*g}async function _(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function b(){if(!z()){D.value=a.value==="ar"?"أكمل الخانتين":"Fill both blanks",y&&y.play();return}S()?(O.value=!0,D.value=n[a.value].correct,w&&w.play(),P&&P.play(),await _()):(D.value=n[a.value].wrong,y&&y.play())}function i(){C.value={A:null,N:null},D.value=null,O.value=!1}return ge(R),(u,r)=>(l(),s("div",{class:"lvl2c5 challenge-surface","data-theme":x.theme},[e("h2",Uo,t(n[a.value].title),1),e("p",Qo,t(Z.value),1),e("div",qo,[e("div",Go,[e("div",Vo,t(K(f.value.num)),1),r[2]||(r[2]=e("div",{class:"bar"},null,-1)),e("div",Wo,t(K(f.value.den)),1)]),r[6]||(r[6]=e("span",{class:"eq"},"=",-1)),e("div",Ho,[r[3]||(r[3]=e("div",{class:"top"},"1",-1)),r[4]||(r[4]=e("div",{class:"bar"},null,-1)),e("div",Ko,[e("div",{class:"drop",onDragover:I,onDrop:r[0]||(r[0]=o=>F("A",o))},[C.value.A!=null?(l(),s("span",Yo,t(K(C.value.A)),1)):(l(),s("span",Jo,"□"))],32)])]),r[7]||(r[7]=e("span",{class:"minus"},"−",-1)),e("div",Xo,[e("div",Zo,[e("div",{class:"drop",onDragover:I,onDrop:r[1]||(r[1]=o=>F("N",o))},[C.value.N!=null?(l(),s("span",er,t(K(C.value.N)),1)):(l(),s("span",tr,"□"))],32)]),r[5]||(r[5]=e("div",{class:"bar"},null,-1)),e("div",ar,t(K(f.value.d2)),1)])]),e("div",nr,[e("div",lr,t(n[a.value].bank),1),e("div",sr,[(l(!0),s(te,null,ne(h.value,o=>(l(),s("button",{key:o,class:"chip",draggable:"true",onDragstart:g=>G(g,o)},t(K(o)),41,or))),128))])]),e("div",rr,[e("button",{class:"btn",onClick:i},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:b},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:R},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),D.value?(l(),s("div",{key:0,class:oe(["toast",{ok:O.value}])},t(D.value),3)):re("",!0)],8,Fo))}},ir=pe(cr,[["__scopeId","data-v-8b95454c"]]),ur=["data-theme"],dr={class:"head"},vr={class:"title"},hr={class:"premise"},pr={class:"premise"},fr={class:"question"},mr={class:"options"},gr=["value"],_r={class:"text"},br={class:"actions"},yr="e",kr={__name:"challenge_level_two_6",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"المستوى الثاني – التحدي 6: مقارنة الأوزان",premise:{line1:"وزن كرتان ومربع واحد يساويان ٨ وحدات.",line2:"وزن كرتان ومثلث واحد يساويان ٦ وحدات.",question:"ما وزن المربع الواحد مقارنة بالمثلث؟"},options:[{id:"a",text:"ضعف وزن المثلث"},{id:"b",text:"يساوي وزن المثلث"},{id:"c",text:"نصف وزن المثلث"},{id:"d",text:"أقل بـ٢ وحدة من وزن المثلث"},{id:"e",text:"أكثر بـ٢ وحدة من وزن المثلث"}],newQ:"سؤال جديد",reset:"إعادة تعيين",check:"تحقّق",correct:"إجابة صحيحة! المربع أثقل من المثلث بوحدتين.",wrong:"إجابة غير صحيحة. أعد التفكير في المعادلات.",pick:"اختر إجابة أولاً."},en:{title:"Level 2 – Challenge 6: Comparing weights",premise:{line1:"Two balls and one square weigh 8 units.",line2:"Two balls and one triangle weigh 6 units.",question:"How does the weight of the square compare to the triangle?"},options:[{id:"a",text:"Twice the triangle"},{id:"b",text:"Equal to the triangle"},{id:"c",text:"Half the triangle"},{id:"d",text:"2 units less than the triangle"},{id:"e",text:"2 units more than the triangle"}],newQ:"New question",reset:"Reset",check:"Check",correct:"Correct! The square is heavier by 2 units.",wrong:"That is incorrect. Revisit the equations.",pick:"Select an option first."}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Ne):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(Le):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");const T=L(null),Q=L(null),f=L(!1),m=L(null);function p(){T.value=null,Q.value=null,f.value=!1}async function h(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function C(){if(!T.value){Q.value=n[a.value].pick,y&&y.play();return}if(T.value===yr){const E=f.value;f.value=!0,Q.value=n[a.value].correct,w&&w.play(),P&&P.play(),E||await h()}else f.value=!1,Q.value=n[a.value].wrong,y&&y.play()}function D(){m.value=n[a.value].options.slice().sort(()=>Math.random()-.5),p()}me(()=>x.lang,()=>{m.value=null,p(),D()});const O=V(()=>m.value||n[a.value].options);return ge(()=>{D()}),(E,K)=>(l(),s("div",{class:"lvl2c6 challenge-surface","data-theme":x.theme},[e("header",dr,[e("h2",vr,t(n[a.value].title),1),e("p",hr,t(n[a.value].premise.line1),1),e("p",pr,t(n[a.value].premise.line2),1),e("p",fr,t(n[a.value].premise.question),1)]),e("section",mr,[(l(!0),s(te,null,ne(O.value,Z=>(l(),s("label",{key:Z.id,class:oe(["option",{selected:T.value===Z.id}])},[Me(e("input",{type:"radio",name:"weight-comparison",value:Z.id,"onUpdate:modelValue":K[0]||(K[0]=R=>T.value=R)},null,8,gr),[[Et,T.value]]),K[1]||(K[1]=e("span",{class:"mark"},null,-1)),e("span",_r,t(Z.text),1)],2))),128))]),e("section",br,[e("button",{class:"btn",onClick:C},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:p},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:D},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),B(ke,{name:"fade"},{default:be(()=>[Q.value?(l(),s("div",{key:0,class:oe(["feedback",{ok:f.value}])},t(Q.value),3)):re("",!0)]),_:1})],8,ur))}},wr=pe(kr,[["__scopeId","data-v-06bece34"]]),$r=["data-theme"],Cr={class:"title"},Sr={class:"rule"},xr={class:"hint"},Ar=["dir"],Dr=["onDrop"],Mr={key:1,class:"placeholder"},Tr=["onClick"],Er={class:"bank"},Nr={class:"bank-title"},Lr={class:"bank-items"},Pr=["onDragstart"],zr={class:"actions"},jr={__name:"challenge_level_three_1",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"المستوى الثالث – التحدي 1: هرم الضرب",rule:"املأ مربعات الهرم بحيث يساوي كل مربع أعلى حاصل ضرب الخليتين تحته. اسحب الأرقام الصحيحة من اللوحة حتى يكتمل الهرم.",hint:"تذكّر أن كل خطوة نحو الأعلى هي نتيجة ضرب الخليتين في الأسفل مباشرة.",bank:"لوحة الأرقام",newQ:"سؤال جديد",reset:"إعادة تعيين",check:"تحقّق",correct:"أحسنت! اكتمل الهرم.",wrong:"تحقّق مرة أخرى، هناك قيمة في غير مكانها.",clear:"تفريغ الخلية"},en:{title:"Level 3 – Challenge 1: Multiplication Pyramid",rule:"Fill the pyramid so that every cell above equals the product of the two cells directly beneath it. Drag the correct numbers from the bank.",hint:"Remember: each step upward is the product of the two numbers underneath.",bank:"Number bank",newQ:"New puzzle",reset:"Reset",check:"Check",correct:"Great! The pyramid is complete.",wrong:"Something is off. Recheck the placements.",clear:"Clear cell"}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Te):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(je):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");function T(N,j){return Math.floor(Math.random()*(j-N+1))+N}function Q(N){const j=N.slice();for(let k=j.length-1;k>0;k--){const c=Math.floor(Math.random()*(k+1));[j[k],j[c]]=[j[c],j[k]]}return j}function f(N,j){return`${N},${j}`}const m=L([]),p=L(new Set),h=ve({}),C=ve({}),D=ve({}),O=L(null),E=L(!1),K=V(()=>({direction:"ltr",unicodeBidi:"isolate"})),Z=V(()=>m.value.map((N,j)=>({cells:N,index:j})).slice().reverse());function R(N){let j=0;for(const k in h)h[k]===N&&j++;return j}function G(){const N={};for(const[j,k]of Object.entries(C)){const c=Number(j),d=k-R(c);d>0&&(N[c]=d)}for(const j in D)delete D[j];for(const[j,k]of Object.entries(N))D[j]=k}function I(){for(;;){const j=[Array.from({length:4},()=>T(2,6))];for(let c=1;c<4;c++){const d=j[c-1],v=[];for(let $=0;$<d.length-1;$++)v.push(d[$]*d[$+1]);j.push(v)}if(j[3][0]<=5e4)return j}}function F(){E.value=!1,O.value=null;const N=I();m.value=N,p.value=new Set;for(const k in h)delete h[k];for(let k=1;k<m.value.length;k++)for(let c=0;c<m.value[k].length;c++)p.value.add(f(k,c));const j={};p.value.forEach(k=>{const[c,d]=k.split(",").map(Number),v=m.value[c][d];j[v]=(j[v]||0)+1});for(const k in C)delete C[k];for(const[k,c]of Object.entries(j))C[k]=c;G()}function z(N){N.preventDefault()}function S(N,j){N.dataTransfer.setData("text/plain",String(j))}function _(N,j){if(j.preventDefault(),!p.value.has(N))return;const k=j.dataTransfer.getData("text/plain"),c=Number(k);if(Number.isNaN(c)||!C[c])return;const d=h[N];d===c||R(c)>=C[c]||(d!=null&&delete h[N],h[N]=c,G(),O.value=null)}function b(N){h[N]!=null&&(delete h[N],G())}function i(){for(const N of p.value)if(h[N]==null)return!1;return!0}function u(){for(const N of p.value){const[j,k]=N.split(",").map(Number);if(h[N]!==m.value[j][k])return!1}return!0}async function r(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function o(){if(!i()){O.value=a.value==="ar"?"أكمل كل الخانات أولاً.":"Fill all blanks first.",y&&y.play();return}u()?(E.value=!0,O.value=n[a.value].correct,w&&w.play(),P&&P.play(),await r()):(O.value=n[a.value].wrong,y&&y.play())}function g(){for(const N in h)delete h[N];E.value=!1,O.value=null,G()}const q=V(()=>{const N=[];for(const[j,k]of Object.entries(D))for(let c=0;c<k;c++)N.push(Number(j));return Q(N)});return ge(F),me(()=>x.lang,()=>{O.value&&(O.value=null)}),(N,j)=>(l(),s("div",{class:"lvl3c1 challenge-surface","data-theme":x.theme},[e("h2",Cr,t(n[a.value].title),1),e("p",Sr,t(n[a.value].rule),1),e("p",xr,t(n[a.value].hint),1),e("div",{class:"pyramid",dir:x.lang==="ar"?"rtl":"ltr"},[(l(!0),s(te,null,ne(Z.value,k=>(l(),s("div",{class:"p-row",key:k.index},[(l(!0),s(te,null,ne(k.cells,(c,d)=>(l(),s("div",{class:"brick",key:k.index+"-"+d},[p.value.has(f(k.index,d))?(l(),s(te,{key:1},[e("div",{class:"dropzone",onDragover:z,onDrop:v=>_(f(k.index,d),v)},[h[f(k.index,d)]!=null?(l(),s("span",{key:0,class:"num",style:ue(K.value)},t(h[f(k.index,d)]),5)):(l(),s("span",Mr,"؟"))],40,Dr),e("button",{class:"clear",onClick:v=>b(f(k.index,d))},[B(W(Ce),{class:"ic"}),Y(" "+t(n[a.value].clear),1)],8,Tr)],64)):(l(),s("span",{key:0,class:"num",style:ue(K.value)},t(c),5))]))),128))]))),128))],8,Ar),e("div",Er,[e("div",Nr,t(n[a.value].bank),1),e("div",Lr,[(l(!0),s(te,null,ne(q.value,(k,c)=>(l(),s("button",{key:k+"_"+c,class:"chip",draggable:"true",onDragstart:d=>S(d,k),style:ue(K.value)},t(k),45,Pr))),128))])]),e("div",zr,[e("button",{class:"btn",onClick:g},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:o},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:F},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),O.value?(l(),s("div",{key:0,class:oe(["toast",{ok:E.value}])},t(O.value),3)):re("",!0)],8,$r))}},Or=pe(jr,[["__scopeId","data-v-cecd74e3"]]),Rr=["data-theme"],Ir={class:"head"},Br={class:"title"},Fr={class:"rule"},Ur={class:"board"},Qr={class:"cards"},qr=["onDrop"],Gr={key:0,class:"num"},Vr={key:1,class:"placeholder"},Wr=["value","onInput","onChange","onBlur","placeholder"],Hr=["onClick"],Kr={class:"facts"},Yr={class:"bank"},Jr={class:"bank-title"},Xr={class:"bank-items"},Zr=["onDragstart"],ec={class:"actions"},tc=4,ac={__name:"challenge_level_three_2",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"المستوى الثالث – التحدي 2: الأرقام المفقودة على البطاقات",rule:"أمامك بطاقات ملوّنة بأرقام مفقودة. استخدم المعلومات المعطاة (المجموع، المتوسط، الوسيط، المدى) لتحديد الرقم المناسب لكل بطاقة، ثم اسحبه من لوحة الأعداد أو اكتبه يدويًا.",bank:"لوحة الأعداد",newQ:"سؤال جديد",reset:"مسح",check:"تحقّق",correct:"أحسنت! الأرقام صحيحة.",wrong:"تحقّق من القيم مرة أخرى.",clear:"تفريغ البطاقة",hints:{sum:"المجموع",mean:"المتوسط الحسابي",median:"الوسيط",range:"المدى"},manualPlaceholder:"أدخل رقمًا"},en:{title:"Level 3 – Challenge 2: Missing numbers on the cards",rule:"Each coloured card is missing its number. Use the given information (sum, mean, median, range) to deduce the correct value for every card, then drag a number from the bank or type it manually.",bank:"Number bank",newQ:"New puzzle",reset:"Clear",check:"Check",correct:"Great! All numbers are correct.",wrong:"Something is off – recheck the values.",clear:"Clear card",hints:{sum:"Sum",mean:"Mean",median:"Median",range:"Range"},manualPlaceholder:"Type value"}},a=V(()=>n[x.lang]?x.lang:"ar"),w=V(()=>x.lang==="ar"?"ar-EG":"en-US"),P=typeof Audio!="undefined"?new Audio(Te):null,y=typeof Audio!="undefined"?new Audio($e):null,T=typeof Audio!="undefined"?new Audio(Le):null;P&&(P.preload="auto"),y&&(y.preload="auto"),T&&(T.preload="auto");const Q=["green","gold","teal","magenta","sky","orange","crimson"],f=[{numbers:[4,8,12,16,20]},{numbers:[5,9,11,13,22]},{numbers:[7,10,12,18,23]},{numbers:[6,8,15,19,22]},{numbers:[9,11,14,20,26]}];function m(M){const A=M.slice().sort((ce,de)=>ce-de),U=A.reduce((ce,de)=>ce+de,0),J=U/A.length,X=A[Math.floor(A.length/2)],le=A[A.length-1]-A[0];return{sum:U,mean:J,median:X,range:le}}const p=L([]),h=ve({}),C=L(new Set),D=ve({}),O=ve({}),E=ve({}),K=ve({}),Z=ve({}),R=ve({}),G=L({sum:0,mean:0,median:0,range:0}),I=L(null),F=L(!1);function z(M){for(const A of Object.keys(M))delete M[A]}function S(){const A=f[Math.floor(Math.random()*f.length)].numbers.slice(),U=Q.slice(0,A.length);U.sort(()=>Math.random()-.5);const J=A.slice().sort(()=>Math.random()-.5);p.value=[],C.value=new Set,z(h),z(K),z(Z),z(R),z(D),z(O),z(E),J.forEach((he,Se)=>{const Pe=`card-${Se}`;p.value.push({id:Pe,value:he,color:U[Se%U.length]}),h[Pe]=he,C.value.add(Pe),D[he]=(D[he]||0)+1});for(const[he,Se]of Object.entries(D))E[he]=Se;const X=Math.min(...A),le=Math.max(...A),ce=Math.max(1,X-12),de=le+12,xe=new Set;for(;xe.size<tc;){const he=Math.floor(Math.random()*(de-ce+1))+ce;D[he]||xe.add(he)}xe.forEach(he=>{O[he]=(O[he]||0)+1,E[he]=(E[he]||0)+1}),G.value=m(A),I.value=null,F.value=!1}function _(M,A){M.dataTransfer.setData("text/plain",String(A))}function b(M){M.preventDefault()}function i(M,A,U){if(Number.isNaN(A))return!1;if(K[M]!=null&&Z[M]==="bank"){const J=K[M];E[J]=(E[J]||0)+1}if(U==="bank"){if((E[A]||0)<=0)return!1;E[A]=(E[A]||0)-1}return K[M]=A,Z[M]=U,R[M]=String(A),I.value=null,F.value=!1,!0}function u(M,A){M.preventDefault();const U=M.dataTransfer.getData("text/plain"),J=Number(U);Number.isNaN(J)||i(A,J,"bank")}function r(M){if(K[M]!=null&&Z[M]==="bank"){const A=K[M];E[A]=(E[A]||0)+1}delete K[M],delete Z[M],R[M]="",I.value=null,F.value=!1}function o(){for(const M of C.value)if(K[M]==null)return!1;return!0}function g(){for(const M of C.value)if(K[M]!==h[M])return!1;return!0}async function q(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function N(){if(!o()){I.value=a.value==="ar"?"أكمل كل البطاقات أولاً.":"Fill every card first.",T&&T.play();return}g()?(F.value=!0,I.value=n[a.value].correct,P&&P.play(),y&&y.play(),await q()):(I.value=n[a.value].wrong,T&&T.play())}function j(){z(K),z(Z),z(R),z(E);for(const[M,A]of Object.entries(D))E[M]=A;for(const[M,A]of Object.entries(O))E[M]=(E[M]||0)+A;I.value=null,F.value=!1}const k=V(()=>{const M=[];for(const[A,U]of Object.entries(E))for(let J=0;J<U;J++)M.push({value:Number(A),key:`${A}-${J}`});return M});function c(M,A){R[M]=A}function d(M){var J;const A=((J=R[M])!=null?J:"").trim();if(A===""){r(M);return}const U=Number(A);Number.isFinite(U)&&i(M,U,"manual")}const v=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];function $(M){const A=String(M);return x.lang!=="ar"?A:A.replace(/[0-9]/g,U=>v[Number(U)])}function H(M,A={}){return new Intl.NumberFormat(w.value,A).format(M)}return ge(S),me(()=>x.lang,()=>{I.value&&F.value||(I.value=null)}),(M,A)=>(l(),s("div",{class:"lvl3c2 challenge-surface","data-theme":x.theme},[e("header",Ir,[e("h2",Br,t(n[a.value].title),1),e("p",Fr,t(n[a.value].rule),1)]),e("section",Ur,[e("div",Qr,[(l(!0),s(te,null,ne(p.value,U=>{var J;return l(),s("div",{key:U.id,class:oe(["card","color-"+U.color])},[e("div",{class:"drop",onDragover:b,onDrop:X=>u(X,U.id)},[K[U.id]!=null?(l(),s("span",Gr,t($(K[U.id])),1)):(l(),s("span",Vr,"؟"))],40,qr),e("input",{class:"manual-entry",type:"number",inputmode:"numeric",value:(J=R[U.id])!=null?J:"",onInput:X=>c(U.id,X.target.value),onChange:X=>d(U.id),onBlur:X=>d(U.id),placeholder:n[a.value].manualPlaceholder},null,40,Wr),e("button",{class:"clear",onClick:X=>r(U.id)},[B(W(Ce),{class:"ic"}),Y(" "+t(n[a.value].clear),1)],8,Hr)],2)}),128))]),e("aside",Kr,[e("h3",null,t(x.lang==="ar"?"المعلومات المتاحة":"Given facts"),1),e("ul",null,[e("li",null,[e("strong",null,t(n[a.value].hints.sum)+":",1),Y(" "+t(H(G.value.sum)),1)]),e("li",null,[e("strong",null,t(n[a.value].hints.mean)+":",1),Y(" "+t(H(G.value.mean,{maximumFractionDigits:2})),1)]),e("li",null,[e("strong",null,t(n[a.value].hints.median)+":",1),Y(" "+t(H(G.value.median)),1)]),e("li",null,[e("strong",null,t(n[a.value].hints.range)+":",1),Y(" "+t(H(G.value.range)),1)])])])]),e("section",Yr,[e("div",Jr,t(n[a.value].bank),1),e("div",Xr,[(l(!0),s(te,null,ne(k.value,U=>(l(),s("button",{key:U.key,class:"chip",draggable:"true",onDragstart:J=>_(J,U.value)},t($(U.value)),41,Zr))),128))])]),e("section",ec,[e("button",{class:"btn",onClick:j},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:N},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:S},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),B(ke,{name:"fade"},{default:be(()=>[I.value?(l(),s("div",{key:0,class:oe(["toast",{ok:F.value}])},t(I.value),3)):re("",!0)]),_:1})],8,Rr))}},nc=pe(ac,[["__scopeId","data-v-9b49ee36"]]),lc=["data-theme"],sc={class:"head"},oc={class:"title"},rc={class:"rule"},cc={class:"status"},ic={class:"chip target"},uc={class:"chip sum"},dc={class:"grid"},vc=["onClick"],hc={class:"actions"},pc={__name:"challenge_level_three_3",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"المستوى الثالث – التحدي 3: خطوط المجموع العشري",rule:"اختر أرقامًا متجاورة على خط مستقيم (أفقي، عمودي أو قطري) بحيث يساوي مجموعها القيمة المطلوبة.",targetLabel:"المجموع المطلوب",selected:"المجموع الحالي",check:"تحقّق",reset:"إعادة اختيار",newQ:"سؤال جديد",needSelection:"اختر خانات أولاً.",wrongLine:"يجب أن تكون الخانات المختارة على خط مستقيم ومتجاورة.",wrongSum:"المجموع لا يساوي القيمة المطلوبة.",correct:"رائع! خط صحيح."},en:{title:"Level 3 – Challenge 3: Decimal Sum Lines",rule:"Pick numbers lying on one straight line (horizontal, vertical, or diagonal) so their sum equals the target.",targetLabel:"Target sum",selected:"Current sum",check:"Check",reset:"Reset selection",newQ:"New puzzle",needSelection:"Select cells first.",wrongLine:"Selections must be contiguous on a straight line.",wrongSum:"The sum does not match the target.",correct:"Great! You found a valid line."}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Te):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(at):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");const T=[{id:"p1",target:10,grid:[[1.2,.8,2.5,1.3,.9],[2.1,3.4,2,.6,1.5],[1.8,2.2,1.5,3,1.1],[.5,1.6,1.7,2,3.5],[1.4,1.3,2.3,1.8,2.7]],solution:[{r:0,c:2},{r:1,c:2},{r:2,c:2},{r:3,c:2},{r:4,c:2}]},{id:"p2",target:10,grid:[[.8,1.7,2.1,.9,1.4],[2.6,1.5,1.9,1.1,2.9],[1.3,2.4,1.2,2.2,1.6],[.7,1.8,2.5,1.7,2.3],[1.9,.6,1.8,2.6,.9]],solution:[{r:1,c:0},{r:1,c:1},{r:1,c:2},{r:1,c:3},{r:1,c:4}]},{id:"p3",target:10,grid:[[2.5,1.1,.8,1.4,1.2],[.9,2,1.3,1.7,1],[1.6,1.2,1.8,1.1,1.3],[1.4,1.9,1.5,1.5,1.8],[1.3,1.4,.9,1.6,2.2]],solution:[{r:0,c:0},{r:1,c:1},{r:2,c:2},{r:3,c:3},{r:4,c:4}]}],Q=L(T[0]),f=L(new Set),m=L(!1),p=L(null);function h(F,z){return`${F},${z}`}function C(){f.value=new Set,m.value=!1,p.value=null}function D(){const F=T[Math.floor(Math.random()*T.length)];Q.value=F,C()}function O(F,z){const S=h(F,z),_=new Set(f.value);_.has(S)?_.delete(S):_.add(S),f.value=_,m.value=!1,p.value=null}const E=V(()=>Array.from(f.value).map(F=>{const[z,S]=F.split(",").map(Number);return{r:z,c:S}})),K=V(()=>E.value.reduce((F,z)=>F+Q.value.grid[z.r][z.c],0));function Z(F){if(F.length<2)return!0;const z=F.map(o=>o.r),S=F.map(o=>o.c),_=z.every(o=>o===z[0]),b=S.every(o=>o===S[0]),i=z.every((o,g)=>o-S[g]===z[0]-S[0]),u=z.every((o,g)=>o+S[g]===z[0]+S[0]);if(!_&&!b&&!i&&!u)return!1;const r=[...F];if(_){r.sort((o,g)=>o.c-g.c);for(let o=1;o<r.length;o++)if(r[o].c-r[o-1].c!==1)return!1;return!0}if(b){r.sort((o,g)=>o.r-g.r);for(let o=1;o<r.length;o++)if(r[o].r-r[o-1].r!==1)return!1;return!0}if(i){r.sort((o,g)=>o.r-g.r);for(let o=1;o<r.length;o++)if(r[o].r-r[o-1].r!==1||r[o].c-r[o-1].c!==1)return!1;return!0}r.sort((o,g)=>o.r-g.r);for(let o=1;o<r.length;o++)if(r[o].r-r[o-1].r!==1||r[o-1].c-r[o].c!==1)return!1;return!0}async function R(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function G(){if(!f.value.size){p.value=n[a.value].needSelection,y&&y.play();return}const F=E.value;if(!Z(F)){p.value=n[a.value].wrongLine,y&&y.play();return}const z=K.value;if(Math.abs(z-Q.value.target)>1e-6){p.value=n[a.value].wrongSum,y&&y.play();return}m.value=!0,p.value=n[a.value].correct,w&&w.play(),P&&P.play(),await R()}function I(F,z){return Q.value.solution.some(S=>S.r===F&&S.c===z)}return(F,z)=>(l(),s("div",{class:"lvl3c3 challenge-surface","data-theme":x.theme},[e("header",sc,[e("h2",oc,t(n[a.value].title),1),e("p",rc,t(n[a.value].rule),1)]),e("section",cc,[e("div",ic,[Y(t(n[a.value].targetLabel)+": ",1),e("strong",null,t(Q.value.target.toFixed(1)),1)]),e("div",uc,[Y(t(n[a.value].selected)+": ",1),e("strong",null,t(K.value.toFixed(1)),1)])]),e("section",dc,[(l(!0),s(te,null,ne(Q.value.grid,(S,_)=>(l(),s("div",{key:_,class:"row"},[(l(!0),s(te,null,ne(S,(b,i)=>(l(),s("button",{key:i,class:oe(["cell",{selected:f.value.has(h(_,i)),success:m.value&&I(_,i)}]),onClick:u=>O(_,i)},t(b.toFixed(1)),11,vc))),128))]))),128))]),e("section",hc,[e("button",{class:"btn",onClick:G},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:C},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:D},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),B(ke,{name:"fade"},{default:be(()=>[p.value?(l(),s("div",{key:0,class:oe(["feedback",{ok:m.value}])},t(p.value),3)):re("",!0)]),_:1})],8,lc))}},fc=pe(pc,[["__scopeId","data-v-71eca92a"]]),mc=["data-theme"],gc={class:"head"},_c={class:"title"},bc={class:"equations"},yc={class:"expression"},kc=["onDrop"],wc={key:0,class:"digit"},$c={key:1,class:"placeholder"},Cc=["onClick"],Sc={class:"bank"},xc={class:"bank-title"},Ac={class:"bank-items"},Dc=["onDragstart"],Mc={class:"actions"},Tc={__name:"challenge_level_three_4",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"المستوى الثالث – التحدي 4: أزل النقطة الحمراء",intro:["هذه المعادلات فرصة للتفكير في العمليات على الأعداد العشرية.","كل نقطة حمراء ● تمثّل رقمًا ناقصًا. اسحب الرقم الملائم من لوحة الأرقام وضعه مكان النقطة حتى تصبح المعادلة صحيحة."],check:"تحقّق",reset:"مسح الكل",newQ:"سؤال جديد",incomplete:"أكمل كل الفراغات أولاً.",wrong:"هناك معادلة غير صحيحة، راجع الأرقام.",correct:"أحسنت! جميع المعادلات صحيحة.",bank:"لوحة الأرقام",clear:"تفريغ"},en:{title:"Level 3 – Challenge 4: Replace the red dot",intro:["These equations focus on decimal operations.","Each red dot ● hides a single digit. Drag the correct digit from the number bank to make every equation true."],check:"Check",reset:"Clear all",newQ:"New puzzle",incomplete:"Fill every blank first.",wrong:"One or more equations are incorrect. Try again.",correct:"Great! All equations are valid.",bank:"Number bank",clear:"Clear"}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Ne):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(Le):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");const T=[{id:"p1",equations:[{id:"eqA",slots:{a:8,b:7},order:["a","b"],template:{ar:["أ. ٩٫٣ × ٠٫",{slot:"a"}," = ",{slot:"b"},"٫٤٤"],en:["A. 9.3 × 0.",{slot:"a"}," = ",{slot:"b"},".44"]},evaluate(u){const r=9.3*(u.a/10),o=u.b+.44;return Math.abs(r-o)<1e-6}},{id:"eqB",slots:{c:4,d:9},order:["c","d"],template:{ar:["ب. ٢٫",{slot:"c"}," × ٢٫",{slot:"d"}," = ٦٫٩٦"],en:["B. 2.",{slot:"c"}," × 2.",{slot:"d"}," = 6.96"]},evaluate(u){const r=(2+u.c/10)*(2+u.d/10);return Math.abs(r-6.96)<1e-6}},{id:"eqC",slots:{e:4,f:7},order:["e","f"],template:{ar:["ج. ",{slot:"e"},"٫٩ × ٣٫",{slot:"f"}," = ١٨٫١٣"],en:["C. ",{slot:"e"},".9 × 3.",{slot:"f"}," = 18.13"]},evaluate(u){const r=(u.e+.9)*(3+u.f/10);return Math.abs(r-18.13)<1e-6}},{id:"eqD",slots:{g:7,h:9},order:["g","h"],template:{ar:["د. ٤٫",{slot:"g"}," + ١٫٢٥ = ٥٫",{slot:"h"},"٥"],en:["D. 4.",{slot:"g"}," + 1.25 = 5.",{slot:"h"},"5"]},evaluate(u){const r=4+u.g/10+1.25,o=5+u.h/10+.05;return Math.abs(r-o)<1e-6}}]}],Q=L(T[0]),f=ve({}),m=ve({}),p=ve({}),h=L([]),C=L(null),D=L(!1),O=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];function E(u){if(u==null)return"";const r=String(u);return x.lang==="ar"?r.replace(/[0-9]/g,o=>O[Number(o)]):r}function K(u){return u.slice().sort(()=>Math.random()-.5)}function Z(){const u=T[Math.floor(Math.random()*T.length)];Q.value=u,C.value=null,D.value=!1,Object.keys(f).forEach(o=>delete f[o]),Object.keys(m).forEach(o=>delete m[o]),Object.keys(p).forEach(o=>delete p[o]);const r=[];u.equations.forEach(o=>{o.order.forEach(g=>{const q=`${o.id}-${g}`;r.push({key:q,eq:o,slotName:g}),f[q]=null;const N=o.slots[g];m[N]=(m[N]||0)+1,p[N]=(p[N]||0)+1})}),h.value=r}function R(u){u.preventDefault()}function G(u,r){u.dataTransfer.setData("text/plain",String(r))}function I(u,r){u.preventDefault();const o=u.dataTransfer.getData("text/plain"),g=Number(o);if(!Number.isNaN(g)&&!((p[g]||0)<=0&&f[r]!==g)){if(f[r]!=null){const q=f[r];p[q]=(p[q]||0)+1}f[r]!==g&&(p[g]=(p[g]||0)-1,p[g]<0&&(p[g]=0)),f[r]=g,C.value=null,D.value=!1}}function F(u){if(f[u]!=null){const r=f[u];p[r]=(p[r]||0)+1,f[u]=null,C.value=null,D.value=!1}}const z=V(()=>{const u=[];for(const[r,o]of Object.entries(p))for(let g=0;g<o;g++)u.push({value:Number(r),key:`${r}-${g}`});return K(u)});function S(){return h.value.every(u=>f[u.key]!=null)}async function _(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function b(){if(!S()){C.value=n[a.value].incomplete,y&&y.play();return}const{equations:u}=Q.value;for(const r of u){const o={};let g=!0;for(const q of r.order){const N=`${r.id}-${q}`;if(o[q]=f[N],o[q]==null){g=!1;break}}if(!g||!r.evaluate(o)){C.value=n[a.value].wrong,y&&y.play();return}}C.value=n[a.value].correct,D.value=!0,w&&w.play(),P&&P.play(),await _()}function i(){h.value.forEach(u=>{if(f[u.key]!=null){const r=f[u.key];p[r]=(p[r]||0)+1,f[u.key]=null}}),C.value=null,D.value=!1}return ge(Z),me(()=>x.lang,()=>{D.value||(C.value=null)}),(u,r)=>(l(),s("div",{class:"lvl3c4 challenge-surface","data-theme":x.theme},[e("header",gc,[e("h2",_c,t(n[a.value].title),1),(l(!0),s(te,null,ne(n[a.value].intro,(o,g)=>(l(),s("p",{key:g,class:"intro"},t(o),1))),128))]),e("section",bc,[(l(!0),s(te,null,ne(Q.value.equations,o=>(l(),s("div",{key:o.id,class:"card"},[e("div",yc,[(l(!0),s(te,null,ne(x.lang==="ar"?o.template.ar:o.template.en,(g,q)=>(l(),s("span",{key:q},[typeof g=="string"?(l(),s(te,{key:0},[Y(t(g),1)],64)):(l(),s(te,{key:1},[e("span",{class:"slot",onDragover:R,onDrop:N=>I(N,o.id+"-"+g.slot)},[f[o.id+"-"+g.slot]!=null?(l(),s("span",wc,t(E(f[o.id+"-"+g.slot])),1)):(l(),s("span",$c,"●"))],40,kc),e("button",{class:"clear",onClick:N=>F(o.id+"-"+g.slot)},[B(W(Ce),{class:"ic"}),Y(" "+t(n[a.value].clear),1)],8,Cc)],64))]))),128))])]))),128))]),e("section",Sc,[e("div",xc,t(n[a.value].bank),1),e("div",Ac,[(l(!0),s(te,null,ne(z.value,o=>(l(),s("button",{key:o.key,class:"chip",draggable:"true",onDragstart:g=>G(g,o.value)},t(E(o.value)),41,Dc))),128))])]),e("section",Mc,[e("button",{class:"btn",onClick:b},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:i},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:Z},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),B(ke,{name:"fade"},{default:be(()=>[C.value?(l(),s("div",{key:0,class:oe(["feedback",{ok:D.value}])},t(C.value),3)):re("",!0)]),_:1})],8,mc))}},Ec=pe(Tc,[["__scopeId","data-v-7015dc1b"]]),Nc=["data-theme"],Lc={class:"head"},Pc={class:"title"},zc={class:"equation"},jc={class:"fraction"},Oc={class:"row"},Rc=["onDrop"],Ic={key:0,class:"digit"},Bc={key:1,class:"placeholder"},Fc={class:"row"},Uc=["onDrop"],Qc={key:0,class:"digit"},qc={key:1,class:"placeholder"},Gc={class:"fraction"},Vc={class:"row"},Wc=["onDrop"],Hc={key:0,class:"digit"},Kc={key:1,class:"placeholder"},Yc={class:"row"},Jc=["onDrop"],Xc={key:0,class:"digit"},Zc={key:1,class:"placeholder"},ei={key:0,class:"digit"},ti={key:1,class:"placeholder"},ai={class:"controls"},ni={class:"bank"},li={class:"bank-title"},si={class:"bank-items"},oi=["onDragstart"],ri={__name:"challenge_level_three_5",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"المستوى الثالث – التحدي 5: بطاقات الكسر المفقود",intro:["استخدم البطاقات المرقّمة من ١ إلى ٩ مرة واحدة فقط لتكوين الكسرين بحيث يكون الناتج مساويًا للقيمة المطلوبة.","اسحب الرقم المناسب إلى كل خانة للبسط أو المقام، ثم تحقّق من صحة الناتج."],bank:"البطاقات المتاحة",check:"تحقّق",reset:"مسح الاختيار",newQ:"تحدٍ جديد",clear:"تفريغ",needAll:"املأ كل الخانات أولًا.",wrong:"المعادلة غير صحيحة، جرّب ترتيبًا آخر.",correct:"أحسنت! أنتجت الكسور الصحيحة."},en:{title:"Level 3 – Challenge 5: Missing Fraction Cards",intro:["Use the cards labelled 1 through 9 exactly once to build two fractions whose sum matches the target.","Drag each digit into the correct numerator or denominator, then check your result."],bank:"Available cards",check:"Check",reset:"Reset selection",newQ:"New challenge",clear:"Clear",needAll:"Fill every slot first.",wrong:"The equation is not satisfied—try another arrangement.",correct:"Great! The fractions are correct."}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Te):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(je):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");const T={n1:["n1a","n1b"],d1:["d1a","d1b"],n2:["n2a","n2b"],d2:["d2a","d2b"],res:["res"]},Q=[{id:"p1",solution:{n1:["2","9"],d1:["1","6"],n2:["5","7"],d2:["4","8"],res:["3"]}},{id:"p2",solution:{n1:["3","9"],d1:["2","7"],n2:["6","4"],d2:["1","8"],res:["5"]}},{id:"p3",solution:{n1:["5","7"],d1:["1","3"],n2:["9","4"],d2:["2","6"],res:["8"]}}],f=L(Q[0]),m=ve({}),p=ve({}),h=ve({}),C=L(null),D=L(!1),O=["1","2","3","4","5","6","7","8","9"],E=["٠","١","٢","٣","٤","٥","٦","٧","٨","٩"];function K(r){if(r==null)return"";const o=String(r);return x.lang==="ar"?o.replace(/[0-9]/g,g=>E[Number(g)]):o}function Z(){Object.keys(m).forEach(r=>delete m[r]),Object.keys(p).forEach(r=>delete p[r]),Object.keys(h).forEach(r=>delete h[r])}function R(){const r=Q[Math.floor(Math.random()*Q.length)];f.value=r,Z(),C.value=null,D.value=!1,O.forEach(o=>{h[o]=1});for(const[o,g]of Object.entries(T)){const q=r.solution[o];q&&g.forEach((N,j)=>{m[N]=null,p[N]=q[j]})}}function G(r){r.preventDefault()}function I(r,o){r.dataTransfer.setData("text/plain",o)}function F(r,o){r.preventDefault();const g=r.dataTransfer.getData("text/plain");if(g&&!((h[g]||0)<=0&&m[o]!==g)){if(m[o]!=null){const q=m[o];h[q]=(h[q]||0)+1}m[o]!==g&&(h[g]=(h[g]||0)-1,h[g]<0&&(h[g]=0)),m[o]=g,C.value=null,D.value=!1}}const z=V(()=>{const r=[];for(const[o,g]of Object.entries(h))for(let q=0;q<g;q++)r.push({digit:o,key:`${o}-${q}`});return r});function S(){return Object.keys(p).every(r=>m[r]!=null)}function _(r){const g=T[r].map(q=>m[q]);return Number(g.join(""))}async function b(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function i(){if(!S()){C.value=n[a.value].needAll,y&&y.play();return}const r=_("n1"),o=_("d1"),g=_("n2"),q=_("d2"),N=Number(m.res);if(!o||!q){C.value=n[a.value].wrong,y&&y.play();return}const j=r/o+g/q;Math.abs(j-N)<1e-6?(C.value=n[a.value].correct,D.value=!0,w&&w.play(),P&&P.play(),await b()):(C.value=n[a.value].wrong,y&&y.play())}function u(){for(const r of Object.keys(m))if(m[r]!=null){const o=m[r];h[o]=(h[o]||0)+1,m[r]=null}C.value=null,D.value=!1}return ge(R),me(()=>x.lang,()=>{D.value||(C.value=null)}),(r,o)=>(l(),s("div",{class:"lvl3c5 challenge-surface","data-theme":x.theme},[e("header",Lc,[e("h2",Pc,t(n[a.value].title),1),(l(!0),s(te,null,ne(n[a.value].intro,(g,q)=>(l(),s("p",{key:q,class:"intro"},t(g),1))),128))]),e("section",zc,[e("div",jc,[e("div",Oc,[(l(!0),s(te,null,ne(T.n1,g=>(l(),s("div",{key:g,class:"slot",onDragover:G,onDrop:q=>F(q,g)},[m[g]?(l(),s("span",Ic,t(K(m[g])),1)):(l(),s("span",Bc,"?"))],40,Rc))),128))]),o[1]||(o[1]=e("div",{class:"bar"},null,-1)),e("div",Fc,[(l(!0),s(te,null,ne(T.d1,g=>(l(),s("div",{key:g,class:"slot",onDragover:G,onDrop:q=>F(q,g)},[m[g]?(l(),s("span",Qc,t(K(m[g])),1)):(l(),s("span",qc,"?"))],40,Uc))),128))])]),o[3]||(o[3]=e("span",{class:"op"},"+",-1)),e("div",Gc,[e("div",Vc,[(l(!0),s(te,null,ne(T.n2,g=>(l(),s("div",{key:g,class:"slot",onDragover:G,onDrop:q=>F(q,g)},[m[g]?(l(),s("span",Hc,t(K(m[g])),1)):(l(),s("span",Kc,"?"))],40,Wc))),128))]),o[2]||(o[2]=e("div",{class:"bar"},null,-1)),e("div",Yc,[(l(!0),s(te,null,ne(T.d2,g=>(l(),s("div",{key:g,class:"slot",onDragover:G,onDrop:q=>F(q,g)},[m[g]?(l(),s("span",Xc,t(K(m[g])),1)):(l(),s("span",Zc,"?"))],40,Jc))),128))])]),o[4]||(o[4]=e("span",{class:"op"},"=",-1)),e("div",{class:"target-slot",onDragover:G,onDrop:o[0]||(o[0]=g=>F(g,"res"))},[m.res?(l(),s("span",ei,t(K(m.res)),1)):(l(),s("span",ti,"?"))],32)]),e("section",ai,[e("button",{class:"btn",onClick:i},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:u},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:R},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),e("section",ni,[e("div",li,t(n[a.value].bank),1),e("div",si,[(l(!0),s(te,null,ne(z.value,g=>(l(),s("button",{key:g.key,class:"chip",draggable:"true",onDragstart:q=>I(q,g.digit)},t(K(g.digit)),41,oi))),128))])]),B(ke,{name:"fade"},{default:be(()=>[C.value?(l(),s("div",{key:0,class:oe(["feedback",{ok:D.value}])},t(C.value),3)):re("",!0)]),_:1})],8,Nc))}},ci=pe(ri,[["__scopeId","data-v-7304f2b0"]]),ii=["data-theme"],ui={class:"head"},di={class:"title"},vi={class:"intro"},hi={class:"problem"},pi={class:"decimal-card"},fi={class:"label"},mi={class:"decimal-display"},gi={class:"slots"},_i=["onDrop"],bi={key:0,class:"digit"},yi={key:1,class:"placeholder"},ki=["onClick"],wi={class:"fraction-card"},$i={class:"label"},Ci={class:"fraction"},Si={class:"row"},xi=["onDrop"],Ai={key:0,class:"digit"},Di={key:1,class:"placeholder"},Mi=["onClick"],Ti={class:"row"},Ei=["onDrop"],Ni={key:0,class:"digit"},Li={key:1,class:"placeholder"},Pi=["onClick"],zi={class:"controls"},ji={class:"bank"},Oi={class:"bank-title"},Ri={class:"bank-items"},Ii=["onDragstart"],Bi={__name:"challenge_level_three_6",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"المستوى الثالث – التحدي 6: كسور مكافئة",intro:"اسحب الأرقام المتاحة وضعها في الخانات بحيث يكون الكسر الاعتيادي مساويًا للقيمة العشرية المعطاة.",decimals:"القيمة العشرية",fraction:"الكسر المكافئ",bank:"البطاقات المتاحة",check:"تحقّق",reset:"مسح",newQ:"تحدٍ جديد",clear:"تفريغ",needAll:"املأ كل الخانات أولًا.",wrong:"القيم غير متكافئة، حاول ترتيبًا مختلفًا.",correct:"أحسنت! الكسور مكافئة."},en:{title:"Level 3 – Challenge 6: Equivalent Fractions",intro:"Drag the available digits into the slots so the fraction equals the given decimal value.",decimals:"Decimal value",fraction:"Equivalent fraction",bank:"Available cards",check:"Check",reset:"Clear",newQ:"New challenge",clear:"Clear",needAll:"Fill every slot first.",wrong:"Values are not equivalent. Try another arrangement.",correct:"Great! They are equivalent."}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Ne):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(Le):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");const T=[{id:"p1",decimal:{slots:["dec1","dec2"],digits:["2","5"]},fraction:{num:{slots:["num1"],digits:["1"]},den:{slots:["den1"],digits:["4"]}},digits:["1","2","4","5"]},{id:"p2",decimal:{slots:["dec1","dec2"],digits:["7","5"]},fraction:{num:{slots:["num1"],digits:["3"]},den:{slots:["den1"],digits:["4"]}},digits:["3","4","5","7"]},{id:"p3",decimal:{slots:["dec1"],digits:["6"]},fraction:{num:{slots:["num1"],digits:["3"]},den:{slots:["den1"],digits:["5"]}},digits:["3","5","6"]},{id:"p4",decimal:{slots:["dec1","dec2"],digits:["3","3"]},fraction:{num:{slots:["num1"],digits:["1"]},den:{slots:["den1"],digits:["3"]}},digits:["1","3"]}],Q=L(T[0]),f=ve({}),m=ve({}),p=ve({}),h=L(null),C=L(!1);function D(){Object.keys(f).forEach(i=>delete f[i]),Object.keys(m).forEach(i=>delete m[i]),Object.keys(p).forEach(i=>delete p[i])}function O(){const i=T[Math.floor(Math.random()*T.length)];Q.value=i,D(),h.value=null,C.value=!1;const{decimal:u,fraction:r}=i;u.slots.forEach((o,g)=>{f[o]=null,m[o]=u.digits[g]}),r.num.slots.forEach((o,g)=>{f[o]=null,m[o]=r.num.digits[g]}),r.den.slots.forEach((o,g)=>{f[o]=null,m[o]=r.den.digits[g]}),i.digits.forEach(o=>{p[o]=(p[o]||0)+1})}function E(i){i.preventDefault()}function K(i,u){i.dataTransfer.setData("text/plain",u)}function Z(i,u){i.preventDefault();const r=i.dataTransfer.getData("text/plain");if(r&&!((p[r]||0)<=0&&f[u]!==r)){if(f[u]!=null){const o=f[u];p[o]=(p[o]||0)+1}f[u]!==r&&(p[r]=(p[r]||0)-1,p[r]<0&&(p[r]=0)),f[u]=r,C.value=!1,h.value=null}}function R(i){if(f[i]!=null){const u=f[i];p[u]=(p[u]||0)+1,f[i]=null,C.value=!1,h.value=null}}const G=V(()=>{const i=[];for(const[u,r]of Object.entries(p))for(let o=0;o<r;o++)i.push({digit:u,key:`${u}-${o}`});return i});function I(){return Object.keys(m).every(i=>f[i]!=null)}function F(){return+`0.${Q.value.decimal.slots.map(r=>f[r]).join("")}`}function z(){const{fraction:i}=Q.value,u=i.num.slots.map(q=>f[q]).join(""),r=i.den.slots.map(q=>f[q]).join(""),o=Number(u),g=Number(r);return g?o/g:null}async function S(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function _(){if(!I()){h.value=n[a.value].needAll,y&&y.play();return}const i=F(),u=z();if(u==null){h.value=n[a.value].wrong,y&&y.play();return}Math.abs(i-u)<1e-6?(h.value=n[a.value].correct,C.value=!0,w&&w.play(),P&&P.play(),await S()):(h.value=n[a.value].wrong,y&&y.play())}function b(){Object.keys(f).forEach(i=>{if(f[i]!=null){const u=f[i];p[u]=(p[u]||0)+1,f[i]=null}}),C.value=!1,h.value=null}return ge(O),me(()=>x.lang,()=>{C.value||(h.value=null)}),(i,u)=>(l(),s("div",{class:"lvl3c6 challenge-surface","data-theme":x.theme},[e("header",ui,[e("h2",di,t(n[a.value].title),1),e("p",vi,t(n[a.value].intro),1)]),e("section",hi,[e("div",pi,[e("div",fi,t(n[a.value].decimals),1),e("div",mi,[u[0]||(u[0]=e("span",{class:"fixed"},"0.",-1)),e("div",gi,[(l(!0),s(te,null,ne(Q.value.decimal.slots,r=>(l(),s("div",{key:r,class:"slot",onDragover:E,onDrop:o=>Z(o,r)},[f[r]?(l(),s("span",bi,t(f[r]),1)):(l(),s("span",yi,"?")),e("button",{class:"clear",onClick:o=>R(r)},[B(W(Ce),{class:"ic"}),Y(" "+t(n[a.value].clear),1)],8,ki)],40,_i))),128))])])]),u[2]||(u[2]=e("span",{class:"equals"},"=",-1)),e("div",wi,[e("div",$i,t(n[a.value].fraction),1),e("div",Ci,[e("div",Si,[(l(!0),s(te,null,ne(Q.value.fraction.num.slots,r=>(l(),s("div",{key:r,class:"slot",onDragover:E,onDrop:o=>Z(o,r)},[f[r]?(l(),s("span",Ai,t(f[r]),1)):(l(),s("span",Di,"?")),e("button",{class:"clear",onClick:o=>R(r)},[B(W(Ce),{class:"ic"}),Y(" "+t(n[a.value].clear),1)],8,Mi)],40,xi))),128))]),u[1]||(u[1]=e("div",{class:"bar"},null,-1)),e("div",Ti,[(l(!0),s(te,null,ne(Q.value.fraction.den.slots,r=>(l(),s("div",{key:r,class:"slot",onDragover:E,onDrop:o=>Z(o,r)},[f[r]?(l(),s("span",Ni,t(f[r]),1)):(l(),s("span",Li,"?")),e("button",{class:"clear",onClick:o=>R(r)},[B(W(Ce),{class:"ic"}),Y(" "+t(n[a.value].clear),1)],8,Pi)],40,Ei))),128))])])])]),e("section",zi,[e("button",{class:"btn",onClick:_},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:b},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:O},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),e("section",ji,[e("div",Oi,t(n[a.value].bank),1),e("div",Ri,[(l(!0),s(te,null,ne(G.value,r=>(l(),s("button",{key:r.key,class:"chip",draggable:"true",onDragstart:o=>K(o,r.digit)},t(r.digit),41,Ii))),128))])]),B(ke,{name:"fade"},{default:be(()=>[h.value?(l(),s("div",{key:0,class:oe(["feedback",{ok:C.value}])},t(h.value),3)):re("",!0)]),_:1})],8,ii))}},Fi=pe(Bi,[["__scopeId","data-v-46279352"]]),Ui=["data-theme"],Qi={class:"head"},qi={class:"title"},Gi={class:"intro"},Vi={class:"shape"},Wi={class:"assignments"},Hi={class:"label"},Ki=["onDrop"],Yi={key:0,class:"value"},Ji={key:1,class:"placeholder"},Xi=["onClick"],Zi={class:"controls"},eu={class:"bank"},tu={class:"bank-title"},au={class:"bank-items"},nu=["onDragstart"],lu={__name:"challenge_level_three_7",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"المستوى الثالث – التحدي 7: أجزاء الشكل المكافئة",intro:"ضع الكسر الصحيح لكل جزء من الشكل الهندسي بحيث يمثّل مساحة الجزء بالكامل.",bank:"الكسور المتاحة",assign:"ضع الكسر هنا",check:"تحقّق",reset:"مسح الاختيار",newQ:"تحدٍ جديد",needAll:"اختر كسرًا لكل جزء أولًا.",wrong:"هناك جزء لا يطابق الكسر المعيَّن له.",correct:"أحسنت! الكسور لكل الأجزاء صحيحة."},en:{title:"Level 3 – Challenge 7: Fraction Areas",intro:"Assign the correct fraction to every highlighted region so it matches the area of that region.",bank:"Fraction cards",assign:"Drop fraction",check:"Check",reset:"Reset",newQ:"New challenge",needAll:"Assign a fraction to every region first.",wrong:"One or more regions have the wrong fraction.",correct:"Great! All regions are correct."}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Te):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(je):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");const T=[{id:"p1",grid:{rows:4,cols:4},parts:[{id:"A",label:"أ",color:"#d1fae5",fraction:"1/4",cells:[0,1,4,5]},{id:"B",label:"ب",color:"#86efac",fraction:"3/4",cells:[2,3,6,7,8,9,10,11,12,13,14,15]}],options:["1/4","1/2","3/4","2/3"]},{id:"p2",grid:{rows:4,cols:4},parts:[{id:"A",label:"أ",color:"#dbeafe",fraction:"1/2",cells:[0,1,4,5,8,9,12,13]},{id:"B",label:"ب",color:"#bfdbfe",fraction:"1/4",cells:[2,6,10,14]},{id:"C",label:"ج",color:"#93c5fd",fraction:"1/4",cells:[3,7,11,15]}],options:["1/2","1/4","1/4","1/3","3/4","1/6"]}],Q=L(T[0]),f=ve({}),m=ve({}),p=L(null),h=L(!1);function C(i){return i.slice().sort(()=>Math.random()-.5)}function D(){Object.keys(f).forEach(i=>delete f[i]),Object.keys(m).forEach(i=>delete m[i])}function O(){const i=T[Math.floor(Math.random()*T.length)];Q.value=i,D(),p.value=null,h.value=!1,i.parts.forEach(u=>{f[u.id]=null}),i.options.forEach(u=>{m[u]=(m[u]||0)+1})}function E(i){i.preventDefault()}function K(i,u){i.dataTransfer.setData("text/plain",u)}function Z(i,u){i.preventDefault();const r=i.dataTransfer.getData("text/plain");if(r&&!((m[r]||0)<=0&&f[u]!==r)){if(f[u]!=null){const o=f[u];m[o]=(m[o]||0)+1}f[u]!==r&&(m[r]=(m[r]||0)-1,m[r]<0&&(m[r]=0)),f[u]=r,h.value=!1,p.value=null}}function R(i){if(f[i]!=null){const u=f[i];m[u]=(m[u]||0)+1,f[i]=null,h.value=!1,p.value=null}}const G=V(()=>{const i=[];for(const[u,r]of Object.entries(m))for(let o=0;o<r;o++)i.push({value:u,key:`${u}-${o}`});return C(i)});function I(){return Q.value.parts.every(i=>f[i.id]!=null)}async function F(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function z(){if(!I()){p.value=n[a.value].needAll,y&&y.play();return}for(const i of Q.value.parts)if(f[i.id]!==i.fraction){p.value=n[a.value].wrong,y&&y.play();return}p.value=n[a.value].correct,h.value=!0,w&&w.play(),P&&P.play(),await F()}function S(){Q.value.parts.forEach(i=>{if(f[i.id]!=null){const u=f[i.id];m[u]=(m[u]||0)+1,f[i.id]=null}}),p.value=null,h.value=!1}const _=V(()=>{const{rows:i,cols:u}=Q.value.grid,r=i*u,o=Array(r).fill(null);return Q.value.parts.forEach(g=>{g.cells.forEach(q=>{o[q]=g})}),o}),b=V(()=>{const{rows:i,cols:u}=Q.value.grid;return{gridTemplateRows:`repeat(${i}, 1fr)`,gridTemplateColumns:`repeat(${u}, 1fr)`}});return ge(O),me(()=>x.lang,()=>{h.value||(p.value=null)}),(i,u)=>(l(),s("div",{class:"lvl3c7 challenge-surface","data-theme":x.theme},[e("header",Qi,[e("h2",qi,t(n[a.value].title),1),e("p",Gi,t(n[a.value].intro),1)]),e("section",Vi,[e("div",{class:"grid",style:ue(b.value)},[(l(!0),s(te,null,ne(_.value,(r,o)=>(l(),s("div",{key:o,class:"cell",style:ue({background:r?r.color:"#f3f4f6"})},null,4))),128))],4)]),e("section",Wi,[(l(!0),s(te,null,ne(Q.value.parts,r=>(l(),s("div",{key:r.id,class:"assignment"},[e("div",Hi,t(r.label),1),e("div",{class:"drop",onDragover:E,onDrop:o=>Z(o,r.id)},[f[r.id]?(l(),s("span",Yi,t(f[r.id]),1)):(l(),s("span",Ji,t(n[a.value].assign),1))],40,Ki),e("button",{class:"clear",onClick:o=>R(r.id)},[B(W(Ce),{class:"ic"}),Y(" "+t(n[a.value].clear),1)],8,Xi)]))),128))]),e("section",Zi,[e("button",{class:"btn",onClick:z},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:S},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:O},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),e("section",eu,[e("div",tu,t(n[a.value].bank),1),e("div",au,[(l(!0),s(te,null,ne(G.value,r=>(l(),s("button",{key:r.key,class:"chip",draggable:"true",onDragstart:o=>K(o,r.value)},t(r.value),41,nu))),128))])]),B(ke,{name:"fade"},{default:be(()=>[p.value?(l(),s("div",{key:0,class:oe(["feedback",{ok:h.value}])},t(p.value),3)):re("",!0)]),_:1})],8,Ui))}},su=pe(lu,[["__scopeId","data-v-cdf7918e"]]),ou=["data-theme"],ru={class:"head"},cu={class:"title"},iu={class:"intro"},uu={class:"status"},du={class:"chip"},vu={class:"chip"},hu={class:"graph"},pu={viewBox:"0 0 500 300"},fu=["x1","y1","x2","y2"],mu=["x","y"],gu=["onClick"],_u=["cx","cy","r"],bu=["x","y"],yu={class:"controls"},ku={__name:"challenge_level_three_8",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"المستوى الثالث – التحدي 8: مسار الضرب",intro:"ابدأ من النقطة أ ثم اختر نقاطًا متصلة للوصول إلى ب بحيث يكون حاصل ضرب الأرقام على الأضلاع مساويًا للقيمة المطلوبة.",target:"القيمة المطلوبة",current:"الحاصل الحالي",check:"تحقّق",reset:"مسح آخر نقطة",newQ:"تحدٍ جديد",clearAll:"إعادة المسار",needStart:"ابدأ من النقطة أ.",invalid:"يجب اختيار نقطة متصلة.",wrong:"المسار لا يعطي القيمة المطلوبة، حاول مرة أخرى.",correct:"أحسنت! المسار يعطي القيمة المطلوبة."},en:{title:"Level 3 – Challenge 8: Multiplication Path",intro:"Start at point A and travel along connected nodes to reach B so the product of edge values equals the required target.",target:"Target product",current:"Current product",check:"Check",reset:"Undo last",newQ:"New challenge",clearAll:"Clear path",needStart:"Start from node A.",invalid:"Pick a connected node.",wrong:"Path does not meet the target—try again.",correct:"Great! The path matches the target."}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Te):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(je):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");const T=[{id:"p1",target:5,start:"A",end:"B",nodes:[{id:"A",label:"أ",x:420,y:150,type:"start"},{id:"B",label:"ب",x:80,y:150,type:"end"},{id:"RT",x:340,y:90},{id:"RB",x:340,y:210},{id:"CT",x:260,y:70},{id:"C",x:260,y:150},{id:"CB",x:260,y:230},{id:"LT",x:180,y:90},{id:"LB",x:180,y:210}],edges:[{from:"A",to:"RT",value:.5},{from:"RT",to:"CT",value:1},{from:"CT",to:"C",value:.5},{from:"C",to:"LT",value:2},{from:"LT",to:"B",value:2.5},{from:"A",to:"RB",value:2},{from:"RB",to:"CB",value:1.25},{from:"CB",to:"C",value:1},{from:"C",to:"LB",value:1},{from:"LB",to:"B",value:2},{from:"CT",to:"CB",value:2},{from:"RT",to:"C",value:1.4},{from:"C",to:"LT",value:1.6}]},{id:"p2",target:6,start:"A",end:"B",nodes:[{id:"A",label:"أ",x:420,y:150,type:"start"},{id:"B",label:"ب",x:80,y:150,type:"end"},{id:"RT",x:340,y:100},{id:"RB",x:340,y:200},{id:"CT",x:260,y:60},{id:"C",x:260,y:150},{id:"CB",x:260,y:240},{id:"LT",x:180,y:100},{id:"LB",x:180,y:200}],edges:[{from:"A",to:"RT",value:1.5},{from:"RT",to:"CT",value:2},{from:"CT",to:"C",value:1},{from:"C",to:"LT",value:1},{from:"LT",to:"B",value:2},{from:"A",to:"RB",value:.5},{from:"RB",to:"CB",value:1.2},{from:"CB",to:"C",value:2},{from:"C",to:"LB",value:1},{from:"LB",to:"B",value:2},{from:"RT",to:"C",value:1.2},{from:"C",to:"LT",value:1.5}]}];function Q(S,_){const b=_.find(u=>u.id===S.from),i=_.find(u=>u.id===S.to);return{...S,x1:b.x,y1:b.y,x2:i.x,y2:i.y,midX:(b.x+i.x)/2,midY:(b.y+i.y)/2}}const f=L(T[0]),m=L([]),p=L(null),h=L(!1),C=V(()=>f.value.nodes),D=V(()=>f.value.edges.map(S=>Q(S,C.value))),O=V(()=>{const S=[];for(let _=0;_<m.value.length-1;_++){const b=m.value[_],i=m.value[_+1],u=D.value.find(r=>r.from===b&&r.to===i||r.from===i&&r.to===b);u&&S.push(u)}return S}),E=V(()=>O.value.reduce((S,_)=>S*_.value,1));function K(S,_){return D.value.some(b=>b.from===S&&b.to===_||b.from===_&&b.to===S)}function Z(){m.value=[],h.value=!1,p.value=null}function R(){m.value.length>0&&(m.value=m.value.slice(0,-1),h.value=!1,p.value=null)}async function G(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}function I(S){const{start:_,end:b}=f.value;if(!m.value.length){if(S.id!==_){p.value=n[a.value].needStart,y&&y.play();return}m.value=[S.id],p.value=null;return}const i=m.value[m.value.length-1];if(S.id===i)return;if(!K(i,S.id)){p.value=n[a.value].invalid,y&&y.play();return}const u=m.value.slice();u.push(S.id),m.value=u,p.value=null,S.id===b&&F()}async function F(){const{end:S,target:_}=f.value;if(m.value[m.value.length-1]!==S){p.value=n[a.value].wrong,y&&y.play();return}Math.abs(E.value-_)<1e-6?(p.value=n[a.value].correct,h.value=!0,w&&w.play(),P&&P.play(),await G()):(p.value=n[a.value].wrong,h.value=!1,y&&y.play())}function z(){const S=T[Math.floor(Math.random()*T.length)];f.value=S,Z()}return ge(z),me(()=>x.lang,()=>{h.value||(p.value=null)}),(S,_)=>(l(),s("div",{class:"lvl3c8 challenge-surface","data-theme":x.theme},[e("header",ru,[e("h2",cu,t(n[a.value].title),1),e("p",iu,t(n[a.value].intro),1)]),e("section",uu,[e("div",du,[Y(t(n[a.value].target)+": ",1),e("strong",null,t(f.value.target),1)]),e("div",vu,[Y(t(n[a.value].current)+": ",1),e("strong",null,t(E.value.toFixed(3)),1)])]),e("section",hu,[(l(),s("svg",pu,[(l(!0),s(te,null,ne(D.value,b=>(l(),s("g",{key:b.from+b.to},[e("line",{x1:b.x1,y1:b.y1,x2:b.x2,y2:b.y2,class:oe(["edge",{active:O.value.includes(b)}])},null,10,fu),e("text",{x:b.midX,y:b.midY,class:"edge-label"},t(b.value),9,mu)]))),128)),(l(!0),s(te,null,ne(C.value,b=>(l(),s("g",{key:b.id,class:"node",onClick:i=>I(b)},[e("circle",{cx:b.x,cy:b.y,r:b.type?20:12,class:oe(["point",b.type,{selected:m.value.includes(b.id)}])},null,10,_u),e("text",{x:b.x,y:b.y+4,class:"node-label"},t(b.label||""),9,bu)],8,gu))),128))]))]),e("section",yu,[e("button",{class:"btn",onClick:F},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:R},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:Z},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].clearAll),1)]),e("button",{class:"btn",onClick:z},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),B(ke,{name:"fade"},{default:be(()=>[p.value?(l(),s("div",{key:0,class:oe(["feedback",{ok:h.value}])},t(p.value),3)):re("",!0)]),_:1})],8,ou))}},wu=pe(ku,[["__scopeId","data-v-cab1ece4"]]),$u=["data-theme"],Cu={class:"head"},Su={class:"title"},xu={class:"intro"},Au={class:"table"},Du={class:"table-title"},Mu={class:"grid"},Tu={class:"cell letter"},Eu=["onDrop"],Nu={key:0,class:"value"},Lu={key:1,class:"placeholder"},Pu=["onClick"],zu={class:"equations"},ju={class:"bank"},Ou={class:"bank-title"},Ru={class:"bank-items"},Iu=["onDragstart"],Bu={class:"message"},Fu={class:"encoded"},Uu={class:"decoded"},Qu={class:"controls"},qu={__name:"challenge_level_three_9",props:{lang:{type:String,default:"ar"},theme:{type:String,default:"light"}},setup(ee){const x=ee,n={ar:{title:"المستوى الثالث – التحدي 9: شيفرة الرموز",intro:"حلّ المعادلات لتحديد قيمة كل رمز، ثم اسحب الحروف/الأرقام إلى مواقعها لفك الشيفرة.",letters:"التحويل الحرفي",equations:"المعادلات",message:"الرسالة المشفّرة",decoded:"الرسالة بعد الفَك",check:"تحقّق",reset:"مسح التعيينات",newQ:"تحدٍ جديد",needAll:"أكمل كل الحروف أولاً.",wrong:"التعيينات غير صحيحة، راجع الحلول.",correct:"رائع! قمت بفك الشيفرة بنجاح."},en:{title:"Level 3 – Challenge 9: Cipher Grid",intro:"Solve each expression to find the value of every symbol, then drag letters/numbers into place to decode the message.",letters:"Letter mapping",equations:"Expressions",message:"Encoded message",decoded:"Decoded message",check:"Check",reset:"Reset assignments",newQ:"New challenge",needAll:"Assign all letters first.",wrong:"Some assignments are incorrect. Try again.",correct:"Great job! You decoded the cipher."}},a=V(()=>n[x.lang]?x.lang:"ar"),w=typeof Audio!="undefined"?new Audio(Te):null,P=typeof Audio!="undefined"?new Audio($e):null,y=typeof Audio!="undefined"?new Audio(je):null;w&&(w.preload="auto"),P&&(P.preload="auto"),y&&(y.preload="auto");const T=[{id:"p1",equations:[{id:"b",expr:"b + 7 = 15",value:8},{id:"d",expr:"d - 1 = 10",value:11},{id:"e",expr:"2e = 30",value:15},{id:"f",expr:"2g f^2 = 40",value:5},{id:"h",expr:"3h - 2 = 19",value:7},{id:"j",expr:"j = 3h - 1",value:20},{id:"k",expr:"k - 1 = r",value:18},{id:"m",expr:"m = k - b",value:10},{id:"n",expr:"½ n = 13",value:26},{id:"p",expr:"¹⁄₇ p = 3",value:21},{id:"q",expr:"4q = 9 + 12",value:5},{id:"r",expr:"r = am + 14 (a=1,m=10)",value:24},{id:"t",expr:"t = am + 14 (a=1,m=10)",value:24},{id:"v",expr:"v = a² (a=3)",value:9},{id:"w",expr:"w = q² (q=5)",value:25},{id:"x",expr:"x = ⅔ r (r=6)",value:4}],mappingTable:[{letter:"a",value:5},{letter:"b",value:23},{letter:"c",value:14},{letter:"d",value:12},{letter:"e",value:18},{letter:"f",value:13},{letter:"g",value:17},{letter:"h",value:9},{letter:"i",value:22},{letter:"j",value:27}],message:[23,9,15,26,24,15,27]}],Q=L(T[0]),f=ve({}),m=L(null),p=L(!1);function h(){const z=T[0];Q.value=z,Object.keys(f).forEach(S=>delete f[S]),m.value=null,p.value=!1}const C=V(()=>Q.value.mappingTable.map(z=>z.value));V(()=>Q.value.mappingTable.map(z=>z.letter));function D(z){z.preventDefault()}function O(z,S){z.dataTransfer.setData("text/plain",String(S))}function E(z,S){z.preventDefault();const _=z.dataTransfer.getData("text/plain");_&&(f[S]=Number(_),p.value=!1,m.value=null)}function K(z){f[z]!=null&&(f[z]=null,p.value=!1,m.value=null)}const Z=V(()=>Q.value.message.map(z=>{const S=Q.value.mappingTable.find(_=>f[_.letter]===z);return S?S.letter:"?"}).join(""));function R(){return Q.value.mappingTable.every(z=>f[z.letter]!=null)}async function G(){try{await fetch("/api/method/mathematics_leaders.api.game_points.add_point?amount=1",{method:"GET",credentials:"include"})}catch{}}async function I(){if(!R()){m.value=n[a.value].needAll,y&&y.play();return}for(const z of Q.value.mappingTable)if(f[z.letter]!==z.value){m.value=n[a.value].wrong,y&&y.play();return}m.value=n[a.value].correct,p.value=!0,w&&w.play(),P&&P.play(),await G()}function F(){Q.value.mappingTable.forEach(z=>{f[z.letter]=null}),m.value=null,p.value=!1}return ge(h),me(()=>x.lang,()=>{p.value||(m.value=null)}),(z,S)=>(l(),s("div",{class:"lvl3c9 challenge-surface","data-theme":x.theme},[e("header",Cu,[e("h2",Su,t(n[a.value].title),1),e("p",xu,t(n[a.value].intro),1)]),e("section",Au,[e("div",Du,t(n[a.value].letters),1),e("div",Mu,[(l(!0),s(te,null,ne(Q.value.mappingTable,_=>(l(),s(te,{key:_.letter},[e("div",Tu,t(_.letter),1),e("div",{class:"cell slot",onDragover:D,onDrop:b=>E(b,_.letter)},[f[_.letter]!=null?(l(),s("span",Nu,t(f[_.letter]),1)):(l(),s("span",Lu,"?")),e("button",{class:"clear",onClick:b=>K(_.letter)},[B(W(Ce),{class:"ic"})],8,Pu)],40,Eu)],64))),128))])]),e("section",zu,[e("h3",null,t(n[a.value].equations),1),e("ul",null,[(l(!0),s(te,null,ne(Q.value.equations,_=>(l(),s("li",{key:_.id},t(_.expr),1))),128))])]),e("section",ju,[e("div",Ou,t(n[a.value].bank),1),e("div",Ru,[(l(!0),s(te,null,ne(C.value,_=>(l(),s("button",{key:_,class:"chip",draggable:"true",onDragstart:b=>O(b,_)},t(_),41,Iu))),128))])]),e("section",Bu,[e("h3",null,t(n[a.value].message),1),e("div",Fu,[(l(!0),s(te,null,ne(Q.value.message,(_,b)=>(l(),s("span",{key:b},t(_),1))),128))]),e("h4",null,t(n[a.value].decoded),1),e("div",Uu,t(Z.value),1)]),e("section",Qu,[e("button",{class:"btn",onClick:I},[B(W(ye),{class:"ic"}),Y(" "+t(n[a.value].check),1)]),e("button",{class:"btn",onClick:F},[B(W(we),{class:"ic"}),Y(" "+t(n[a.value].reset),1)]),e("button",{class:"btn",onClick:h},[B(W(_e),{class:"ic"}),Y(" "+t(n[a.value].newQ),1)])]),B(ke,{name:"fade"},{default:be(()=>[m.value?(l(),s("div",{key:0,class:oe(["feedback",{ok:p.value}])},t(m.value),3)):re("",!0)]),_:1})],8,$u))}},Gu=pe(qu,[["__scopeId","data-v-fe66560c"]]),Xe="ml-toast";function Be({message:ee,type:x="info",duration:n=2600}={}){var a;ee&&window.dispatchEvent(new CustomEvent(Xe,{detail:{message:ee,type:x,duration:n,id:((a=crypto.randomUUID)==null?void 0:a.call(crypto))||Math.random().toString(36).slice(2),timestamp:Date.now()}}))}function Vu(ee){return window.addEventListener(Xe,ee),()=>window.removeEventListener(Xe,ee)}const Ze=L(null),yt=L(null),kt=L(null),wt=L(null),Qe=L(!1),qe=L(null),et=L(0),$t=L(null),Ct=L(null),St=L(null);async function Wu(ee=!1){var n;const x=Date.now();if(!(!ee&&Ze.value!==null&&x-et.value<6e4)&&!Qe.value){Qe.value=!0,qe.value=null;try{const a=await fetch("/api/method/mathematics_leaders.api.game_points.get_points",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),w=await a.json();if(!a.ok||!((n=w==null?void 0:w.message)!=null&&n.ok))throw new Error((w==null?void 0:w.message)||"Unable to load score");const P=w.message;Ze.value=Number(P.points||0),yt.value=P.rank||1,kt.value=P.players||1,wt.value=Number(P.best||P.points||0),$t.value=P.profile_image||null,Ct.value=P.username||null,St.value=P.game_user_name||null,et.value=x}catch(a){qe.value=a instanceof Error?a.message:String(a),Be({message:qe.value,type:"danger"})}finally{Qe.value=!1}}}function nt(){return{score:Ze,rank:yt,totalPlayers:kt,bestScore:wt,loading:Qe,error:qe,lastUpdated:et,profileImage:$t,username:Ct,gameUserName:St,refresh:Wu}}const Hu=["dir","data-theme"],Ku={class:"overview"},Yu={class:"panel donut-panel"},Ju={class:"panel__header"},Xu={class:"tier-chip"},Zu=["disabled"],ed={class:"donut"},td={viewBox:"0 0 160 160","aria-hidden":"true"},ad={class:"donut__label"},nd={class:"panel__footer"},ld={class:"progress-caption"},sd={class:"timestamp"},od={class:"panel spark-panel"},rd={class:"panel__header"},cd={class:"panel__title"},id={class:"spark"},ud={viewBox:"0 0 180 72","aria-hidden":"true"},dd=["d"],vd=["d"],hd={class:"spark__meta"},pd={class:"spark__hint"},fd={class:"metrics"},md={class:"metric__label"},gd={class:"metric__value"},_d={class:"insights"},bd={class:"insights__grid"},yd={class:"insight-card__icon"},kd={class:"insight-card__body"},wd={key:0,class:"error"},ft=9,Ke=58,$d={__name:"my_scores",setup(ee){const{score:x,rank:n,totalPlayers:a,bestScore:w,loading:P,error:y,lastUpdated:T,refresh:Q}=nt(),f=()=>(document.documentElement.lang||"").toLowerCase().startsWith("en")||(localStorage.getItem("ml_lang")||"").toLowerCase().startsWith("en")?"en":"ar",m=()=>localStorage.getItem("ml_theme")||"light",p=L(f()),h=L(m()),C=V(()=>p.value==="ar"),D=V(()=>p.value==="ar"?{totalPoints:"إجمالي النقاط",progressLabel:"التقدم نحو الرتبة التالية",refresh:"تحديث النقاط",lastUpdated:"آخر تحديث",insightHeading:"تحليلات سريعة",scoreTrendTitle:"منحنى الأداء",scoreTrendCopy:"يميل الأداء إلى التحسن خلال آخر المحاولات.",percentRankTitle:"موقعك بين اللاعبين",topTierCopy:"لقد بلغت أعلى رتبة متاحة! استمر في التألق.",nextTierLabel:"المتبقي للوصول للرتبة التالية",recordTitle:"أفضل نتيجة مسجلة",sparkLabel:"تحوّل النقاط (آخر الجلسات)",metricsHeading:"مؤشرات سريعة",playersLabel:"عدد اللاعبين",rankLabel:"ترتيبك",recordLabel:"رقمك القياسي",minutesAgo:"منذ دقائق",justNow:"الآن"}:{totalPoints:"Total points",progressLabel:"Progress to next tier",refresh:"Refresh score",lastUpdated:"Last updated",insightHeading:"Quick insights",scoreTrendTitle:"Performance trend",scoreTrendCopy:"Your recent attempts show an upward trend.",percentRankTitle:"Position among players",topTierCopy:"You already sit at the highest tier—keep shining!",nextTierLabel:"To reach the next tier",recordTitle:"Best recorded score",sparkLabel:"Score changes (recent sessions)",metricsHeading:"Key metrics",playersLabel:"Players",rankLabel:"Your rank",recordLabel:"Personal best",minutesAgo:"minutes ago",justNow:"just now"}),O=[{threshold:0,title:{ar:"مبتدئ الأرقام",en:"Number Novice"}},{threshold:25,title:{ar:"مستكشف الأنماط",en:"Pattern Explorer"}},{threshold:75,title:{ar:"مايسترو الرياضيات",en:"Math Maestro"}},{threshold:150,title:{ar:"أسطورة التحديات",en:"Challenge Legend"}}],E=V(()=>Number(x.value||0)),K=V(()=>Number(w.value||0)),Z=V(()=>{let X=0;return O.forEach((le,ce)=>{E.value>=le.threshold&&(X=ce)}),X}),R=V(()=>O[Z.value]),G=V(()=>O[Z.value+1]||null),I=V(()=>{var X,le,ce,de;return((le=(X=R.value)==null?void 0:X.title)==null?void 0:le[p.value])||((de=(ce=R.value)==null?void 0:ce.title)==null?void 0:de.en)||""}),F=V(()=>{if(!G.value)return 1;const X=G.value.threshold-R.value.threshold;return X<=0?1:Math.min(1,(E.value-R.value.threshold)/X)}),z=new Intl.NumberFormat("en-US",{maximumFractionDigits:0}),S=V(()=>z.format(E.value)),_=V(()=>z.format(K.value)),b=V(()=>n.value!=null?`#${n.value}`:"--"),i=V(()=>a.value!=null?z.format(a.value):"--"),u=V(()=>{if(!T.value)return"--";const X=Date.now()-T.value;return X<6e4?D.value.justNow:`${Math.round(X/6e4)} ${D.value.minutesAgo}`}),r=V(()=>{const X=Math.max(E.value,K.value,1),le=Math.max(10,X*.45),ce=[];for(let de=0;de<ft;de+=1){const xe=de/(ft-1),he=Math.sin((E.value+de)*.35)*X*.05,Se=Math.max(0,le+(X-le)*xe+he);ce.push(Math.round(Se))}return ce[ce.length-1]=Math.max(E.value,0),ce}),o=V(()=>{const X=r.value;if(!X.length)return[];const le=180,ce=54,de=Math.max(...X),xe=Math.min(...X),he=de-xe||1;return X.map((Se,Pe)=>{const Fe=X.length===1?le:le/(X.length-1)*Pe,Ve=ce-(Se-xe)/he*ce;return{x:Number(Fe.toFixed(2)),y:Number(Ve.toFixed(2)),value:Se}})}),g=V(()=>{const X=o.value;return X.length?X.map((le,ce)=>`${ce===0?"M":"L"}${le.x},${le.y}`).join(" "):""}),q=V(()=>{const X=o.value;if(!X.length)return"";const le=54,ce=X[0],de=X[X.length-1],xe=X.map((he,Se)=>`L${he.x},${he.y}`).join(" ");return`M${ce.x},${le} ${xe} L${de.x},${le} Z`}),N=V(()=>{const X=r.value;return X.length<2?0:X[X.length-1]-X[0]}),j=2*Math.PI*Ke,k=V(()=>j*(1-F.value)),c=V(()=>Math.round(F.value*100)),d=V(()=>!n.value||!a.value?null:Math.max(0,100-Math.round((n.value-1)/a.value*100))),v={trend:nn,award:Ga,activity:qa,target:mt},$=V(()=>{const X=[];if(G.value){const le=Math.max(0,G.value.threshold-E.value);X.push({icon:"target",title:D.value.nextTierLabel,body:p.value==="ar"?`تبقى ${z.format(le)} نقطة للوصول إلى «${G.value.title.ar}».`:`${z.format(le)} pts to unlock “${G.value.title.en}”.`})}else X.push({icon:"target",title:D.value.nextTierLabel,body:(p.value==="ar",D.value.topTierCopy)});return X.push({icon:"trend",title:D.value.scoreTrendTitle,body:p.value==="ar"?`${D.value.scoreTrendCopy} (+${z.format(Math.max(0,N.value))}).`:`${D.value.scoreTrendCopy} (+${z.format(Math.max(0,N.value))}).`}),d.value!=null&&X.push({icon:"award",title:D.value.percentRankTitle,body:p.value==="ar"?`أنت ضمن أفضل ${d.value}% من اللاعبين.`:`You currently outperform ${d.value}% of players.`}),X.push({icon:"activity",title:D.value.recordTitle,body:p.value==="ar"?`أفضل نتيجة حققتها هي ${_.value} نقطة.`:`Your personal best sits at ${_.value} pts.`}),X}),H=V(()=>[{label:D.value.rankLabel,value:b.value},{label:D.value.playersLabel,value:i.value},{label:D.value.recordLabel,value:_.value}]);function M(){Q(!0)}let A=null,U=null,J=null;return ge(()=>{Q(!0);const X=()=>{p.value=f()},le=()=>{h.value=m()};A=new MutationObserver(X),A.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"]}),U=new MutationObserver(le),U.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),J=()=>{X(),le()},window.addEventListener("storage",J)}),tt(()=>{A&&A.disconnect(),U&&U.disconnect(),J&&window.removeEventListener("storage",J)}),(X,le)=>(l(),s("div",{class:"scores-page",dir:C.value?"rtl":"ltr","data-theme":h.value},[e("section",Ku,[e("article",Yu,[e("header",Ju,[e("span",Xu,t(I.value),1),e("button",{class:"refresh","data-ripple":"",disabled:W(P),onClick:M},[B(W(_e),{class:oe(["ic",{spin:W(P)}])},null,8,["class"]),Y(" "+t(D.value.refresh),1)],8,Zu)]),e("div",ed,[(l(),s("svg",td,[le[0]||(le[0]=e("defs",null,[e("linearGradient",{id:"donutGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[e("stop",{offset:"0%","stop-color":"#c8a03b"}),e("stop",{offset:"100%","stop-color":"#0f8a3e"})])],-1)),e("circle",{class:"track",cx:"80",cy:"80",r:Ke}),e("circle",{class:"progress",cx:"80",cy:"80",r:Ke,style:ue({strokeDasharray:`${j}px`,strokeDashoffset:`${k.value}px`})},null,4)])),e("div",ad,[e("strong",null,t(S.value),1),e("span",null,t(D.value.totalPoints),1)])]),e("footer",nd,[e("div",ld,[e("span",null,t(D.value.progressLabel),1),e("span",null,t(c.value)+"%",1)]),e("div",sd,t(D.value.lastUpdated)+" · "+t(u.value),1)])]),e("article",od,[e("header",rd,[e("span",cd,t(D.value.sparkLabel),1)]),e("div",id,[(l(),s("svg",ud,[le[1]||(le[1]=e("defs",null,[e("linearGradient",{id:"sparkFill",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%","stop-color":"rgba(15,138,62,0.35)"}),e("stop",{offset:"100%","stop-color":"rgba(200,160,59,0.05)"})])],-1)),q.value?(l(),s("path",{key:0,class:"spark__area",d:q.value,fill:"url(#sparkFill)"},null,8,dd)):re("",!0),g.value?(l(),s("path",{key:1,class:"spark__path",d:g.value},null,8,vd)):re("",!0)])),e("div",hd,[e("span",{class:oe(["spark__delta",{up:N.value>=0}])},t(N.value>=0?"+":"")+t(W(z).format(N.value)),3),e("span",pd,t(D.value.scoreTrendCopy),1)])]),e("div",fd,[(l(!0),s(te,null,ne(H.value,ce=>(l(),s("div",{key:ce.label,class:"metric"},[e("span",md,t(ce.label),1),e("strong",gd,t(ce.value),1)]))),128))])])]),e("section",_d,[e("h3",null,t(D.value.insightHeading),1),e("div",bd,[(l(!0),s(te,null,ne($.value,(ce,de)=>(l(),s("article",{key:de,class:"insight-card"},[e("div",yd,[(l(),De(Re(v[ce.icon]),{class:"glyph"}))]),e("div",kd,[e("h4",null,t(ce.title),1),e("p",null,t(ce.body),1)])]))),128))]),W(y)?(l(),s("p",wd,t(W(y)),1)):re("",!0)])],8,Hu))}},Cd=pe($d,[["__scopeId","data-v-d7a1a530"]]),Sd=["dir","data-theme"],xd={class:"settings__header"},Ad={class:"page-title"},Dd={class:"settings__grid"},Md={class:"settings-card profile-card"},Td={class:"card-header"},Ed={class:"title"},Nd={class:"card-body"},Ld={class:"avatar-stack"},Pd={class:"avatar-orbit"},zd={class:"avatar-ring"},jd=["src"],Od={key:1},Rd={class:"display-name"},Id={class:"controls"},Bd={class:"btn ghost","data-ripple":""},Fd=["disabled"],Ud={key:"avatar-ok",class:"status success"},Qd={key:"avatar-err",class:"status error"},qd={class:"settings-card password-card"},Gd={class:"card-header"},Vd={class:"title"},Wd={class:"verify-block"},Hd=["disabled"],Kd={key:"verify-ok",class:"status success"},Yd={key:"verify-err",class:"status error"},Jd={key:0,class:"password-fields"},Xd={class:"form-actions"},Zd=["disabled"],ev={key:"pass-ok",class:"status success"},tv={key:"pass-err",class:"status error"},av={__name:"settings",setup(ee){const x=nt(),n=()=>(document.documentElement.lang||"").toLowerCase().startsWith("en")||(localStorage.getItem("ml_lang")||"").toLowerCase().startsWith("en")?"en":"ar",a=()=>localStorage.getItem("ml_theme")||"light",w=L(n()),P=L(a()),y=V(()=>w.value==="ar"),T=V(()=>w.value==="ar"?{title:"إعدادات الحساب",avatarTitle:"صورة البروفايل",avatarHint:"ارفع صورة مربعة بدقة جيدة (حتى 2 م.ب).",chooseFile:"اختر صورة",cancel:"إزالة التحديد",upload:"حفظ الصورة",loading:"جارٍ الرفع...",changeSuccess:"تم تحديث الصورة بنجاح.",changeError:"تعذر تحديث الصورة، حاول لاحقًا.",passwordTitle:"تغيير كلمة المرور",formHint:"استخدم كلمة مرور قوية تجمع بين الأحرف والأرقام والرموز.",currentPassword:"كلمة المرور الحالية",newPassword:"كلمة المرور الجديدة",confirmPassword:"تأكيد كلمة المرور",verify:"تحقّق",verified:"تم التحقق من كلمة المرور.",verifyError:"تحقق من كلمة المرور الحالية أولًا.",savePassword:"حفظ كلمة المرور",reset:"إعادة التعيين",passwordSuccess:"تم تغيير كلمة المرور بنجاح.",passwordError:"تعذر تغيير كلمة المرور، تحقق من البيانات.",selectImageFirst:"اختر صورة أولًا.",notImage:"الملف ليس صورة.",tooLarge:"حجم الصورة يتجاوز 2 م.ب.",missingPlayer:"تعذر إيجاد ملف اللاعب."}:{title:"Account settings",avatarTitle:"Profile picture",avatarHint:"Upload a crisp square image (up to 2 MB).",chooseFile:"Choose image",cancel:"Remove selection",upload:"Save avatar",loading:"Uploading...",changeSuccess:"Profile picture updated successfully.",changeError:"We could not update your picture. Try again later.",passwordTitle:"Change password",formHint:"Use a strong password that mixes letters, numbers, and symbols.",currentPassword:"Current password",newPassword:"New password",confirmPassword:"Confirm password",verify:"Verify",verified:"Password verified.",verifyError:"Verify your current password first.",savePassword:"Save password",reset:"Reset form",passwordSuccess:"Password updated successfully.",passwordError:"Unable to change password. Check your entries.",selectImageFirst:"Select an image first.",notImage:"The selected file is not an image.",tooLarge:"Image size exceeds 2 MB.",missingPlayer:"Unable to identify player record."}),Q=L(null),f=L(""),m=ve({loading:!1,message:"",error:""}),p=ve({current:"",next:"",confirm:""}),h=ve({loading:!1,verified:!1,message:"",error:""}),C=ve({loading:!1,message:"",error:""}),D=V(()=>x.username.value||"Player"),O=V(()=>D.value.trim().charAt(0).toUpperCase()||"P"),E=V(()=>f.value||x.profileImage.value||null);function K(b){var u;m.message="",m.error="";const i=(u=b.target.files)==null?void 0:u[0];if(!i){Z();return}if(!i.type.startsWith("image/")){m.error=T.value.notImage;return}if(i.size>2*1024*1024){m.error=T.value.tooLarge;return}f.value&&URL.revokeObjectURL(f.value),Q.value=i,f.value=URL.createObjectURL(i)}function Z(){f.value&&URL.revokeObjectURL(f.value),Q.value=null,f.value="",m.message="",m.error=""}async function R(){var i,u;if(!Q.value){m.error=T.value.selectImageFirst;return}x.gameUserName.value||await x.refresh(!0);const b=x.gameUserName.value;if(!b){m.error=T.value.missingPlayer;return}m.loading=!0,m.error="",m.message="";try{const r=new FormData;r.append("file",Q.value),r.append("filename",Q.value.name),r.append("is_private","0"),r.append("attached_to_doctype","Game Users"),r.append("attached_to_name",b);const o=await fetch("/api/method/upload_file",{method:"POST",credentials:"include",body:r}),g=await o.json();if(!o.ok||!((i=g==null?void 0:g.message)!=null&&i.file_url))throw new Error((g==null?void 0:g._server_messages)||(g==null?void 0:g.message)||"Upload failed");const q=g.message.file_url,N=await fetch("/api/method/mathematics_leaders.api.profile.set_profile_image",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_url:q})}),j=await N.json();if(!N.ok||!((u=j==null?void 0:j.message)!=null&&u.ok))throw new Error((j==null?void 0:j.message)||"Unable to store profile image");m.message=T.value.changeSuccess,Be({message:T.value.changeSuccess,type:"success"}),await x.refresh(!0),Z()}catch(r){m.error=r instanceof Error?r.message:T.value.changeError,Be({message:m.error,type:"danger"})}finally{m.loading=!1}}async function G(){var b;h.loading=!0,h.error="",h.message="";try{if(!p.current)throw new Error(T.value.verifyError);const i=await fetch("/api/method/mathematics_leaders.api.profile.verify_current_password",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:p.current})}),u=await i.json();if(!i.ok||!((b=u==null?void 0:u.message)!=null&&b.ok))throw new Error((u==null?void 0:u.message)||T.value.verifyError);h.verified=!0,h.message=T.value.verified,C.error=""}catch(i){h.verified=!1,h.error=i instanceof Error?i.message:T.value.verifyError}finally{h.loading=!1}}async function I(){var r;if(!h.verified){h.error=T.value.verifyError;return}C.loading=!0,C.message="",C.error="";const{current:b,next:i,confirm:u}=p;try{if(!b||!i||!u)throw new Error(w.value==="ar"?"املأ كل الحقول.":"Fill in every field.");if(i!==u)throw new Error(w.value==="ar"?"كلمتا المرور غير متطابقتين.":"Passwords do not match.");if(i.length<8)throw new Error(w.value==="ar"?"كلمة المرور يجب أن تكون 8 أحرف على الأقل.":"Password must be at least 8 characters.");const o=await fetch("/api/method/mathematics_leaders.api.profile.change_password",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_password:b,new_password:i})}),g=await o.json();if(!o.ok||!((r=g==null?void 0:g.message)!=null&&r.ok))throw new Error((g==null?void 0:g.message)||T.value.passwordError);C.message=T.value.passwordSuccess,Be({message:T.value.passwordSuccess,type:"success"}),p.current="",p.next="",p.confirm="",h.verified=!1,h.message=""}catch(o){C.error=o instanceof Error?o.message:T.value.passwordError,Be({message:C.error,type:"danger"})}finally{C.loading=!1}}function F(){p.current="",p.next="",p.confirm="",h.loading=!1,h.verified=!1,h.message="",h.error="",C.loading=!1,C.message="",C.error=""}let z=null,S=null,_=null;return ge(()=>{x.score.value==null&&x.refresh(!0);const b=()=>{w.value=n()},i=()=>{P.value=a()};z=new MutationObserver(b),z.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"]}),S=new MutationObserver(i),S.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),_=()=>{b(),i()},window.addEventListener("storage",_)}),tt(()=>{f.value&&URL.revokeObjectURL(f.value),z&&z.disconnect(),S&&S.disconnect(),_&&window.removeEventListener("storage",_)}),(b,i)=>(l(),s("div",{class:"settings",dir:y.value?"rtl":"ltr","data-theme":P.value},[e("header",xd,[B(W(en),{class:"heading-icon"}),e("h1",Ad,t(T.value.title),1)]),e("div",Dd,[e("section",Md,[e("header",Td,[e("div",Ed,[B(W(pt),{class:"icon"}),e("div",null,[e("h2",null,t(T.value.avatarTitle),1),e("p",null,t(T.value.avatarHint),1)])])]),e("div",Nd,[e("div",Ld,[e("div",Pd,[e("div",zd,[E.value?(l(),s("img",{key:0,src:E.value,alt:"avatar preview"},null,8,jd)):(l(),s("span",Od,t(O.value),1))])]),e("span",Rd,t(D.value),1)]),e("div",Id,[e("label",Bd,[B(W(sn),{class:"icon"}),e("span",null,t(T.value.chooseFile),1),e("input",{type:"file",accept:"image/*",onChange:K,hidden:""},null,32)]),Q.value?(l(),s("button",{key:0,type:"button",class:"btn subtle","data-ripple":"",onClick:Z},t(T.value.cancel),1)):re("",!0),e("button",{type:"button",class:"btn solid","data-ripple":"",disabled:m.loading,onClick:R},[m.loading?(l(),De(W(Ue),{key:0,class:"icon spinner"})):(l(),De(W(pt),{key:1,class:"icon"})),e("span",null,t(m.loading?T.value.loading:T.value.upload),1)],8,Fd)]),B(ke,{name:"fade-slide",mode:"out-in"},{default:be(()=>[m.message?(l(),s("p",Ud,[B(W(He),{class:"icon"}),e("span",null,t(m.message),1)])):re("",!0)]),_:1}),B(ke,{name:"fade-slide",mode:"out-in"},{default:be(()=>[m.error?(l(),s("p",Qd,t(m.error),1)):re("",!0)]),_:1})])]),e("section",qd,[e("header",Gd,[e("div",Vd,[B(W(Ka),{class:"icon"}),e("div",null,[e("h2",null,t(T.value.passwordTitle),1),e("p",null,t(T.value.formHint),1)])])]),e("form",{class:"card-body password-form",onSubmit:Ge(I,["prevent"])},[e("div",Wd,[e("label",null,[e("span",null,t(T.value.currentPassword),1),Me(e("input",{type:"password","onUpdate:modelValue":i[0]||(i[0]=u=>p.current=u),autocomplete:"current-password"},null,512),[[Ee,p.current]])]),e("button",{type:"button",class:"btn solid","data-ripple":"",disabled:h.loading,onClick:G},[h.loading?(l(),De(W(Ue),{key:0,class:"icon spinner"})):(l(),De(W(ye),{key:1,class:"icon"})),e("span",null,t(h.loading?T.value.loading:T.value.verify),1)],8,Hd),B(ke,{name:"fade-slide",mode:"out-in"},{default:be(()=>[h.message?(l(),s("p",Kd,[B(W(He),{class:"icon"}),e("span",null,t(h.message),1)])):re("",!0)]),_:1}),B(ke,{name:"fade-slide",mode:"out-in"},{default:be(()=>[h.error?(l(),s("p",Yd,t(h.error),1)):re("",!0)]),_:1})]),B(ke,{name:"panel-grow"},{default:be(()=>[h.verified?(l(),s("div",Jd,[e("label",null,[e("span",null,t(T.value.newPassword),1),Me(e("input",{type:"password","onUpdate:modelValue":i[1]||(i[1]=u=>p.next=u),autocomplete:"new-password",required:""},null,512),[[Ee,p.next]])]),e("label",null,[e("span",null,t(T.value.confirmPassword),1),Me(e("input",{type:"password","onUpdate:modelValue":i[2]||(i[2]=u=>p.confirm=u),autocomplete:"new-password",required:""},null,512),[[Ee,p.confirm]])]),e("div",Xd,[e("button",{class:"btn success","data-ripple":"",type:"submit",disabled:C.loading},[C.loading?(l(),De(W(Ue),{key:0,class:"icon spinner"})):(l(),De(W(ye),{key:1,class:"icon"})),e("span",null,t(C.loading?T.value.loading:T.value.savePassword),1)],8,Zd),e("button",{type:"button",class:"btn subtle","data-ripple":"",onClick:F},[B(W(_e),{class:"icon"}),e("span",null,t(T.value.reset),1)])]),B(ke,{name:"fade-slide",mode:"out-in"},{default:be(()=>[C.message?(l(),s("p",ev,[B(W(He),{class:"icon"}),e("span",null,t(C.message),1)])):re("",!0)]),_:1}),B(ke,{name:"fade-slide",mode:"out-in"},{default:be(()=>[C.error?(l(),s("p",tv,t(C.error),1)):re("",!0)]),_:1})])):re("",!0)]),_:1})],32)])])],8,Sd))}},nv=pe(av,[["__scopeId","data-v-29b78927"]]),lv=["dir"],sv=["onClick"],ov={class:"dashboard__topbar"},rv={class:"topbar__left"},cv=["aria-expanded","aria-label"],iv={class:"brand-chip"},uv={class:"brand-chip__logo"},dv=["src"],vv={class:"brand-chip__text"},hv={class:"brand-chip__title"},pv={class:"brand-chip__subtitle"},fv={class:"topbar__center"},mv={class:"greet"},gv={class:"topbar__actions"},_v=["aria-label"],bv=["aria-label"],yv={class:"avatar"},kv={key:1,class:"avatar__initial"},wv={class:"profile__text"},$v={class:"profile__name"},Cv={class:"profile__meta"},Sv={key:0,class:"profile__menu"},xv={class:"dashboard__main"},Av={class:"overview-grid"},Dv={class:"welcome-card"},Mv={class:"welcome-card__icon"},Tv={class:"welcome-card__copy"},Ev={class:"welcome-card__metrics"},Nv={class:"metric"},Lv={class:"metric__label"},Pv={class:"metric"},zv={class:"metric__label"},jv=["aria-busy"],Ov={key:0,class:"score-card__overlay","aria-hidden":"true"},Rv={class:"score-card__ring"},Iv={viewBox:"0 0 120 120",role:"presentation"},Bv={class:"score-card__center"},Fv={class:"score-card__details"},Uv={class:"score-card__tier"},Qv={class:"score-card__subtitle"},qv=["aria-valuenow"],Gv={class:"progress__track"},Vv={class:"progress__meta"},Wv={class:"mentor-card"},Hv={class:"mentor-card__badge"},Kv={class:"challenge-section"},Yv={class:"challenge-list__header"},Jv={class:"levels"},Xv=["onClick"],Zv={class:"level-head__info"},eh={class:"level-head__title"},th={class:"level-head__count"},ah={key:0,class:"challenge-cards"},nh=["onClick"],lh={class:"challenge-card__symbol"},sh={class:"challenge-card__body"},oh={class:"challenge-card__title"},rh={class:"challenge-card__summary"},ch={class:"challenge-card__cta"},ih={class:"challenge-preview"},uh={class:"preview-header"},dh={key:0,class:"preview-pill"},vh={class:"preview-text"},hh={key:0},ph={key:1},fh={key:2},mh={key:3},gh={key:4},_h={key:5},bh={key:6},yh={key:7},kh={class:"preview-surface"},wh={class:"preview-placeholder",key:"placeholder"},$h={__name:"Dashboard",props:{view:{type:String,default:""}},setup(ee){var ot;const x=Lt(),n=ee,a=[{id:"level1",label:{ar:"المستوى الأول",en:"Level One"},challenges:[{id:"challenge_1",component:Tn,symbol:"∑",label:{ar:"التحدي 1",en:"Challenge 1"},summary:{ar:"إكمال عملية جمع عمودية بأرقام مخفية.",en:"Complete a column addition puzzle with hidden digits."}},{id:"challenge_2",component:Kn,symbol:"√",label:{ar:"التحدي 2",en:"Challenge 2"},summary:{ar:"شبكة أعداد تتزايد بمقدار ثابت، أعد القيم المفقودة.",en:"Fill a number grid that increases by a fixed step."}},{id:"challenge_3",component:ul,symbol:"π",label:{ar:"التحدي 3",en:"Challenge 3"},summary:{ar:"اختر زوج الأعداد الصحيح حسب المجموع والفرق.",en:"Pick the number pair that matches the given sum and difference."}},{id:"challenge_4",component:Dl,symbol:"×",label:{ar:"التحدي 4",en:"Challenge 4"},summary:{ar:"استكمل جدول ضرب مصغر.",en:"Complete the mini multiplication table."}},{id:"challenge_5",component:Zl,symbol:"Δ",label:{ar:"التحدي 5",en:"Challenge 5"},summary:{ar:"املأ مثلث الضرب على الأضلاع.",en:"Fill in the edge products of the triangle."}},{id:"challenge_6",component:cs,symbol:"≡",label:{ar:"التحدي 6",en:"Challenge 6"},summary:{ar:"اختر ثلاث خلايا مختلفة الصف والعمود لتحقيق مجموع محدد.",en:"Pick three distinct-row/column cells to reach the target sum."}},{id:"challenge_7",component:Cs,symbol:"∴",label:{ar:"التحدي 7",en:"Challenge 7"},summary:{ar:"أكمل هرم الجمع بإسقاط القيم الصحيحة.",en:"Complete the sum pyramid with the correct values."}}]},{id:"level2",label:{ar:"المستوى الثاني",en:"Level Two"},challenges:[{id:"challenge_level_two_1",component:Bs,symbol:"∫",label:{ar:"التحدي 1",en:"Challenge 1"},summary:{ar:"كوّن تعبيرًا يستخدم الأرقام 1 إلى 5 مرة واحدة.",en:"Build an expression that uses digits 1–5 exactly once."}},{id:"challenge_level_two_2",component:eo,symbol:"≠",label:{ar:"التحدي 2",en:"Challenge 2"},summary:{ar:"أكمل مربّعًا سحريًا بمجاميع متساوية.",en:"Complete a magic square with equal sums."}},{id:"challenge_level_two_3",component:Mo,symbol:"≈",label:{ar:"التحدي 3",en:"Challenge 3"},summary:{ar:"طابق أعدادًا سداسية مع خواص القسمة.",en:"Match six-digit numbers to divisibility rules."}},{id:"challenge_level_two_4",component:Bo,symbol:"∞",label:{ar:"التحدي 4",en:"Challenge 4"},summary:{ar:"اختر الزوج الذي يطابق المجموع والفرق.",en:"Choose the pair that matches the required sum and difference."}},{id:"challenge_level_two_5",component:ir,symbol:"∂",label:{ar:"التحدي 5",en:"Challenge 5"},summary:{ar:"اكمل طرح الكسور بوضع الأعداد الصحيحة.",en:"Complete the fraction subtraction by placing the right integers."}},{id:"challenge_level_two_6",component:wr,symbol:"⊗",label:{ar:"التحدي 6",en:"Challenge 6"},summary:{ar:"رتّب خطوات حل معادلة الموازين.",en:"Order the solution steps for the balance puzzle."}}]},{id:"level3",label:{ar:"المستوى الثالث",en:"Level Three"},challenges:[{id:"challenge_level_three_1",component:Or,symbol:"Φ",label:{ar:"التحدي 1",en:"Challenge 1"},summary:{ar:"ابن هرم الضرب من أرقام مبعثرة.",en:"Rebuild the multiplication pyramid from scattered numbers."}},{id:"challenge_level_three_2",component:nc,symbol:"Ψ",label:{ar:"التحدي 2",en:"Challenge 2"},summary:{ar:"لغز تفكير متقدم في الأعداد.",en:"An advanced numerical reasoning puzzle."}},{id:"challenge_level_three_3",component:fc,symbol:"Λ",label:{ar:"التحدي 3",en:"Challenge 3"},summary:{ar:"لغز منطق متقدم لاختبار السرعة.",en:"Advanced logic to test your speed."}},{id:"challenge_level_three_4",component:Ec,symbol:"Ξ",label:{ar:"التحدي 4",en:"Challenge 4"},summary:{ar:"تحدٍ عالي المستوى لربط الأنماط.",en:"High-level challenge for spotting patterns."}},{id:"challenge_level_three_5",component:ci,symbol:"Θ",label:{ar:"التحدي 5",en:"Challenge 5"},summary:{ar:"مسألة حسابية تحتاج إلى خطوات دقيقة.",en:"A numeric problem that needs careful steps."}},{id:"challenge_level_three_6",component:Fi,symbol:"β",label:{ar:"التحدي 6",en:"Challenge 6"},summary:{ar:"إستراتيجية جديدة لبناء الحل خطوة بخطوة.",en:"Strategic puzzle solved step by step."}},{id:"challenge_level_three_7",component:su,symbol:"γ",label:{ar:"التحدي 7",en:"Challenge 7"},summary:{ar:"هرم جمع متقدّم بقيم أكبر.",en:"A larger, more demanding sum pyramid."}},{id:"challenge_level_three_8",component:wu,symbol:"η",label:{ar:"التحدي 8",en:"Challenge 8"},summary:{ar:"اختبار المنطق السريع بالأرقام.",en:"Fast-paced numeric logic test."}},{id:"challenge_level_three_9",component:Gu,symbol:"ζ",label:{ar:"التحدي 9",en:"Challenge 9"},summary:{ar:"لغز أخير يجمع بين التفكير والسرعة.",en:"A final puzzle mixing reasoning with speed."}}]}],w=nt(),P=[{threshold:0,title:{ar:"مبتدئ",en:"Novice"}},{threshold:25,title:{ar:"متقدم",en:"Skilled"}},{threshold:80,title:{ar:"قائد",en:"Leader"}},{threshold:160,title:{ar:"أسطورة",en:"Legend"}}],y=V(()=>Number(w.score.value||0)),T=V(()=>{let ae=0;return P.forEach((se,ie)=>{y.value>=se.threshold&&(ae=ie)}),ae}),Q=V(()=>P[T.value]),f=V(()=>P[T.value+1]||null),m=V(()=>{var ae,se,ie,Ae;return((se=(ae=Q.value)==null?void 0:ae.title)==null?void 0:se[_.value])||((Ae=(ie=Q.value)==null?void 0:ie.title)==null?void 0:Ae.en)||""}),p=V(()=>{if(!f.value)return 1;const ae=f.value.threshold-Q.value.threshold;return ae<=0?1:Math.min(1,(y.value-Q.value.threshold)/ae)}),h=new Intl.NumberFormat("en-US",{maximumFractionDigits:0}),C=V(()=>h.format(y.value));V(()=>{const ae=w.rank.value;return ae?`#${ae}`:"--"});const D=V(()=>{const ae=w.totalPlayers.value;return ae?h.format(ae):"--"}),O=V(()=>w.loading.value),E=V(()=>Math.round(p.value*100)),K=V(()=>w.profileImage.value||null),Z=V(()=>(J.value||w.username.value||U.value||"P").trim().charAt(0).toUpperCase()||"P"),R=V(()=>O.value?"loading":`score-${y.value}`),G=L(0),I=L(!1);me(p,ae=>{G.value=ae},{immediate:!0}),me(()=>w.score.value,(ae,se)=>{se==null||Number(ae)===Number(se)||(I.value=!1,requestAnimationFrame(()=>{I.value=!0,setTimeout(()=>{I.value=!1},720)}))});function F(){Fe("/scores")}const z={};a.forEach(ae=>{ae.challenges.forEach(se=>{z[se.id]=se.component})});const S={scores:Cd,settings:nv},_=L(localStorage.getItem("ml_lang")||"ar"),b=V(()=>_.value==="ar"?"rtl":"ltr"),i={ar:{challenges:"المستوى الأول",challenges2:"المستوى الثاني",myScores:"درجاتي",settings:"الإعدادات",logout:"خروج",hello:"مرحبًا",sub:"اختر تحديًا وابدأ اللعب!",challenge:"التحدي",brand:"زعماء الرياضيات",tagline:"رحلة إنجاز رقمية",pickPrompt:"اختر تحديًا من البطاقات أدناه للبدء.",cardCTA:"ابدأ التحدي",scoreWidgetTitle:"نقاطي",scoreWidgetSubtitle:"نظرة سريعة على تقدّمك",scoreWidgetRank:"الترتيب",scoreWidgetPlayers:"عدد اللاعبين",scoreWidgetProgress:"نحو الرتبة التالية",scoreWidgetView:"عرض التفاصيل",scoreWidgetLoading:"جار تحديث النقاط...",teacherTitle:"الشريك التربوي",teacherSubtitle:"ميعاد سفر المالكي",teacherMessage:"شكرًا للأستاذة ميعاد سفر المالكي على إعداد هذه التحديات المُلهمة للطلبة."},en:{challenges:"Level One",challenges2:"Level Two",myScores:"My Scores",settings:"Settings",logout:"Log out",hello:"Hello",sub:"Pick a challenge and start!",challenge:"Challenge",brand:"Math Leaders",tagline:"Interactive mastery journey",pickPrompt:"Select a challenge from the cards below to get started.",cardCTA:"Start challenge",scoreWidgetTitle:"My points",scoreWidgetSubtitle:"Quick glance at your progress",scoreWidgetRank:"Rank",scoreWidgetPlayers:"Players",scoreWidgetProgress:"To next tier",scoreWidgetView:"View details",scoreWidgetLoading:"Refreshing score...",teacherTitle:"Presented by",teacherSubtitle:"Miyaad Safar Al-Malki",teacherMessage:"A heartfelt thanks to Ms. Miyaad Safar Al-Malki for curating these inspiring challenges."}},u=ae=>i[_.value][ae],r=V(()=>n.view||"");me(_,ae=>{localStorage.setItem("ml_lang",ae),document.documentElement.dir=b.value,document.documentElement.lang=ae});const o=L(localStorage.getItem("ml_theme")||"light"),g=L(!1),q=L(!1),N=L([]);function j(ae){document.documentElement.setAttribute("data-ml-theme",ae)}let k=null;function c(){g.value=!0,window.clearTimeout(c.timer),c.timer=window.setTimeout(()=>{g.value=!1},360)}function d(ae){N.value=N.value.filter(se=>se.id!==ae)}function v(){c(),_.value=_.value==="ar"?"en":"ar"}function $(){c(),o.value=o.value==="light"?"dark":"light"}me(o,ae=>{localStorage.setItem("ml_theme",ae),j(ae)});function H(){if(typeof window=="undefined")return;const ae=window.matchMedia("(max-width: 1024px)").matches;q.value=ae,ae||(de.value=!1)}function M(ae){ce.value&&(ce.value.contains(ae.target)||(le.value=!1))}async function A(ae,se={}){const ie=new URLSearchParams(se).toString(),Ae=await fetch(ae+(ie?`?${ie}`:""),{method:"GET",credentials:"include"}),We=await Ae.json().catch(()=>({}));if(!Ae.ok)throw We;return We}const U=L("player"),J=L("");async function X(){try{const ae=await A("/api/method/mathematics_leaders.api.get_my_details.get_me"),se=ae==null?void 0:ae.message;if(!(se!=null&&se.ok)){x.replace("/");return}const ie=se.profile||{};U.value=ie.username||"player",J.value=ie.full_name||"",ie.language&&!localStorage.getItem("ml_lang")&&(_.value=ie.language)}catch{x.replace("/")}}const le=L(!1),ce=L(null),de=L(!1),xe=ve(Object.fromEntries(a.map(ae=>[ae.id,!1]))),he=L(((ot=a[0])==null?void 0:ot.id)||"level1"),Se=L(null);function Pe(){de.value=!de.value}function Fe(ae){x.push(ae)}async function Ve(){await A("/api/method/logout"),x.replace("/")}function xt(ae){xe[ae]=!xe[ae]}function lt(ae){return!!xe[ae]}function At(ae,se){xe[ae]=!0,he.value=ae,Se.value=se,q.value&&(de.value=!0),x.currentRoute.value.path!=="/home"&&x.push("/home")}function Dt(ae,se){return he.value===ae&&Se.value===se}const ze=V(()=>{if(n.view&&S[n.view])return{level:null,challenge:null};if(!Se.value)return{level:a.find(se=>se.id===he.value)||null,challenge:null};for(const ae of a){const se=ae.challenges.find(ie=>ie.id===Se.value);if(se)return{level:ae,challenge:se}}return{level:a.find(ae=>ae.id===he.value)||null,challenge:null}}),st=V(()=>{if(n.view&&S[n.view])return S[n.view];const ae=Se.value;return ae?z[ae]:null});ge(()=>{document.documentElement.dir=b.value,document.documentElement.lang=_.value,j(o.value),X(),w.refresh(),H(),q.value&&(de.value=!0),typeof window!="undefined"&&window.addEventListener("resize",H),document.addEventListener("click",M),k=Vu(ae=>{const se=ae.detail||{};if(!se.message)return;const ie={id:se.id||Math.random().toString(36).slice(2),message:se.message,type:se.type||"info"};N.value.push(ie),N.value.length>4&&N.value.shift();const Ae=Math.max(1500,se.duration||2600);window.setTimeout(()=>d(ie.id),Ae)})}),tt(()=>{k&&k(),window.clearTimeout(c.timer),typeof window!="undefined"&&window.removeEventListener("resize",H),document.removeEventListener("click",M)});const Mt=new URL("/assets/mathematics_leaders/frontend/assets/logo3.jpeg",import.meta.url).href;return(ae,se)=>(l(),s("div",{class:oe(["dashboard",o.value,{transitioning:g.value}]),dir:b.value},[se[7]||(se[7]=Ye('<div class="dashboard__background" aria-hidden="true" data-v-b8c7ee6c><span class="glow glow-one" data-v-b8c7ee6c></span><span class="glow glow-two" data-v-b8c7ee6c></span><span class="glow glow-three" data-v-b8c7ee6c></span><span class="mesh" data-v-b8c7ee6c></span></div>',1)),B(Nt,{name:"toast-fade",tag:"div",class:"toasts","aria-live":"polite"},{default:be(()=>[(l(!0),s(te,null,ne(N.value,ie=>(l(),s("div",{key:ie.id,class:oe(["toast",ie.type])},[se[2]||(se[2]=e("span",{class:"toast__dot"},null,-1)),e("p",null,t(ie.message),1),e("button",{type:"button",class:"toast__close",onClick:Ae=>d(ie.id)},"×",8,sv)],2))),128))]),_:1}),e("header",ov,[e("div",rv,[q.value?(l(),s("button",{key:0,class:"topbar__menu",type:"button",onClick:Pe,"aria-expanded":!de.value,"aria-label":de.value?_.value==="ar"?"فتح قائمة التحديات":"Open challenges":_.value==="ar"?"إخفاء قائمة التحديات":"Hide challenges"},[de.value?(l(),De(W(Ja),{key:0})):(l(),De(W(Va),{key:1,style:ue({transform:b.value==="rtl"?"scaleX(-1)":""})},null,8,["style"]))],8,cv)):re("",!0),e("div",iv,[e("div",uv,[e("img",{src:W(Mt),alt:"logo"},null,8,dv)]),e("div",vv,[e("span",hv,t(i[_.value].brand),1),e("span",pv,t(i[_.value].tagline),1)])])]),e("div",fv,[B(W(Ha),{class:"wave"}),e("div",mv,[e("h1",null,t(i[_.value].hello)+" "+t(J.value||U.value),1),e("p",null,t(u("sub")),1)])]),e("div",gv,[e("button",{class:"action-btn",type:"button","aria-label":o.value==="dark"?_.value==="ar"?"التبديل إلى الوضع الفاتح":"Switch to light theme":_.value==="ar"?"التبديل إلى الوضع الداكن":"Switch to dark theme",onClick:$},[o.value==="light"?(l(),De(W(an),{key:0})):(l(),De(W(Xa),{key:1}))],8,_v),e("button",{class:"action-btn",type:"button","aria-label":_.value==="ar"?"Switch to English":"التبديل إلى العربية",onClick:v},t(_.value==="ar"?"EN":"ع"),9,bv),e("div",{class:"profile",ref_key:"profileRef",ref:ce,onClick:se[1]||(se[1]=Ge(ie=>le.value=!le.value,["stop"]))},[e("div",yv,[K.value?(l(),s("span",{key:0,class:"avatar__image",style:ue({backgroundImage:`url(${K.value})`})},null,4)):(l(),s("span",kv,t(Z.value),1))]),e("div",wv,[e("span",$v,t(J.value||U.value),1),e("span",Cv,t(i[_.value].brand),1)]),B(W(dt),{class:oe(["profile__chevron",{open:le.value}])},null,8,["class"]),B(ke,{name:"fade"},{default:be(()=>[le.value?(l(),s("ul",Sv,[e("li",null,[e("button",{type:"button",onClick:se[0]||(se[0]=ie=>Fe("/settings"))},[B(W(Za)),se[3]||(se[3]=Y()),e("span",null,t(i[_.value].settings),1)])]),e("li",null,[e("button",{type:"button",class:"danger",onClick:Ve},[B(W(Ya)),se[4]||(se[4]=Y()),e("span",null,t(i[_.value].logout),1)])])])):re("",!0)]),_:1})],512)])]),e("main",xv,[e("section",Av,[e("article",Dv,[e("div",Mv,[B(W(ht))]),e("div",Tv,[e("h2",null,t(i[_.value].brand),1),e("p",null,t(i[_.value].pickPrompt),1)]),e("div",Ev,[e("div",Nv,[e("span",Lv,t(i[_.value].scoreWidgetRank),1),e("strong",null,t(ae.scoreRankDisplay),1)]),e("div",Pv,[e("span",zv,t(i[_.value].scoreWidgetPlayers),1),e("strong",null,t(D.value),1)])])]),e("article",{class:oe(["score-card",{loading:O.value,pulse:I.value}]),"aria-busy":O.value},[O.value?(l(),s("div",Ov,[B(W(Ue),{class:"overlay-spinner"})])):re("",!0),e("div",Rv,[(l(),s("svg",Iv,[se[5]||(se[5]=e("defs",null,[e("linearGradient",{id:"dashboardScoreGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[e("stop",{offset:"0%","stop-color":"#c6a034"}),e("stop",{offset:"100%","stop-color":"#0f8a3e"})])],-1)),se[6]||(se[6]=e("circle",{class:"ring-bg",cx:"60",cy:"60",r:"52"},null,-1)),e("circle",{class:"ring-fg",cx:"60",cy:"60",r:"52",stroke:"url(#dashboardScoreGradient)",style:ue({"--progress":G.value})},null,4)])),e("div",Bv,[B(ke,{name:"score-flip",mode:"out-in"},{default:be(()=>[(l(),s("span",{class:"score-card__points",key:R.value},t(O.value?"...":C.value),1))]),_:1}),e("small",null,t(i[_.value].scoreWidgetTitle),1)])]),e("div",Fv,[e("span",Uv,t(m.value),1),e("p",Qv,t(O.value?i[_.value].scoreWidgetLoading:i[_.value].scoreWidgetSubtitle),1),e("div",{class:"progress",role:"progressbar","aria-valuenow":E.value,"aria-valuemin":"0","aria-valuemax":"100"},[e("div",Gv,[e("div",{class:"progress__fill",style:ue({"--progress":G.value})},null,4)]),e("div",Vv,[e("span",null,t(E.value)+"%",1),e("button",{type:"button",class:"progress__link",onClick:F},t(i[_.value].scoreWidgetView),1)])],8,qv)])],10,jv),e("article",Wv,[e("div",Hv,t(i[_.value].teacherTitle),1),e("h3",null,t(i[_.value].teacherSubtitle),1),e("p",null,t(i[_.value].teacherMessage),1)])]),e("section",Kv,[e("aside",{class:oe(["challenge-list",{collapsed:de.value&&q.value}])},[e("header",Yv,[e("h2",null,t(i[_.value].challenge),1),e("p",null,t(i[_.value].pickPrompt),1)]),e("div",Jv,[(l(),s(te,null,ne(a,ie=>e("div",{class:"level-block",key:ie.id},[e("button",{type:"button",class:"level-head",onClick:Ae=>xt(ie.id)},[e("div",Zv,[B(W(mt),{class:"level-head__icon"}),e("span",eh,t(ie.label[_.value]),1)]),e("span",th,t(ie.challenges.length),1),B(W(dt),{class:oe(["level-head__chevron",{open:lt(ie.id)}])},null,8,["class"])],8,Xv),B(ke,{name:"fade"},{default:be(()=>[lt(ie.id)?(l(),s("div",ah,[(l(!0),s(te,null,ne(ie.challenges,Ae=>(l(),s("button",{key:Ae.id,type:"button",class:oe(["challenge-card",{active:Dt(ie.id,Ae.id)}]),onClick:We=>At(ie.id,Ae.id)},[e("span",lh,t(Ae.symbol),1),e("div",sh,[e("span",oh,t(Ae.label[_.value]),1),e("p",rh,t(Ae.summary[_.value]),1)]),e("span",ch,t(i[_.value].cardCTA),1)],10,nh))),128))])):re("",!0)]),_:2},1024)])),64))])],2),e("div",ih,[e("div",uh,[ze.value.level?(l(),s("span",dh,t(ze.value.level.label[_.value]),1)):re("",!0),e("div",vh,[r.value==="scores"?(l(),s("h3",hh,t(i[_.value].myScores),1)):r.value==="settings"?(l(),s("h3",ph,t(i[_.value].settings),1)):ze.value.challenge?(l(),s("h3",fh,t(ze.value.challenge.label[_.value]),1)):(l(),s("h3",mh,t(i[_.value].brand),1)),ze.value.challenge?(l(),s("p",gh,t(ze.value.challenge.summary[_.value]),1)):r.value==="scores"?(l(),s("p",_h,t(i[_.value].scoreWidgetSubtitle),1)):r.value==="settings"?(l(),s("p",bh,t(i[_.value].settings),1)):(l(),s("p",yh,t(i[_.value].pickPrompt),1))])]),e("div",kh,[B(ke,{name:"preview-fade",mode:"out-in"},{default:be(()=>{var ie;return[st.value?(l(),De(Re(st.value),Pt({key:r.value||((ie=ze.value.challenge)==null?void 0:ie.id)||"welcome",class:"preview-component"},{lang:_.value,theme:o.value}),null,16)):(l(),s("div",wh,[B(W(ht)),e("p",null,t(i[_.value].pickPrompt),1)]))]}),_:1})])])])])],10,lv))}},Ch=pe($h,[["__scopeId","data-v-b8c7ee6c"]]),Sh=zt({history:jt("/math-leaders-games/"),routes:[{path:"/",redirect:"/login"},{path:"/login",component:Ia},{path:"/home",component:Ch},{path:"/scores",component:()=>ct(()=>import("./ScoresView.js"),__vite__mapDeps([0,1]))},{path:"/settings",component:()=>ct(()=>import("./SettingsView.js"),__vite__mapDeps([2,1]))}]});Ot(Ft).use(Sh).mount("#app");export{Ch as D};
//# sourceMappingURL=platform.js.map
