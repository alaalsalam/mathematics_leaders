{"version":3,"mappings":"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","names":["_hoisted_1","_openBlock","_createElementBlock","_createVNode","_component_RouterView","BASE","lang","ref","dir","computed","t","key","isArabic","toggleLang","theme","isDark","themeToggleText","themeAria","toggleTheme","applyTheme","value","watch","onMounted","showSignup","inForm","upForm","submitting","notice","logoUrl","heroTitle","heroSubtitle","heroHighlights","statBlocks","get","url","params","qs","response","data","extractErr","error","list","first","goHome","profile","payload","submit","loginRes","_a","_b","_createElementVNode","_hoisted_2","_hoisted_4","_hoisted_5","_cache","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_9","_hoisted_10","_hoisted_11","_unref","_hoisted_13","_hoisted_14","_hoisted_15","_Fragment","_renderList","feature","idx","_hoisted_16","_hoisted_17","_hoisted_18","stat","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_normalizeClass","_hoisted_24","_hoisted_25","_Transition","_hoisted_36","_hoisted_37","$event","_vModelText","_hoisted_39","_hoisted_40","_hoisted_42","_hoisted_43","_hoisted_46","_createTextVNode","_hoisted_26","_hoisted_27","_hoisted_29","_hoisted_30","_hoisted_32","_hoisted_33","_hoisted_35","_hoisted_47","toKebabCase","string","toCamelCase","match","p1","p2","toPascalCase","camelCase","mergeClasses","classes","className","index","array","isEmptyString","defaultAttributes","Icon","name","iconNode","absoluteStrokeWidth","absoluteStrokeWidthKebabCase","strokeWidth","strokeWidthKebabCase","size","color","props","slots","h","child","createLucideIcon","iconName","attrs","Activity","Award","Check","ChevronDown","ChevronLeft","Circle","Crown","Diamond","Eraser","Hand","Image","KeyRound","LoaderCircle","LogOut","Menu","Moon","RefreshCw","RotateCcw","Settings","ShieldCheck","Sparkles","Square","Sun","Target","TrendingUp","Triangle","Upload","successUrl$3","clapUrl","wrongUrl$5","__props","v","r","T","k","sndSuccess","successUrl","sndClap","sndWrong","wrongUrl","SHAPE_COMP","SHAPE_TYPES","shapeComp","rndInt","a","b","shuffle","q","reactive","rowA","rowB","rowS","newPuzzle","dA","dB","A","B","S","digitsPresent","n","howMany","hideDigits","typesPicked","d","i","used","tokenize","str","ch","sh","s","onDigitDragStart","e","digit","onShapeDrop","shape","checkNow","onDragOver","resetAssign","isFilled","makeNumber","tokens","tok","isCorrect","overlay","pushToast","nextQuestion","toasts","msg","type","id","x","_hoisted_3","_createBlock","_resolveDynamicComponent","_hoisted_8","_hoisted_12","successUrl$2","wrongUrl$4","L","sOK","sClap","sWrong","stepsPool","j","step","base","grid","blanks","answerMap","manualDrafts","bankCounts","solved","toast","titleText","ruleText","keyOf","c","buildGrid","start","stp","g","row","pickBlanks","all","filtered","buildBankCounts","counts","bankList","out","ct","thousands","addPoint","resetAnswers","setAnswer","fromManual","old","onDragStart","ev","allowDrop","onDrop","clearCell","onManualInput","commitManual","raw","num","numDir","successUrl$1","wrongUrl$3","N","D","questions","solvedCount","allAnswered","makeAns","validPair","mkQuestion","alts","addAlt","y","opts","da","db","newRound","resetRound","pickOption","unjudge","op","wrongUrl$2","factorsR","factorsC","valueAt","keyH","pickFactors","bodyCells","shownHelp","candidates","chosen","rebuildBank","tag","rc","_","resetAll","wrongUrl$1","EXTRA_CHOICES","circles","squares","buildTriangle","vals","cl","cr","keys","neededExtras","usedValues","answerValues","pool","candidate","_c","target","picks","pickedSum","p","rows","cols","permCols","solution","resetPicks","toggleCell","rowsDistinct","rs","colsDistinct","cs","val","baseN","buildPyramid","keep","realValues","minCandidate","maxCandidate","_normalizeStyle","expr","digits","ops","buildTarget","nums","pick","arr","op1","op2","op3","tries","addToken","backspace","clearAll","usage","u","onlyAllowedChars","usesExactDigits","safeEval","o","M","LO_SHU","symmetries","mat","rot","m","flipH","uniq","seen","SHAPES","buildMagic","off","keepSet","filledMatrix","noDuplicates","sumsOk","bank","answer","isMul2","isMul3","isMul4","isMul5","rand6","predicate","rand6_last","extra","picked","addUnique","a5","a2","a4","a3","core","distract","dropTo","options","buildPuzzle","big","small","gen","pair","puzzleBank","currentPuzzle","lastPuzzleId","pickNextPuzzle","buildBank","puzzle","digitsMap","formatDigit","AVal","NVal","lhs","rhs","copy","toArabicNumber","formatNumberByLang","unitsWord","optionTemplates","buildOptions","magnitude","templates","buildPremiseLines","squareTotal","triangleTotal","correctId","selected","feedback","shuffledOptions","applyOptions","checkAnswer","wasSolved","randomizePrompt","optionsList","premiseLines","line","option","totalCounts","displayRows","cells","usageOf","available","valStr","total","remaining","generatePyramid","built","prev","totals","current","items","cIdx","locale","colourPalette","computeHints","numbers","sorted","sum","acc","mean","median","range","cards","extraCounts","answerSource","hints","resetReactiveMap","obj","colours","arrangement","minVal","maxVal","lower","upper","extras","cardId","source","clearCard","count","formatNumber","card","item","puzzles","coordKey","resetSelection","pickPuzzle","next","set","selectedList","selectedSum","cell","isLine","sameRow","sameCol","diag1","diag2","checkLine","isSolutionCell","decimals","makeEqA","multiplier","offset","aDigit","bDigit","multiplierAr","multiplierEn","offsetFixed","offsetSuffixEn","offsetSuffixAr","values","left","right","makeEqB","baseLeft","baseRight","cDigit","dDigit","result","baseLeftAr","baseRightAr","baseLeftEn","baseRightEn","resultEn","resultAr","makeEqC","secondBase","eDigit","fDigit","secondBaseAr","secondBaseEn","makeEqD","gDigit","hDigit","answers","slotsMeta","initPuzzle","meta","eq","slotName","clearSlot","allFilled","slot","checkAll","equations","valid","token","slotTemplate","placements","expectedDigits","digitsPool","resetMaps","group","valueOf","checkSolution","n1","d1","n2","d2","res","_hoisted_28","requirements","decimal","fraction","slotsFilled","decimalValue","fractionValue","numDigits","denDigits","numerator","denominator","dec","frac","_hoisted_31","withCoords","edge","nodes","from","to","path","edges","selectedEdges","ed","product","hasEdge","resetPath","undoLast","onNodeClick","node","end","last","newPath","checkPath","assignments","letter","clearAssignment","decodedMessage","code","entry","allAssigned","resetAssignments","EVENT_NAME","emitToast","message","duration","onToast","listener","score","rank","totalPlayers","bestScore","loading","lastUpdated","profileImage","username","gameUserName","fetchScore","force","now","err","useGameScore","sparkSteps","donutRadius","refresh","detectLang","detectTheme","langState","isRTL","strings","tiers","scoreValue","bestValue","tierIndex","tier","currentTier","nextTier","tierLabel","_d","progress","span","intl","formattedScore","formattedBest","formattedRank","totalPlayersLabel","lastUpdatedLabel","delta","trendPoints","peak","baseline","ratio","wave","sparklineGeometry","pts","width","height","max","min","sparklinePath","pt","sparklineArea","trendDelta","donutCircumference","donutOffset","progressPercent","percentile","iconLibrary","insightCards","metrics","handleRefresh","langObserver","themeObserver","storageHandler","updateLang","updateTheme","onUnmounted","metric","store","avatarFile","avatarPreview","avatarStatus","passwordForm","verifyState","passwordStatus","displayName","fallbackInitial","avatarUrl","handleFileChange","event","file","clearSelection","uploadAvatar","docname","fd","uploadRes","uploadData","fileUrl","saveRes","saveData","verifyCurrent","updatePassword","confirm","resetPasswordForm","ImageIcon","Loader2","router","useRouter","levels","Challenge1","Challenge2","Challenge3","Challenge4","Challenge5","Challenge6","Challenge7","challenge_level_two_1","challenge_level_two_2","challenge_level_two_3","challenge_level_two_4","challenge_level_two_5","challenge_level_two_6","challenge_level_three_1","challenge_level_three_2","challenge_level_three_3","challenge_level_three_4","challenge_level_three_5","challenge_level_three_6","challenge_level_three_8","challenge_level_three_9","scoreStore","dashTiers","scoreTier","scoreTierName","scoreProgress","scoreFormatter","scoreDisplay","totalPlayersDisplay","scoreLoading","scoreProgressPercent","avatarInitial","fullName","scoreDisplayKey","progressSpring","scorePulse","viewScores","goto","componentRegistry","level","challenge","specialViews","MyScores","SettingsPage","extraView","shellTransitioning","isCompact","globalToasts","disposeToastListener","animateShell","dismissToast","switchLang","switchTheme","handleViewportChange","compact","sidebarCollapsed","handleClickOutside","profileRef","profileOpen","fetchMe","prof","expandedLevels","lvl","selectedLevel","selectedChallenge","toggleSidebar","logout","toggleLevel","levelId","isExpanded","selectChallenge","challengeId","isActiveChallenge","currentSelection","l","currentComponent","detail","lifetime","_TransitionGroup","_withModifiers","scoreRankDisplay","_hoisted_34","_hoisted_38","_hoisted_44","_hoisted_45","_hoisted_48","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_68","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_mergeProps","_hoisted_74","createRouter","createWebHashHistory","Login","Home","__vitePreload","createApp","App"],"ignoreList":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],"sources":["../../../../frontend/src/App.vue","../../../../frontend/src/components/Index.vue","../../../../frontend/node_modules/lucide-vue-next/dist/esm/shared/src/utils.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/defaultAttributes.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/Icon.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/createLucideIcon.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/activity.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/award.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/check.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/chevron-down.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/chevron-left.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/circle.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/crown.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/diamond.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/eraser.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/hand.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/image.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/key-round.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/loader-circle.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/log-out.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/menu.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/moon.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/refresh-cw.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/rotate-ccw.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/settings.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/shield-check.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/sparkles.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/square.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/sun.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/target.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/trending-up.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/triangle.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/upload.js","../../../../frontend/src/assets/sounds/success.mp3","../../../../frontend/src/assets/sounds/clap.mp3","../../../../frontend/src/assets/sounds/wrong.mp3","../../../../frontend/src/pages/challenges/challenge_1.vue","../../../../frontend/src/assets/sounds/success2.mp3","../../../../frontend/src/assets/sounds/wrong2.mp3","../../../../frontend/src/pages/challenges/challenge_2.vue","../../../../frontend/src/assets/sounds/success3.mp3","../../../../frontend/src/assets/sounds/wrong3.mp3","../../../../frontend/src/pages/challenges/challenge_3.vue","../../../../frontend/src/assets/sounds/success4.mp3","../../../../frontend/src/assets/sounds/wrong4.mp3","../../../../frontend/src/pages/challenges/challenge_4.vue","../../../../frontend/src/assets/sounds/wrong5.mp3","../../../../frontend/src/pages/challenges/challenge_5.vue","../../../../frontend/src/pages/challenges/challenge_6.vue","../../../../frontend/src/pages/challenges/challenge_7.vue","../../../../frontend/src/assets/sounds/oh_no.mp3","../../../../frontend/src/pages/challenges/challenge_level_two_1.vue","../../../../frontend/src/pages/challenges/challenge_level_two_2.vue","../../../../frontend/src/pages/challenges/challenge_level_two_3.vue","../../../../frontend/src/pages/challenges/challenge_level_two_4.vue","../../../../frontend/src/pages/challenges/challenge_level_two_5.vue","../../../../frontend/src/pages/challenges/challenge_level_two_6.vue","../../../../frontend/src/pages/challenges/challenge_level_three_1.vue","../../../../frontend/src/pages/challenges/challenge_level_three_2.vue","../../../../frontend/src/pages/challenges/challenge_level_three_3.vue","../../../../frontend/src/pages/challenges/challenge_level_three_4.vue","../../../../frontend/src/pages/challenges/challenge_level_three_5.vue","../../../../frontend/src/pages/challenges/challenge_level_three_6.vue","../../../../frontend/src/pages/challenges/challenge_level_three_8.vue","../../../../frontend/src/pages/challenges/challenge_level_three_9.vue","../../../../frontend/src/utils/toastBus.js","../../../../frontend/src/composables/useGameScore.js","../../../../frontend/src/pages/other/my_scores.vue","../../../../frontend/src/pages/other/settings.vue","../../../../frontend/src/components/Dashboard.vue","../../../../frontend/src/router/index.js","../../../../frontend/src/main.js"],"sourcesContent":["<script setup>\n</script>\n\n<template>\n  <!-- <div class=\"min-h-screen bg-base-200\">\n\n    <div class=\"navbar bg-base-100 shadow mb-6 px-4\">\n      <div class=\"flex-1 font-semibold\">Mathematics Leaders</div>\n      <div class=\"flex-none gap-2\">\n        <RouterLink class=\"btn btn-ghost\" to=\"/\">Home</RouterLink>\n        <RouterLink class=\"btn btn-ghost\" to=\"/login\">Login</RouterLink>\n        <RouterLink class=\"btn btn-primary\" to=\"/register\">Register</RouterLink>\n      </div>\n    </div> -->\n\n    <!-- Page Content -->\n    <main class=\"p-6\">\n      <!-- <div class=\"p-6\">I render ✔</div> -->\n      <RouterView />\n    </main>\n  <!-- </div> -->\n</template>\n","<script setup>\nimport { ref, computed, watch, onMounted } from 'vue'\n\nconst lang = ref(localStorage.getItem('ml_lang') || 'ar')\nconst dir = computed(() => (lang.value === 'ar' ? 'rtl' : 'ltr'))\nconst t = (key) => ({\n  en: {\n    signin: 'Sign In',\n    signup: 'Create Account',\n    username: 'Username',\n    password: 'Password',\n    confirm: 'Confirm Password',\n    login: 'Login',\n    register: 'Signup',\n    toSignup: 'Create account',\n    toSignin: 'Back to login',\n    forgot: 'Forgot password?'\n  },\n  ar: {\n    signin: 'تسجيل الدخول',\n    signup: 'إنشاء حساب',\n    username: 'اسم المستخدم',\n    password: 'كلمة المرور',\n    confirm: 'تأكيد كلمة المرور',\n    login: 'دخول',\n    register: 'تسجيل',\n    toSignup: 'إنشاء حساب',\n    toSignin: 'العودة لتسجيل الدخول',\n    forgot: 'نسيت كلمة المرور؟'\n  }\n}[lang.value][key])\n\nconst isArabic = computed(() => lang.value === 'ar')\nfunction toggleLang() {\n  lang.value = isArabic.value ? 'en' : 'ar'\n}\n\nconst theme = ref(localStorage.getItem('ml_theme') || 'light')\nconst isDark = computed(() => theme.value === 'dark')\nconst themeToggleText = computed(() => (isArabic.value ? (isDark.value ? 'فاتح' : 'داكن') : isDark.value ? 'Light' : 'Dark'))\nconst themeAria = computed(() =>\n  isArabic.value\n    ? isDark.value\n      ? 'التبديل إلى الوضع الفاتح'\n      : 'التبديل إلى الوضع الداكن'\n    : isDark.value\n    ? 'Switch to light theme'\n    : 'Switch to dark theme'\n)\nfunction toggleTheme() {\n  theme.value = isDark.value ? 'light' : 'dark'\n}\n\nfunction applyTheme(value) {\n  document.documentElement.setAttribute('data-ml-theme', value)\n}\n\nwatch(lang, (value) => {\n  localStorage.setItem('ml_lang', value)\n  document.documentElement.dir = dir.value\n  document.documentElement.lang = value\n})\n\nwatch(theme, (value) => {\n  localStorage.setItem('ml_theme', value)\n  applyTheme(value)\n})\n\nonMounted(() => {\n  document.documentElement.dir = dir.value\n  document.documentElement.lang = lang.value\n  applyTheme(theme.value)\n})\n\nconst showSignup = ref(false)\nconst inForm = ref({ username: '', password: '' })\nconst upForm = ref({ username: '', password: '', confirm: '' })\nconst submitting = ref(false)\nconst notice = ref(null)\n\nwatch(showSignup, () => {\n  notice.value = null\n})\n\nconst logoUrl = new URL('../assets/images/logo3.jpeg', import.meta.url).href\n\nconst heroTitle = computed(() => (isArabic.value ? 'منصة زعماء الرياضيات' : 'Mathematics Leaders Platform'))\nconst heroSubtitle = computed(() =>\n  isArabic.value\n    ? 'تعلم الرياضيات بأسلوب ممتع وتفاعلي مصمم للقادة الصغار.'\n    : 'Master mathematics with playful, interactive journeys built for young leaders.'\n)\nconst heroHighlights = computed(() =>\n  isArabic.value\n    ? ['برامج تفاعلية مدعومة بالذكاء الاصطناعي', 'تتبع تقدّم ذكي ومباشر', 'مجتمع محفّز من المعلمين والطلاب']\n    : ['Interactive, AI-guided programmes', 'Real-time progress insights', 'A supportive teacher & student community']\n)\nconst statBlocks = computed(() =>\n  isArabic.value\n    ? [\n        { value: '12+', label: 'وحدة تعليمية متدرجة' },\n        { value: '4K', label: 'طالب نشط' },\n        { value: '92%', label: 'نسبة إكمال المهام' }\n      ]\n    : [\n        { value: '12+', label: 'Adaptive learning tracks' },\n        { value: '4K', label: 'Active learners' },\n        { value: '92%', label: 'Task completion rate' }\n      ]\n)\n\nconst BASE = ''\n\nasync function get(url, params = {}) {\n  const qs = new URLSearchParams(params).toString()\n  const response = await fetch(BASE + url + (qs ? `?${qs}` : ''), {\n    method: 'GET',\n    credentials: 'include'\n  })\n  const data = await response.json().catch(() => ({}))\n  if (!response.ok) throw data\n  return data\n}\n\nfunction extractErr(error) {\n  if (typeof error === 'string') return error\n  if (error?._server_messages) {\n    try {\n      const list = JSON.parse(error._server_messages)\n      const first = list?.[0] && JSON.parse(list[0])\n      return first?.message || first?._error_message || 'Invalid Request'\n    } catch {}\n  }\n  return error?.message || error?.exc || 'Invalid Request'\n}\n\nfunction goHome(profile) {\n  const payload = profile || { username: inForm.value.username }\n  localStorage.setItem('ml_profile', JSON.stringify({ ...payload, language: lang.value }))\n  window.location.href = '/math-leaders-games/#/home'\n}\n\nasync function submit() {\n  submitting.value = true\n  notice.value = null\n  try {\n    if (showSignup.value) {\n      if (!upForm.value.username || !upForm.value.password || !upForm.value.confirm) {\n        throw {\n          message: isArabic.value ? 'الرجاء ملء كل الحقول.' : 'Please fill all fields.'\n        }\n      }\n      if (upForm.value.password !== upForm.value.confirm) {\n        throw {\n          message: isArabic.value ? 'كلمتا المرور غير متطابقتين.' : 'Passwords do not match.'\n        }\n      }\n\n      await get('/api/method/mathematics_leaders.api.signup_and_login.signup_user', {\n        username: upForm.value.username,\n        password: upForm.value.password,\n        language: lang.value\n      })\n\n      const loginRes = await get('/api/method/mathematics_leaders.api.signup_and_login.verify_login', {\n        usr: upForm.value.username,\n        pwd: upForm.value.password\n      })\n\n      goHome(loginRes?.message?.profile || { username: upForm.value.username })\n    } else {\n      const loginRes = await get('/api/method/mathematics_leaders.api.signup_and_login.verify_login', {\n        usr: inForm.value.username,\n        pwd: inForm.value.password\n      })\n      goHome(loginRes?.message?.profile || { username: inForm.value.username })\n    }\n  } catch (error) {\n    notice.value = extractErr(error)\n  } finally {\n    submitting.value = false\n  }\n}\n</script>\n\n<template>\n  <section :class=\"['landing', theme]\" :dir=\"dir\">\n    <div class=\"background\" aria-hidden=\"true\">\n      <span class=\"glow glow-one\"></span>\n      <span class=\"glow glow-two\"></span>\n      <span class=\"glow glow-three\"></span>\n      <span class=\"grid\"></span>\n    </div>\n\n    <div class=\"floating-controls\">\n      <button\n        type=\"button\"\n        class=\"control-btn theme-toggle\"\n        :aria-label=\"themeAria\"\n        @click=\"toggleTheme\"\n      >\n        <span class=\"control-icon\" aria-hidden=\"true\">\n          <svg v-if=\"isDark\" viewBox=\"0 0 24 24\" focusable=\"false\">\n            <circle cx=\"12\" cy=\"12\" r=\"4.2\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.6\" />\n            <line x1=\"12\" y1=\"2.4\" x2=\"12\" y2=\"5.4\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n            <line x1=\"12\" y1=\"18.6\" x2=\"12\" y2=\"21.6\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n            <line x1=\"2.4\" y1=\"12\" x2=\"5.4\" y2=\"12\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n            <line x1=\"18.6\" y1=\"12\" x2=\"21.6\" y2=\"12\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n            <line x1=\"5.4\" y1=\"5.4\" x2=\"7.7\" y2=\"7.7\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n            <line x1=\"16.3\" y1=\"16.3\" x2=\"18.6\" y2=\"18.6\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n            <line x1=\"5.4\" y1=\"18.6\" x2=\"7.7\" y2=\"16.3\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n            <line x1=\"16.3\" y1=\"7.7\" x2=\"18.6\" y2=\"5.4\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n          </svg>\n          <svg v-else viewBox=\"0 0 24 24\" focusable=\"false\">\n            <path\n              d=\"M15.8 21.2a7.6 7.6 0 0 1-6.9-10.6 6.9 6.9 0 0 0 8.5 8.5 7.6 7.6 0 0 1-1.6 2.1Z\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              stroke-width=\"1.6\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        </span>\n        <span class=\"control-text\">{{ themeToggleText }}</span>\n      </button>\n\n      <button\n        type=\"button\"\n        class=\"control-btn lang-toggle\"\n        :aria-label=\"isArabic ? 'Switch to English' : 'التبديل إلى العربية'\"\n        @click=\"toggleLang\"\n      >\n        <span>{{ isArabic ? 'EN' : 'ع' }}</span>\n      </button>\n    </div>\n\n    <div class=\"landing__wrapper\">\n      <div class=\"landing__intro\">\n        <div class=\"logo-card\">\n          <img :src=\"logoUrl\" alt=\"شعار زعماء الرياضيات\" />\n        </div>\n        <h1 class=\"intro__title\">{{ heroTitle }}</h1>\n        <p class=\"intro__subtitle\">{{ heroSubtitle }}</p>\n        <ul class=\"feature-grid\">\n          <li v-for=\"(feature, idx) in heroHighlights\" :key=\"idx\" class=\"feature-item\">\n            <span class=\"feature-index\">0{{ idx + 1 }}</span>\n            <span class=\"feature-text\">{{ feature }}</span>\n          </li>\n        </ul>\n        <div class=\"stats-row\">\n          <div v-for=\"(stat, idx) in statBlocks\" :key=\"idx\" class=\"stat-card\">\n            <span class=\"stat-value\">{{ stat.value }}</span>\n            <span class=\"stat-label\">{{ stat.label }}</span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"landing__auth\">\n        <div class=\"auth-card\">\n          <div class=\"auth-tabs\" role=\"tablist\">\n            <button\n              type=\"button\"\n              class=\"tab-btn\"\n              :class=\"{ active: !showSignup }\"\n              role=\"tab\"\n              :aria-selected=\"!showSignup\"\n              @click=\"showSignup = false\"\n            >\n              {{ t('signin') }}\n            </button>\n            <button\n              type=\"button\"\n              class=\"tab-btn\"\n              :class=\"{ active: showSignup }\"\n              role=\"tab\"\n              :aria-selected=\"showSignup\"\n              @click=\"showSignup = true\"\n            >\n              {{ t('signup') }}\n            </button>\n          </div>\n\n          <transition name=\"slide-fade\" mode=\"out-in\">\n            <form v-if=\"!showSignup\" key=\"signin\" class=\"auth-form\" @submit.prevent=\"submit\">\n              <div class=\"input-field\">\n                <label :for=\"isArabic ? 'signin-username-ar' : 'signin-username-en'\">{{ t('username') }}</label>\n                <input\n                  :id=\"isArabic ? 'signin-username-ar' : 'signin-username-en'\"\n                  v-model=\"inForm.username\"\n                  type=\"text\"\n                  :placeholder=\"t('username')\"\n                  autocomplete=\"username\"\n                  required\n                />\n              </div>\n              <div class=\"input-field\">\n                <label :for=\"isArabic ? 'signin-password-ar' : 'signin-password-en'\">{{ t('password') }}</label>\n                <input\n                  :id=\"isArabic ? 'signin-password-ar' : 'signin-password-en'\"\n                  v-model=\"inForm.password\"\n                  type=\"password\"\n                  :placeholder=\"t('password')\"\n                  autocomplete=\"current-password\"\n                  required\n                />\n              </div>\n              <div class=\"form-meta\">\n                <a href=\"#\">{{ t('forgot') }}</a>\n              </div>\n              <button class=\"primary-btn\" type=\"submit\" :disabled=\"submitting\">\n                <span>{{ t('login') }}</span>\n              </button>\n              <p class=\"switch-text\">\n                {{ isArabic ? 'لا تملك حساباً؟' : \"Don't have an account?\" }}\n                <button type=\"button\" @click=\"showSignup = true\">{{ t('toSignup') }}</button>\n              </p>\n            </form>\n\n            <form v-else key=\"signup\" class=\"auth-form\" @submit.prevent=\"submit\">\n              <div class=\"input-field\">\n                <label :for=\"isArabic ? 'signup-username-ar' : 'signup-username-en'\">{{ t('username') }}</label>\n                <input\n                  :id=\"isArabic ? 'signup-username-ar' : 'signup-username-en'\"\n                  v-model=\"upForm.username\"\n                  type=\"text\"\n                  :placeholder=\"t('username')\"\n                  autocomplete=\"username\"\n                  required\n                />\n              </div>\n              <div class=\"input-field\">\n                <label :for=\"isArabic ? 'signup-password-ar' : 'signup-password-en'\">{{ t('password') }}</label>\n                <input\n                  :id=\"isArabic ? 'signup-password-ar' : 'signup-password-en'\"\n                  v-model=\"upForm.password\"\n                  type=\"password\"\n                  :placeholder=\"t('password')\"\n                  autocomplete=\"new-password\"\n                  required\n                />\n              </div>\n              <div class=\"input-field\">\n                <label :for=\"isArabic ? 'signup-confirm-ar' : 'signup-confirm-en'\">{{ t('confirm') }}</label>\n                <input\n                  :id=\"isArabic ? 'signup-confirm-ar' : 'signup-confirm-en'\"\n                  v-model=\"upForm.confirm\"\n                  type=\"password\"\n                  :placeholder=\"t('confirm')\"\n                  autocomplete=\"new-password\"\n                  required\n                />\n              </div>\n              <button class=\"primary-btn\" type=\"submit\" :disabled=\"submitting\">\n                <span>{{ t('register') }}</span>\n              </button>\n              <p class=\"switch-text\">\n                {{ isArabic ? 'لديك حساب بالفعل؟' : 'Already have an account?' }}\n                <button type=\"button\" @click=\"showSignup = false\">{{ t('toSignin') }}</button>\n              </p>\n            </form>\n          </transition>\n\n          <p v-if=\"notice\" class=\"auth-notice\">{{ notice }}</p>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<style scoped>\n.landing {\n  position: relative;\n  min-height: 100vh;\n  padding: clamp(32px, 6vw, 64px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  background: var(--bg-gradient);\n  color: var(--text-primary);\n  transition: background 0.4s ease, color 0.4s ease;\n  --bg-gradient: linear-gradient(135deg, #fdfcf8 0%, #f4f6ef 45%, #e6efe2 100%);\n  --text-primary: #1f2a24;\n  --text-secondary: #335343;\n  --accent-green: #0f8a3e;\n  --accent-green-dark: #1c6b39;\n  --accent-gold: #c6a034;\n  --accent-gold-soft: rgba(198, 160, 52, 0.35);\n  --surface: rgba(255, 255, 255, 0.92);\n  --surface-soft: linear-gradient(120deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.65));\n  --surface-card-border: rgba(198, 160, 52, 0.28);\n  --surface-card-shadow: 0 30px 60px rgba(31, 42, 36, 0.18);\n  --feature-shadow: 0 12px 26px rgba(15, 138, 62, 0.12);\n  --stat-bg: rgba(24, 77, 45, 0.08);\n  --stat-border: rgba(24, 77, 45, 0.12);\n  --input-border: rgba(31, 42, 36, 0.12);\n  --input-bg: rgba(255, 255, 255, 0.96);\n  --input-focus-ring: rgba(15, 138, 62, 0.12);\n  --notice-bg: rgba(143, 41, 33, 0.1);\n  --notice-color: #8f2921;\n  --grid-color: rgba(31, 42, 36, 0.06);\n  --grid-opacity: 0.5;\n  --floating-shadow: 0 14px 30px rgba(15, 138, 62, 0.32);\n  --floating-shadow-hover: 0 18px 40px rgba(15, 138, 62, 0.36);\n  --control-icon: #ffffff;\n  --glow-green: rgba(15, 138, 62, 0.35);\n  --glow-gold: rgba(198, 160, 52, 0.4);\n  --glow-white: rgba(255, 255, 255, 0.3);\n  --tab-track: rgba(24, 77, 45, 0.08);\n  --primary-btn-shadow: 0 16px 28px rgba(15, 138, 62, 0.25);\n  --primary-btn-hover-shadow: 0 24px 36px rgba(15, 138, 62, 0.3);\n}\n\n.landing.dark {\n  --bg-gradient: linear-gradient(135deg, #050806 0%, #0e2419 45%, #041009 100%);\n  --text-primary: #f0f6f3;\n  --text-secondary: #c1d6cb;\n  --accent-green: #5ad48c;\n  --accent-green-dark: #2f9a54;\n  --accent-gold: #d6ba68;\n  --accent-gold-soft: rgba(214, 186, 104, 0.55);\n  --surface: rgba(10, 22, 16, 0.86);\n  --surface-soft: linear-gradient(140deg, rgba(30, 49, 38, 0.92), rgba(16, 30, 24, 0.78));\n  --surface-card-border: rgba(90, 212, 140, 0.22);\n  --surface-card-shadow: 0 32px 60px rgba(0, 0, 0, 0.45);\n  --feature-shadow: 0 16px 28px rgba(0, 0, 0, 0.36);\n  --stat-bg: rgba(20, 46, 33, 0.72);\n  --stat-border: rgba(90, 212, 140, 0.26);\n  --input-border: rgba(255, 255, 255, 0.14);\n  --input-bg: rgba(14, 28, 21, 0.9);\n  --input-focus-ring: rgba(90, 212, 140, 0.2);\n  --notice-bg: rgba(217, 99, 91, 0.22);\n  --notice-color: #ffd7d4;\n  --grid-color: rgba(255, 255, 255, 0.08);\n  --grid-opacity: 0.25;\n  --floating-shadow: 0 18px 36px rgba(0, 0, 0, 0.45);\n  --floating-shadow-hover: 0 26px 46px rgba(0, 0, 0, 0.55);\n  --control-icon: #0d1a13;\n  --glow-green: rgba(62, 171, 115, 0.55);\n  --glow-gold: rgba(214, 186, 104, 0.46);\n  --glow-white: rgba(32, 54, 42, 0.55);\n  --tab-track: rgba(90, 212, 140, 0.12);\n  --primary-btn-shadow: 0 20px 34px rgba(0, 0, 0, 0.4);\n  --primary-btn-hover-shadow: 0 28px 42px rgba(0, 0, 0, 0.5);\n}\n\n.background {\n  position: absolute;\n  inset: 0;\n  pointer-events: none;\n}\n\n.glow {\n  position: absolute;\n  filter: blur(120px);\n  opacity: 0.55;\n  transition: background 0.4s ease, opacity 0.4s ease;\n}\n\n.glow-one {\n  top: -10%;\n  left: 15%;\n  width: 320px;\n  height: 320px;\n  background: var(--glow-green);\n}\n\n.glow-two {\n  bottom: -20%;\n  right: 10%;\n  width: 420px;\n  height: 420px;\n  background: var(--glow-gold);\n}\n\n.glow-three {\n  top: 40%;\n  right: 35%;\n  width: 260px;\n  height: 260px;\n  background: var(--glow-white);\n}\n\n.grid {\n  position: absolute;\n  inset: 0;\n  background-image: radial-gradient(circle at 1px 1px, var(--grid-color) 1px, transparent 0);\n  background-size: 32px 32px;\n  opacity: var(--grid-opacity);\n  transition: opacity 0.4s ease;\n}\n\n.floating-controls {\n  position: absolute;\n  top: clamp(20px, 4vw, 36px);\n  inset-inline-end: clamp(20px, 4vw, 36px);\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 12px;\n  z-index: 25;\n}\n\n.control-btn {\n  border: none;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  padding: 12px 18px;\n  border-radius: 22px;\n  background: linear-gradient(135deg, var(--accent-green), var(--accent-gold));\n  color: #ffffff;\n  font-weight: 700;\n  font-size: 14px;\n  cursor: pointer;\n  box-shadow: var(--floating-shadow);\n  transition: transform 0.25s ease, box-shadow 0.25s ease, background 0.3s ease;\n}\n\n.control-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: var(--floating-shadow-hover);\n}\n\n.control-btn:focus-visible {\n  outline: none;\n  box-shadow: var(--floating-shadow-hover), 0 0 0 3px rgba(255, 255, 255, 0.32);\n}\n\n.control-icon {\n  display: grid;\n  place-items: center;\n  color: var(--control-icon);\n}\n\n.control-icon svg {\n  width: 26px;\n  height: 26px;\n}\n\n.control-text {\n  font-size: 12px;\n  letter-spacing: 0.08em;\n  text-transform: uppercase;\n}\n\n.lang-toggle {\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  padding: 0;\n  font-size: 18px;\n  letter-spacing: 0.08em;\n}\n\n.lang-toggle span {\n  line-height: 1;\n}\n\n.theme-toggle .control-icon {\n  color: #ffffff;\n}\n\n.landing__wrapper {\n  position: relative;\n  display: grid;\n  gap: clamp(32px, 5vw, 64px);\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n  max-width: 1120px;\n  width: 100%;\n  z-index: 10;\n}\n\n.landing__intro {\n  display: flex;\n  flex-direction: column;\n  gap: clamp(24px, 3vw, 36px);\n}\n\n.logo-card {\n  position: relative;\n  width: clamp(110px, 14vw, 160px);\n  aspect-ratio: 1 / 1;\n  border-radius: 24px;\n  display: grid;\n  place-items: center;\n  background: var(--surface-soft);\n  border: 1px solid var(--surface-card-border);\n  box-shadow: var(--surface-card-shadow);\n  backdrop-filter: blur(16px);\n  overflow: hidden;\n  animation: logoFloat 6s ease-in-out infinite;\n}\n\n.logo-card::before,\n.logo-card::after {\n  content: '';\n  position: absolute;\n  border-radius: 50%;\n  inset: 16%;\n  pointer-events: none;\n}\n\n.logo-card::before {\n  background: radial-gradient(circle, rgba(255, 255, 255, 0.55) 0%, transparent 70%);\n  opacity: 0.65;\n  animation: logoPulse 5.8s ease-in-out infinite;\n}\n\n.logo-card::after {\n  border: 2px solid var(--accent-gold-soft);\n  animation: logoPulse 4.5s ease-in-out infinite;\n}\n\n.logo-card img {\n  position: relative;\n  width: 76%;\n  height: auto;\n  z-index: 1;\n}\n\n.intro__title {\n  font-size: clamp(32px, 4vw, 52px);\n  font-weight: 800;\n  color: var(--text-primary);\n  margin: 0;\n}\n\n.intro__subtitle {\n  font-size: clamp(16px, 2.2vw, 20px);\n  line-height: 1.7;\n  max-width: 480px;\n  margin: 0;\n  color: var(--text-secondary);\n}\n\n.feature-grid {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: grid;\n  gap: 18px;\n}\n\n.feature-item {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 16px 20px;\n  border-radius: 18px;\n  background: var(--surface-soft);\n  box-shadow: var(--feature-shadow);\n  transition: transform 0.25s ease, box-shadow 0.25s ease, background 0.3s ease;\n}\n\n.feature-item:hover {\n  transform: translateY(-6px);\n}\n\n.feature-index {\n  font-weight: 700;\n  color: var(--accent-gold);\n  font-size: 18px;\n}\n\n.feature-text {\n  font-size: 16px;\n  color: var(--text-primary);\n}\n\n.stats-row {\n  display: grid;\n  grid-template-columns: repeat(3, minmax(0, 1fr));\n  gap: 16px;\n}\n\n.stat-card {\n  padding: 18px 20px;\n  border-radius: 16px;\n  background: var(--stat-bg);\n  border: 1px solid var(--stat-border);\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  text-align: start;\n  transition: background 0.3s ease, border 0.3s ease;\n}\n\n.stat-value {\n  font-size: 24px;\n  font-weight: 700;\n  color: var(--accent-green);\n}\n\n.stat-label {\n  font-size: 14px;\n  color: var(--text-secondary);\n}\n\n.landing__auth {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.auth-card {\n  width: min(100%, 420px);\n  padding: clamp(24px, 3vw, 32px);\n  border-radius: 28px;\n  background: var(--surface);\n  box-shadow: var(--surface-card-shadow);\n  backdrop-filter: blur(16px);\n  border: 1px solid var(--surface-card-border);\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n  transition: background 0.3s ease, border 0.3s ease, box-shadow 0.3s ease;\n}\n\n.auth-tabs {\n  display: grid;\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n  background: var(--tab-track);\n  border-radius: 18px;\n  padding: 4px;\n}\n\n.tab-btn {\n  border: none;\n  padding: 12px 16px;\n  background: transparent;\n  border-radius: 14px;\n  font-weight: 700;\n  font-size: 15px;\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: background 0.25s ease, color 0.25s ease, transform 0.25s ease;\n}\n\n.tab-btn.active {\n  background: linear-gradient(135deg, var(--accent-green), var(--accent-gold));\n  color: #ffffff;\n  transform: translateY(-2px);\n  box-shadow: 0 14px 24px rgba(0, 0, 0, 0.2);\n}\n\n.auth-form {\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n}\n\n.input-field {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.input-field label {\n  font-weight: 600;\n  color: var(--text-secondary);\n  font-size: 14px;\n}\n\n.input-field input {\n  padding: 14px 16px;\n  border-radius: 14px;\n  border: 1px solid var(--input-border);\n  background: var(--input-bg);\n  font-size: 15px;\n  color: var(--text-primary);\n  transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.3s ease;\n}\n\n.input-field input:focus {\n  border-color: var(--accent-green);\n  box-shadow: 0 0 0 4px var(--input-focus-ring);\n  outline: none;\n}\n\n.form-meta {\n  text-align: end;\n  font-size: 13px;\n}\n\n.form-meta a {\n  color: var(--accent-green);\n  text-decoration: none;\n  font-weight: 600;\n}\n\n.primary-btn {\n  position: relative;\n  border: none;\n  border-radius: 16px;\n  padding: 14px 16px;\n  font-weight: 700;\n  font-size: 16px;\n  background: linear-gradient(135deg, var(--accent-green), var(--accent-green-dark));\n  color: #ffffff;\n  cursor: pointer;\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\n  box-shadow: var(--primary-btn-shadow);\n}\n\n.primary-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  box-shadow: none;\n}\n\n.primary-btn:not(:disabled):hover {\n  transform: translateY(-2px);\n  box-shadow: var(--primary-btn-hover-shadow);\n}\n\n.primary-btn:focus-visible {\n  outline: none;\n  box-shadow: var(--primary-btn-hover-shadow), 0 0 0 3px var(--input-focus-ring);\n}\n\n.switch-text {\n  font-size: 14px;\n  color: var(--text-secondary);\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  justify-content: center;\n}\n\n.switch-text button {\n  border: none;\n  background: none;\n  color: var(--accent-gold);\n  font-weight: 700;\n  cursor: pointer;\n}\n\n.auth-notice {\n  text-align: center;\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--notice-color);\n  background: var(--notice-bg);\n  border-radius: 14px;\n  padding: 10px 14px;\n  transition: background 0.3s ease, color 0.3s ease;\n}\n\n.slide-fade-enter-active,\n.slide-fade-leave-active {\n  transition: all 0.28s ease;\n}\n\n.slide-fade-enter-from {\n  opacity: 0;\n  transform: translateY(12px);\n}\n\n.slide-fade-leave-to {\n  opacity: 0;\n  transform: translateY(-12px);\n}\n\n@keyframes logoFloat {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n}\n\n@keyframes logoPulse {\n  0% {\n    transform: scale(0.92);\n    opacity: 0.55;\n  }\n  50% {\n    transform: scale(1.05);\n    opacity: 0;\n  }\n  100% {\n    transform: scale(0.92);\n    opacity: 0.55;\n  }\n}\n\n@media (max-width: 1024px) {\n  .landing__wrapper {\n    grid-template-columns: minmax(0, 1fr);\n  }\n\n  .landing__intro {\n    align-items: center;\n    text-align: center;\n  }\n\n  .intro__subtitle {\n    max-width: 580px;\n  }\n\n  .feature-item {\n    justify-content: center;\n  }\n\n  .stats-row {\n    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n  }\n}\n\n@media (max-width: 680px) {\n  .landing {\n    padding: 24px 20px 40px;\n  }\n\n  .floating-controls {\n    flex-direction: row;\n    align-items: center;\n    gap: 10px;\n  }\n\n  .theme-toggle {\n    padding: 10px 14px;\n  }\n\n  .lang-toggle {\n    width: 54px;\n    height: 54px;\n    font-size: 16px;\n  }\n\n  .feature-item {\n    padding: 14px 16px;\n  }\n\n  .auth-card {\n    padding: 22px;\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .logo-card,\n  .logo-card::before,\n  .logo-card::after,\n  .feature-item:hover,\n  .control-btn:hover {\n    animation: none;\n    transform: none;\n  }\n}\n</style>\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\nconst isEmptyString = (value) => value === \"\";\n\nexport { isEmptyString, mergeClasses, toCamelCase, toKebabCase, toPascalCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  \"stroke-width\": 2,\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport { mergeClasses, toKebabCase, toPascalCase, isEmptyString } from './shared/src/utils.js';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst Icon = ({\n  name,\n  iconNode,\n  absoluteStrokeWidth,\n  \"absolute-stroke-width\": absoluteStrokeWidthKebabCase,\n  strokeWidth,\n  \"stroke-width\": strokeWidthKebabCase,\n  size = defaultAttributes.width,\n  color = defaultAttributes.stroke,\n  ...props\n}, { slots }) => {\n  return h(\n    \"svg\",\n    {\n      ...defaultAttributes,\n      ...props,\n      width: size,\n      height: size,\n      stroke: color,\n      \"stroke-width\": isEmptyString(absoluteStrokeWidth) || isEmptyString(absoluteStrokeWidthKebabCase) || absoluteStrokeWidth === true || absoluteStrokeWidthKebabCase === true ? Number(strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"]) * 24 / Number(size) : strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"],\n      class: mergeClasses(\n        \"lucide\",\n        props.class,\n        ...name ? [`lucide-${toKebabCase(toPascalCase(name))}-icon`, `lucide-${toKebabCase(name)}`] : [\"lucide-icon\"]\n      )\n    },\n    [...iconNode.map((child) => h(...child)), ...slots.default ? [slots.default()] : []]\n  );\n};\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => (props, { slots, attrs }) => h(\n  Icon,\n  {\n    ...attrs,\n    ...props,\n    iconNode,\n    name: iconName\n  },\n  slots\n);\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Activity = createLucideIcon(\"activity\", [\n  [\n    \"path\",\n    {\n      d: \"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",\n      key: \"169zse\"\n    }\n  ]\n]);\n\nexport { Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Award = createLucideIcon(\"award\", [\n  [\n    \"path\",\n    {\n      d: \"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526\",\n      key: \"1yiouv\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"8\", r: \"6\", key: \"1vp47v\" }]\n]);\n\nexport { Award as default };\n//# sourceMappingURL=award.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronDown = createLucideIcon(\"chevron-down\", [\n  [\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]\n]);\n\nexport { ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronLeft = createLucideIcon(\"chevron-left\", [\n  [\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]\n]);\n\nexport { ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Circle = createLucideIcon(\"circle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n]);\n\nexport { Circle as default };\n//# sourceMappingURL=circle.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Crown = createLucideIcon(\"crown\", [\n  [\n    \"path\",\n    {\n      d: \"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z\",\n      key: \"1vdc57\"\n    }\n  ],\n  [\"path\", { d: \"M5 21h14\", key: \"11awu3\" }]\n]);\n\nexport { Crown as default };\n//# sourceMappingURL=crown.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Diamond = createLucideIcon(\"diamond\", [\n  [\n    \"path\",\n    {\n      d: \"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z\",\n      key: \"1f1r0c\"\n    }\n  ]\n]);\n\nexport { Diamond as default };\n//# sourceMappingURL=diamond.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eraser = createLucideIcon(\"eraser\", [\n  [\n    \"path\",\n    {\n      d: \"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21\",\n      key: \"g5wo59\"\n    }\n  ],\n  [\"path\", { d: \"m5.082 11.09 8.828 8.828\", key: \"1wx5vj\" }]\n]);\n\nexport { Eraser as default };\n//# sourceMappingURL=eraser.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Hand = createLucideIcon(\"hand\", [\n  [\"path\", { d: \"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2\", key: \"1fvzgz\" }],\n  [\"path\", { d: \"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2\", key: \"1kc0my\" }],\n  [\"path\", { d: \"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8\", key: \"10h0bg\" }],\n  [\n    \"path\",\n    {\n      d: \"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15\",\n      key: \"1s1gnw\"\n    }\n  ]\n]);\n\nexport { Hand as default };\n//# sourceMappingURL=hand.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Image = createLucideIcon(\"image\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", ry: \"2\", key: \"1m3agn\" }],\n  [\"circle\", { cx: \"9\", cy: \"9\", r: \"2\", key: \"af1f0g\" }],\n  [\"path\", { d: \"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\", key: \"1xmnt7\" }]\n]);\n\nexport { Image as default };\n//# sourceMappingURL=image.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst KeyRound = createLucideIcon(\"key-round\", [\n  [\n    \"path\",\n    {\n      d: \"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z\",\n      key: \"1s6t7t\"\n    }\n  ],\n  [\"circle\", { cx: \"16.5\", cy: \"7.5\", r: \".5\", fill: \"currentColor\", key: \"w0ekpg\" }]\n]);\n\nexport { KeyRound as default };\n//# sourceMappingURL=key-round.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LoaderCircle = createLucideIcon(\"loader-circle\", [\n  [\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]\n]);\n\nexport { LoaderCircle as default };\n//# sourceMappingURL=loader-circle.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LogOut = createLucideIcon(\"log-out\", [\n  [\"path\", { d: \"m16 17 5-5-5-5\", key: \"1bji2h\" }],\n  [\"path\", { d: \"M21 12H9\", key: \"dn1m92\" }],\n  [\"path\", { d: \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\", key: \"1uf3rs\" }]\n]);\n\nexport { LogOut as default };\n//# sourceMappingURL=log-out.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Menu = createLucideIcon(\"menu\", [\n  [\"path\", { d: \"M4 5h16\", key: \"1tepv9\" }],\n  [\"path\", { d: \"M4 12h16\", key: \"1lakjw\" }],\n  [\"path\", { d: \"M4 19h16\", key: \"1djgab\" }]\n]);\n\nexport { Menu as default };\n//# sourceMappingURL=menu.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Moon = createLucideIcon(\"moon\", [\n  [\n    \"path\",\n    {\n      d: \"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401\",\n      key: \"kfwtm\"\n    }\n  ]\n]);\n\nexport { Moon as default };\n//# sourceMappingURL=moon.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"refresh-cw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RotateCcw = createLucideIcon(\"rotate-ccw\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n]);\n\nexport { RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"settings\", [\n  [\n    \"path\",\n    {\n      d: \"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915\",\n      key: \"1i5ecw\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ShieldCheck = createLucideIcon(\"shield-check\", [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { ShieldCheck as default };\n//# sourceMappingURL=shield-check.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sparkles = createLucideIcon(\"sparkles\", [\n  [\n    \"path\",\n    {\n      d: \"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z\",\n      key: \"1s2grr\"\n    }\n  ],\n  [\"path\", { d: \"M20 2v4\", key: \"1rf3ol\" }],\n  [\"path\", { d: \"M22 4h-4\", key: \"gwowj6\" }],\n  [\"circle\", { cx: \"4\", cy: \"20\", r: \"2\", key: \"6kqj1y\" }]\n]);\n\nexport { Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Square = createLucideIcon(\"square\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }]\n]);\n\nexport { Square as default };\n//# sourceMappingURL=square.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sun = createLucideIcon(\"sun\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"path\", { d: \"M12 2v2\", key: \"tus03m\" }],\n  [\"path\", { d: \"M12 20v2\", key: \"1lh1kg\" }],\n  [\"path\", { d: \"m4.93 4.93 1.41 1.41\", key: \"149t6j\" }],\n  [\"path\", { d: \"m17.66 17.66 1.41 1.41\", key: \"ptbguv\" }],\n  [\"path\", { d: \"M2 12h2\", key: \"1t8f8n\" }],\n  [\"path\", { d: \"M20 12h2\", key: \"1q8mjw\" }],\n  [\"path\", { d: \"m6.34 17.66-1.41 1.41\", key: \"1m8zz5\" }],\n  [\"path\", { d: \"m19.07 4.93-1.41 1.41\", key: \"1shlcs\" }]\n]);\n\nexport { Sun as default };\n//# sourceMappingURL=sun.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Target = createLucideIcon(\"target\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"6\", key: \"1vlfrh\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"2\", key: \"1c9p78\" }]\n]);\n\nexport { Target as default };\n//# sourceMappingURL=target.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TrendingUp = createLucideIcon(\"trending-up\", [\n  [\"path\", { d: \"M16 7h6v6\", key: \"box55l\" }],\n  [\"path\", { d: \"m22 7-8.5 8.5-5-5L2 17\", key: \"1t1m79\" }]\n]);\n\nexport { TrendingUp as default };\n//# sourceMappingURL=trending-up.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Triangle = createLucideIcon(\"triangle\", [\n  [\n    \"path\",\n    { d: \"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\", key: \"14u9p9\" }\n  ]\n]);\n\nexport { Triangle as default };\n//# sourceMappingURL=triangle.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"upload\", [\n  [\"path\", { d: \"M12 3v12\", key: \"1x0j5s\" }],\n  [\"path\", { d: \"m17 8-5-5-5 5\", key: \"7q97r8\" }],\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","export default \"__VITE_ASSET__DoDbE3q3__\"","export default \"__VITE_ASSET__DqtGOgnA__\"","export default \"__VITE_ASSET__D8ec1TT4__\"","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Circle, Square, Triangle, Diamond } from 'lucide-vue-next'\n\n/* ===== props ===== */\nconst props = defineProps({\n  lang:  { type: String, default: 'ar' },\n  theme: { type: String, default: 'light' }\n})\nconst lang  = ref(props.lang)\nconst theme = ref(props.theme)\nwatch(()=>props.lang,  v=> lang.value  = v)\nwatch(()=>props.theme, v=> theme.value = v)\n\n/* ===== GET ===== */\nasync function get(url, params = {}) {\n  const qs = new URLSearchParams(params).toString()\n  const r  = await fetch(url + (qs ? `?${qs}` : ''), { method:'GET', credentials:'include' })\n  const data = await r.json().catch(()=> ({}))\n  if(!r.ok) throw data\n  return data\n}\n\n/* ===== i18n ===== */\nconst dir  = computed(() => (lang.value === 'ar' ? 'rtl' : 'ltr'))\nconst T = {\n  ar:{title:'التحدي 1: عملية جمع عمودية بأرقام مفقودة (رموز)',subtitle:'اسحب الأرقام وضعها مكان الرموز حتى تكتمل العملية.',digits:'الأرقام',check:'تحقق',reset:'إعادة ضبط',newQ:'سؤال جديد',correctBig:'أحسنت!',correctSub:'حل صحيح 👏 لقد كسبت نقطة.',wrong:'حاول مرة أخرى 🤔'},\n  en:{title:'Challenge 1: Column addition with missing (symbol) digits',subtitle:'Drag digits onto symbols until the addition becomes correct.',digits:'Digits',check:'Check',reset:'Reset',newQ:'New Question',correctBig:'Great!',correctSub:'Correct 👏 You earned a point.',wrong:'Try again 🤔'}\n}\nconst t = (k)=>T[lang.value][k]\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong.mp3'\n\nconst sndSuccess = new Audio(successUrl)\nconst sndClap    = new Audio(clapUrl)\nconst sndWrong   = new Audio(wrongUrl)\n\nsndSuccess.preload = 'auto'\nsndClap.preload    = 'auto'\nsndWrong.preload   = 'auto'\n\n/* ===== shapes (lucide) ===== */\nconst SHAPE_COMP = { circle: Circle, square: Square, triangle: Triangle, diamond: Diamond }\nconst SHAPE_TYPES = ['circle','square','triangle','diamond']\nconst shapeComp = t => SHAPE_COMP[t] || Circle\n\n/* ===== utils ===== */\nfunction rndInt(a,b){ return a + Math.floor(Math.random()*(b-a+1)) }\nfunction shuffle(a){ return a.slice().sort(()=>Math.random()-0.5) }\n\n/* ===== state ===== */\nconst q     = reactive({ aStr:'', bStr:'', sStr:'', hiddenMap:{}, assignMap:{}, usedShapes:[] })\nconst rowA  = ref([])   // tokens\nconst rowB  = ref([])\nconst rowS  = ref([])\n\n/* ===== generate puzzle ===== */\nfunction newPuzzle(){\n  // 1) أرقام عشوائية\n  const dA = rndInt(2,3), dB = rndInt(2,3)\n  const A  = rndInt(10**(dA-1), 10**dA-1)\n  const B  = rndInt(10**(dB-1), 10**dB-1)\n  const S  = A + B\n  q.aStr = String(A); q.bStr = String(B); q.sStr = String(S)\n\n  // 2) اختر الأرقام المخفية فقط من الأرقام الظاهرة فعلاً\n  const digitsPresent = Array.from(new Set((q.aStr+q.bStr+q.sStr).split('').map(n=>+n)))\n  const howMany       = Math.min(rndInt(2,3), digitsPresent.length)\n  const hideDigits    = shuffle(digitsPresent).slice(0, howMany)\n  const typesPicked   = shuffle(SHAPE_TYPES).slice(0, howMany)\n\n  q.hiddenMap = {}\n  hideDigits.forEach((d,i)=>{ q.hiddenMap[typesPicked[i]] = d })\n\n  // 3) كوّن التوكنز وحدد الأشكال المستخدمة فعلياً\n  const used = new Set()\n  function tokenize(str){\n    return str.split('').map(ch=>{\n      const d  = +ch\n      const sh = Object.entries(q.hiddenMap).find(([k,v])=>v===d)?.[0]\n      if (sh){ used.add(sh); return {t:'shape', v:sh} }\n      return {t:'digit', v:ch}\n    })\n  }\n  rowA.value = tokenize(q.aStr)\n  rowB.value = tokenize(q.bStr)\n  rowS.value = tokenize(q.sStr)\n\n  // 4) لا نعرض إلا الأشكال الموجودة فعلياً\n  q.usedShapes = Array.from(used)\n  q.assignMap  = Object.fromEntries(q.usedShapes.map(s=>[s,null]))\n\n  // ضمان وجود شكل واحد على الأقل\n  if(q.usedShapes.length===0) newPuzzle()\n}\n\n/* ===== DnD ===== */\nfunction onDigitDragStart(e, digit){ e.dataTransfer.setData('text/plain', String(digit)) }\nfunction onShapeDrop(e, shape){\n  const d = Number(e.dataTransfer.getData('text/plain'))\n  if(Number.isNaN(d)) return\n  if(Object.values(q.assignMap).includes(d) && q.assignMap[shape]!==d) return\n  q.assignMap[shape] = d\n  checkNow()\n}\nfunction onDragOver(e){ e.preventDefault() }\nfunction resetAssign(){ Object.keys(q.assignMap).forEach(sh=> q.assignMap[sh]=null) }\n\n/* ===== check ===== */\nconst isFilled = computed(()=> q.usedShapes.every(sh => Number.isInteger(q.assignMap[sh])) )\nfunction makeNumber(tokens){\n  return Number(tokens.map(tok => tok.t==='digit' ? tok.v : (q.assignMap[tok.v] ?? '?')).join(''))\n}\nfunction isCorrect(){\n  if(!isFilled.value) return false\n  const A = makeNumber(rowA.value), B = makeNumber(rowB.value), S = makeNumber(rowS.value)\n  return !([A,B,S].some(v => String(v).includes('?'))) && (A+B===S)\n}\n\nconst overlay = reactive({ open:false, good:true })\nasync function checkNow(){\n  if(!isFilled.value) return\n  if(isCorrect()){\n    try{ sndSuccess.currentTime=0; sndSuccess.play().catch(()=>{}) }catch{}\n    try{ sndClap.currentTime=0; sndClap.play().catch(()=>{}) }catch{}\n    overlay.open = true; overlay.good = true\n    get('/api/method/mathematics_leaders.api.game_points.add_point', { amount: 1 }).catch(()=>{})\n  }else{\n    try{ sndWrong.currentTime=0; sndWrong.play().catch(()=>{}) }catch{}\n    pushToast(t('wrong'),'warn')\n  }\n}\nfunction nextQuestion(){ overlay.open=false; newPuzzle() }\n\n/* ===== Toast ===== */\nconst toasts = ref([])\nfunction pushToast(msg,type='ok'){\n  const id = Math.random().toString(36).slice(2)\n  toasts.value.push({id,msg,type})\n  setTimeout(()=> toasts.value = toasts.value.filter(x=>x.id!==id), 1800)\n}\n\n/* init */\nonMounted(()=> newPuzzle())\n</script>\n\n<template>\n  <section class=\"wrap challenge-surface\" :dir=\"dir\" :data-theme=\"theme\">\n    <header class=\"hdr\">\n      <h2>{{ t('title') }}</h2>\n      <p class=\"sub\">{{ t('subtitle') }}</p>\n    </header>\n\n    <div class=\"board\">\n      <!-- فتحات القيم (تظهر فقط للأشكال الموجودة) -->\n      <div class=\"assign\" dir=\"ltr\">\n        <div v-for=\"sh in q.usedShapes\" :key=\"sh\" class=\"slot\" @drop=\"onShapeDrop($event, sh)\" @dragover=\"onDragOver\">\n          <component :is=\"shapeComp(sh)\" class=\"shape-ico\" :size=\"26\" stroke=\"var(--shape-stroke)\" :stroke-width=\"2\" :style=\"{fill:'var(--shape-fill)'}\" />\n          <div class=\"val\" :class=\"{empty: q.assignMap[sh]==null}\">\n            {{ q.assignMap[sh]==null ? '…' : q.assignMap[sh] }}\n          </div>\n        </div>\n        <div class=\"actions\">\n          <button class=\"ghost\" @click=\"resetAssign\">{{ t('reset') }}</button>\n          <button class=\"primary\" :disabled=\"!isFilled\" @click=\"checkNow\">{{ t('check') }}</button>\n          <button class=\"ghost\" @click=\"newPuzzle\">{{ t('newQ') }}</button>\n        </div>\n      </div>\n\n      <!-- عملية الجمع: اتجاه LTR ثابت للأرقام -->\n      <div class=\"col-sum\" dir=\"ltr\">\n        <div class=\"row\">\n          <span v-for=\"(tok,i) in rowA\" :key=\"'a'+i\" class=\"cell\" :class=\"tok.t\">\n            <span v-if=\"tok.t==='digit'\">{{ tok.v }}</span>\n            <component v-else :is=\"shapeComp(tok.v)\" class=\"shape-ico\" :size=\"26\" stroke=\"var(--shape-stroke)\" :stroke-width=\"2\" :style=\"{fill:'var(--shape-fill)'}\" />\n          </span>\n        </div>\n        <div class=\"row plus\"><span>+</span></div>\n        <div class=\"row\">\n          <span v-for=\"(tok,i) in rowB\" :key=\"'b'+i\" class=\"cell\" :class=\"tok.t\">\n            <span v-if=\"tok.t==='digit'\">{{ tok.v }}</span>\n            <component v-else :is=\"shapeComp(tok.v)\" class=\"shape-ico\" :size=\"26\" stroke=\"var(--shape-stroke)\" :stroke-width=\"2\" :style=\"{fill:'var(--shape-fill)'}\" />\n          </span>\n        </div>\n        <div class=\"line\"></div>\n        <div class=\"row\">\n          <span v-for=\"(tok,i) in rowS\" :key=\"'s'+i\" class=\"cell\" :class=\"tok.t\">\n            <span v-if=\"tok.t==='digit'\">{{ tok.v }}</span>\n            <component v-else :is=\"shapeComp(tok.v)\" class=\"shape-ico\" :size=\"26\" stroke=\"var(--shape-stroke)\" :stroke-width=\"2\" :style=\"{fill:'var(--shape-fill)'}\" />\n          </span>\n        </div>\n      </div>\n\n      <div class=\"digits\" dir=\"ltr\">\n        <h4>{{ t('digits') }}</h4>\n        <div class=\"tiles\">\n          <button v-for=\"d in 10\" :key=\"d-1\" class=\"tile\" draggable=\"true\" @dragstart=\"onDigitDragStart($event, d-1)\">{{ d-1 }}</button>\n        </div>\n      </div>\n    </div>\n\n    <transition name=\"fade\">\n      <div v-if=\"overlay.open\" class=\"overlay\">\n        <div class=\"sheet\">\n          <div class=\"big\">{{ t('correctBig') }}</div>\n          <p>{{ t('correctSub') }}</p>\n          <button class=\"primary\" @click=\"nextQuestion\">{{ t('newQ') }}</button>\n        </div>\n      </div>\n    </transition>\n\n    <div class=\"toasts\">\n      <div v-for=\"t in toasts\" :key=\"t.id\" class=\"toast\" :class=\"t.type\">{{ t.msg }}</div>\n    </div>\n  </section>\n</template>\n\n<style scoped>\n/* ألوان افتراضية (فاتح) */\n.wrap{\n  --shape-fill:#FFC24B; --shape-stroke:#7a2a23;\n  --ink:#2b1a1a; --peach:#ffe7db; --accent:#d64c42;\n  --panel:#ffffff; --bd:#f1d8cf; --bg:linear-gradient(180deg,#fffaf6,#fff4e9);\n  color:var(--ink); background:var(--bg); min-height:100%; padding:24px\n}\n.wrap[data-theme=\"dark\"]{\n  --shape-fill:#ffb84f; --shape-stroke:#ff8c7a;\n  --ink:#f7ebe7; --peach:#2a1714; --accent:#ff8c7a;\n  --panel:rgba(24,15,13,.85); --bd:#3c2722;\n  --bg:linear-gradient(180deg,#1b1412,#241815);\n}\n\n.hdr h2{margin:0;font-weight:800;color:#5a261f}\n.wrap[data-theme=\"dark\"] .hdr h2{color:#ffc3ba}\n.hdr .sub{margin:6px 0 18px;opacity:.75}\n\n.board{display:grid;grid-template-columns:1fr auto 1fr;gap:22px;align-items:start}\n.assign,.col-sum,.digits{background:var(--panel);border:1px solid var(--bd);border-radius:14px;box-shadow:0 10px 24px rgba(214,76,66,.10)}\n.assign{padding:12px}\n.col-sum{padding:18px 22px;min-width:260px}\n.digits{padding:12px}\n\n/* ثبّت اتجاه الأرقام */\n.assign, .col-sum, .digits, .val, .tile { direction:ltr; unicode-bidi:isolate; }\n.cell, .val, .tile { font-variant-numeric: tabular-nums; }\n\n.slot{display:flex;align-items:center;gap:10px;padding:10px;border:1px dashed var(--bd);border-radius:12px;background:#fff;margin-bottom:8px}\n.wrap[data-theme=\"dark\"] .slot{background:#2a1a16}\n.shape-ico{width:26px;height:26px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}\n.val{margin-inline-start:auto;width:40px;height:34px;display:grid;place-items:center;font-weight:800;border-radius:10px;background:#fff4e9;border:1px solid var(--bd)}\n.wrap[data-theme=\"dark\"] .val{background:#1c1512}\n\n.actions{display:flex;gap:10px;margin-top:6px}\nbutton{border:none;cursor:pointer;padding:10px 14px;border-radius:12px;font-weight:700}\nbutton.primary{background:var(--accent);color:#fff}\nbutton.primary:disabled{opacity:.5;cursor:not-allowed}\nbutton.ghost{background:#fff;border:1px solid var(--bd)}\n.wrap[data-theme=\"dark\"] button.ghost{background:#2a1a16}\nbutton.tile{background:#fff;border:1px solid var(--bd);min-width:44px;height:44px;border-radius:12px;font-weight:800}\n.wrap[data-theme=\"dark\"] button.tile{background:#2a1a16}\n\n.row{display:flex;gap:8px;justify-content:flex-end}\n.row.plus{padding:6px 0;opacity:.7}\n.cell{width:28px;height:28px;display:grid;place-items:center;font-weight:800;font-size:20px}\n.line{height:2px;background:#d8b0a8;margin:8px 0 10px}\n\n.digits h4{margin:0 0 10px 0}\n.tiles{display:flex;flex-wrap:wrap;gap:8px}\n\n.overlay{position:fixed;inset:0;background:rgba(0,0,0,.25);display:grid;place-items:center;z-index:40}\n.sheet{width:min(560px,92vw);background:#fff;border-radius:18px;padding:26px;text-align:center;box-shadow:0 18px 40px rgba(0,0,0,.2)}\n.wrap[data-theme=\"dark\"] .sheet{background:#1c1512;color:var(--ink)}\n.big{font-size:32px;font-weight:900;color:#4a2019}\n.wrap[data-theme=\"dark\"] .big{color:#ffc3ba}\n\n.toasts{position:fixed;bottom:18px;inset-inline:0;display:grid;justify-content:center;gap:8px;z-index:50}\n.toast{background:#fff;border:1px solid var(--bd);padding:10px 14px;border-radius:999px;box-shadow:0 8px 20px rgba(0,0,0,.08);font-weight:700}\n.toast.warn{color:#7a2a23}\n.fade-enter-active,.fade-leave-active{transition:opacity .15s}\n.fade-enter-from,.fade-leave-to{opacity:0}\n\n@media (max-width: 900px){\n  .board{grid-template-columns:1fr}\n  .col-sum{order:-1}\n}\n</style>\n","export default \"__VITE_ASSET__DtFZ1X$K__\"","export default \"__VITE_ASSET__DPmZGsGU__\"","<script setup>\nimport { ref, computed, reactive, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{ title:'التحدي 2: شبكة أعداد تزيد بمقدار {STEP}',\n       rule:'كل خانة تزيد {STEP} عن اليسار وعن الأعلى. اسحب الأعداد المفقودة إلى أماكنها.',\n       newQ:'سؤال جديد', check:'تحقّق', reset:'إعادة تعيين', correct:'إجابة صحيحة',\n       wrong:'تحقق من القيم', bank:'لوحة الأعداد', clear:'تفريغ الخلية' },\n  en:{ title:'Challenge 2: Number grid with step {STEP}',\n       rule:'Each cell increases by {STEP} from its left and its top. Drag the missing numbers into place.',\n       newQ:'New puzzle', check:'Check', reset:'Reset', correct:'Correct answer',\n       wrong:'Check your values', bank:'Number bank', clear:'Clear cell' }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n// أصوات\n// const sOK = typeof Audio!=='undefined'?new Audio('/sounds/success.mp3'):null\n// const sClap = typeof Audio!=='undefined'?new Audio('/sounds/clap.mp3'):null\n// const sWrong = typeof Audio!=='undefined'?new Audio('/sounds/wrong.mp3'):null\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\n\nconst sOK   = typeof Audio !== 'undefined' ? new Audio(successUrl) : null\nconst sClap = typeof Audio !== 'undefined' ? new Audio(clapUrl)    : null\nconst sWrong= typeof Audio !== 'undefined' ? new Audio(wrongUrl)   : null\n\nsOK && (sOK.preload = 'auto')\nsClap && (sClap.preload = 'auto')\nsWrong && (sWrong.preload = 'auto')\n\n\n// عشوائي\nconst stepsPool = [100,200,500,1000,2000]        // يمكنك تعديل القائمة\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n// حالة\nconst size = ref(3)\nconst step = ref(1000)          // متغير وعشوائي لكل لغز\nconst base = ref(0)\nconst grid = ref([])            // القيم الصحيحة\nconst blanks = ref(new Set())   // \"r,c\"\nconst answerMap = ref({})       // \"r,c\" -> value\nconst manualDrafts = ref({})    // \"r,c\" -> string for manual input\nconst bankCounts = ref({})      // value -> remaining count\nconst solved = ref(false)\nconst toast = ref(null)\n\n// عناوين ديناميكية تظهر الـ step الحالي\nconst titleText = computed(()=> T[L.value].title.replaceAll('{STEP}', step.value))\nconst ruleText  = computed(()=> T[L.value].rule.replaceAll('{STEP}', step.value))\n\nconst keyOf = (r,c)=>`${r},${c}`\n\nfunction buildGrid(n, start, stp){\n  const g=[]\n  for(let r=0;r<n;r++){ const row=[]\n    for(let c=0;c<n;c++){ row.push(start + stp*(r+c)) }\n    g.push(row)\n  } return g\n}\n\nfunction pickBlanks(n){\n  const all=[]\n  for(let r=0;r<n;r++) for(let c=0;c<n;c++) all.push([r,c])\n  const filtered = all.filter(([r,c])=>!(r===0&&c===0))\n  const k=rndInt(3,5)\n  return new Set(shuffle(filtered).slice(0,k).map(([r,c])=>keyOf(r,c)))\n}\n\nfunction buildBankCounts(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const [r,c]=k.split(',').map(Number)\n    const v=grid.value[r][c]\n    counts[v]=(counts[v]||0)+1\n  })\n  bankCounts.value=counts\n}\n\n// مصفوفة عرض للبنك وفق الكميّات الحالية\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}; manualDrafts.value={}\n  // اختيار step وقاعدة\n  step.value = stepsPool[rndInt(0, stepsPool.length-1)]\n  // اختيار base\n  const thousands = rndInt(5, 19) * 100     // قاعدة لطيفة لأرقام 3–5 خانات\n  base.value = thousands\n  const n=size.value\n  grid.value=buildGrid(n, base.value, step.value)\n  blanks.value=pickBlanks(n)\n  buildBankCounts()\n}\n\nfunction isFilled(){\n  for(const k of blanks.value){ if(answerMap.value[k]==null) return false }\n  return true\n}\nfunction isCorrect(){\n  if(!isFilled()) return false\n  for(const k of blanks.value){\n    const [r,c]=k.split(',').map(Number)\n    if(answerMap.value[k]!==grid.value[r][c]) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value=L.value==='ar'?'أكمل كل الخانات':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\n\nfunction resetAnswers(){\n  answerMap.value={}\n  manualDrafts.value={}\n  buildBankCounts()\n  toast.value=null; solved.value=false\n}\n\n// سحب وإفلات بكميّات\nfunction setAnswer(key, value, { fromManual = false } = {}){\n  if(Number.isNaN(value)) return\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  if(fromManual){\n    if((bankCounts.value[value]||0)>0){\n      bankCounts.value[value]-=1\n    }\n  } else {\n    if((bankCounts.value[value]||0)===0){\n      return\n    }\n    bankCounts.value[value]-=1\n  }\n  answerMap.value[key]=value\n  manualDrafts.value = { ...manualDrafts.value, [key]: String(value) }\n  toast.value=null\n}\n\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev,key){\n  ev.preventDefault()\n  const v=Number(ev.dataTransfer.getData('text/plain'))\n  setAnswer(key, v)\n}\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n  manualDrafts.value = { ...manualDrafts.value, [key]: '' }\n}\n\nfunction onManualInput(key, value){\n  manualDrafts.value = { ...manualDrafts.value, [key]: value }\n}\n\nfunction commitManual(key){\n  const raw = (manualDrafts.value[key] ?? '').trim()\n  if(raw === ''){\n    clearCell(key)\n    return\n  }\n  const num = Number(raw)\n  if(!Number.isFinite(num)) return\n  setAnswer(key, num, { fromManual: true })\n}\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>toast.value=null)\n</script>\n\n<template>\n  <div class=\"challenge2 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ titleText }}</h2>\n    <p class=\"rule\">{{ ruleText }}</p>\n\n    <div class=\"layout\">\n      <div class=\"grid\">\n        <div v-for=\"r in size\" :key=\"'r'+r\" class=\"row\">\n          <div v-for=\"c in size\" :key=\"'c'+r+'-'+c\" class=\"cell\">\n            <template v-if=\"!blanks.has(`${r-1},${c-1}`)\">\n              <span class=\"num\" :style=\"numDir\">{{ grid[r-1][c-1] }}</span>\n            </template>\n            <template v-else>\n              <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event, `${r-1},${c-1}`)\">\n                <span v-if=\"answerMap[`${r-1},${c-1}`]!=null\" class=\"num\" :style=\"numDir\">\n                  {{ answerMap[`${r-1},${c-1}`] }}\n                </span>\n                <span v-else class=\"placeholder\">؟</span>\n              </div>\n              <input\n                class=\"manual-entry\"\n                type=\"number\"\n                :value=\"manualDrafts[`${r-1},${c-1}`] ?? ''\"\n                @input=\"onManualInput(`${r-1},${c-1}`, $event.target.value)\"\n                @change=\"commitManual(`${r-1},${c-1}`)\"\n                @blur=\"commitManual(`${r-1},${c-1}`)\"\n                :placeholder=\"props.lang==='ar' ? 'أدخل رقمًا' : 'Enter value'\"\n              />\n              <button class=\"clear\" @click=\"clearCell(`${r-1},${c-1}`)\"><Eraser class=\"ic\" /> {{ T[L].clear }}</button>\n            </template>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"bank\">\n        <div class=\"bank-title\">{{ T[L].bank }}</div>\n        <div class=\"bank-items\">\n          <button v-for=\"v in bankList\" :key=\"v + '_' + Math.random()\" class=\"chip\"\n                  draggable=\"true\" @dragstart=\"onDragStart($event, v)\" :style=\"numDir\">\n            {{ v }}\n          </button>\n        </div>\n\n        <div class=\"actions\">\n          <button class=\"btn\" @click=\"resetAnswers\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n          <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n          <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n        </div>\n\n        <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n      </div>\n    </div>\n\n    <div v-if=\"solved\" class=\"overlay\">\n      <div class=\"card\">\n        <div class=\"big\">{{ T[L].correct }}</div>\n        <button class=\"btn\" @click=\"newPuzzle\">{{ T[L].newQ }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* نفس أنماطك تقريباً، مع زر تفريغ */\n.challenge2{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .challenge2{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem } .rule{ color:var(--muted); margin:0 0 1rem }\n.layout{ display:grid; grid-template-columns:1fr 260px; gap:1rem }\n.grid{ background:var(--bg); border:1px solid #e5e7eb22; border-radius:1rem; padding:1rem; box-shadow:0 4px 14px rgba(0,0,0,.06) }\n.row{ display:grid; grid-template-columns:repeat(3,1fr) }\n.cell{ border:1px dashed #cbd5e1; min-height:86px; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.25rem; padding:.25rem }\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.25rem }\n.placeholder{ color:var(--muted); font-size:1.25rem }\n.dropzone{ width:100%; flex:1; display:flex; align-items:center; justify-content:center; background:rgba(99,102,241,.06); border-radius:.5rem }\n.manual-entry{ width:100%; padding:.45rem .6rem; border-radius:.6rem; border:1px solid rgba(99,102,241,.2); background:rgba(255,255,255,.92); font-size:.95rem; direction:ltr; color:var(--fg); }\n.manual-entry:focus{ outline:none; border-color:rgba(15,138,62,.45); box-shadow:0 0 0 3px rgba(15,138,62,.16); }\n[data-theme=\"dark\"] .manual-entry{ background:rgba(15,23,42,.8); border-color:rgba(148,163,184,.25); color:var(--fg); }\n.clear{ font-size:.75rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n.bank{ display:flex; flex-direction:column; gap:.75rem }\n.bank-title{ font-weight:600; color:var(--muted) }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ border:1px solid #e5e7eb55; background:var(--bg); padding:.4rem .6rem; border-radius:.75rem; cursor:grab; font-variant-numeric:tabular-nums }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.25rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n.toast{ margin-top:.5rem; padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n.overlay{ position:fixed; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center }\n.card{ background:var(--bg); color:var(--fg); padding:1rem 1.25rem; border-radius:1rem; box-shadow:0 10px 30px rgba(0,0,0,.25); display:flex; flex-direction:column; gap:.75rem; align-items:center }\n.big{ font-size:1.25rem; font-weight:700 }\n</style>\n","export default \"__VITE_ASSET__DjkG8rNr__\"","export default \"__VITE_ASSET__MdmM32dY__\"","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { RefreshCw, RotateCcw, Check } from 'lucide-vue-next'\n\nconst props = defineProps({\n  lang: { type: String, default: 'ar' },\n  theme: { type: String, default: 'light' }\n})\n\nconst T = {\n  ar: {\n    title: 'التحدي 3: إيجاد عددين من المجموع والفرق',\n    rule: 'اختر الزوج الصحيح (أكبر، أصغر) بحيث يكون مجموعهما S والفرق بينهما D.',\n    newQ: 'سؤال جديد',\n    reset: 'إعادة تعيين',\n    check: 'تحقّق',\n    correct: 'إجابة صحيحة',\n    wrong: 'إجابة غير صحيحة',\n    done: 'أكملت هذه الجولة',\n    q: (i, S, D) => `(${i}) جد عددين ناتج جمعهما ${S} والفرق بينهما ${D}`\n  },\n  en: {\n    title: 'Challenge 3: Find two numbers from sum and difference',\n    rule: 'Pick the correct pair (greater, smaller) with sum S and difference D.',\n    newQ: 'New puzzle',\n    reset: 'Reset',\n    check: 'Check',\n    correct: 'Correct',\n    wrong: 'Incorrect',\n    done: 'Round completed',\n    q: (i, S, D) => `(${i}) Find two numbers with sum ${S} and difference ${D}`\n  }\n}\nconst L = computed(() => (T[props.lang] ? props.lang : 'ar'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success3.mp3'\n// import clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'   // تأكد من الاسم الصحيح للملف\n\nconst sOK   = typeof Audio !== 'undefined' ? new Audio(successUrl) : null\n// const sClap = typeof Audio !== 'undefined' ? new Audio(clapUrl)    : null\nconst sWrong= typeof Audio !== 'undefined' ? new Audio(wrongUrl)   : null\n\nsOK && (sOK.preload = 'auto')\n// sClap && (sClap.preload = 'auto')\nsWrong && (sWrong.preload = 'auto')\n\n\n// عشوائي\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n// بنية السؤال\n/**\n * question = {\n *  S, D, ans:[A,B], options:[{a,b,isAns}], pickedIndex:null|number, judged:false, firstTry:true\n * }\n */\nconst N = 4\nconst questions = ref([])\nconst solvedCount = computed(() => questions.value.filter(q => q.judged && q.options[q.pickedIndex]?.isAns).length)\nconst allAnswered = computed(() => questions.value.length>0 && questions.value.every(q => q.judged))\n\nfunction makeAns(S,D){\n  // الشرط: نفس الإشارة parity، و S >= D >= 0\n  // الحل: A=(S+D)/2 ، B=(S-D)/2\n  return [(S + D)/2, (S - D)/2]\n}\nfunction validPair(x){ return Number.isInteger(x) && x>=0 }\nfunction mkQuestion(){\n  // نختار S,D بحيث يعطيان حلين صحيحين صحيحين (A,B)\n  let S,D,A,B\n  while(true){\n    S = rndInt(10, 60)                 // نطاق مجموع معقول\n    D = rndInt(0, 20)                  // نطاق فرق معقول\n    if ((S & 1) !== (D & 1)) continue  // شرط التكافؤ\n    if (S < D) continue\n    ;[A,B] = makeAns(S,D)\n    if (validPair(A) && validPair(B)) break\n  }\n  // البدائل: تبديل طفيف يضلّل بدون كسر المنطق\n  const alts = new Set()\n  const addAlt = (x,y)=>{\n    const k = `${x},${y}`\n    if (x>=0 && y>=0 && Number.isInteger(x) && Number.isInteger(y) && k !== `${A},${B}`) alts.add(k)\n  }\n  addAlt(A+1,B-1)\n  addAlt(A-1,B+1)\n  addAlt(A+2,B-2)\n  addAlt(A-2,B+2)\n  addAlt(A+1,B)    // خطأ في الفرق\n  addAlt(A,B+1)    // خطأ في الفرق\n  const opts = [{a:A,b:B,isAns:true}]\n  for (const k of Array.from(alts).slice(0,3)) {\n    const [a,b] = k.split(',').map(n=>Number(n))\n    opts.push({a,b,isAns:false})\n    if (opts.length===4) break\n  }\n  while(opts.length<4){ // احتياط\n    const da = rndInt(-3,3), db = rndInt(-3,3)\n    const a = Math.max(0, A+da), b = Math.max(0, B+db)\n    if(!(a===A && b===B)) opts.push({a,b,isAns:false})\n  }\n  return {\n    S, D, ans:[A,B],\n    options: shuffle(opts),\n    pickedIndex: null,\n    judged: false,\n    firstTry: true\n  }\n}\n\nfunction newRound(){\n  questions.value = Array.from({length:N}, ()=> mkQuestion())\n}\nfunction resetRound(){\n  for(const q of questions.value){\n    q.pickedIndex = null\n    q.judged = false\n    q.firstTry = true\n  }\n}\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1', {\n      method:'GET', credentials:'include'\n    })\n  }catch{}\n}\nasync function pickOption(q, idx){\n  if(q.judged) return\n  q.pickedIndex = idx\n  q.judged = true\n  const ok = q.options[idx].isAns\n  if(ok){\n    sOK && sOK.play()\n    if(allAnswered.value) sOK && sOK.play()\n    // نقطة واحدة للإجابة الصحيحة من أول محاولة\n    if(q.firstTry) await addPoint()\n  }else{\n    sWrong && sWrong.play()\n  }\n}\nfunction unjudge(q){ // يسمح بالمحاولة مجدداً إن أراد\n  q.judged = false\n  q.firstTry = false\n  q.pickedIndex = null\n}\n\nonMounted(newRound)\nwatch(()=>props.lang,()=>{}) // لا شيء، فقط الحفاظ على توافق الواجهة\n</script>\n\n<template>\n  <div class=\"challenge3 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <div class=\"qs\">\n      <div v-for=\"(q,i) in questions\" :key=\"i\" class=\"qcard\">\n        <div class=\"qtext\">{{ T[L].q(i+1, q.S, q.D) }}</div>\n\n        <div class=\"opts\">\n          <button\n            v-for=\"(op,j) in q.options\"\n            :key=\"j\"\n            class=\"opt\"\n            :class=\"{\n              chosen: q.pickedIndex===j,\n              ok: q.judged && q.options[j].isAns,\n              bad: q.judged && q.pickedIndex===j && !q.options[j].isAns\n            }\"\n            @click=\"pickOption(q, j)\"\n          >\n            ( {{ op.a }} ، {{ op.b }} )\n          </button>\n        </div>\n\n        <div v-if=\"q.judged\" class=\"feedback\" :class=\"{ok: q.options[q.pickedIndex].isAns}\">\n          {{ q.options[q.pickedIndex].isAns ? T[L].correct : T[L].wrong }}\n          <button class=\"retry\" v-if=\"!q.options[q.pickedIndex].isAns\" @click=\"unjudge(q)\">↺</button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"toolbar\">\n      <div class=\"status\">\n        <Check class=\"ic\" /> {{ solvedCount }} / {{ questions.length }}\n        <span v-if=\"allAnswered && solvedCount===questions.length\" class=\"done\"> · {{ T[L].done }}</span>\n      </div>\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetRound\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"newRound\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.challenge3{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .challenge3{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.qs{ display:grid; gap:.75rem }\n.qcard{\n  background:var(--bg);\n  border:1px solid #e5e7eb55; border-radius:1rem;\n  padding:.75rem .9rem; box-shadow:0 4px 14px rgba(0,0,0,.06)\n}\n.qtext{ font-weight:600; margin-bottom:.5rem }\n.opts{ display:flex; flex-wrap:wrap; gap:.5rem }\n.opt{\n  padding:.45rem .7rem; border-radius:.75rem; cursor:pointer;\n  border:1px solid #e5e7ebaa; background:var(--bg);\n  font-variant-numeric:tabular-nums;\n}\n.opt.chosen{ box-shadow:0 0 0 2px rgba(99,102,241,.35) inset }\n.opt.ok{ background:#dcfce7; border-color:#bbf7d0; color:#166534 }\n.opt.bad{ background:#fee2e2; border-color:#fecaca; color:#991b1b }\n\n.feedback{ margin-top:.4rem; font-size:.9rem; color:#991b1b }\n.feedback.ok{ color:#166534 }\n.retry{ margin-inline-start:.5rem; border:none; background:transparent; cursor:pointer }\n\n.toolbar{\n  display:flex; justify-content:space-between; align-items:center; margin-top:1rem\n}\n.status{ color:var(--muted); display:flex; align-items:center; gap:.35rem }\n.done{ color:#166534 }\n.actions{ display:flex; gap:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem;\n      border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n[data-theme=\"dark\"] .challenge3{ background:transparent; color:#e2e8f0 }\n[data-theme=\"dark\"] .challenge3 .rule{ color:#cbd5f5 }\n[data-theme=\"dark\"] .challenge3 .qcard{ background:#132338; border:1px solid rgba(148,163,184,.45); box-shadow:0 18px 32px rgba(7,15,32,.55) }\n[data-theme=\"dark\"] .challenge3 .qtext{ color:#f1f5f9 }\n[data-theme=\"dark\"] .challenge3 .opt{ background:#1c3050; border-color:rgba(148,163,184,.5); color:#f8fafc }\n[data-theme=\"dark\"] .challenge3 .opt:hover{ border-color:#60a5fa; background:#223a60 }\n[data-theme=\"dark\"] .challenge3 .opt.chosen{ box-shadow:0 0 0 2px rgba(96,165,250,.55) inset }\n[data-theme=\"dark\"] .challenge3 .opt.ok{ background:rgba(34,197,94,.26); border-color:rgba(74,222,128,.6); color:#dcfce7 }\n[data-theme=\"dark\"] .challenge3 .opt.bad{ background:rgba(248,113,113,.28); border-color:rgba(248,113,113,.55); color:#fee2e2 }\n[data-theme=\"dark\"] .challenge3 .feedback{ color:#fca5a5 }\n[data-theme=\"dark\"] .challenge3 .feedback.ok{ color:#bbf7d0 }\n[data-theme=\"dark\"] .challenge3 .status{ color:#d1d9ff }\n[data-theme=\"dark\"] .challenge3 .done{ color:#86efac }\n[data-theme=\"dark\"] .challenge3 .btn{ background:#1c3050; border-color:rgba(148,163,184,.45); color:#f8fafc; box-shadow:0 10px 22px rgba(7,15,32,.4) }\n</style>\n","export default \"__VITE_ASSET__ddQL4cG6__\"","export default \"__VITE_ASSET__yY_pt9VM__\"","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'التحدي 4: أكمل جدول الضرب',\n    rule:'جدول ضرب بعناوين صفوف وأعمدة. اسحب القيم الصحيحة من الأسفل إلى الخانات الفارغة.',\n    bank:'لوحة الأعداد', newQ:'سؤال جديد', reset:'إعادة تعيين',\n    check:'تحقّق', correct:'إجابة صحيحة', wrong:'تحقق من القيم', clear:'تفريغ الخلية'\n  },\n  en:{\n    title:'Challenge 4: Complete the multiplication table',\n    rule:'A multiplication table with row/column headers. Drag correct values into the blanks.',\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset',\n    check:'Check', correct:'Correct', wrong:'Check your values', clear:'Clear cell'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n// أصوات اختيارية\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success4.mp3'\n// import clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong4.mp3'   // تأكد من الاسم الصحيح للملف\n\nconst sOK   = typeof Audio !== 'undefined' ? new Audio(successUrl) : null\n// const sClap = typeof Audio !== 'undefined' ? new Audio(clapUrl)    : null\nconst sWrong= typeof Audio !== 'undefined' ? new Audio(wrongUrl)   : null\n\nsOK && (sOK.preload = 'auto')\n// sClap && (sClap.preload = 'auto')\nsWrong && (sWrong.preload = 'auto')\n\n\n// أدوات عشوائية\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n// الحالة\nconst n = 3                                    // جدول 3×3\nconst factorsR = ref([])                       // عناوين الصفوف\nconst factorsC = ref([])                       // عناوين الأعمدة\nconst blanks = ref(new Set())                  // مفاتيح الفراغات\nconst answerMap = ref({})                      // key -> value المُسقَط\nconst manualDrafts = ref({})                   // key -> string\nconst bankCounts = ref({})                     // value -> المتبقي\nconst solved = ref(false)\nconst toast = ref(null)\n\n// بناء القيم الصحيحة لكل خانة\nfunction valueAt(r,c){\n  if(r===0 && c===0) return '×'\n  if(r===0) return factorsC.value[c-1]\n  if(c===0) return factorsR.value[r-1]\n  return factorsR.value[r-1] * factorsC.value[c-1]\n}\n\n// مفاتيح الخانات\nconst keyH = (r,c)=> (r===0||c===0)?`h:${r},${c}`:`c:${r},${c}`\n\n// اختيار عوامل بدون تكرار من 1..9\nfunction pickFactors(k){\n  return shuffle([1,2,3,4,5,6,7,8,9]).slice(0,k).sort((a,b)=>a-b)\n}\n\n// اختيار الفراغات\nfunction pickBlanks(){\n  const all=[]\n  for(let r=0;r<=n;r++) for(let c=0;c<=n;c++){\n    if(r===0 && c===0) continue // زاوية × ثابتة\n    all.push([r,c])\n  }\n  // لا نجعل كل الجسم فارغاً؛ نضمن خلية جسم واحدة على الأقل ظاهرة للمساعدة\n  const bodyCells = all.filter(([r,c])=> r>0 && c>0)\n  const shownHelp = shuffle(bodyCells)[0]\n  const candidates = all.filter(([r,c])=> !(r===shownHelp[0] && c===shownHelp[1]))\n  const k = rndInt(5, 8) // عدد الفراغات\n  const chosen = shuffle(candidates).slice(0,k)\n  return new Set(chosen.map(([r,c])=> keyH(r,c)))\n}\n\n// تحضير بنك الأعداد بكميات\nfunction rebuildBank(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const [tag,rc]=k.split(':'); const [r,c]=rc.split(',').map(Number)\n    const v = valueAt(r,c)\n    counts[v]=(counts[v]||0)+1\n  })\n  // إعادة احتساب بعد إسقاط إجابات موجودة\n  for(const [k,v] of Object.entries(answerMap.value)){\n    counts[v]=(counts[v]||0)-1\n  }\n  for(const [v,ct] of Object.entries(counts)){ if(ct<=0) delete counts[v] }\n  bankCounts.value=counts\n}\n\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}; manualDrafts.value={}\n  factorsR.value = pickFactors(n)\n  factorsC.value = pickFactors(n)\n  blanks.value = pickBlanks()\n  rebuildBank()\n}\n\nfunction isFilled(){\n  for(const k of blanks.value){ if(answerMap.value[k]==null) return false }\n  return true\n}\nfunction isCorrect(){\n  if(!isFilled()) return false\n  for(const k of blanks.value){\n    const [_,rc]=k.split(':'); const [r,c]=rc.split(',').map(Number)\n    if(answerMap.value[k] !== valueAt(r,c)) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar'?'أكمل كل الخانات':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){\n  answerMap.value={}\n  manualDrafts.value={}\n  rebuildBank()\n  toast.value=null; solved.value=false\n}\n\nfunction setAnswer(key, value, { fromManual = false } = {}){\n  if(Number.isNaN(value)) return\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  if(fromManual){\n    if((bankCounts.value[value]||0)>0){\n      bankCounts.value[value]-=1\n    }\n  } else {\n    if((bankCounts.value[value]||0)===0) return\n    bankCounts.value[value]-=1\n  }\n  answerMap.value[key]=value\n  manualDrafts.value = { ...manualDrafts.value, [key]: String(value) }\n  toast.value=null\n}\n\n// سحب/إفلات مع كميّات\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev,key){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  setAnswer(key, v)\n}\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n  manualDrafts.value = { ...manualDrafts.value, [key]: '' }\n}\n\nfunction onManualInput(key, value){\n  manualDrafts.value = { ...manualDrafts.value, [key]: value }\n}\n\nfunction commitManual(key){\n  const raw = (manualDrafts.value[key] ?? '').trim()\n  if(raw === ''){\n    clearCell(key)\n    return\n  }\n  const num = Number(raw)\n  if(!Number.isFinite(num)) return\n  setAnswer(key, num, { fromManual: true })\n}\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"challenge4 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <!-- الجدول -->\n    <div class=\"table\">\n      <div class=\"row\" v-for=\"r in (n+1)\" :key=\"'r'+r\">\n        <div\n          class=\"cell header\"\n          v-for=\"c in (n+1)\"\n          :key=\"'c'+r+'-'+c\"\n          :class=\"{ th: r===1 || c===1, corner: r===1 && c===1 }\"\n        >\n          <!-- الزاوية -->\n          <template v-if=\"r===1 && c===1\">\n            ×\n          </template>\n\n          <!-- خلايا غير فارغة -->\n          <template v-else-if=\"!blanks.has((r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`)\">\n            <span class=\"num\" :style=\"numDir\">{{ valueAt(r-1,c-1) }}</span>\n          </template>\n\n          <!-- خلايا فارغة -->\n          <template v-else>\n            <div class=\"dropzone\"\n                 @dragover=\"allowDrop\"\n                 @drop=\"onDrop($event, (r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`)\">\n              <span v-if=\"answerMap[(r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`] != null\"\n                    class=\"num\" :style=\"numDir\">\n                {{ answerMap[(r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`] }}\n              </span>\n              <span v-else class=\"placeholder\">؟</span>\n            </div>\n            <input\n              class=\"manual-entry\"\n              type=\"number\"\n              :value=\"manualDrafts[(r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`] ?? ''\"\n              @input=\"onManualInput((r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`, $event.target.value)\"\n              @change=\"commitManual((r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`)\"\n              @blur=\"commitManual((r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`)\"\n              :placeholder=\"props.lang==='ar' ? 'أدخل رقمًا' : 'Enter value'\"\n            />\n            <button class=\"clear\" @click=\"clearCell((r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`)\">\n              <Eraser class=\"ic\"/> {{ T[L].clear }}\n            </button>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <!-- البنك -->\n    <div class=\"side\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"v in bankList\"\n          :key=\"v + '_' + Math.random()\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, v)\"\n          :style=\"numDir\"\n        >{{ v }}</button>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n\n    <!-- نجاح -->\n    <div v-if=\"solved\" class=\"overlay\">\n      <div class=\"card\">\n        <div class=\"big\">{{ T[L].correct }}</div>\n        <button class=\"btn\" @click=\"newPuzzle\">{{ T[L].newQ }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.challenge4{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6B7280 }\n[data-theme=\"dark\"] .challenge4{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem } .rule{ color:var(--muted); margin:0 0 1rem }\n\n/* الجدول */\n.table{ display:inline-block; background:var(--bg); border-radius:1rem; padding:.75rem; box-shadow:0 4px 14px rgba(0,0,0,.06) }\n.row{ display:grid; grid-template-columns: repeat(4, 110px) }\n.cell{ border:1px dashed #cbd5e1; min-height:72px; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.25rem; padding:.25rem }\n.th{ background:rgba(234,179,8,.12) }\n.corner{ background:rgba(234,179,8,.25); font-weight:700 }\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.15rem }\n.placeholder{ color:var(--muted); font-size:1.15rem }\n.dropzone{ width:100%; flex:1; display:flex; align-items:center; justify-content:center; background:rgba(99,102,241,.06); border-radius:.5rem }\n.manual-entry{ width:100%; padding:.45rem .6rem; border-radius:.6rem; border:1px solid rgba(99,102,241,.2); background:rgba(255,255,255,.92); font-size:.95rem; direction:ltr; color:var(--fg); }\n.manual-entry:focus{ outline:none; border-color:rgba(15,138,62,.45); box-shadow:0 0 0 3px rgba(15,138,62,.16); }\n[data-theme=\"dark\"] .manual-entry{ background:rgba(15,23,42,.8); border-color:rgba(148,163,184,.25); color:var(--fg); }\n.clear{ font-size:.75rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n\n/* البنك والعمليات */\n.side{ margin-top:1rem }\n.bank-title{ font-weight:600; color:var(--muted); margin-bottom:.25rem }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ border:1px solid #e5e7eb55; background:var(--bg); padding:.4rem .6rem; border-radius:.75rem; cursor:grab; font-variant-numeric:tabular-nums }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.toast{ margin-top:.5rem; padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n\n/* نجاح */\n.overlay{ position:fixed; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center }\n.card{ background:var(--bg); color:var(--fg); padding:1rem 1.25rem; border-radius:1rem; box-shadow:0 10px 30px rgba(0,0,0,.25); display:flex; flex-direction:column; gap:.75rem; align-items:center }\n.big{ font-size:1.25rem; font-weight:700 }\n</style>\n","export default \"__VITE_ASSET___uDUUqD3__\"","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{ title:'التحدي 5: مخطط مثلث (ضرب)',\n       rule:'كل مربع على الضلع يساوي حاصل ضرب العدديْن في الدائرتيْن المجاورتين له. اسحب القيم المفقودة إلى المربعات.',\n       bank:'لوحة الأعداد', newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n       correct:'إجابة صحيحة', wrong:'تحقق من القيم', clear:'تفريغ الخلية' },\n  en:{ title:'Challenge 5: Triangle product',\n       rule:'Each edge-square equals the product of the two adjacent circles. Drag missing values into the squares.',\n       bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n       correct:'Correct answer', wrong:'Check your values', clear:'Clear cell' }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong5.mp3'   // تأكد من الاسم الصحيح للملف\n\nconst sOK   = typeof Audio !== 'undefined' ? new Audio(successUrl) : null\nconst sClap = typeof Audio !== 'undefined' ? new Audio(clapUrl)    : null\nconst sWrong= typeof Audio !== 'undefined' ? new Audio(wrongUrl)   : null\n\nsOK && (sOK.preload = 'auto')\nsClap && (sClap.preload = 'auto')\nsWrong && (sWrong.preload = 'auto')\n\nconst EXTRA_CHOICES = 4\n\n// utils\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n// state\nconst circles = ref([2,3,4])         // [top, left, right]\nconst squares = ref({ t:0, l:0, r:0 }) // edge squares: top edge between left-right? define: t=top (left-right base), l=left (top-left), r=right (top-right)\nconst blanks = ref(new Set())        // which of ['t','l','r'] are blank\nconst answerMap = ref({})            // key -> value\nconst manualDrafts = ref({})         // key -> manual string\nconst bankCounts = ref({})           // value -> remaining copies\nconst solved = ref(false)\nconst toast = ref(null)\n\nfunction buildTriangle(){\n  // choose distinct circle values 2..9\n  const vals = shuffle([2,3,4,5,6,7,8,9]).slice(0,3)\n  circles.value = [vals[0], vals[1], vals[2]]\n  const [ct, cl, cr] = circles.value   // top, left, right\n  // products\n  squares.value = {\n    l: ct * cl, // left edge (top-left)\n    r: ct * cr, // right edge (top-right)\n    t: cl * cr  // base edge (left-right)\n  }\n}\n\nfunction pickBlanks(){\n  const keys = ['l','r','t']\n  const k = rndInt(2,3)\n  blanks.value = new Set(shuffle(keys).slice(0,k))\n}\n\nfunction rebuildBank(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const v = squares.value[k]\n    counts[v]=(counts[v]||0)+1\n  })\n  // subtract placed answers\n  for(const [k,v] of Object.entries(answerMap.value)){\n    counts[v]=(counts[v]||0)-1\n  }\n  for(const [v,ct] of Object.entries(counts)){ if(ct<=0) delete counts[v] }\n\n  // inject extra distractor values to broaden the number bank\n  const neededExtras = EXTRA_CHOICES\n  if (neededExtras > 0) {\n    const usedValues = new Set(Object.keys(counts).map(Number))\n    const answerValues = new Set(Object.values(squares.value))\n    const pool = []\n    for (let value = 4; value <= 81; value++) {\n      if (!usedValues.has(value) && !answerValues.has(value)) {\n        pool.push(value)\n      }\n    }\n    for (let i = 0; i < neededExtras && pool.length; i++) {\n      const idx = Math.floor(Math.random() * pool.length)\n      const candidate = pool.splice(idx, 1)[0]\n      counts[candidate] = (counts[candidate] || 0) + 1\n    }\n  }\n\n  bankCounts.value = counts\n}\n\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}; manualDrafts.value={}\n  buildTriangle()\n  pickBlanks()\n  rebuildBank()\n}\n\nfunction isFilled(){\n  for(const k of blanks.value){ if(answerMap.value[k]==null) return false }\n  return true\n}\nfunction isCorrect(){\n  if(!isFilled()) return false\n  for(const k of blanks.value){\n    if(answerMap.value[k] !== squares.value[k]) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar'?'أكمل كل الخانات':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){\n  answerMap.value={}\n  rebuildBank()\n  toast.value=null; solved.value=false\n}\n\n// drag & drop\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction setAnswer(key, value, { fromManual = false } = {}){\n  if(Number.isNaN(value)) return\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  if(fromManual){\n    if((bankCounts.value[value]||0)>0){\n      bankCounts.value[value]-=1\n    }\n  } else {\n    if((bankCounts.value[value]||0)===0) return\n    bankCounts.value[value]-=1\n  }\n  answerMap.value[key]=value\n  manualDrafts.value = { ...manualDrafts.value, [key]: String(value) }\n  toast.value=null\n}\n\nfunction onDrop(ev,key){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  setAnswer(key, v)\n}\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n  manualDrafts.value = { ...manualDrafts.value, [key]: '' }\n}\n\nfunction onManualInput(key, value){\n  manualDrafts.value = { ...manualDrafts.value, [key]: value }\n}\n\nfunction commitManual(key){\n  const raw = (manualDrafts.value[key] ?? '').trim()\n  if(raw === ''){\n    clearCell(key)\n    return\n  }\n  const num = Number(raw)\n  if(!Number.isFinite(num)) return\n  setAnswer(key, num, { fromManual: true })\n}\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"challenge5 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <!-- الرسم -->\n    <div class=\"tri-wrap\">\n      <!-- الروابط -->\n      <svg class=\"links\" viewBox=\"0 0 300 260\" preserveAspectRatio=\"none\">\n        <line x1=\"150\" y1=\"40\" x2=\"60\"  y2=\"140\" />\n        <line x1=\"150\" y1=\"40\" x2=\"240\" y2=\"140\" />\n        <line x1=\"60\"  y1=\"140\" x2=\"240\" y2=\"140\" />\n      </svg>\n\n      <!-- الدوائر -->\n      <div class=\"circle top\" :style=\"numDir\">{{ circles[0] }}</div>\n      <div class=\"circle left\" :style=\"numDir\">{{ circles[1] }}</div>\n      <div class=\"circle right\" :style=\"numDir\">{{ circles[2] }}</div>\n\n      <!-- المربعات على الأضلاع -->\n      <!-- left edge -->\n      <div class=\"square left-sq\">\n        <template v-if=\"!blanks.has('l')\">\n          <span class=\"num\" :style=\"numDir\">{{ squares.l }}</span>\n        </template>\n        <template v-else>\n          <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event,'l')\">\n            <span v-if=\"answerMap['l']!=null\" class=\"num\" :style=\"numDir\">{{ answerMap['l'] }}</span>\n            <span v-else class=\"placeholder\">؟</span>\n          </div>\n          <input\n            class=\"manual-entry\"\n            type=\"number\"\n            :value=\"manualDrafts['l'] ?? ''\"\n            @input=\"onManualInput('l', $event.target.value)\"\n            @change=\"commitManual('l')\"\n            @blur=\"commitManual('l')\"\n            :placeholder=\"props.lang==='ar' ? 'أدخل رقمًا' : 'Enter value'\"\n          />\n          <button class=\"clear\" @click=\"clearCell('l')\"><Eraser class=\"ic\"/> {{ T[L].clear }}</button>\n        </template>\n      </div>\n\n      <!-- right edge -->\n      <div class=\"square right-sq\">\n        <template v-if=\"!blanks.has('r')\">\n          <span class=\"num\" :style=\"numDir\">{{ squares.r }}</span>\n        </template>\n        <template v-else>\n          <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event,'r')\">\n            <span v-if=\"answerMap['r']!=null\" class=\"num\" :style=\"numDir\">{{ answerMap['r'] }}</span>\n            <span v-else class=\"placeholder\">؟</span>\n          </div>\n          <input\n            class=\"manual-entry\"\n            type=\"number\"\n            :value=\"manualDrafts['r'] ?? ''\"\n            @input=\"onManualInput('r', $event.target.value)\"\n            @change=\"commitManual('r')\"\n            @blur=\"commitManual('r')\"\n            :placeholder=\"props.lang==='ar' ? 'أدخل رقمًا' : 'Enter value'\"\n          />\n          <button class=\"clear\" @click=\"clearCell('r')\"><Eraser class=\"ic\"/> {{ T[L].clear }}</button>\n        </template>\n      </div>\n\n      <!-- base edge -->\n      <div class=\"square base-sq\">\n        <template v-if=\"!blanks.has('t')\">\n          <span class=\"num\" :style=\"numDir\">{{ squares.t }}</span>\n        </template>\n        <template v-else>\n          <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event,'t')\">\n            <span v-if=\"answerMap['t']!=null\" class=\"num\" :style=\"numDir\">{{ answerMap['t'] }}</span>\n            <span v-else class=\"placeholder\">؟</span>\n          </div>\n          <input\n            class=\"manual-entry\"\n            type=\"number\"\n            :value=\"manualDrafts['t'] ?? ''\"\n            @input=\"onManualInput('t', $event.target.value)\"\n            @change=\"commitManual('t')\"\n            @blur=\"commitManual('t')\"\n            :placeholder=\"props.lang==='ar' ? 'أدخل رقمًا' : 'Enter value'\"\n          />\n          <button class=\"clear\" @click=\"clearCell('t')\"><Eraser class=\"ic\"/> {{ T[L].clear }}</button>\n        </template>\n      </div>\n    </div>\n\n    <!-- البنك -->\n    <div class=\"side\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button v-for=\"v in bankList\" :key=\"v + '_' + Math.random()\" class=\"chip\"\n                draggable=\"true\" @dragstart=\"onDragStart($event, v)\" :style=\"numDir\">\n          {{ v }}\n        </button>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n\n    <div v-if=\"solved\" class=\"overlay\">\n      <div class=\"card\">\n        <div class=\"big\">{{ T[L].correct }}</div>\n        <button class=\"btn\" @click=\"newPuzzle\">{{ T[L].newQ }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.challenge5{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .challenge5{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n/* الرسم */\n.tri-wrap{\n  position:relative;\n  width:360px;            /* أوسع من قبل لتباعد الأضلاع */\n  height:300px;\n  margin:0 auto 1rem;\n  background:var(--bg);\n  border-radius:1rem;\n  box-shadow:0 4px 14px rgba(0,0,0,.06);\n  padding:8px;            /* مساحة إضافية من الداخل */\n}\n\n.links{ position:absolute; inset:0; pointer-events:none }\n.links line{ stroke:#cbd5e1; stroke-width:2 }\n\n.circle{\n  position:absolute; width:58px; height:58px; border-radius:9999px;\n  background:rgba(234,179,8,.22);\n  display:flex; align-items:center; justify-content:center;\n  font-weight:700; font-variant-numeric:tabular-nums;\n}\n.top{   left:151px; top:24px }     /* 180 - 29 */\n.left{  left:51px;  top:168px }\n.right{ right:51px; top:168px }\n\n.square{\n  position:absolute; width:74px; height:60px;\n  background:rgba(99,102,241,.08);\n  border-radius:.75rem; border:1px dashed #cbd5e1;\n  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.25rem;\n}\n.left-sq{  left:70px;  top:88px }  /* أبعدناها عن الوسط */\n.right-sq{ right:70px; top:88px }\n.base-sq{  left:143px; bottom:32px } /* (360-74)/2 لتوسيط القاعدة */\n\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.15rem }\n.placeholder{ color:var(--muted); font-size:1.15rem }\n.dropzone{ width:100%; flex:1; display:flex; align-items:center; justify-content:center; }\n.manual-entry{ width:100%; padding:.4rem .55rem; border-radius:.6rem; border:1px solid rgba(99,102,241,.2); background:rgba(255,255,255,.92); font-size:.95rem; direction:ltr; color:var(--fg); }\n.manual-entry:focus{ outline:none; border-color:rgba(15,138,62,.45); box-shadow:0 0 0 3px rgba(15,138,62,.16); }\n[data-theme=\"dark\"] .manual-entry{ background:rgba(15,23,42,.8); border-color:rgba(148,163,184,.25); color:var(--fg); }\n.clear{ font-size:.75rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n\n/* البنك */\n.side{ max-width:420px; margin:0 auto }\n.bank-title{ font-weight:600; color:var(--muted); margin:.25rem 0 }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ border:1px solid #e5e7eb55; background:var(--bg); padding:.4rem .6rem; border-radius:.75rem; cursor:grab; font-variant-numeric:tabular-nums }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.toast{ margin-top:.5rem; padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n\n/* نجاح */\n.overlay{ position:fixed; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center }\n.card{ background:var(--bg); color:var(--fg); padding:1rem 1.25rem; border-radius:1rem; box-shadow:0 10px 30px rgba(0,0,0,.25); display:flex; flex-direction:column; gap:.75rem; align-items:center }\n.big{ font-size:1.25rem; font-weight:700 }\n</style>\n","<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { RefreshCw, RotateCcw, Check } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title: 'التحدي 6: اختر ثلاث خلايا من شبكة بحيث لا تكون في الصف أو العمود نفسه ويكون مجموعها الهدف',\n    rule: (n,target)=> `شبكة ${n}×${n}. اختر ثلاث خلايا كلٌّ منها في صف وعمود مختلفين بحيث يساوي مجموعها ${target}.`,\n    newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n    correct:'إجابة صحيحة', wrong:'تحقق من القيود أو من المجموع', picked:'المختار: '\n  },\n  en:{\n    title: 'Challenge 6: Pick 3 cells in different rows and columns to reach the target sum',\n    rule: (n,target)=> `A ${n}×${n} grid. Pick three cells, one per distinct row and column, whose sum equals ${target}.`,\n    newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct', wrong:'Check the constraints or the sum', picked:'Picked: '\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds (approved style) ===== */\nimport successUrl from '@/assets/sounds/success.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\n\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== utils ===== */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n/* ===== state ===== */\nconst n = ref(3)\nconst grid = ref([])             // 2D numbers\nconst target = ref(0)            // target sum (guaranteed solution exists)\nconst picks = ref([])            // [{r,c}]\nconst solved = ref(false)\nconst toast = ref(null)\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\nconst pickedSum = computed(()=> picks.value.reduce((s,p)=> s + grid.value[p.r][p.c], 0))\n\n/* ensure a valid solution exists by constructing it first */\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; picks.value=[]\n  n.value = [3,4][rndInt(0,1)]\n  // fill grid with random 1..9\n  grid.value = Array.from({length:n.value}, ()=> Array.from({length:n.value}, ()=> rndInt(1,9)))\n  // choose 3 distinct rows and 3 distinct cols\n  const rows = shuffle([...Array(n.value).keys()]).slice(0,3)\n  const cols = shuffle([...Array(n.value).keys()]).slice(0,3)\n  // map 1-1 by permutation\n  const permCols = shuffle(cols.slice())\n  const solution = rows.map((r,i)=> ({r, c: permCols[i]}))\n  target.value = solution.reduce((s,p)=> s + grid.value[p.r][p.c], 0)\n}\n\nfunction resetPicks(){ picks.value=[]; toast.value=null; solved.value=false }\n\nfunction toggleCell(r,c){\n  if(solved.value) return\n  const idx = picks.value.findIndex(p=> p.r===r && p.c===c)\n  if(idx>=0){ picks.value.splice(idx,1); return }\n  if(picks.value.length===3) return\n  picks.value.push({r,c})\n}\n\nfunction rowsDistinct(){\n  const rs = picks.value.map(p=>p.r); return new Set(rs).size===picks.value.length\n}\nfunction colsDistinct(){\n  const cs = picks.value.map(p=>p.c); return new Set(cs).size===picks.value.length\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',\n      { method:'GET', credentials:'include' })\n  }catch{}\n}\nasync function checkNow(){\n  if(picks.value.length!==3){ toast.value = L.value==='ar' ? 'اختر ثلاث خلايا' : 'Pick three cells'; sWrong&&sWrong.play(); return }\n  if(!rowsDistinct() || !colsDistinct()){ toast.value=T[L.value].wrong; sWrong&&sWrong.play(); return }\n  if(pickedSum.value===target.value){\n    solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint()\n  }else{\n    toast.value=T[L.value].wrong; sWrong&&sWrong.play()\n  }\n}\n\nonMounted(newPuzzle)\n</script>\n\n<template>\n  <div class=\"challenge6 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(n, target) }}</p>\n\n    <!-- <div class=\"grid\" :style=\"{'--n': n}\">\n      <button\n        v-for=\"(row,r) in grid\" :key=\"'r'+r\"\n        v-for=\"(val,c) in row\" :key=\"r+'-'+c\"\n        class=\"cell\"\n        :class=\"{ picked: picks.some(p=>p.r===r&&p.c===c) }\"\n        @click=\"toggleCell(r,c)\"\n        :style=\"numDir\"\n      >{{ val }}</button>\n    </div> -->\n    <div class=\"grid\" v-for=\"(row,r) in grid\" :key=\"'r'+r\" :style=\"{'--n': n}\">\n  <button\n    v-for=\"(val,c) in row\" :key=\"r+'-'+c\"\n    class=\"cell\"\n    :class=\"{ picked: picks.some(p=>p.r===r && p.c===c) }\"\n    @click=\"toggleCell(r,c)\"\n    :style=\"numDir\"\n  >\n    {{ val }}\n  </button>\n</div>\n\n\n    <div class=\"panel\">\n      <div class=\"status\">\n        {{ T[L].picked }} {{ picks.length }} · {{ pickedSum }}\n      </div>\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetPicks\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.challenge6{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .challenge6{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.grid{\n  --gap: .5rem;\n  display:grid;\n  grid-template-columns: repeat(var(--n), 78px);\n  grid-auto-rows: 78px;\n  gap: var(--gap);\n  background:var(--bg);\n  width:max-content;\n  margin:.25rem 0 1rem;\n  padding:.6rem;\n  border-radius:1rem;\n  box-shadow:0 4px 14px rgba(0,0,0,.06);\n}\n.cell{\n  border:1px solid #e5e7ebaa;\n  background:var(--bg);\n  border-radius:.9rem;\n  font-variant-numeric: tabular-nums;\n  font-weight:700;\n  font-size:1.25rem;\n  cursor:pointer;\n  display:flex; align-items:center; justify-content:center;\n  transition: box-shadow .15s, background .15s, border-color .15s;\n}\n.cell:hover{ box-shadow:0 0 0 3px rgba(99,102,241,.18) inset }\n.cell.picked{\n  background: rgba(59,130,246,.12);\n  border-color: #93c5fd;\n  box-shadow: 0 0 0 3px rgba(59,130,246,.28) inset;\n}\n\n.panel{ display:flex; align-items:center; gap:1rem; flex-wrap:wrap }\n.status{ color:var(--muted) }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap }\n.btn{\n  display:inline-flex; align-items:center; gap:.35rem;\n  padding:.5rem .7rem; border-radius:.75rem;\n  border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer\n}\n.ic{ width:16px; height:16px }\n\n.toast{\n  padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b;\n  border:1px solid #fecaca\n}\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{ title:'التحدي 7: جدار أعداد (هرم جمع)',\n       rule:'كل خانة تساوي مجموع الخليتين اللتين تحتها مباشرة. اسحب القيم المفقودة لإكمال الهرم.',\n       bank:'لوحة الأعداد', newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n       correct:'إجابة صحيحة', wrong:'تحقق من القيم', clear:'تفريغ الخلية' },\n  en:{ title:'Challenge 7: Sum Pyramid',\n       rule:'Each cell equals the sum of the two cells directly below. Drag missing values to complete the pyramid.',\n       bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n       correct:'Correct answer', wrong:'Check your values', clear:'Clear cell' }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds (approved style) ===== */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong.mp3'\n\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== utils ===== */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j]]=[x[j],x[i]]} return x }\n\nconst EXTRA_CHOICES = 6\n\n/* ===== state ===== */\nconst baseN = ref(4)                 // عدد خلايا القاعدة\nconst rows = ref([])                 // rows[0]=القاعدة، ثم للأعلى\nconst blanks = ref(new Set())        // \"r,c\" حيث r فهرس الصف السفلي=0\nconst answerMap = ref({})            // \"r,c\" -> value\nconst manualDrafts = ref({})         // \"r,c\" -> string\nconst bankCounts = ref({})           // value -> count\nconst solved = ref(false)\nconst toast = ref(null)\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\n\n/* بناء الهرم */\nfunction buildPyramid(n){\n  const rs = []\n  // القاعدة 1..9\n  rs[0] = Array.from({length:n}, ()=> rndInt(1,9))\n  for(let r=1;r<n;r++){\n    rs[r] = Array.from({length:n-r}, (_,c)=> rs[r-1][c] + rs[r-1][c+1])\n  }\n  return rs\n}\n\nfunction keyOf(r,c){ return `${r},${c}` }\n\nfunction pickBlanks(n){\n  const all=[]\n  for(let r=0;r<n;r++){\n    for(let c=0;c<rows.value[r].length;c++){\n      all.push([r,c])\n    }\n  }\n  // دع واحدة على الأقل ظاهرة في كل صف غير القاعدة\n  const keep = new Set()\n  for(let r=1;r<n;r++){\n    const idx = rndInt(0, rows.value[r].length-1)\n    keep.add(keyOf(r, idx))\n  }\n  const candidates = all.filter(([r,c])=> r>0 && !keep.has(keyOf(r,c))) // لا نفرّغ القاعدة كلها\n  const k = rndInt(4, 6)\n  const chosen = shuffle(candidates).slice(0,k)\n  return new Set(chosen.map(([r,c])=> keyOf(r,c)))\n}\n\nfunction rebuildBank(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const [r,c]=k.split(',').map(Number)\n    const v = rows.value[r][c]\n    counts[v]=(counts[v]||0)+1\n  })\n  for(const [k,v] of Object.entries(answerMap.value)){\n    counts[v]=(counts[v]||0)-1\n  }\n  for(const [v,ct] of Object.entries(counts)){ if(ct<=0) delete counts[v] }\n\n  if (EXTRA_CHOICES > 0) {\n    const usedValues = new Set(Object.keys(counts).map(Number))\n    const realValues = new Set()\n    rows.value.forEach(row => row.forEach(val => realValues.add(val)))\n    const pool = []\n    const minCandidate = 2\n    const maxCandidate = 120\n    for (let value = minCandidate; value <= maxCandidate; value++) {\n      if (!usedValues.has(value) && !realValues.has(value)) {\n        pool.push(value)\n      }\n    }\n    for (let i = 0; i < EXTRA_CHOICES && pool.length; i++) {\n      const idx = Math.floor(Math.random() * pool.length)\n      const candidate = pool.splice(idx, 1)[0]\n      counts[candidate] = (counts[candidate] || 0) + 1\n    }\n  }\n\n  bankCounts.value=counts\n}\n\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}; manualDrafts.value={}\n  rows.value = buildPyramid(baseN.value)\n  blanks.value = pickBlanks(baseN.value)\n  rebuildBank()\n}\n\nfunction isFilled(){\n  for(const k of blanks.value){ if(answerMap.value[k]==null) return false }\n  return true\n}\nfunction isCorrect(){\n  if(!isFilled()) return false\n  for(const k of blanks.value){\n    const [r,c]=k.split(',').map(Number)\n    if(answerMap.value[k] !== rows.value[r][c]) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar'?'أكمل كل الخانات':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){\n  answerMap.value={}\n  manualDrafts.value={}\n  rebuildBank()\n  toast.value=null; solved.value=false\n}\n\n/* سحب/إفلات */\nfunction setAnswer(key, value, { fromManual = false } = {}){\n  if(Number.isNaN(value)) return\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  if(fromManual){\n    if((bankCounts.value[value]||0)>0){\n      bankCounts.value[value]-=1\n    }\n  } else {\n    if((bankCounts.value[value]||0)===0) return\n    bankCounts.value[value]-=1\n  }\n  answerMap.value[key]=value\n  manualDrafts.value = { ...manualDrafts.value, [key]: String(value) }\n  toast.value=null\n}\n\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev,key){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  setAnswer(key, v)\n}\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n  manualDrafts.value = { ...manualDrafts.value, [key]: '' }\n}\n\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{})\n\nfunction onManualInput(key, value){\n  manualDrafts.value = { ...manualDrafts.value, [key]: value }\n}\n\nfunction commitManual(key){\n  const raw = (manualDrafts.value[key] ?? '').trim()\n  if(raw === ''){\n    clearCell(key)\n    return\n  }\n  const num = Number(raw)\n  if(!Number.isFinite(num)) return\n  setAnswer(key, num, { fromManual: true })\n}\n</script>\n\n<template>\n  <div class=\"challenge7 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <div class=\"pyramid\">\n      <!-- من الأسفل للأعلى -->\n      <div class=\"prow\" v-for=\"(row,r) in rows\" :key=\"'r'+r\" :style=\"{ '--cols': row.length }\">\n        <div class=\"cell\" v-for=\"(v,c) in row\" :key=\"r+'-'+c\">\n          <template v-if=\"!(blanks.has(`${r},${c}`))\">\n            <span class=\"num\" :style=\"numDir\">{{ v }}</span>\n          </template>\n          <template v-else>\n            <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event, `${r},${c}`)\">\n              <span v-if=\"answerMap[`${r},${c}`]!=null\" class=\"num\" :style=\"numDir\">\n                {{ answerMap[`${r},${c}`] }}\n              </span>\n              <span v-else class=\"placeholder\">؟</span>\n            </div>\n            <input\n              class=\"manual-entry\"\n              type=\"number\"\n              :value=\"manualDrafts[`${r},${c}`] ?? ''\"\n              @input=\"onManualInput(`${r},${c}`, $event.target.value)\"\n              @change=\"commitManual(`${r},${c}`)\"\n              @blur=\"commitManual(`${r},${c}`)\"\n              :placeholder=\"props.lang==='ar' ? 'أدخل رقمًا' : 'Enter value'\"\n            />\n            <button class=\"clear\" @click=\"clearCell(`${r},${c}`)\"><Eraser class=\"ic\" /> {{ T[L].clear }}</button>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"side\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button v-for=\"v in bankList\" :key=\"v + '_' + Math.random()\" class=\"chip\"\n                draggable=\"true\" @dragstart=\"onDragStart($event, v)\" :style=\"numDir\">\n          {{ v }}\n        </button>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.challenge7{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .challenge7{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem } .rule{ color:var(--muted); margin:0 0 1rem }\n\n/* الهرم */\n.pyramid{\n  background:var(--bg);\n  border-radius:1rem;\n  box-shadow:0 4px 14px rgba(0,0,0,.06);\n  padding:1rem;\n  width:max-content;\n  margin-bottom:1rem;\n}\n.prow{\n  display:grid;\n  grid-template-columns: repeat(var(--cols), 88px);\n  gap:.5rem;\n  justify-content:center;\n  margin-top:.5rem;\n}\n.cell{\n  min-height:64px;\n  border:1px dashed #cbd5e1;\n  background:rgba(99,102,241,.06);\n  border-radius:.75rem;\n  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.25rem;\n}\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.15rem }\n.placeholder{ color:var(--muted); font-size:1.15rem }\n.dropzone{ width:100%; height:100%; display:flex; align-items:center; justify-content:center; }\n.manual-entry{ width:100%; padding:.4rem .55rem; border-radius:.6rem; border:1px solid rgba(99,102,241,.2); background:rgba(255,255,255,.92); font-size:.95rem; direction:ltr; color:var(--fg); }\n.manual-entry:focus{ outline:none; border-color:rgba(15,138,62,.45); box-shadow:0 0 0 3px rgba(15,138,62,.16); }\n[data-theme=\"dark\"] .manual-entry{ background:rgba(15,23,42,.8); border-color:rgba(148,163,184,.25); color:var(--fg); }\n.clear{ font-size:.75rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n\n/* البنك */\n.side{ max-width:520px }\n.bank-title{ font-weight:600; color:var(--muted); margin:.25rem 0 }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ border:1px solid #e5e7eb55; background:var(--bg); padding:.4rem .6rem; border-radius:.75rem; cursor:grab; font-variant-numeric:tabular-nums }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.toast{ margin-top:.5rem; padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","export default \"__VITE_ASSET__BwH7CfKX__\"","<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { RefreshCw, RotateCcw, Check } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title: 'التحدي 1 (المستوى الثاني): كوّن جملة عددية تستعمل 1،2،3،4،5 دون تكرار',\n    rule: (t)=> `اكتب تعبيراً حسابياً يستخدم الأرقام ١،٢،٣،٤،٥ كلٌّ مرة واحدة فقط ويكون ناتجه ${t}. يمكن استعمال + - × ÷ والأقواس، ولا يُسمح بأي أرقام أخرى أو تكرار.`,\n    inputPH: 'اكتب التعبير هنا… مثل: (5*4)*(3+2)*1',\n    keys: 'لوحة المفاتيح',\n    newQ:'سؤال جديد', reset:'مسح', check:'تحقّق',\n    correct:'إجابة صحيحة', wrong:'تحقق من الشروط أو من النتيجة',\n    used: 'استخدام الأرقام:',\n    note: 'تلميح: يمكنك دائماً استعمال ×1 دون تغيير النتيجة.'\n  },\n  en:{\n    title: 'Level 2 – Challenge 1: Build an expression with 1..5 once each',\n    rule: (t)=> `Write an expression that uses digits 1,2,3,4,5 exactly once and evaluates to ${t}. Allowed: + - * / and parentheses. No other digits or repeats.`,\n    inputPH: 'Type expression… e.g., (5*4)*(3+2)*1',\n    keys: 'Keypad',\n    newQ:'New puzzle', reset:'Clear', check:'Check',\n    correct:'Correct', wrong:'Check constraints or value',\n    used: 'Digits usage:',\n    note: 'Hint: multiplying by 1 keeps the value unchanged.'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds (approved style) ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/oh_no.mp3'\n\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== random helpers ===== */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\n\n/* ===== state ===== */\nconst expr = ref('')\nconst target = ref(0)\nconst toast = ref(null)\nconst solved = ref(false)\n\nconst digits = [1,2,3,4,5]\nconst ops = ['+','-','*','/','(',')']\n\n/* build guaranteed-solvable target:\n   we form E = (a op1 b) op2 (c op3 d) then optionally *1 or +1\n   where {a,b,c,d} is a permutation of {2,3,4,5} and '1' remains available. */\nfunction buildTarget(){\n  const nums = shuffle([2,3,4,5])\n  const [a,b,c,d] = nums\n  const pick = arr => arr[rndInt(0,arr.length-1)]\n  const op1 = pick(['+','-','*','/'])\n  const op2 = pick(['+','-','*','/'])\n  const op3 = pick(['+','-','*','/'])\n  // build safely using Function\n  const val = (x)=>{\n    try{ return Function(`return (${x});`)() }catch{ return null }\n  }\n  let e = `( ${a} ${op1} ${b} ) ${op2} ( ${c} ${op3} ${d} )`\n  let v = val(e)\n  // if invalid (division by zero or non-integer not required), retry a few times\n  let tries=0\n  while((v==null || !isFinite(v)) && tries<20){\n    return buildTarget()\n  }\n  // randomly decide to multiply by 1 or leave as-is but attach *1 so digit 1 is used\n  if(Math.random()<0.7){\n    e = `(${e}) * 1`\n    v = val(e)\n  }else{\n    // if we didn't use *1, add +1 and then subtract 1 using grouping to still use digit 1 once:\n    // ((...)+1) - 1  == original value\n    e = `((${e}) + 1) - 1`\n    v = val(e)\n  }\n  target.value = v\n  // reset input\n  expr.value = ''\n  toast.value = null\n  solved.value = false\n  // we don't show the internal expression to اللاعب\n}\n\n/* keypad helpers */\nfunction addToken(t){ expr.value += t }\nfunction backspace(){ expr.value = expr.value.slice(0,-1) }\nfunction clearAll(){ expr.value=''; toast.value=null; solved.value=false }\n\n/* validators */\nconst usage = computed(()=>{\n  const u = {1:0,2:0,3:0,4:0,5:0}\n  for(const ch of expr.value){\n    if('12345'.includes(ch)) u[ch]++\n  }\n  return u\n})\nfunction onlyAllowedChars(s){\n  return /^[\\d\\+\\-\\*\\/\\(\\)\\s]*$/.test(s)\n}\nfunction usesExactDigits(){\n  // forbid any digit other than 1..5\n  if(/[06789]/.test(expr.value)) return false\n  const u = usage.value\n  return digits.every(d => u[d]===1)\n}\nfunction safeEval(s){\n  try{\n    // prevent dangerous tokens\n    if(!onlyAllowedChars(s)) return null\n    // replace '÷' or '×' if user pasted them\n    s = s.replace(/×/g,'*').replace(/÷/g,'/')\n    // block consecutive digits that create multi-digit numbers not from 1..5\n    // allow numbers 1..5 and parentheses/ops/spaces\n    if(/\\b(?![1-5]\\b)\\d+\\b/.test(s)) return null\n    return Function(`\"use strict\"; return (${s});`)()\n  }catch{ return null }\n}\nasync function checkNow(){\n  const v = safeEval(expr.value)\n  if(v==null || !isFinite(v) || !usesExactDigits()){\n    toast.value = T[L.value].wrong\n    sWrong && sWrong.play()\n    return\n  }\n  if(Math.abs(v - target.value) < 1e-9){\n    solved.value = true\n    toast.value = T[L.value].correct\n    sOK && sOK.play(); sClap && sClap.play()\n    try{\n      await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'})\n    }catch{}\n  }else{\n    toast.value = T[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\n\nonMounted(buildTarget)\n</script>\n\n<template>\n  <div class=\"lvl2c1 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(target) }}</p>\n\n    <div class=\"panel\">\n      <input\n        class=\"expr\"\n        :placeholder=\"T[L].inputPH\"\n        v-model=\"expr\"\n        dir=\"ltr\"\n        inputmode=\"numeric\"\n        autocomplete=\"off\"\n        spellcheck=\"false\"\n      />\n\n      <div class=\"usage\">\n        {{ T[L].used }}\n        <span v-for=\"d in digits\" :key=\"d\" class=\"u\"\n              :class=\"{ok: usage[d]===1, bad: usage[d]>1}\">\n          {{ d }}: {{ usage[d] }}\n        </span>\n      </div>\n\n      <div class=\"keypad\">\n        <div class=\"label\">{{ T[L].keys }}</div>\n        <div class=\"row\">\n          <button class=\"k\" v-for=\"d in digits\" :key=\"'d'+d\" @click=\"addToken(String(d))\">{{ d }}</button>\n          <button class=\"k\" v-for=\"o in ops\" :key=\"'o'+o\" @click=\"addToken(o)\">{{ o }}</button>\n          <button class=\"k wide\" @click=\"backspace\">⌫</button>\n        </div>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"clearAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"buildTarget\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div class=\"hint\">{{ T[L].note }}</div>\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c1{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl2c1{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.panel{\n  background:var(--bg); border-radius:1rem; padding:1rem;\n  box-shadow:0 4px 14px rgba(0,0,0,.06); max-width:720px\n}\n.expr{\n  width:100%; padding:.6rem .75rem; border-radius:.75rem;\n  border:1px solid #e5e7ebaa; background:var(--bg); color:var(--fg);\n  font-size:1.1rem; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", monospace;\n}\n.usage{ margin:.5rem 0; color:var(--muted); display:flex; gap:.6rem; flex-wrap:wrap }\n.u{ padding:.15rem .45rem; border-radius:.5rem; border:1px solid #e5e7ebaa; background:var(--bg) }\n.u.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n.u.bad{ background:#fee2e2; color:#991b1b; border-color:#fecaca }\n\n.keypad{ margin-top:.5rem }\n.keypad .label{ color:var(--muted); margin-bottom:.25rem }\n.keypad .row{ display:flex; flex-wrap:wrap; gap:.4rem }\n.k{\n  padding:.45rem .6rem; border-radius:.6rem; border:1px solid #e5e7ebaa;\n  background:var(--bg); cursor:pointer; min-width:40px\n}\n.k.wide{ min-width:64px }\n\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.6rem }\n.btn{\n  display:inline-flex; align-items:center; gap:.35rem;\n  padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55;\n  background:var(--bg); cursor:pointer\n}\n.ic{ width:16px; height:16px }\n\n.hint{ color:var(--muted); margin-top:.5rem; font-size:.9rem }\n\n.toast{ margin-top:.6rem; padding:.55rem .8rem; border-radius:.75rem;\n        background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'المستوى الثاني – التحدي 2: أكمل مربعاً سحرياً',\n    rule:(M)=>`ضع الأعداد بحيث يكون مجموع كل صف وعمود وقطر مساوياً ${M}. اسحب القيم المفقودة إلى أماكنها. الأعداد جميعها مختلفة.`,\n    bank:'لوحة الأعداد', newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n    correct:'إجابة صحيحة', wrong:'تحقق من المجاميع أو التكرار', clear:'تفريغ الخلية'\n  },\n  en:{\n    title:'Level 2 – Challenge 2: Complete a magic square',\n    rule:(M)=>`Place numbers so each row, column, and diagonal sums to ${M}. Drag the missing values into place. All numbers are distinct.`,\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct answer', wrong:'Check sums or duplicates', clear:'Clear cell'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds (approved style) ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\n\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== utils ===== */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\n\n/* ===== Lo Shu base (1..9, magic sum 15) ===== */\nconst LO_SHU = [\n  [8,1,6],\n  [3,5,7],\n  [4,9,2]\n]\nfunction symmetries(mat){\n  const rot = m => [[m[2][0],m[1][0],m[0][0]],[m[2][1],m[1][1],m[0][1]],[m[2][2],m[1][2],m[0][2]]]\n  const flipH = m => m.map(r=>r.slice().reverse())\n  const s = []\n  let m = mat\n  for(let i=0;i<4;i++){ s.push(m); s.push(flipH(m)); m = rot(m) }\n  // remove duplicates by string\n  const uniq = []; const seen = new Set()\n  for(const k of s){ const t=JSON.stringify(k); if(!seen.has(t)){ uniq.push(k); seen.add(t) } }\n  return uniq\n}\nconst SHAPES = symmetries(LO_SHU)\n\n/* ===== state ===== */\nconst grid = ref([[0,0,0],[0,0,0],[0,0,0]])     // القيم الصحيحة\nconst M = ref(0)                                 // الثابت السحري\nconst blanks = ref(new Set())                    // \"r,c\"\nconst answerMap = ref({})                        // \"r,c\" -> value\nconst bankCounts = ref({})                       // value -> count\nconst solved = ref(false)\nconst toast = ref(null)\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\nconst keyOf = (r,c)=> `${r},${c}`\n\n/* نبني مربع سحري عام بالقيمة: a + s*L */\nfunction buildMagic(){\n  const shape = SHAPES[rndInt(0, SHAPES.length-1)]\n  const step = [1,2,3,4,5][rndInt(0,4)]          // فارق بين القيم\n  const off  = rndInt(0, 6)                      // إزاحة صغيرة\n  const g = Array.from({length:3}, ()=> Array(3).fill(0))\n  for(let r=0;r<3;r++) for(let c=0;c<3;c++){\n    g[r][c] = off + step*shape[r][c]\n  }\n  grid.value = g\n  M.value = step*15 + 3*off\n}\n\n/* نختار فراغات */\nfunction pickBlanks(){\n  const all=[]\n  for(let r=0;r<3;r++) for(let c=0;c<3;c++) all.push([r,c])\n  // اترك 3–4 خلايا ظاهرة كمساعدة\n  const keep = shuffle(all).slice(0, rndInt(3,4))\n  const keepSet = new Set(keep.map(([r,c])=>keyOf(r,c)))\n  const chosen = all.filter(([r,c])=> !keepSet.has(keyOf(r,c)))\n  blanks.value = new Set(chosen.map(([r,c])=>keyOf(r,c)))\n}\n\n/* بنك الأعداد */\nfunction rebuildBank(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const [r,c]=k.split(',').map(Number)\n    const v=grid.value[r][c]\n    counts[v]=(counts[v]||0)+1\n  })\n  for(const [k,v] of Object.entries(answerMap.value)){\n    counts[v]=(counts[v]||0)-1\n  }\n  for(const [v,ct] of Object.entries(counts)){ if(ct<=0) delete counts[v] }\n  bankCounts.value=counts\n}\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\n/* لغز جديد */\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}\n  buildMagic()\n  pickBlanks()\n  rebuildBank()\n}\n\n/* تحقق */\nfunction isFilled(){ for(const k of blanks.value){ if(answerMap.value[k]==null) return false } return true }\nfunction filledMatrix(){\n  const m = grid.value.map(r=>r.slice())\n  for(const k of blanks.value){\n    const [r,c]=k.split(',').map(Number)\n    m[r][c]=answerMap.value[k]\n  }\n  return m\n}\nfunction noDuplicates(m){\n  const seen=new Set()\n  for(const r of m) for(const v of r){\n    if(seen.has(v)) return false\n    seen.add(v)\n  }\n  return true\n}\nfunction sumsOk(m){\n  const s = (a,b,c)=> a+b+c\n  for(let i=0;i<3;i++){\n    if(s(m[i][0],m[i][1],m[i][2])!==M.value) return false\n    if(s(m[0][i],m[1][i],m[2][i])!==M.value) return false\n  }\n  if(s(m[0][0],m[1][1],m[2][2])!==M.value) return false\n  if(s(m[0][2],m[1][1],m[2][0])!==M.value) return false\n  return true\n}\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value=L.value==='ar'?'أكمل كل الخانات':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  const m = filledMatrix()\n  if(noDuplicates(m) && sumsOk(m)){\n    solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint()\n  }else{\n    toast.value=T[L.value].wrong; sWrong&&sWrong.play()\n  }\n}\nfunction resetAll(){ answerMap.value={}; rebuildBank(); toast.value=null; solved.value=false }\n\n/* سحب/إفلات */\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev,key){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  if((bankCounts.value[v]||0)===0) return\n  bankCounts.value[v]-=1\n  answerMap.value[key]=v\n  toast.value=null\n}\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n}\n\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"lvl2c2 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(M) }}</p>\n\n    <div class=\"board\">\n      <div class=\"row\" v-for=\"r in 3\" :key=\"'r'+r\">\n        <div class=\"cell\" v-for=\"c in 3\" :key=\"'c'+r+'-'+c\">\n          <template v-if=\"!blanks.has(`${r-1},${c-1}`)\">\n            <span class=\"num\" :style=\"numDir\">{{ grid[r-1][c-1] }}</span>\n          </template>\n          <template v-else>\n            <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event, `${r-1},${c-1}`)\">\n              <span v-if=\"answerMap[`${r-1},${c-1}`]!=null\" class=\"num\" :style=\"numDir\">\n                {{ answerMap[`${r-1},${c-1}`] }}\n              </span>\n              <span v-else class=\"placeholder\">؟</span>\n            </div>\n            <button class=\"clear\" @click=\"clearCell(`${r-1},${c-1}`)\"><Eraser class=\"ic\" /> {{ T[L].clear }}</button>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"side\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button v-for=\"v in bankList\" :key=\"v + '_' + Math.random()\" class=\"chip\"\n                draggable=\"true\" @dragstart=\"onDragStart($event, v)\" :style=\"numDir\">\n          {{ v }}\n        </button>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c2{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl2c2{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n/* اللوح */\n.board{\n  display:inline-block; background:var(--bg);\n  padding:1rem; border-radius:1rem; box-shadow:0 4px 14px rgba(0,0,0,.06)\n}\n.row{ display:grid; grid-template-columns:repeat(3, 96px) }\n.cell{\n  border:1px dashed #cbd5e1; min-height:88px; display:flex; flex-direction:column;\n  align-items:center; justify-content:center; gap:.25rem; padding:.25rem\n}\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.25rem }\n.placeholder{ color:var(--muted); font-size:1.25rem }\n.dropzone{ width:100%; height:100%; display:flex; align-items:center; justify-content:center; background:rgba(99,102,241,.06); border-radius:.5rem }\n.clear{ font-size:.75rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n\n/* البنك */\n.side{ margin-top:1rem; max-width:520px }\n.bank-title{ font-weight:600; color:var(--muted); margin:.25rem 0 }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ border:1px solid #e5e7eb55; background:var(--bg); padding:.4rem .6rem; border-radius:.75rem; cursor:grab; font-variant-numeric:tabular-nums }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.toast{ margin-top:.5rem; padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'المستوى الثاني – التحدي 3: أوصل المسألة بالنتيجة الصحيحة',\n    rule:'اسحب عدداً من ستة أرقام إلى كل خانة بحسب الخاصية المطلوبة: مضاعف 2، 3، 4، 5. كل عدد يُستخدم مرة واحدة.',\n    bank:'لوحة الأعداد', newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n    correct:'إجابة صحيحة', wrong:'تحقق من الخواص', clear:'تفريغ الخلية',\n    lab2:'مضاعفًا للعدد 2', lab3:'مضاعفًا للعدد 3', lab4:'مضاعفًا للعدد 4', lab5:'مضاعفًا للعدد 5'\n  },\n  en:{\n    title:'Level 2 – Challenge 3: Match each rule to a six-digit number',\n    rule:'Drag one six-digit number to each rule: multiple of 2, 3, 4, 5. Each number can be used once.',\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct', wrong:'Check the properties', clear:'Clear cell',\n    lab2:'Multiple of 2', lab3:'Multiple of 3', lab4:'Multiple of 4', lab5:'Multiple of 5'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* sounds (approved style) */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* utils */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n/* state */\nconst bank = ref([])                // numbers to drag\nconst bankCounts = ref({})          // number -> remaining count (always 1 here)\nconst answer = ref({ m2:null, m3:null, m4:null, m5:null })\nconst toast = ref(null)\nconst solved = ref(false)\n\n/* helpers: properties */\nconst isMul2 = n => n%2===0\nconst isMul3 = n => (String(n).split('').reduce((s,d)=>s+ +d,0))%3===0\nconst isMul4 = n => n%100 % 4===0\nconst isMul5 = n => n%10===0 || n%10===5\n\n/* random six-digit generators with constraints */\nfunction rand6(predicate=(n)=>true){\n  // ensure six digits (no leading zero)\n  while(true){\n    const first = rndInt(1,9)\n    let s = String(first)\n    for(let i=0;i<5;i++) s += String(rndInt(0,9))\n    const n = Number(s)\n    if(predicate(n)) return n\n  }\n}\nfunction rand6_last(d, extra=()=>true){\n  // generate with last digit d and extra predicate\n  while(true){\n    const first = rndInt(1,9)\n    let s = String(first)\n    for(let i=0;i<4;i++) s += String(rndInt(0,9))\n    s += String(d)\n    const n = Number(s)\n    if(extra(n)) return n\n  }\n}\n\n/* build puzzle: guarantee at least one valid for each slot */\nfunction newPuzzle(){\n  solved.value=false; toast.value=null\n  answer.value = { m2:null, m3:null, m4:null, m5:null }\n\n  const picked = new Set()\n  const addUnique = (n)=>{\n    const k=String(n); if(picked.has(k)) return false; picked.add(k); return true\n  }\n\n  // One clear candidate for each property\n  // m5: end with 5 (not even)\n  let a5 = rand6_last(5, n=>!isMul3(n) || rndInt(0,1)) // sometimes also mult3\n  while(!addUnique(a5)) a5 = rand6_last(5)\n  // m2: even but not *4 (to reduce ambiguity)\n  let a2 = rand6_last([0,2,4,6,8][rndInt(0,4)], n=>!isMul5(n) && !isMul4(n))\n  while(!addUnique(a2)) a2 = rand6_last([0,2,4,6,8][rndInt(0,4)], n=>!isMul5(n) && !isMul4(n))\n  // m4: divisible by 4 (this is even by nature)\n  let a4 = rand6(n=>isMul4(n))\n  while(!addUnique(a4)) a4 = rand6(n=>isMul4(n))\n  // m3: sum of digits divisible by 3, avoid ending 0/5 to reduce overlap\n  let a3 = rand6(n=>isMul3(n) && !isMul5(n))\n  while(!addUnique(a3)) a3 = rand6(n=>isMul3(n) && !isMul5(n))\n\n  const core = [a2,a3,a4,a5]\n\n  // add distractors that satisfy none of the four props\n  const distract = []\n  while(distract.length<4){\n    let d = rand6(n=> (n%2!==0) && !isMul3(n) && !isMul5(n) && !isMul4(n))\n    if(addUnique(d)) distract.push(d)\n  }\n\n  bank.value = shuffle(core.concat(distract))\n  bankCounts.value = Object.fromEntries(bank.value.map(v=>[v,1]))\n}\n\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction dropTo(key, ev){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  if((bankCounts.value[v]||0)===0) return\n  // return previous value to bank\n  if(answer.value[key]!=null){\n    bankCounts.value[answer.value[key]] = (bankCounts.value[answer.value[key]]||0)+1\n  }\n  answer.value[key] = v\n  bankCounts.value[v]-=1\n  toast.value=null\n}\nfunction clearCell(key){\n  if(answer.value[key]!=null){\n    bankCounts.value[answer.value[key]] = (bankCounts.value[answer.value[key]]||0)+1\n    answer.value[key]=null\n  }\n}\n\nfunction isFilled(){ return ['m2','m3','m4','m5'].every(k=>answer.value[k]!=null) }\nfunction isCorrect(){\n  return  isMul2(answer.value.m2) &&\n          isMul3(answer.value.m3) &&\n          isMul4(answer.value.m4) &&\n          isMul5(answer.value.m5)\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',\n      {method:'GET',credentials:'include'})\n  }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value=L.value==='ar'?'أكمل كل الخانات':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){\n    solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint()\n  }else{ toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){\n  answer.value = { m2:null, m3:null, m4:null, m5:null }\n  // restore counts\n  bankCounts.value = Object.fromEntries(bank.value.map(v=>[v,1]))\n  toast.value=null; solved.value=false\n}\n\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"lvl2c3 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <div class=\"cards\">\n      <div class=\"card\">\n        <div class=\"label\">{{ T[L].lab2 }}</div>\n        <div class=\"drop\"\n             @dragover=\"allowDrop\" @drop=\"dropTo('m2', $event)\">\n          <span v-if=\"answer.m2!=null\" class=\"num\">{{ answer.m2 }}</span>\n          <span v-else class=\"placeholder\">؟</span>\n        </div>\n        <button class=\"clear\" @click=\"clearCell('m2')\"><Eraser class=\"ic\"/>{{ T[L].clear }}</button>\n      </div>\n\n      <div class=\"card\">\n        <div class=\"label\">{{ T[L].lab3 }}</div>\n        <div class=\"drop\"\n             @dragover=\"allowDrop\" @drop=\"dropTo('m3', $event)\">\n          <span v-if=\"answer.m3!=null\" class=\"num\">{{ answer.m3 }}</span>\n          <span v-else class=\"placeholder\">؟</span>\n        </div>\n        <button class=\"clear\" @click=\"clearCell('m3')\"><Eraser class=\"ic\"/>{{ T[L].clear }}</button>\n      </div>\n\n      <div class=\"card\">\n        <div class=\"label\">{{ T[L].lab4 }}</div>\n        <div class=\"drop\"\n             @dragover=\"allowDrop\" @drop=\"dropTo('m4', $event)\">\n          <span v-if=\"answer.m4!=null\" class=\"num\">{{ answer.m4 }}</span>\n          <span v-else class=\"placeholder\">؟</span>\n        </div>\n        <button class=\"clear\" @click=\"clearCell('m4')\"><Eraser class=\"ic\"/>{{ T[L].clear }}</button>\n      </div>\n\n      <div class=\"card\">\n        <div class=\"label\">{{ T[L].lab5 }}</div>\n        <div class=\"drop\"\n             @dragover=\"allowDrop\" @drop=\"dropTo('m5', $event)\">\n          <span v-if=\"answer.m5!=null\" class=\"num\">{{ answer.m5 }}</span>\n          <span v-else class=\"placeholder\">؟</span>\n        </div>\n        <button class=\"clear\" @click=\"clearCell('m5')\"><Eraser class=\"ic\"/>{{ T[L].clear }}</button>\n      </div>\n    </div>\n\n    <div class=\"bank\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button v-for=\"v in bank\"\n                :key=\"v\"\n                class=\"chip\"\n                :disabled=\"(bankCounts[v]||0)===0\"\n                draggable=\"true\"\n                @dragstart=\"onDragStart($event, v)\">\n          {{ v }}\n          <small v-if=\"(bankCounts[v]||0)===0\">✓</small>\n        </button>\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n      <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n      <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n    </div>\n\n    <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c3{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl2c3{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.cards{ display:grid; grid-template-columns: repeat(2, minmax(260px,1fr)); gap:1rem; margin-bottom:.75rem }\n.card{ background:var(--bg); border:1px solid #e5e7eb55; border-radius:1rem; padding:.75rem }\n.label{ color:var(--muted); margin-bottom:.35rem }\n.drop{\n  height:74px; border:1px dashed #cbd5e1; border-radius:.75rem; background:rgba(99,102,241,.06);\n  display:flex; align-items:center; justify-content:center;\n}\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.25rem }\n.placeholder{ color:var(--muted); font-size:1.25rem }\n.clear{ margin-top:.35rem; font-size:.8rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.bank-title{ font-weight:600; color:var(--muted); margin:.25rem 0 }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{\n  border:1px solid #e5e7eb55; background:var(--bg); padding:.45rem .6rem; border-radius:.75rem; cursor:grab;\n  font-variant-numeric:tabular-nums; min-width:108px; display:flex; justify-content:space-between; align-items:center;\n}\n.chip[disabled]{ opacity:.55; cursor:not-allowed }\n\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n\n.toast{ margin-top:.6rem; padding:.55rem .8rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { RefreshCw, RotateCcw, Check } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'المستوى الثاني – التحدي 4: اختر الإجابة الصحيحة',\n    rule:(S,D)=>`ما العددان اللذان حاصل جمعهما ${S} والفرق بينهما ${D}؟ اختر الزوج الصحيح.`,\n    choices:'الخيارات',\n    newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n    correct:'إجابة صحيحة', wrong:'إجابة غير صحيحة'\n  },\n  en:{\n    title:'Level 2 – Challenge 4: Pick the correct pair',\n    rule:(S,D)=>`Which two numbers have sum ${S} and difference ${D}? Pick the correct pair.`,\n    choices:'Choices',\n    newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct', wrong:'Incorrect'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds (approved style) ===== */\nimport successUrl from '@/assets/sounds/success4.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong4.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* utils */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n/* state */\nconst S = ref(0)           // sum\nconst D = ref(0)           // difference (non-negative)\nconst solution = ref([0,0])// [big, small]\nconst options = ref([])    // array of [big, small]\nconst pick = ref(null)\nconst toast = ref(null)\nconst solved = ref(false)\n\nfunction buildPuzzle(){\n  solved.value=false; toast.value=null; pick.value=null\n  // choose integers with same parity and S>D\n  let a,b\n  // pick base numbers 1..60\n  a = rndInt(6, 60)\n  b = rndInt(1, a-1)\n  // ensure parity constraints automatically satisfied by using a,b to derive S,D\n  const big = Math.max(a,b), small = Math.min(a,b)\n  S.value = big + small\n  D.value = big - small\n  solution.value = [big, small]\n\n  // build distractors\n  const opts = [[big,small]]\n  // 1: swap (still correct for difference? swap gives same pair visually إذا عرضنا \"الكبير ، الصغير\")\n  // لتجنّب التطابق، سنعرض دائماً (الكبير، الصغير). إذن نضيف مشتتات أخرى فقط.\n  const gen = ()=>{\n    // random pair not equal to solution and distinct\n    let x = rndInt(1, 65), y = rndInt(1, 65)\n    if(x<y) [x,y]=[y,x]\n    return [x,y]\n  }\n  while(opts.length<6){\n    let p = gen()\n    // avoid having same sum and diff كليهما\n    if(p[0]+p[1]===S.value && p[0]-p[1]===D.value) continue\n    // sometimes share only sum أو فقط الفرق لإرباك منطقي\n    if(rndInt(0,1)===0){ // same sum, wrong diff\n      const s = S.value\n      const x = rndInt(1, s-1); const y = s-x; const pair=[Math.max(x,y), Math.min(x,y)]\n      if(pair[0]-pair[1]!==D.value) p=pair\n    }else{ // same diff, wrong sum\n      const d = D.value\n      const y = rndInt(1, 50); const x = y + d; const pair=[x,y]\n      if(pair[0]+pair[1]!==S.value) p=pair\n    }\n    if(!opts.some(q=> q[0]===p[0] && q[1]===p[1])) opts.push(p)\n  }\n  options.value = shuffle(opts)\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',\n      {method:'GET',credentials:'include'})\n  }catch{}\n}\n\nasync function checkNow(){\n  if(pick.value==null){ toast.value = L.value==='ar'?'اختر إجابة':'Pick an answer'; sWrong&&sWrong.play(); return }\n  const chosen = options.value[pick.value]\n  const ok = (chosen[0]+chosen[1]===S.value) && (chosen[0]-chosen[1]===D.value)\n  if(ok){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\n\nfunction resetAll(){ pick.value=null; toast.value=null; solved.value=false }\n\nonMounted(buildPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"lvl2c4 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(S, D) }}</p>\n\n    <div class=\"choices\">\n      <div class=\"choice\" v-for=\"(op, i) in options\" :key=\"i\" @click=\"pick=i\" :class=\"{sel: pick===i}\">\n        <input type=\"radio\" :checked=\"pick===i\" />\n        <span class=\"pair\">{{ op[0] }} ، {{ op[1] }}</span>\n        <small class=\"hint\">({{ op[0] + op[1] }} ، {{ op[0] - op[1] }})</small>\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n      <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n      <button class=\"btn\" @click=\"buildPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n    </div>\n\n    <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c4{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl2c4{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.choices{\n  display:grid; gap:.5rem;\n  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\n  margin-bottom:.75rem;\n}\n.choice{\n  display:flex; align-items:center; gap:.5rem;\n  padding:.55rem .7rem; border-radius:.75rem;\n  border:1px solid #e5e7ebaa; background:var(--bg);\n  cursor:pointer;\n}\n.choice.sel{ box-shadow:0 0 0 3px rgba(59,130,246,.25) inset; border-color:#93c5fd }\n.pair{ font-variant-numeric:tabular-nums; font-weight:700 }\n.hint{ color:var(--muted) } /* يعرض (المجموع، الفرق) للتحقق الذهني */\n\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{\n  display:inline-flex; align-items:center; gap:.35rem;\n  padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55;\n  background:var(--bg); cursor:pointer\n}\n.ic{ width:16px; height:16px }\n\n.toast{ margin-top:.6rem; padding:.55rem .8rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { Check, RotateCcw, RefreshCw } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'المستوى الثاني – التحدي 5: أكمل طرح الكسور',\n    rule:(t)=>`ضع عددًا كليًا في كل مربع لتصبح المعادلة صحيحة:  ${t.num}/${t.den} =  ١/□  −  □/${t.d2}.  اسحب الرقمين من لوحة الأعداد.`,\n    bank:'لوحة الأعداد', newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n    correct:'إجابة صحيحة', wrong:'تحقق من القيم', clear:'تفريغ الخلية'\n  },\n  en:{\n    title:'Level 2 – Challenge 5: Complete the fraction subtraction',\n    rule:(t)=>`Place integers to make the equation true:  ${t.num}/${t.den} =  1/□  −  □/${t.d2}.  Drag the two numbers from the bank.`,\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct answer', wrong:'Check values', clear:'Clear'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds (approved style) ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== utils ===== */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\n\n/* ===== state ===== */\nconst target = ref({num:1, den:6, d2:6})  // المعادلة الحالية\nconst bank = ref([])              // أرقام السحب\nconst answer = ref({ A:null, N:null })\nconst toast = ref(null)\nconst solved = ref(false)\nconst puzzleBank = [\n  { id:'p1', target:{ num:1, den:6 }, d2:6,  solution:{ A:2, N:2 }, extras:[1,3,4,5,7,8] },\n  { id:'p2', target:{ num:1, den:6 }, d2:9,  solution:{ A:2, N:3 }, extras:[1,4,5,6,7,8] },\n  { id:'p3', target:{ num:1, den:6 }, d2:12, solution:{ A:2, N:4 }, extras:[1,3,5,6,7,9] },\n  { id:'p4', target:{ num:1, den:6 }, d2:6,  solution:{ A:3, N:1 }, extras:[2,4,5,7,8,9] },\n  { id:'p5', target:{ num:2, den:6 }, d2:6,  solution:{ A:2, N:1 }, extras:[3,4,5,7,8,9] },\n  { id:'p6', target:{ num:1, den:8 }, d2:8,  solution:{ A:2, N:3 }, extras:[1,2,4,5,6,7] },\n  { id:'p7', target:{ num:3, den:8 }, d2:8,  solution:{ A:2, N:1 }, extras:[2,4,5,6,7,9] },\n  { id:'p8', target:{ num:1, den:9 }, d2:9,  solution:{ A:3, N:2 }, extras:[1,3,4,5,6,7] },\n  { id:'p9', target:{ num:3, den:9 }, d2:6,  solution:{ A:2, N:1 }, extras:[2,4,5,7,8,9] },\n  { id:'p10', target:{ num:1, den:10 }, d2:5, solution:{ A:2, N:2 }, extras:[1,3,4,6,7,8] },\n  { id:'p11', target:{ num:2, den:10 }, d2:10, solution:{ A:2, N:3 }, extras:[1,4,5,6,7,9] },\n  { id:'p12', target:{ num:1, den:12 }, d2:4, solution:{ A:3, N:1 }, extras:[2,5,6,7,8,9] }\n]\n\nconst currentPuzzle = ref(puzzleBank[0])\nconst lastPuzzleId = ref(null)\n\nfunction pickNextPuzzle(){\n  if(puzzleBank.length === 1){\n    lastPuzzleId.value = puzzleBank[0].id\n    return puzzleBank[0]\n  }\n  let candidate\n  do{\n    candidate = puzzleBank[Math.floor(Math.random() * puzzleBank.length)]\n  }while(candidate.id === lastPuzzleId.value)\n  lastPuzzleId.value = candidate.id\n  return candidate\n}\n\nfunction buildBank(puzzle){\n  const options = new Set([puzzle.solution.A, puzzle.solution.N])\n  const spreads = puzzle.extras || []\n  spreads.forEach(v => options.add(v))\n  while(options.size < 8){\n    options.add(rndInt(1, 15))\n  }\n  return shuffle([...options])\n}\n\nconst digitsMap = ['٠','١','٢','٣','٤','٥','٦','٧','٨','٩']\n\nfunction formatDigit(value){\n  const str = String(value)\n  return props.lang==='ar' ? str.replace(/[0-9]/g, d => digitsMap[Number(d)]) : str\n}\n\nconst ruleText = computed(() => {\n  if(L.value === 'ar'){\n    return `ضع عددًا كليًا في كل مربع لتصبح المعادلة صحيحة:  ${formatDigit(target.value.num)}/${formatDigit(target.value.den)} =  ١/□  −  □/${formatDigit(target.value.d2)}.`\n  }\n  return `Place integers to make the equation true:  ${target.value.num}/${target.value.den} =  1/□  −  □/${target.value.d2}.`\n})\n\nfunction newPuzzle(){\n  solved.value = false\n  toast.value = null\n  answer.value = { A:null, N:null }\n\n  const puzzle = pickNextPuzzle()\n  currentPuzzle.value = puzzle\n  target.value = { num:puzzle.target.num, den:puzzle.target.den, d2:puzzle.d2 }\n  bank.value = buildBank(puzzle)\n}\n\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction dropTo(key, ev){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  answer.value[key] = v\n  toast.value=null\n}\nfunction isFilled(){ return answer.value.A!=null && answer.value.N!=null }\nfunction isCorrect(){\n  if(!isFilled()) return false\n  const AVal = answer.value.A\n  const NVal = answer.value.N\n  if(!AVal || !NVal) return false\n  const lhs = (1 / AVal) - (NVal / target.value.d2)\n  const rhs = target.value.num / target.value.den\n  return Math.abs(lhs - rhs) < 1e-9\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',\n      {method:'GET',credentials:'include'})\n  }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar'?'أكمل الخانتين':'Fill both blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){ answer.value={A:null,N:null}; toast.value=null; solved.value=false }\n\nonMounted(newPuzzle)\n</script>\n\n<template>\n  <div class=\"lvl2c5 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ ruleText }}</p>\n\n    <!-- المعادلة -->\n    <div class=\"equation\" dir=\"ltr\">\n      <div class=\"frac\">\n        <div class=\"top\">{{ formatDigit(target.num) }}</div>\n        <div class=\"bar\"></div>\n        <div class=\"bot\">{{ formatDigit(target.den) }}</div>\n      </div>\n      <span class=\"eq\">=</span>\n\n      <div class=\"frac\">\n        <div class=\"top\">1</div>\n        <div class=\"bar\"></div>\n        <div class=\"bot\">\n          <div class=\"drop\" @dragover=\"allowDrop\" @drop=\"dropTo('A', $event)\">\n            <span v-if=\"answer.A!=null\" class=\"num\">{{ formatDigit(answer.A) }}</span>\n            <span v-else class=\"placeholder\">□</span>\n          </div>\n        </div>\n      </div>\n\n      <span class=\"minus\">−</span>\n\n      <div class=\"frac\">\n        <div class=\"top\">\n          <div class=\"drop\" @dragover=\"allowDrop\" @drop=\"dropTo('N', $event)\">\n            <span v-if=\"answer.N!=null\" class=\"num\">{{ formatDigit(answer.N) }}</span>\n            <span v-else class=\"placeholder\">□</span>\n          </div>\n        </div>\n        <div class=\"bar\"></div>\n        <div class=\"bot\">{{ formatDigit(target.d2) }}</div>\n      </div>\n    </div>\n\n    <!-- البنك -->\n    <div class=\"bank\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button v-for=\"v in bank\" :key=\"v\" class=\"chip\" draggable=\"true\" @dragstart=\"onDragStart($event, v)\">\n          {{ formatDigit(v) }}\n        </button>\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n      <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n      <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n    </div>\n\n    <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c5{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl2c5{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.equation{\n  display:flex; align-items:center; gap:1rem;\n  background:var(--bg); border-radius:1rem; padding:1rem;\n  box-shadow:0 4px 14px rgba(0,0,0,.06); width:max-content\n}\n.eq,.minus{ font-size:1.4rem; font-weight:700 }\n.frac{ display:grid; grid-template-rows:auto 4px auto; align-items:center; min-width:64px }\n.frac .bar{ height:4px; background:#cbd5e1; border-radius:2px; margin:.15rem 0 }\n.top,.bot{ display:flex; align-items:center; justify-content:center; font-variant-numeric:tabular-nums; font-weight:700; font-size:1.25rem }\n\n.drop{\n  min-width:46px; min-height:36px; border:1px dashed #cbd5e1; border-radius:.5rem;\n  background:rgba(99,102,241,.06); display:flex; align-items:center; justify-content:center;\n}\n.placeholder{ color:#9ca3af; font-size:1.1rem }\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.1rem }\n\n.bank-title{ font-weight:600; color:var(--muted); margin:.75rem 0 .25rem }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{\n  border:1px solid #e5e7eb55; background:var(--bg); padding:.45rem .6rem; border-radius:.75rem;\n  cursor:grab; font-variant-numeric:tabular-nums; min-width:46px; text-align:center\n}\n\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{\n  display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem;\n  border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer\n}\n.ic{ width:16px; height:16px }\n\n.toast{ margin-top:.6rem; padding:.55rem .8rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","<script setup>\nimport { ref, computed, watch, onMounted } from 'vue'\nimport { Check, RotateCcw, RefreshCw } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثاني – التحدي 6: مقارنة الأوزان',\n    question:'ما وزن المربع الواحد مقارنة بالمثلث؟',\n    newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n    correct:'إجابة صحيحة! أحسنت في مقارنة الأوزان.',\n    wrong:'إجابة غير صحيحة. أعد التفكير في المعادلات.',\n    pick:'اختر إجابة أولاً.'\n  },\n  en:{\n    title:'Level 2 – Challenge 6: Comparing weights',\n    question:'How does the weight of the square compare to the triangle?',\n    newQ:'New question', reset:'Reset', check:'Check',\n    correct:'Correct! Great job comparing the weights.',\n    wrong:'That is incorrect. Revisit the equations.',\n    pick:'Select an option first.'\n  }\n}\n\nconst L = computed(()=> (copy[props.lang]?props.lang:'ar'))\n/* sounds */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst digitsMap = ['٠','١','٢','٣','٤','٥','٦','٧','٨','٩']\n\nfunction toArabicNumber(value){\n  return String(value).replace(/[0-9]/g, d => digitsMap[Number(d)])\n}\n\nfunction formatNumberByLang(value, lang){\n  return lang === 'ar' ? toArabicNumber(value) : String(value)\n}\n\nfunction unitsWord(value, lang){\n  if(lang === 'ar'){\n    return value <= 2 ? 'وحدة' : 'وحدات'\n  }\n  return value === 1 ? 'unit' : 'units'\n}\n\nconst optionTemplates = {\n  ar:{\n    double:'ضعف وزن المثلث',\n    equal:'يساوي وزن المثلث',\n    half:'نصف وزن المثلث',\n    less:(n) => `أقل بـ${toArabicNumber(n)} ${unitsWord(n,'ar')} من وزن المثلث`,\n    more:(n) => `أكثر بـ${toArabicNumber(n)} ${unitsWord(n,'ar')} من وزن المثلث`\n  },\n  en:{\n    double:'Twice the triangle',\n    equal:'Equal to the triangle',\n    half:'Half the triangle',\n    less:(n) => `${n} ${unitsWord(n,'en')} less than the triangle`,\n    more:(n) => `${n} ${unitsWord(n,'en')} more than the triangle`\n  }\n}\n\nfunction buildOptions(puzzle, lang){\n  const magnitude = Math.abs(puzzle.difference)\n  const templates = optionTemplates[lang]\n  return [\n    { id:'a', text:templates.double },\n    { id:'b', text:templates.equal },\n    { id:'c', text:templates.half },\n    { id:'d', text:templates.less(magnitude) },\n    { id:'e', text:templates.more(magnitude) }\n  ]\n}\n\nfunction buildPremiseLines(puzzle, lang){\n  const squareTotal = formatNumberByLang(puzzle.totals.square, lang)\n  const triangleTotal = formatNumberByLang(puzzle.totals.triangle, lang)\n  if(lang === 'ar'){\n    return [\n      `وزن كرتان ومربع واحد يساويان ${squareTotal} وحدات.`,\n      `وزن كرتان ومثلث واحد يساويان ${triangleTotal} وحدات.`\n    ]\n  }\n  return [\n    `Two balls and one square weigh ${squareTotal} units.`,\n    `Two balls and one triangle weigh ${triangleTotal} units.`\n  ]\n}\n\nconst puzzleBank = [\n  { id:'p1', totals:{ square:8, triangle:6 }, difference:2, correctId:'e' },\n  { id:'p2', totals:{ square:10, triangle:7 }, difference:3, correctId:'e' },\n  { id:'p3', totals:{ square:9, triangle:11 }, difference:-2, correctId:'d' },\n  { id:'p4', totals:{ square:12, triangle:8 }, difference:4, correctId:'e' },\n  { id:'p5', totals:{ square:7, triangle:10 }, difference:-3, correctId:'d' }\n]\n\nconst currentPuzzle = ref(puzzleBank[0])\nconst lastPuzzleId = ref(null)\n\nconst correctId = computed(() => currentPuzzle.value.correctId)\nfunction pickNextPuzzle(){\n  if(puzzleBank.length === 1){\n    lastPuzzleId.value = puzzleBank[0].id\n    return puzzleBank[0]\n  }\n  let candidate\n  do{\n    candidate = puzzleBank[Math.floor(Math.random() * puzzleBank.length)]\n  }while(candidate.id === lastPuzzleId.value)\n  lastPuzzleId.value = candidate.id\n  return candidate\n}\n\nfunction shuffle(arr){\n  return arr.slice().sort(() => Math.random() - 0.5)\n}\n\nconst selected = ref(null)\nconst feedback = ref(null)\nconst solved = ref(false)\nconst shuffledOptions = ref(null)\n\nfunction applyOptions(){\n  shuffledOptions.value = shuffle(buildOptions(currentPuzzle.value, L.value))\n}\n\nfunction resetAll(){\n  selected.value = null\n  feedback.value = null\n  solved.value = false\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',\n      { method:'GET', credentials:'include' })\n  }catch{}\n}\n\nasync function checkAnswer(){\n  if(!selected.value){\n    feedback.value = copy[L.value].pick\n    sWrong && sWrong.play()\n    return\n  }\n  if(selected.value === correctId.value){\n    const wasSolved = solved.value\n    solved.value = true\n    feedback.value = copy[L.value].correct\n    sOK && sOK.play(); sClap && sClap.play()\n    if(!wasSolved){\n      await addPoint()\n    }\n  } else {\n    solved.value = false\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\n\nfunction randomizePrompt(){\n  const puzzle = pickNextPuzzle()\n  currentPuzzle.value = puzzle\n  resetAll()\n  applyOptions()\n}\n\nwatch(() => props.lang, () => {\n  resetAll()\n  applyOptions()\n})\n\nconst optionsList = computed(() => shuffledOptions.value || buildOptions(currentPuzzle.value, L.value))\n\nconst premiseLines = computed(() => buildPremiseLines(currentPuzzle.value, L.value))\n\nonMounted(() => {\n  randomizePrompt()\n})\n</script>\n\n<template>\n  <div class=\"lvl2c6 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p v-for=\"(line, idx) in premiseLines\" :key=\"idx\" class=\"premise\">{{ line }}</p>\n      <p class=\"question\">{{ copy[L].question }}</p>\n    </header>\n\n    <section class=\"options\">\n      <label\n        v-for=\"option in optionsList\"\n        :key=\"option.id\"\n        class=\"option\"\n        :class=\"{ selected: selected === option.id }\"\n      >\n        <input\n          type=\"radio\"\n          name=\"weight-comparison\"\n          :value=\"option.id\"\n          v-model=\"selected\"\n        />\n        <span class=\"mark\"></span>\n        <span class=\"text\">{{ option.text }}</span>\n      </label>\n    </section>\n\n    <section class=\"actions\">\n      <button class=\"btn\" @click=\"checkAnswer\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"randomizePrompt\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c6{ --fg:#1f2937; --bg:#f8fafc; --panel:#ffffff; --bd:#cbd5f5; --accent:#2563eb;\n  padding:24px; border-radius:18px; color:var(--fg); background:linear-gradient(135deg,#eef2ff,#f8fafc);\n  box-shadow:0 14px 30px rgba(37,99,235,.12) }\n[data-theme=\"dark\"] .lvl2c6{ --fg:#e2e8f0; --bg:#0f172a; --panel:#111c32; --bd:#1d2a44; --accent:#60a5fa;\n  background:linear-gradient(135deg,#0f172a,#1e293b) }\n\n.head{ margin-bottom:18px }\n.title{ margin:0 0 12px; font-size:1.6rem; font-weight:800 }\n.premise{ margin:0 0 6px; line-height:1.6; opacity:.85 }\n.question{ margin:10px 0 0; font-size:1.1rem; font-weight:700 }\n\n.options{ display:grid; gap:12px; margin:20px 0 }\n.option{ position:relative; display:flex; align-items:center; gap:12px; padding:14px 16px; border-radius:14px;\n  border:2px solid transparent; background:var(--panel); box-shadow:0 8px 20px rgba(37,99,235,.08); cursor:pointer;\n  transition:.18s }\n.option:hover{ transform:translateY(-1px); box-shadow:0 12px 28px rgba(37,99,235,.12) }\n.option.selected{ border-color:var(--accent); box-shadow:0 12px 28px rgba(37,99,235,.18) }\n.option input{ display:none }\n.mark{ width:18px; height:18px; border-radius:50%; border:2px solid var(--accent); display:inline-block; flex-shrink:0; position:relative }\n.option.selected .mark::after{ content:''; position:absolute; inset:3px; border-radius:50%; background:var(--accent) }\n.text{ font-weight:600; line-height:1.5 }\n\n.actions{ display:flex; flex-wrap:wrap; gap:12px; margin-top:18px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 20px; border-radius:12px; border:1px solid var(--bd);\n  background:var(--panel); cursor:pointer; font-weight:700; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(37,99,235,.12) }\n.ic{ width:18px; height:18px }\n\n.feedback{ margin-top:20px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700 }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n</style>\n","<script setup>\nimport { ref, computed, reactive, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'المستوى الثالث – التحدي 1: هرم الضرب',\n    rule:'املأ مربعات الهرم بحيث يساوي كل مربع أعلى حاصل ضرب الخليتين تحته. اسحب الأرقام الصحيحة من اللوحة حتى يكتمل الهرم.',\n    hint:'تذكّر أن كل خطوة نحو الأعلى هي نتيجة ضرب الخليتين في الأسفل مباشرة.',\n    bank:'لوحة الأرقام', newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n    correct:'أحسنت! اكتمل الهرم.', wrong:'تحقّق مرة أخرى، هناك قيمة في غير مكانها.',\n    clear:'تفريغ الخلية'\n  },\n  en:{\n    title:'Level 3 – Challenge 1: Multiplication Pyramid',\n    rule:'Fill the pyramid so that every cell above equals the product of the two cells directly beneath it. Drag the correct numbers from the bank.',\n    hint:'Remember: each step upward is the product of the two numbers underneath.',\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Great! The pyramid is complete.', wrong:'Something is off. Recheck the placements.',\n    clear:'Clear cell'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* sounds */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* helpers */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\nfunction keyOf(r,c){ return `${r},${c}` }\n\n/* state */\nconst rows = ref([])                  // صفوف الهرم من القاعدة للأعلى\nconst blanks = ref(new Set())         // مفاتيح الخلايا الفارغة\nconst answerMap = reactive({})        // key -> value المسحوبة\nconst totalCounts = reactive({})      // العدد الكلي لكل قيمة متاحة\nconst bankCounts = reactive({})       // العدد المتبقي لكل قيمة\nconst toast = ref(null)\nconst solved = ref(false)\n\nconst numDir = computed(()=>({ direction:'ltr', unicodeBidi:'isolate' }))\nconst displayRows = computed(()=> rows.value.map((cells,index)=>({ cells, index })).slice().reverse())\n\nfunction usageOf(val){\n  let used = 0\n  for(const k in answerMap){ if(answerMap[k] === val) used++ }\n  return used\n}\n\nfunction rebuildBank(){\n  const available = {}\n  for(const [valStr,total] of Object.entries(totalCounts)){\n    const val = Number(valStr)\n    const remaining = total - usageOf(val)\n    if(remaining > 0) available[val] = remaining\n  }\n  for(const k in bankCounts){ delete bankCounts[k] }\n  for(const [val,ct] of Object.entries(available)) bankCounts[val] = ct\n}\n\nfunction generatePyramid(){\n  while(true){\n    const base = Array.from({length:4}, ()=> rndInt(2,6))\n    const built = [base]\n    for(let r=1;r<4;r++){\n      const prev = built[r-1]\n      const row = []\n      for(let c=0;c<prev.length-1;c++) row.push(prev[c] * prev[c+1])\n      built.push(row)\n    }\n    const top = built[3][0]\n    if(top <= 50000) return built\n  }\n}\n\nfunction newPuzzle(){\n  solved.value=false\n  toast.value=null\n  const built = generatePyramid()\n  rows.value = built\n  blanks.value = new Set()\n  for(const k in answerMap) delete answerMap[k]\n  for(let r=1;r<rows.value.length;r++){\n    for(let c=0;c<rows.value[r].length;c++) blanks.value.add(keyOf(r,c))\n  }\n  const totals = {}\n  blanks.value.forEach(k=>{\n    const [r,c] = k.split(',').map(Number)\n    const val = rows.value[r][c]\n    totals[val] = (totals[val] || 0) + 1\n  })\n  for(const k in totalCounts) delete totalCounts[k]\n  for(const [val,ct] of Object.entries(totals)) totalCounts[val] = ct\n  rebuildBank()\n}\n\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction dropTo(key, ev){\n  ev.preventDefault()\n  if(!blanks.value.has(key)) return\n  const raw = ev.dataTransfer.getData('text/plain')\n  const val = Number(raw)\n  if(Number.isNaN(val) || !totalCounts[val]) return\n  const current = answerMap[key]\n  if(current === val){ return }\n  const used = usageOf(val)\n  if(used >= totalCounts[val]) return\n  if(current != null) delete answerMap[key]\n  answerMap[key] = val\n  rebuildBank()\n  toast.value=null\n}\nfunction clearCell(key){\n  if(answerMap[key] != null){\n    delete answerMap[key]\n    rebuildBank()\n  }\n}\n\nfunction isFilled(){\n  for(const key of blanks.value){ if(answerMap[key]==null) return false }\n  return true\n}\nfunction isCorrect(){\n  for(const key of blanks.value){\n    const [r,c] = key.split(',').map(Number)\n    if(answerMap[key] !== rows.value[r][c]) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1', { method:'GET', credentials:'include' })\n  }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar' ? 'أكمل كل الخانات أولاً.' : 'Fill all blanks first.'; sWrong && sWrong.play(); return }\n  if(isCorrect()){\n    solved.value = true\n    toast.value = T[L.value].correct\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    toast.value = T[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\nfunction resetAll(){\n  for(const k in answerMap) delete answerMap[k]\n  solved.value=false\n  toast.value=null\n  rebuildBank()\n}\n\nconst bankList = computed(()=>{\n  const items = []\n  for(const [val,ct] of Object.entries(bankCounts)){\n    for(let i=0;i<ct;i++) items.push(Number(val))\n  }\n  return shuffle(items)\n})\n\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{ if(toast.value) toast.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c1 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n    <p class=\"hint\">{{ T[L].hint }}</p>\n\n    <div class=\"pyramid\" :dir=\"props.lang==='ar' ? 'rtl' : 'ltr'\">\n      <div class=\"p-row\" v-for=\"row in displayRows\" :key=\"row.index\">\n        <div\n          class=\"brick\"\n          v-for=\"(val,cIdx) in row.cells\"\n          :key=\"row.index + '-' + cIdx\"\n        >\n          <template v-if=\"!blanks.has(keyOf(row.index, cIdx))\">\n            <span class=\"num\" :style=\"numDir\">{{ val }}</span>\n          </template>\n          <template v-else>\n            <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"dropTo(keyOf(row.index, cIdx), $event)\">\n              <span v-if=\"answerMap[keyOf(row.index, cIdx)] != null\" class=\"num\" :style=\"numDir\">{{ answerMap[keyOf(row.index, cIdx)] }}</span>\n              <span v-else class=\"placeholder\">؟</span>\n            </div>\n            <button class=\"clear\" @click=\"clearCell(keyOf(row.index, cIdx))\"><Eraser class=\"ic\" /> {{ T[L].clear }}</button>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"bank\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"(val, idx) in bankList\"\n          :key=\"val + '_' + idx\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, val)\"\n          :style=\"numDir\"\n        >\n          {{ val }}\n        </button>\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n      <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n      <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n    </div>\n\n    <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c1{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl3c1{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ margin:0 0 .35rem; color:var(--muted) }\n.hint{ margin:0 0 1rem; color:var(--muted); font-size:.9rem }\n\n.pyramid{ display:flex; flex-direction:column; align-items:center; gap:.65rem; margin-bottom:1.25rem }\n.p-row{ display:flex; gap:.65rem; justify-content:center }\n.brick{ background:var(--bg); border:1px solid #e5e7ebaa; border-radius:.9rem; padding:.5rem .75rem; min-width:96px; min-height:72px; display:flex; flex-direction:column; align-items:center; justify-content:center; box-shadow:0 4px 12px rgba(0,0,0,.06) }\n[data-theme=\"dark\"] .brick{ border-color:#1f2937; box-shadow:0 4px 12px rgba(0,0,0,.3) }\n\n.num{ font-weight:700; font-size:1.2rem; font-variant-numeric:tabular-nums }\n.placeholder{ color:#cbd5f5; font-size:1.4rem }\n.dropzone{ display:flex; align-items:center; justify-content:center; width:100%; height:100% }\n.dropzone:hover{ box-shadow:0 0 0 3px rgba(59,130,246,.22) inset; border-radius:.6rem }\n.clear{ margin-top:.45rem; align-self:center; display:inline-flex; gap:.3rem; align-items:center; padding:.3rem .55rem; border-radius:.6rem; border:1px solid #e5e7eb88; background:var(--bg); cursor:pointer; font-size:.75rem }\n.ic{ width:16px; height:16px }\n\n.bank{ margin-bottom:1rem }\n.bank-title{ font-weight:600; margin-bottom:.5rem }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ padding:.45rem .8rem; border-radius:.8rem; border:1px solid #cbd5f5aa; background:var(--bg); cursor:grab; font-weight:600; font-variant-numeric:tabular-nums }\n.chip:active{ cursor:grabbing }\n\n.actions{ display:flex; gap:.6rem; flex-wrap:wrap; margin-bottom:1rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .8rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n\n.toast{ padding:.6rem .9rem; border-radius:.8rem; border:1px solid #fecaca; background:#fee2e2; color:#991b1b }\n.toast.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 2: الأرقام المفقودة على البطاقات',\n    rule:'أمامك بطاقات ملوّنة بأرقام مفقودة. استخدم المعلومات المعطاة (المجموع، المتوسط، الوسيط، المدى) لتحديد الرقم المناسب لكل بطاقة، ثم اسحبه من لوحة الأعداد أو اكتبه يدويًا.',\n    bank:'لوحة الأعداد', newQ:'سؤال جديد', reset:'مسح', check:'تحقّق',\n    correct:'أحسنت! الأرقام صحيحة.', wrong:'تحقّق من القيم مرة أخرى.', clear:'تفريغ البطاقة',\n    hints:{ sum:'المجموع', mean:'المتوسط الحسابي', median:'الوسيط', range:'المدى' },\n    manualPlaceholder:'أدخل رقمًا'\n  },\n  en:{\n    title:'Level 3 – Challenge 2: Missing numbers on the cards',\n    rule:'Each coloured card is missing its number. Use the given information (sum, mean, median, range) to deduce the correct value for every card, then drag a number from the bank or type it manually.',\n    bank:'Number bank', newQ:'New puzzle', reset:'Clear', check:'Check',\n    correct:'Great! All numbers are correct.', wrong:'Something is off – recheck the values.', clear:'Clear card',\n    hints:{ sum:'Sum', mean:'Mean', median:'Median', range:'Range' },\n    manualPlaceholder:'Type value'\n  }\n}\n\nconst L = computed(() => (copy[props.lang] ? props.lang : 'ar'))\nconst locale = computed(() => (props.lang === 'ar' ? 'ar-EG' : 'en-US'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== data templates ===== */\nconst colourPalette = ['green','gold','teal','magenta','sky','orange','crimson']\nconst templates = [\n  { numbers:[4,8,12,16,20] },\n  { numbers:[5,9,11,13,22] },\n  { numbers:[7,10,12,18,23] },\n  { numbers:[6,8,15,19,22] },\n  { numbers:[9,11,14,20,26] }\n]\n\nconst EXTRA_CHOICES = 4\n\nfunction computeHints(numbers){\n  const sorted = numbers.slice().sort((a,b)=>a-b)\n  const sum = sorted.reduce((acc,n)=>acc+n,0)\n  const mean = sum / sorted.length\n  const median = sorted[Math.floor(sorted.length/2)]\n  const range = sorted[sorted.length-1] - sorted[0]\n  return { sum, mean, median, range }\n}\n\n/* ===== state ===== */\nconst cards = ref([])                 // [{id,color,value}]\nconst solution = reactive({})         // id -> value\nconst blanks = ref(new Set())         // ids\nconst totalCounts = reactive({})      // value -> total copies (handles duplicates)\nconst extraCounts = reactive({})      // distractor values counts\nconst bankCounts = reactive({})       // value -> remaining copies\nconst answer = reactive({})           // id -> chosen value\nconst answerSource = reactive({})     // id -> 'bank' | 'manual'\nconst manualDrafts = reactive({})     // id -> string\nconst hints = ref({ sum:0, mean:0, median:0, range:0 })\nconst toast = ref(null)\nconst solved = ref(false)\n\nfunction resetReactiveMap(obj){ for (const key of Object.keys(obj)) delete obj[key] }\n\nfunction buildPuzzle(){\n  const tpl = templates[Math.floor(Math.random()*templates.length)]\n  const nums = tpl.numbers.slice()\n  const colours = colourPalette.slice(0, nums.length)\n  colours.sort(() => Math.random() - 0.5)\n  const arrangement = nums.slice().sort(() => Math.random() - 0.5)\n\n  cards.value = []\n  blanks.value = new Set()\n  resetReactiveMap(solution)\n  resetReactiveMap(answer)\n  resetReactiveMap(answerSource)\n  resetReactiveMap(manualDrafts)\n  resetReactiveMap(totalCounts)\n  resetReactiveMap(extraCounts)\n  resetReactiveMap(bankCounts)\n\n  arrangement.forEach((value, idx) => {\n    const id = `card-${idx}`\n    cards.value.push({ id, value, color: colours[idx % colours.length] })\n    solution[id] = value\n    blanks.value.add(id)\n    totalCounts[value] = (totalCounts[value] || 0) + 1\n  })\n  for (const [val, ct] of Object.entries(totalCounts)) {\n    bankCounts[val] = ct\n  }\n\n  const minVal = Math.min(...nums)\n  const maxVal = Math.max(...nums)\n  const lower = Math.max(1, minVal - 12)\n  const upper = maxVal + 12\n  const extras = new Set()\n  while(extras.size < EXTRA_CHOICES){\n    const candidate = Math.floor(Math.random() * (upper - lower + 1)) + lower\n    if(totalCounts[candidate]) continue\n    extras.add(candidate)\n  }\n  extras.forEach(val => {\n    extraCounts[val] = (extraCounts[val] || 0) + 1\n    bankCounts[val] = (bankCounts[val] || 0) + 1\n  })\n\n  hints.value = computeHints(nums)\n  toast.value = null\n  solved.value = false\n}\n\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\n\nfunction setAnswer(cardId, value, source){\n  if(Number.isNaN(value)) return false\n  if(answer[cardId] != null && answerSource[cardId] === 'bank'){\n    const prev = answer[cardId]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n\n  if(source === 'bank'){\n    if((bankCounts[value] || 0) <= 0) return false\n    bankCounts[value] = (bankCounts[value] || 0) - 1\n  }\n\n  answer[cardId] = value\n  answerSource[cardId] = source\n  manualDrafts[cardId] = String(value)\n  toast.value = null\n  solved.value = false\n  return true\n}\n\nfunction onDrop(ev, cardId){\n  ev.preventDefault()\n  const raw = ev.dataTransfer.getData('text/plain')\n  const val = Number(raw)\n  if(Number.isNaN(val)) return\n  setAnswer(cardId, val, 'bank')\n}\n\nfunction clearCard(cardId){\n  if(answer[cardId] != null && answerSource[cardId] === 'bank'){\n    const prev = answer[cardId]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n  delete answer[cardId]\n  delete answerSource[cardId]\n  manualDrafts[cardId] = ''\n  toast.value = null\n  solved.value = false\n}\n\nfunction isFilled(){\n  for(const id of blanks.value){ if(answer[id] == null) return false }\n  return true\n}\nfunction isCorrect(){\n  for(const id of blanks.value){ if(answer[id] !== solution[id]) return false }\n  return true\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){\n    toast.value = L.value==='ar' ? 'أكمل كل البطاقات أولاً.' : 'Fill every card first.'\n    sWrong && sWrong.play()\n    return\n  }\n  if(isCorrect()){\n    solved.value = true\n    toast.value = copy[L.value].correct\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  } else {\n    toast.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\nfunction resetAll(){\n  resetReactiveMap(answer)\n  resetReactiveMap(answerSource)\n  resetReactiveMap(manualDrafts)\n  resetReactiveMap(bankCounts)\n  for (const [val, ct] of Object.entries(totalCounts)) bankCounts[val] = ct\n  for (const [val, ct] of Object.entries(extraCounts)) bankCounts[val] = (bankCounts[val] || 0) + ct\n  toast.value = null\n  solved.value = false\n}\n\nconst bankList = computed(() => {\n  const arr = []\n  for(const [val, count] of Object.entries(bankCounts)){\n    for(let i=0;i<count;i++) arr.push({ value:Number(val), key:`${val}-${i}` })\n  }\n  return arr\n})\n\nfunction onManualInput(cardId, value){ manualDrafts[cardId] = value }\nfunction commitManual(cardId){\n  const raw = (manualDrafts[cardId] ?? '').trim()\n  if(raw === ''){ clearCard(cardId); return }\n  const num = Number(raw)\n  if(!Number.isFinite(num)) return\n  setAnswer(cardId, num, 'manual')\n}\n\nconst digitsMap = ['٠','١','٢','٣','٤','٥','٦','٧','٨','٩']\nfunction formatDigit(value){\n  const str = String(value)\n  if(props.lang !== 'ar') return str\n  return str.replace(/[0-9]/g, d => digitsMap[Number(d)])\n}\nfunction formatNumber(value, options={}){\n  return new Intl.NumberFormat(locale.value, options).format(value)\n}\n\nonMounted(buildPuzzle)\nwatch(() => props.lang, () => { if(toast.value && solved.value) return; toast.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c2 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"rule\">{{ copy[L].rule }}</p>\n    </header>\n\n    <section class=\"board\">\n      <div class=\"cards\">\n        <div\n          v-for=\"card in cards\"\n          :key=\"card.id\"\n          class=\"card\"\n          :class=\"'color-' + card.color\"\n        >\n          <div class=\"drop\" @dragover=\"allowDrop\" @drop=\"onDrop($event, card.id)\">\n            <span v-if=\"answer[card.id] != null\" class=\"num\">{{ formatDigit(answer[card.id]) }}</span>\n            <span v-else class=\"placeholder\">؟</span>\n          </div>\n          <input\n            class=\"manual-entry\"\n            type=\"number\"\n            inputmode=\"numeric\"\n            :value=\"manualDrafts[card.id] ?? ''\"\n            @input=\"onManualInput(card.id, $event.target.value)\"\n            @change=\"commitManual(card.id)\"\n            @blur=\"commitManual(card.id)\"\n            :placeholder=\"copy[L].manualPlaceholder\"\n          />\n          <button class=\"clear\" @click=\"clearCard(card.id)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n        </div>\n      </div>\n\n      <aside class=\"facts\">\n        <h3>{{ props.lang==='ar' ? 'المعلومات المتاحة' : 'Given facts' }}</h3>\n        <ul>\n          <li><strong>{{ copy[L].hints.sum }}:</strong> {{ formatNumber(hints.sum) }}</li>\n          <li><strong>{{ copy[L].hints.mean }}:</strong> {{ formatNumber(hints.mean, { maximumFractionDigits:2 }) }}</li>\n          <li><strong>{{ copy[L].hints.median }}:</strong> {{ formatNumber(hints.median) }}</li>\n          <li><strong>{{ copy[L].hints.range }}:</strong> {{ formatNumber(hints.range) }}</li>\n        </ul>\n      </aside>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"item in bankList\"\n          :key=\"item.key\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, item.value)\"\n        >\n          {{ formatDigit(item.value) }}\n        </button>\n      </div>\n    </section>\n\n    <section class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"buildPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c2{ --fg:#172554; --bg:#f6f7ff; --panel:#ffffff; --bd:#cbd5f5; --accent:#d64c42;\n  color:var(--fg); background:var(--bg); padding:24px; border-radius:18px; box-shadow:0 12px 32px rgba(23,37,84,.08) }\n[data-theme=\"dark\"] .lvl3c2{ --fg:#e0e7ff; --bg:#0b1220; --panel:#111a2b; --bd:#1e293b; }\n\n.head{ margin-bottom:18px }\n.title{ margin:0 0 8px; font-size:1.5rem; font-weight:700 }\n.rule{ margin:0; opacity:.75; line-height:1.5 }\n\n.board{ display:flex; flex-wrap:wrap; gap:24px; margin-bottom:24px }\n.cards{ display:flex; flex-wrap:wrap; gap:16px; flex:2 }\n.card{ width:170px; min-height:170px; border-radius:18px; padding:16px; box-shadow:0 10px 24px rgba(0,0,0,.08);\n  display:flex; flex-direction:column; align-items:stretch; gap:12px; border:2px solid transparent; background:var(--panel) }\n.card .drop{ width:100%; height:80px; border:2px dashed rgba(15,23,42,.25); border-radius:12px;\n  display:flex; align-items:center; justify-content:center; font-size:1.6rem; font-weight:700; color:var(--fg);\n  background:rgba(255,255,255,.55) }\n[data-theme=\"dark\"] .card .drop{ background:rgba(15,23,42,.45); border-color:rgba(226,232,240,.25) }\n.card .drop:hover{ border-color:rgba(214,76,66,.45); box-shadow:0 0 0 4px rgba(214,76,66,.12) }\n.placeholder{ opacity:.45 }\n.manual-entry{ width:100%; padding:.45rem .6rem; border-radius:.6rem; border:1px solid rgba(148,163,184,.35); font-size:.95rem; background:rgba(255,255,255,.92); color:inherit; direction:ltr }\n.manual-entry:focus{ outline:none; border-color:rgba(15,138,62,.45); box-shadow:0 0 0 3px rgba(15,138,62,.16) }\n[data-theme=\"dark\"] .manual-entry{ background:rgba(15,23,42,.8); border-color:rgba(148,163,184,.4); color:var(--fg) }\n.clear{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px;\n  border:1px solid rgba(15,23,42,.15); background:rgba(255,255,255,.8); cursor:pointer; font-size:.8rem }\n[data-theme=\"dark\"] .clear{ background:rgba(30,41,59,.6); border-color:rgba(148,163,184,.35) }\n.ic{ width:16px; height:16px }\n\n.facts{ flex:1; min-width:220px; background:var(--panel); border-radius:16px; padding:18px; border:1px solid var(--bd);\n  box-shadow:0 8px 20px rgba(0,0,0,.05) }\n.facts h3{ margin:0 0 12px; font-size:1.05rem }\n.facts ul{ list-style:none; padding:0; margin:0; display:grid; gap:8px }\n.facts li{ display:flex; justify-content:space-between; gap:12px; font-variant-numeric:tabular-nums }\n\n.bank{ background:var(--panel); border-radius:16px; padding:18px; border:1px solid var(--bd); margin-bottom:20px }\n.bank-title{ font-weight:600; margin-bottom:12px }\n.bank-items{ display:flex; gap:10px; flex-wrap:wrap }\n.chip{ padding:8px 14px; border-radius:999px; border:1px solid var(--bd); background:#fff; cursor:grab; font-weight:600;\n  box-shadow:0 6px 16px rgba(15,23,42,.12) }\n[data-theme=\"dark\"] .chip{ background:rgba(15,23,42,.6); border-color:rgba(148,163,184,.3) }\n.chip:active{ cursor:grabbing }\n\n.actions{ display:flex; flex-wrap:wrap; gap:12px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd);\n  background:var(--panel); cursor:pointer; transition:.15s; font-weight:600 }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(0,0,0,.08) }\n\n.toast{ margin-top:18px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#991b1b;\n  font-weight:600; text-align:center }\n.toast.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n\n/* card colours */\n.color-green{ border-color:#4ade80; background:linear-gradient(160deg,#bbf7d0,#f0fff4) }\n.color-gold{ border-color:#facc15; background:linear-gradient(160deg,#fef08a,#fffbe6) }\n.color-teal{ border-color:#2dd4bf; background:linear-gradient(160deg,#99f6e4,#ecfeff) }\n.color-magenta{ border-color:#f472b6; background:linear-gradient(160deg,#fbcfe8,#fff0f8) }\n.color-sky{ border-color:#38bdf8; background:linear-gradient(160deg,#bae6fd,#eff6ff) }\n.color-orange{ border-color:#fb923c; background:linear-gradient(160deg,#ffd7aa,#fff7ed) }\n.color-crimson{ border-color:#f87171; background:linear-gradient(160deg,#fecaca,#fff1f1) }\n\n@media (max-width: 900px){\n  .board{ flex-direction:column }\n  .cards{ justify-content:center }\n  .card{ width:140px }\n}\n</style>\n","<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { Check, RotateCcw, RefreshCw } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 3: خطوط المجموع العشري',\n    rule:'اختر أرقامًا متجاورة على خط مستقيم (أفقي، عمودي أو قطري) بحيث يساوي مجموعها القيمة المطلوبة.',\n    targetLabel:'المجموع المطلوب', selected:'المجموع الحالي',\n    check:'تحقّق', reset:'إعادة اختيار', newQ:'سؤال جديد',\n    needSelection:'اختر خانات أولاً.',\n    wrongLine:'يجب أن تكون الخانات المختارة على خط مستقيم ومتجاورة.',\n    wrongSum:'المجموع لا يساوي القيمة المطلوبة.',\n    correct:'رائع! خط صحيح.',\n  },\n  en:{\n    title:'Level 3 – Challenge 3: Decimal Sum Lines',\n    rule:'Pick numbers lying on one straight line (horizontal, vertical, or diagonal) so their sum equals the target.',\n    targetLabel:'Target sum', selected:'Current sum',\n    check:'Check', reset:'Reset selection', newQ:'New puzzle',\n    needSelection:'Select cells first.',\n    wrongLine:'Selections must be contiguous on a straight line.',\n    wrongSum:'The sum does not match the target.',\n    correct:'Great! You found a valid line.',\n  }\n}\nconst L = computed(()=> (copy[props.lang]?props.lang:'ar'))\n\n/* sounds */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst puzzles = [\n  {\n    id: 'p1',\n    target: 10.0,\n    grid: [\n      [1.2, 0.8, 2.5, 1.3, 0.9],\n      [2.1, 3.4, 2.0, 0.6, 1.5],\n      [1.8, 2.2, 1.5, 3.0, 1.1],\n      [0.5, 1.6, 1.7, 2.0, 3.5],\n      [1.4, 1.3, 2.3, 1.8, 2.7],\n    ],\n    solution: [\n      { r:0, c:2 }, { r:1, c:2 }, { r:2, c:2 }, { r:3, c:2 }, { r:4, c:2 }\n    ],\n  },\n  {\n    id: 'p2',\n    target: 10.0,\n    grid: [\n      [0.8, 1.7, 2.1, 0.9, 1.4],\n      [2.6, 1.5, 1.9, 1.1, 2.9],\n      [1.3, 2.4, 1.2, 2.2, 1.6],\n      [0.7, 1.8, 2.5, 1.7, 2.3],\n      [1.9, 0.6, 1.8, 2.6, 0.9],\n    ],\n    solution: [\n      { r:1, c:0 }, { r:1, c:1 }, { r:1, c:2 }, { r:1, c:3 }, { r:1, c:4 }\n    ],\n  },\n  {\n    id: 'p3',\n    target: 10.0,\n    grid: [\n      [2.5, 1.1, 0.8, 1.4, 1.2],\n      [0.9, 2.0, 1.3, 1.7, 1.0],\n      [1.6, 1.2, 1.8, 1.1, 1.3],\n      [1.4, 1.9, 1.5, 1.5, 1.8],\n      [1.3, 1.4, 0.9, 1.6, 2.2],\n    ],\n    solution: [\n      { r:0, c:0 }, { r:1, c:1 }, { r:2, c:2 }, { r:3, c:3 }, { r:4, c:4 }\n    ],\n  },\n  {\n    id: 'p4',\n    target: 10.0,\n    grid: [\n      [1.1, 0.9, 1.7, 1.3, 2.1],\n      [2.0, 1.4, 2.0, 1.1, 1.6],\n      [1.5, 2.2, 1.8, 1.4, 1.3],\n      [0.8, 1.9, 2.3, 1.2, 1.1],\n      [1.6, 1.5, 2.2, 1.7, 0.9],\n    ],\n    solution: [\n      { r:0, c:2 }, { r:1, c:2 }, { r:2, c:2 }, { r:3, c:2 }, { r:4, c:2 }\n    ],\n  },\n  {\n    id: 'p5',\n    target: 10.2,\n    grid: [\n      [1.0, 1.3, 0.9, 1.5, 1.9],\n      [1.6, 1.2, 1.4, 1.8, 1.0],\n      [1.7, 1.1, 2.1, 1.4, 1.2],\n      [2.4, 2.0, 1.5, 1.3, 0.8],\n      [2.4, 1.5, 1.6, 1.1, 0.7],\n    ],\n    solution: [\n      { r:0, c:4 }, { r:1, c:3 }, { r:2, c:2 }, { r:3, c:1 }, { r:4, c:0 }\n    ],\n  },\n  {\n    id: 'p6',\n    target: 9.0,\n    grid: [\n      [1.8, 2.2, 1.6, 1.5, 1.9],\n      [1.3, 0.9, 2.1, 2.5, 1.1],\n      [1.4, 1.7, 1.2, 1.8, 1.6],\n      [1.0, 2.3, 1.5, 1.4, 2.2],\n      [1.6, 1.1, 2.0, 1.7, 0.8],\n    ],\n    solution: [\n      { r:0, c:0 }, { r:0, c:1 }, { r:0, c:2 }, { r:0, c:3 }, { r:0, c:4 }\n    ],\n  },\n  {\n    id: 'p7',\n    target: 9.3,\n    grid: [\n      [1.2, 1.5, 2.1, 1.0, 1.4],\n      [0.9, 2.0, 1.7, 1.9, 1.2],\n      [1.3, 1.8, 2.2, 1.6, 1.1],\n      [1.5, 1.9, 1.4, 1.7, 2.3],\n      [1.0, 2.1, 1.5, 1.2, 1.8],\n    ],\n    solution: [\n      { r:0, c:1 }, { r:1, c:1 }, { r:2, c:1 }, { r:3, c:1 }, { r:4, c:1 }\n    ],\n  },\n  {\n    id: 'p8',\n    target: 9.0,\n    grid: [\n      [1.4, 1.2, 2.0, 1.6, 0.9],\n      [1.1, 1.8, 1.4, 2.3, 1.5],\n      [2.2, 1.3, 1.7, 1.2, 1.1],\n      [1.5, 2.4, 1.6, 1.5, 1.9],\n      [2.0, 1.7, 1.5, 1.4, 2.6],\n    ],\n    solution: [\n      { r:0, c:0 }, { r:1, c:1 }, { r:2, c:2 }, { r:3, c:3 }, { r:4, c:4 }\n    ],\n  },\n  {\n    id: 'p9',\n    target: 10.0,\n    grid: [\n      [1.6, 1.0, 1.2, 1.9, 2.1],\n      [1.3, 1.5, 2.2, 1.8, 1.1],\n      [2.0, 1.8, 1.4, 1.5, 1.7],\n      [1.2, 2.3, 1.6, 1.7, 1.0],\n      [2.4, 1.9, 1.5, 1.2, 0.8],\n    ],\n    solution: [\n      { r:0, c:4 }, { r:1, c:3 }, { r:2, c:2 }, { r:3, c:1 }, { r:4, c:0 }\n    ],\n  },\n  {\n    id: 'p10',\n    target: 9.0,\n    grid: [\n      [1.0, 1.7, 1.3, 2.1, 1.6],\n      [1.5, 1.1, 2.4, 1.6, 1.8],\n      [1.9, 2.0, 1.5, 1.2, 1.3],\n      [1.4, 1.9, 1.7, 2.0, 1.1],\n      [2.1, 2.0, 1.8, 1.5, 1.6],\n    ],\n    solution: [\n      { r:4, c:0 }, { r:4, c:1 }, { r:4, c:2 }, { r:4, c:3 }, { r:4, c:4 }\n    ],\n  },\n]\n\nconst currentPuzzle = ref(puzzles[0])\nconst lastPuzzleId = ref(null)\nconst selected = ref(new Set())\nconst solved = ref(false)\nconst feedback = ref(null)\n\nfunction coordKey(r,c){ return `${r},${c}` }\n\nfunction pickNextPuzzle(){\n  if(puzzles.length === 1){\n    lastPuzzleId.value = puzzles[0].id\n    return puzzles[0]\n  }\n  let candidate\n  do{\n    candidate = puzzles[Math.floor(Math.random() * puzzles.length)]\n  }while(candidate.id === lastPuzzleId.value)\n  lastPuzzleId.value = candidate.id\n  return candidate\n}\n\nfunction resetSelection(){\n  selected.value = new Set()\n  solved.value = false\n  feedback.value = null\n}\n\nfunction pickPuzzle(){\n  const next = pickNextPuzzle()\n  currentPuzzle.value = next\n  resetSelection()\n}\n\nfunction toggleCell(r,c){\n  const key = coordKey(r,c)\n  const set = new Set(selected.value)\n  if(set.has(key)) set.delete(key)\n  else set.add(key)\n  selected.value = set\n  solved.value = false\n  feedback.value = null\n}\n\nconst selectedList = computed(()=> Array.from(selected.value).map(item => {\n  const [r,c] = item.split(',').map(Number)\n  return { r, c }\n}))\n\nconst selectedSum = computed(()=> selectedList.value.reduce((total, cell)=> total + currentPuzzle.value.grid[cell.r][cell.c], 0))\n\nfunction isLine(cells){\n  if(cells.length < 2) return true\n  const rows = cells.map(c=>c.r)\n  const cols = cells.map(c=>c.c)\n  const sameRow = rows.every(r=>r===rows[0])\n  const sameCol = cols.every(c=>c===cols[0])\n  const diag1 = rows.every((r,idx)=> r - cols[idx] === rows[0] - cols[0])\n  const diag2 = rows.every((r,idx)=> r + cols[idx] === rows[0] + cols[0])\n\n  if(!sameRow && !sameCol && !diag1 && !diag2) return false\n\n  const sorted = [...cells]\n  if(sameRow){\n    sorted.sort((a,b)=> a.c - b.c)\n    for(let i=1;i<sorted.length;i++) if(sorted[i].c - sorted[i-1].c !== 1) return false\n    return true\n  }\n  if(sameCol){\n    sorted.sort((a,b)=> a.r - b.r)\n    for(let i=1;i<sorted.length;i++) if(sorted[i].r - sorted[i-1].r !== 1) return false\n    return true\n  }\n  if(diag1){\n    sorted.sort((a,b)=> a.r - b.r)\n    for(let i=1;i<sorted.length;i++){\n      if(sorted[i].r - sorted[i-1].r !== 1) return false\n      if(sorted[i].c - sorted[i-1].c !== 1) return false\n    }\n    return true\n  }\n  // diag2\n  sorted.sort((a,b)=> a.r - b.r)\n  for(let i=1;i<sorted.length;i++){\n    if(sorted[i].r - sorted[i-1].r !== 1) return false\n    if(sorted[i-1].c - sorted[i].c !== 1) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'})\n  }catch{}\n}\n\nasync function checkLine(){\n  if(!selected.value.size){\n    feedback.value = copy[L.value].needSelection\n    sWrong && sWrong.play()\n    return\n  }\n  const cells = selectedList.value\n  if(!isLine(cells)){\n    feedback.value = copy[L.value].wrongLine\n    sWrong && sWrong.play()\n    return\n  }\n  const sum = selectedSum.value\n  if(Math.abs(sum - currentPuzzle.value.target) > 1e-6){\n    feedback.value = copy[L.value].wrongSum\n    sWrong && sWrong.play()\n    return\n  }\n  solved.value = true\n  feedback.value = copy[L.value].correct\n  sOK && sOK.play(); sClap && sClap.play()\n  await addPoint()\n}\n\nfunction isSolutionCell(r,c){\n  return currentPuzzle.value.solution.some(cell => cell.r===r && cell.c===c)\n}\n\nonMounted(() => {\n  pickPuzzle()\n})\n</script>\n\n<template>\n  <div class=\"lvl3c3 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"rule\">{{ copy[L].rule }}</p>\n    </header>\n\n    <section class=\"status\">\n      <div class=\"chip target\">{{ copy[L].targetLabel }}: <strong>{{ currentPuzzle.target.toFixed(1) }}</strong></div>\n      <div class=\"chip sum\">{{ copy[L].selected }}: <strong>{{ selectedSum.toFixed(1) }}</strong></div>\n    </section>\n\n    <section class=\"grid\">\n      <div\n        v-for=\"(row,r) in currentPuzzle.grid\"\n        :key=\"r\"\n        class=\"row\"\n      >\n        <button\n          v-for=\"(value,c) in row\"\n          :key=\"c\"\n          class=\"cell\"\n          :class=\"{ selected: selected.has(coordKey(r,c)), success: solved && isSolutionCell(r,c) }\"\n          @click=\"toggleCell(r,c)\"\n        >\n          {{ value.toFixed(1) }}\n        </button>\n      </div>\n    </section>\n\n    <section class=\"actions\">\n      <button class=\"btn\" @click=\"checkLine\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetSelection\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"pickPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c3{ --fg:#0f172a; --bg:#f8fafc; --panel:#ffffff; --bd:#dbeafe; --accent:#dc2626;\n  padding:24px; border-radius:18px; background:var(--bg); color:var(--fg); box-shadow:0 12px 28px rgba(15,23,42,.08) }\n[data-theme=\"dark\"] .lvl3c3{ --fg:#e2e8f0; --bg:#0b1220; --panel:#111a2b; --bd:#1e293b; --accent:#fb7185 }\n\n.head{ margin-bottom:18px }\n.title{ margin:0 0 8px; font-size:1.5rem; font-weight:700 }\n.rule{ margin:0; opacity:.75 }\n\n.status{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:20px }\n.chip{ padding:8px 14px; border-radius:999px; background:var(--panel); border:1px solid var(--bd);\n  box-shadow:0 6px 16px rgba(15,23,42,.08); font-size:.95rem }\n.chip strong{ font-weight:700 }\n\n.grid{ display:flex; flex-direction:column; gap:6px; margin-bottom:20px }\n.row{ display:grid; grid-template-columns:repeat(auto-fit, minmax(70px,1fr)); gap:6px }\n.cell{ padding:16px 0; border-radius:12px; border:1px solid var(--bd); background:var(--panel);\n  font-size:1.2rem; font-weight:600; cursor:pointer; transition:.15s; font-variant-numeric:tabular-nums }\n.cell:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(15,23,42,.12) }\n.cell.selected{ background:rgba(59,130,246,.15); border-color:#60a5fa }\n.cell.success{ background:rgba(74,222,128,.18); border-color:#22c55e }\n\n.actions{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:18px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px;\n  border:1px solid var(--bd); background:var(--panel); cursor:pointer; transition:.15s; font-weight:600 }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(15,23,42,.12) }\n.ic{ width:18px; height:18px }\n\n.feedback{ padding:12px 18px; border-radius:12px; border:1px solid #fee2e2; background:#fff1f2; color:#b91c1c; font-weight:600 }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(239,68,68,.15); border-color:rgba(239,68,68,.4); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.2); border-color:rgba(34,197,94,.45); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 4: أزل النقطة الحمراء',\n    intro:[\n      'هذه المعادلات فرصة للتفكير في العمليات على الأعداد العشرية.',\n      'كل نقطة حمراء ● تمثّل رقمًا ناقصًا. اسحب الرقم الملائم من لوحة الأرقام وضعه مكان النقطة حتى تصبح المعادلة صحيحة.'\n    ],\n    check:'تحقّق', reset:'مسح الكل', newQ:'سؤال جديد',\n    incomplete:'أكمل كل الفراغات أولاً.', wrong:'هناك معادلة غير صحيحة، راجع الأرقام.', correct:'أحسنت! جميع المعادلات صحيحة.',\n    bank:'لوحة الأرقام', clear:'تفريغ'\n  },\n  en:{\n    title:'Level 3 – Challenge 4: Replace the red dot',\n    intro:[\n      'These equations focus on decimal operations.',\n      'Each red dot ● hides a single digit. Drag the correct digit from the number bank to make every equation true.'\n    ],\n    check:'Check', reset:'Clear all', newQ:'New puzzle',\n    incomplete:'Fill every blank first.', wrong:'One or more equations are incorrect. Try again.', correct:'Great! All equations are valid.',\n    bank:'Number bank', clear:'Clear'\n  }\n}\nconst L = computed(()=> (copy[props.lang]?props.lang:'ar'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst digitsMap = ['٠','١','٢','٣','٤','٥','٦','٧','٨','٩']\n\nfunction toArabicNumber(value, decimals){\n  let str\n  if(typeof value === 'number'){\n    str = decimals != null ? value.toFixed(decimals) : String(value)\n  }else{\n    str = String(value)\n  }\n  return str.replace(/[0-9]/g, d => digitsMap[Number(d)]).replace(/\\./g, '٫')\n}\n\nfunction makeEqA({ multiplier, offset, aDigit, bDigit }){\n  const multiplierAr = toArabicNumber(multiplier, 1)\n  const multiplierEn = multiplier.toFixed(1)\n  const offsetFixed = offset.toFixed(2)\n  const offsetSuffixEn = offsetFixed.slice(1)\n  const offsetSuffixAr = toArabicNumber(offsetFixed).slice(1)\n  return {\n    id:'eqA',\n    slots:{ a:aDigit, b:bDigit },\n    order:['a','b'],\n    template:{\n      ar:['أ. ', multiplierAr, ' × ٠٫', { slot:'a' }, ' = ', { slot:'b' }, offsetSuffixAr],\n      en:['A. ', multiplierEn, ' × 0.', { slot:'a' }, ' = ', { slot:'b' }, offsetSuffixEn]\n    },\n    evaluate(values){\n      const left = multiplier * (values.a / 10)\n      const right = values.b + offset\n      return Math.abs(left - right) < 1e-6\n    }\n  }\n}\n\nfunction makeEqB({ baseLeft, baseRight, cDigit, dDigit, result, decimals = 2 }){\n  const baseLeftAr = toArabicNumber(baseLeft, 0) + '٫'\n  const baseRightAr = toArabicNumber(baseRight, 0) + '٫'\n  const baseLeftEn = `${baseLeft}.`\n  const baseRightEn = `${baseRight}.`\n  const resultEn = decimals != null ? result.toFixed(decimals) : String(result)\n  const resultAr = toArabicNumber(resultEn)\n  return {\n    id:'eqB',\n    slots:{ c:cDigit, d:dDigit },\n    order:['c','d'],\n    template:{\n      ar:['ب. ', baseLeftAr, { slot:'c' }, ' × ', baseRightAr, { slot:'d' }, ' = ', resultAr],\n      en:['B. ', baseLeftEn, { slot:'c' }, ' × ', baseRightEn, { slot:'d' }, ' = ', resultEn]\n    },\n    evaluate(values){\n      const left = (baseLeft + values.c/10) * (baseRight + values.d/10)\n      return Math.abs(left - result) < 1e-6\n    }\n  }\n}\n\nfunction makeEqC({ secondBase, eDigit, fDigit, result, decimals = 2 }){\n  const secondBaseAr = toArabicNumber(secondBase, 0) + '٫'\n  const secondBaseEn = `${secondBase}.`\n  const resultEn = decimals != null ? result.toFixed(decimals) : String(result)\n  const resultAr = toArabicNumber(resultEn)\n  return {\n    id:'eqC',\n    slots:{ e:eDigit, f:fDigit },\n    order:['e','f'],\n    template:{\n      ar:['ج. ', { slot:'e' }, '٫٩ × ', secondBaseAr, { slot:'f' }, ' = ', resultAr],\n      en:['C. ', { slot:'e' }, '.9 × ', secondBaseEn, { slot:'f' }, ' = ', resultEn]\n    },\n    evaluate(values){\n      const left = (values.e + 0.9) * (secondBase + values.f/10)\n      return Math.abs(left - result) < 1e-6\n    }\n  }\n}\n\nfunction makeEqD({ gDigit, hDigit }){\n  return {\n    id:'eqD',\n    slots:{ g:gDigit, h:hDigit },\n    order:['g','h'],\n    template:{\n      ar:['د. ٤٫', { slot:'g' }, ' + ١٫٢٥ = ٥٫', { slot:'h' }, '٥'],\n      en:['D. 4.', { slot:'g' }, ' + 1.25 = 5.', { slot:'h' }, '5']\n    },\n    evaluate(values){\n      const left = (4 + values.g/10) + 1.25\n      const right = 5 + values.h/10 + 0.05\n      return Math.abs(left - right) < 1e-6\n    }\n  }\n}\n\nconst puzzleBank = [\n  {\n    id:'p1',\n    equations:[\n      makeEqA({ multiplier:9.3, offset:0.44, aDigit:8, bDigit:7 }),\n      makeEqB({ baseLeft:2, baseRight:2, cDigit:4, dDigit:9, result:6.96, decimals:2 }),\n      makeEqC({ secondBase:3, eDigit:4, fDigit:7, result:18.13, decimals:2 }),\n      makeEqD({ gDigit:7, hDigit:9 })\n    ]\n  },\n  {\n    id:'p2',\n    equations:[\n      makeEqA({ multiplier:8.6, offset:0.16, aDigit:6, bDigit:5 }),\n      makeEqB({ baseLeft:2, baseRight:2, cDigit:1, dDigit:6, result:5.46, decimals:2 }),\n      makeEqC({ secondBase:3, eDigit:2, fDigit:5, result:10.15, decimals:2 }),\n      makeEqD({ gDigit:3, hDigit:5 })\n    ]\n  },\n  {\n    id:'p3',\n    equations:[\n      makeEqA({ multiplier:7.8, offset:0.24, aDigit:8, bDigit:6 }),\n      makeEqB({ baseLeft:2, baseRight:2, cDigit:5, dDigit:2, result:5.5, decimals:2 }),\n      makeEqC({ secondBase:3, eDigit:3, fDigit:6, result:14.04, decimals:2 }),\n      makeEqD({ gDigit:2, hDigit:4 })\n    ]\n  },\n  {\n    id:'p4',\n    equations:[\n      makeEqA({ multiplier:6.4, offset:0.28, aDigit:2, bDigit:1 }),\n      makeEqB({ baseLeft:2, baseRight:2, cDigit:8, dDigit:3, result:6.44, decimals:2 }),\n      makeEqC({ secondBase:3, eDigit:5, fDigit:2, result:18.88, decimals:2 }),\n      makeEqD({ gDigit:4, hDigit:6 })\n    ]\n  },\n  {\n    id:'p5',\n    equations:[\n      makeEqA({ multiplier:6.4, offset:0.12, aDigit:8, bDigit:5 }),\n      makeEqB({ baseLeft:2, baseRight:2, cDigit:0, dDigit:9, result:5.8, decimals:2 }),\n      makeEqC({ secondBase:3, eDigit:6, fDigit:1, result:21.39, decimals:2 }),\n      makeEqD({ gDigit:1, hDigit:3 })\n    ]\n  }\n]\n\nconst currentPuzzle = ref(puzzleBank[0])\nconst lastPuzzleId = ref(null)\n\nfunction pickNextPuzzle(){\n  if(puzzleBank.length === 1){\n    lastPuzzleId.value = puzzleBank[0].id\n    return puzzleBank[0]\n  }\n  let candidate\n  do{\n    candidate = puzzleBank[Math.floor(Math.random()*puzzleBank.length)]\n  }while(candidate.id === lastPuzzleId.value)\n  lastPuzzleId.value = candidate.id\n  return candidate\n}\nconst answers = reactive({})\nconst totalCounts = reactive({})\nconst bankCounts = reactive({})\nconst slotsMeta = ref([])\nconst feedback = ref(null)\nconst solved = ref(false)\n\nfunction formatDigit(value){\n  if(value == null) return ''\n  const str = String(value)\n  return props.lang==='ar'\n    ? str.replace(/[0-9]/g, d => digitsMap[Number(d)])\n    : str\n}\n\nfunction shuffle(arr){\n  return arr.slice().sort(()=>Math.random()-0.5)\n}\n\nfunction initPuzzle(){\n  const puzzle = pickNextPuzzle()\n  currentPuzzle.value = puzzle\n  feedback.value = null\n  solved.value = false\n  Object.keys(answers).forEach(k => delete answers[k])\n  Object.keys(totalCounts).forEach(k => delete totalCounts[k])\n  Object.keys(bankCounts).forEach(k => delete bankCounts[k])\n  const meta = []\n\n  puzzle.equations.forEach(eq => {\n    eq.order.forEach(slotName => {\n      const key = `${eq.id}-${slotName}`\n      meta.push({ key, eq, slotName })\n      answers[key] = null\n      const digit = eq.slots[slotName]\n      totalCounts[digit] = (totalCounts[digit] || 0) + 1\n      bankCounts[digit] = (bankCounts[digit] || 0) + 1\n    })\n  })\n  slotsMeta.value = meta\n}\n\nfunction allowDrop(ev){ ev.preventDefault() }\n\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\n\nfunction onDrop(ev, key){\n  ev.preventDefault()\n  const raw = ev.dataTransfer.getData('text/plain')\n  const val = Number(raw)\n  if(Number.isNaN(val)) return\n  if((bankCounts[val] || 0) <= 0 && answers[key] !== val) return\n\n  if(answers[key] != null){\n    const prev = answers[key]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n\n  if(answers[key] !== val){\n    bankCounts[val] = (bankCounts[val] || 0) - 1\n    if(bankCounts[val] < 0) bankCounts[val] = 0\n  }\n\n  answers[key] = val\n  feedback.value = null\n  solved.value = false\n}\n\nfunction clearSlot(key){\n  if(answers[key] != null){\n    const prev = answers[key]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n    answers[key] = null\n    feedback.value = null\n    solved.value = false\n  }\n}\n\nconst bankList = computed(()=>{\n  const list = []\n  for(const [digit,count] of Object.entries(bankCounts)){\n    for(let i=0;i<count;i++) list.push({ value:Number(digit), key:`${digit}-${i}` })\n  }\n  return shuffle(list)\n})\n\nfunction allFilled(){\n  return slotsMeta.value.every(slot => answers[slot.key] != null)\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\n\nasync function checkAll(){\n  if(!allFilled()){\n    feedback.value = copy[L.value].incomplete\n    sWrong && sWrong.play()\n    return\n  }\n  const { equations } = currentPuzzle.value\n  for(const eq of equations){\n    const values = {}\n    let valid = true\n    for(const slotName of eq.order){\n      const key = `${eq.id}-${slotName}`\n      values[slotName] = answers[key]\n      if(values[slotName] == null){ valid = false; break }\n    }\n    if(!valid || !eq.evaluate(values)){\n      feedback.value = copy[L.value].wrong\n      sWrong && sWrong.play()\n      return\n    }\n  }\n  feedback.value = copy[L.value].correct\n  solved.value = true\n  sOK && sOK.play(); sClap && sClap.play()\n  await addPoint()\n}\n\nfunction resetAll(){\n  slotsMeta.value.forEach(slot => { if(answers[slot.key]!=null){ const prev=answers[slot.key]; bankCounts[prev]=(bankCounts[prev]||0)+1; answers[slot.key]=null } })\n  feedback.value = null\n  solved.value = false\n}\n\nonMounted(initPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c4 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p v-for=\"(line,idx) in copy[L].intro\" :key=\"idx\" class=\"intro\">{{ line }}</p>\n    </header>\n\n    <section class=\"equations\">\n      <div v-for=\"eq in currentPuzzle.equations\" :key=\"eq.id\" class=\"card\">\n        <div class=\"expression\">\n          <span v-for=\"(token, idx) in (props.lang==='ar' ? eq.template.ar : eq.template.en)\" :key=\"idx\">\n            <template v-if=\"typeof token === 'string'\">{{ token }}</template>\n            <template v-else>\n              <span class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, eq.id + '-' + token.slot)\">\n                <span v-if=\"answers[eq.id + '-' + token.slot] != null\" class=\"digit\">{{ formatDigit(answers[eq.id + '-' + token.slot]) }}</span>\n                <span v-else class=\"placeholder\">●</span>\n              </span>\n              <button class=\"clear\" @click=\"clearSlot(eq.id + '-' + token.slot)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n            </template>\n          </span>\n        </div>\n      </div>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"item in bankList\"\n          :key=\"item.key\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, item.value)\"\n        >\n          {{ formatDigit(item.value) }}\n        </button>\n      </div>\n    </section>\n\n    <section class=\"actions\">\n      <button class=\"btn\" @click=\"checkAll\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c4{ --fg:#111827; --bg:#fdf5f3; --panel:#ffffff; --bd:#fcd6c3; --accent:#ef4444;\n  padding:24px; border-radius:18px; color:var(--fg); background:var(--bg); box-shadow:0 16px 32px rgba(244,114,182,.12) }\n[data-theme=\"dark\"] .lvl3c4{ --fg:#f8fafc; --bg:#1b1325; --panel:#201830; --bd:#3b2c4b; --accent:#fb7185 }\n\n.head{ margin-bottom:18px }\n.title{ margin:0 0 12px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0 0 6px; line-height:1.6 }\n\n.equations{ display:grid; gap:18px }\n.card{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px 18px; box-shadow:0 12px 24px rgba(17,24,39,.08) }\n.expression{ display:flex; align-items:center; flex-wrap:wrap; gap:10px; font-size:1.15rem; font-weight:600 }\n.slot{ min-width:36px; min-height:36px; border-radius:12px; border:2px dashed rgba(239,68,68,.45); display:inline-flex; align-items:center; justify-content:center; background:rgba(254,226,226,.5); padding:4px 8px }\n[data-theme=\"dark\"] .slot{ background:rgba(239,68,68,.12); border-color:rgba(248,113,113,.55) }\n.digit{ font-size:1.2rem; font-weight:700 }\n.placeholder{ color:var(--accent); font-size:1.4rem }\n.clear{ border:none; background:transparent; color:var(--accent); cursor:pointer; display:inline-flex; align-items:center; gap:4px; font-size:.8rem }\n.ic{ width:16px; height:16px }\n\n.bank{ margin:22px 0; background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px; box-shadow:0 12px 24px rgba(17,24,39,.08) }\n.bank-title{ font-weight:700; margin-bottom:12px }\n.bank-items{ display:flex; flex-wrap:wrap; gap:10px }\n.chip{ padding:8px 14px; border-radius:999px; border:1px solid var(--bd); background:var(--panel); cursor:grab; font-weight:700; box-shadow:0 8px 20px rgba(17,24,39,.08) }\n.chip:active{ cursor:grabbing }\n\n.actions{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:18px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); cursor:pointer; font-weight:700; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(17,24,39,.12) }\n\n.feedback{ padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700 }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 5: بطاقات الكسر المفقود',\n    intro:[\n      'استخدم البطاقات المرقّمة من ١ إلى ٩ مرة واحدة فقط لتكوين الكسرين بحيث يكون الناتج مساويًا للقيمة المطلوبة.',\n      'اسحب الرقم المناسب إلى كل خانة للبسط أو المقام، ثم تحقّق من صحة الناتج.'\n    ],\n    bank:'البطاقات المتاحة',\n    check:'تحقّق', reset:'مسح الاختيار', newQ:'تحدٍ جديد', clear:'تفريغ',\n    needAll:'املأ كل الخانات أولًا.', wrong:'المعادلة غير صحيحة، جرّب ترتيبًا آخر.', correct:'أحسنت! أنتجت الكسور الصحيحة.'\n  },\n  en:{\n    title:'Level 3 – Challenge 5: Missing Fraction Cards',\n    intro:[\n      'Use the cards labelled 1 through 9 exactly once to build two fractions whose sum matches the target.',\n      'Drag each digit into the correct numerator or denominator, then check your result.'\n    ],\n    bank:'Available cards',\n    check:'Check', reset:'Reset selection', newQ:'New challenge', clear:'Clear',\n    needAll:'Fill every slot first.', wrong:'The equation is not satisfied—try another arrangement.', correct:'Great! The fractions are correct.'\n  }\n}\nconst L = computed(()=> (copy[props.lang]?props.lang:'ar'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== puzzle definitions ===== */\nconst slotTemplate = {\n  n1:['n1a','n1b'],\n  d1:['d1a','d1b'],\n  n2:['n2a','n2b'],\n  d2:['d2a','d2b'],\n  res:['res']\n}\n\nconst puzzles = [\n  {\n    id:'p1',\n    solution:{\n      n1:['2','9'],\n      d1:['1','6'],\n      n2:['5','7'],\n      d2:['4','8'],\n      res:['3']\n    }\n  },\n  {\n    id:'p2',\n    solution:{\n      n1:['3','9'],\n      d1:['2','7'],\n      n2:['6','4'],\n      d2:['1','8'],\n      res:['5']\n    }\n  },\n  {\n    id:'p3',\n    solution:{\n      n1:['5','7'],\n      d1:['1','3'],\n      n2:['9','4'],\n      d2:['2','6'],\n      res:['8']\n    }\n  }\n]\n\nconst currentPuzzle = ref(puzzles[0])\nconst placements = reactive({})\nconst expectedDigits = reactive({})\nconst bankCounts = reactive({})\nconst feedback = ref(null)\nconst solved = ref(false)\nconst digitsPool = ['1','2','3','4','5','6','7','8','9']\nconst digitsMap = ['٠','١','٢','٣','٤','٥','٦','٧','٨','٩']\n\nfunction formatDigit(value){\n  if(value == null) return ''\n  const str = String(value)\n  return props.lang==='ar' ? str.replace(/[0-9]/g, d => digitsMap[Number(d)]) : str\n}\n\nfunction resetMaps(){\n  Object.keys(placements).forEach(k => delete placements[k])\n  Object.keys(expectedDigits).forEach(k => delete expectedDigits[k])\n  Object.keys(bankCounts).forEach(k => delete bankCounts[k])\n}\n\nfunction initPuzzle(){\n  const puzzle = puzzles[Math.floor(Math.random()*puzzles.length)]\n  currentPuzzle.value = puzzle\n  resetMaps()\n  feedback.value = null\n  solved.value = false\n\n  digitsPool.forEach(d => {\n    bankCounts[d] = 1\n  })\n\n  for(const [group, keys] of Object.entries(slotTemplate)){\n    const digits = puzzle.solution[group]\n    if(!digits) continue\n    keys.forEach((key, idx) => {\n      placements[key] = null\n      expectedDigits[key] = digits[idx]\n    })\n  }\n}\n\nfunction allowDrop(ev){ ev.preventDefault() }\n\nfunction onDragStart(ev, digit){ ev.dataTransfer.setData('text/plain', digit) }\n\nfunction onDrop(ev, key){\n  ev.preventDefault()\n  const digit = ev.dataTransfer.getData('text/plain')\n  if(!digit) return\n  if((bankCounts[digit] || 0) <= 0 && placements[key] !== digit) return\n\n  if(placements[key] != null){\n    const prev = placements[key]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n\n  if(placements[key] !== digit){\n    bankCounts[digit] = (bankCounts[digit] || 0) - 1\n    if(bankCounts[digit] < 0) bankCounts[digit] = 0\n  }\n\n  placements[key] = digit\n  feedback.value = null\n  solved.value = false\n}\n\nfunction clearSlot(key){\n  if(placements[key] != null){\n    const digit = placements[key]\n    bankCounts[digit] = (bankCounts[digit] || 0) + 1\n    placements[key] = null\n    feedback.value = null\n    solved.value = false\n  }\n}\n\nconst bankList = computed(()=> {\n  const list=[]\n  for(const [digit,count] of Object.entries(bankCounts)){\n    for(let i=0;i<count;i++) list.push({ digit, key:`${digit}-${i}` })\n  }\n  return list\n})\n\nfunction allFilled(){\n  return Object.keys(expectedDigits).every(key => placements[key] != null)\n}\n\nfunction valueOf(group){\n  const keys = slotTemplate[group]\n  const digits = keys.map(k => placements[k])\n  return Number(digits.join(''))\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\n\nasync function checkSolution(){\n  if(!allFilled()){\n    feedback.value = copy[L.value].needAll\n    sWrong && sWrong.play()\n    return\n  }\n  const n1 = valueOf('n1')\n  const d1 = valueOf('d1')\n  const n2 = valueOf('n2')\n  const d2 = valueOf('d2')\n  const res = Number(placements['res'])\n  if(!d1 || !d2){\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n    return\n  }\n  const sum = n1/d1 + n2/d2\n  if(Math.abs(sum - res) < 1e-6){\n    feedback.value = copy[L.value].correct\n    solved.value = true\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\n\nfunction resetSelection(){\n  for(const key of Object.keys(placements)){\n    if(placements[key] != null){\n      const digit = placements[key]\n      bankCounts[digit] = (bankCounts[digit] || 0) + 1\n      placements[key] = null\n    }\n  }\n  feedback.value = null\n  solved.value = false\n}\n\nonMounted(initPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c5 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p v-for=\"(line, idx) in copy[L].intro\" :key=\"idx\" class=\"intro\">{{ line }}</p>\n    </header>\n\n    <section class=\"equation\">\n      <div class=\"fraction\">\n        <div class=\"row\">\n          <div v-for=\"key in slotTemplate.n1\" :key=\"key\" class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, key)\">\n            <span v-if=\"placements[key]\" class=\"digit\">{{ formatDigit(placements[key]) }}</span>\n            <span v-else class=\"placeholder\">?</span>\n          </div>\n        </div>\n        <div class=\"bar\"></div>\n        <div class=\"row\">\n          <div v-for=\"key in slotTemplate.d1\" :key=\"key\" class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, key)\">\n            <span v-if=\"placements[key]\" class=\"digit\">{{ formatDigit(placements[key]) }}</span>\n            <span v-else class=\"placeholder\">?</span>\n          </div>\n        </div>\n      </div>\n\n      <span class=\"op\">+</span>\n\n      <div class=\"fraction\">\n        <div class=\"row\">\n          <div v-for=\"key in slotTemplate.n2\" :key=\"key\" class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, key)\">\n            <span v-if=\"placements[key]\" class=\"digit\">{{ formatDigit(placements[key]) }}</span>\n            <span v-else class=\"placeholder\">?</span>\n          </div>\n        </div>\n        <div class=\"bar\"></div>\n        <div class=\"row\">\n          <div v-for=\"key in slotTemplate.d2\" :key=\"key\" class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, key)\">\n            <span v-if=\"placements[key]\" class=\"digit\">{{ formatDigit(placements[key]) }}</span>\n            <span v-else class=\"placeholder\">?</span>\n          </div>\n        </div>\n      </div>\n\n      <span class=\"op\">=</span>\n\n      <div class=\"target-slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, 'res')\">\n        <span v-if=\"placements.res\" class=\"digit\">{{ formatDigit(placements.res) }}</span>\n        <span v-else class=\"placeholder\">?</span>\n      </div>\n    </section>\n\n    <section class=\"controls\">\n      <button class=\"btn\" @click=\"checkSolution\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetSelection\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"item in bankList\"\n          :key=\"item.key\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, item.digit)\"\n        >\n          {{ formatDigit(item.digit) }}\n        </button>\n      </div>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c5{ --fg:#1f2937; --bg:#fffaf3; --panel:#ffffff; --bd:#facc15; --accent:#f59e0b;\n  padding:24px; border-radius:18px; color:var(--fg); background:var(--bg); box-shadow:0 16px 36px rgba(245,158,11,.15) }\n[data-theme=\"dark\"] .lvl3c5{ --fg:#f1f5f9; --bg:#271c12; --panel:#312310; --bd:#facc15; --accent:#fbbf24 }\n\n.head{ margin-bottom:20px }\n.title{ margin:0 0 10px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0 0 6px; line-height:1.55 }\n\n.equation{ display:flex; align-items:center; justify-content:center; gap:18px; margin-bottom:20px; flex-wrap:wrap }\n.fraction{ display:flex; flex-direction:column; align-items:center; gap:6px; background:var(--panel); padding:12px 16px; border:2px solid var(--bd); border-radius:16px; box-shadow:0 10px 28px rgba(15,23,42,.1) }\n.row{ display:flex; gap:8px }\n.slot{ width:44px; height:44px; border-radius:12px; border:2px dashed rgba(245,158,11,.55); display:flex; align-items:center; justify-content:center; background:rgba(253,230,138,.4); cursor:pointer }\n.placeholder{ font-size:1.4rem; color:var(--accent); opacity:.8 }\n.digit{ font-size:1.35rem; font-weight:700 }\n.bar{ width:100%; height:2px; background:var(--bd) }\n.target-slot{ width:56px; height:56px; border-radius:14px; border:2px dashed rgba(245,158,11,.6); display:flex; align-items:center; justify-content:center; background:rgba(253,230,138,.35) }\n.op{ font-size:1.6rem; font-weight:700; color:var(--accent) }\n\n.controls{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-bottom:18px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); cursor:pointer; font-weight:700; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(15,23,42,.12) }\n.ic{ width:18px; height:18px }\n\n.bank{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:18px; box-shadow:0 12px 24px rgba(15,23,42,.08) }\n.bank-title{ font-weight:700; margin-bottom:12px }\n.bank-items{ display:flex; flex-wrap:wrap; gap:10px }\n.chip{ padding:10px 16px; border-radius:12px; border:1px solid var(--bd); background:rgba(253,230,138,.45); font-weight:700; cursor:grab; transition:.12s }\n.chip:active{ cursor:grabbing }\n\n.feedback{ margin-top:18px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700; text-align:center }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n\n@media(max-width: 720px){\n  .fraction{ padding:10px 12px }\n  .slot{ width:40px; height:40px }\n  .target-slot{ width:48px; height:48px }\n}\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 6: كسور مكافئة',\n    intro:'اسحب الأرقام المتاحة وضعها في الخانات بحيث يكون الكسر الاعتيادي مساويًا للقيمة العشرية المعطاة.',\n    decimals:'القيمة العشرية', fraction:'الكسر المكافئ', bank:'البطاقات المتاحة',\n    check:'تحقّق', reset:'مسح', newQ:'تحدٍ جديد', clear:'تفريغ',\n    needAll:'املأ كل الخانات أولًا.', wrong:'القيم غير متكافئة، حاول ترتيبًا مختلفًا.', correct:'أحسنت! الكسور مكافئة.'\n  },\n  en:{\n    title:'Level 3 – Challenge 6: Equivalent Fractions',\n    intro:'Drag the available digits into the slots so the fraction equals the given decimal value.',\n    decimals:'Decimal value', fraction:'Equivalent fraction', bank:'Available cards',\n    check:'Check', reset:'Clear', newQ:'New challenge', clear:'Clear',\n    needAll:'Fill every slot first.', wrong:'Values are not equivalent. Try another arrangement.', correct:'Great! They are equivalent.'\n  }\n}\nconst L = computed(() => (copy[props.lang] ? props.lang : 'ar'))\n\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst puzzles = [\n  {\n    id:'p1',\n    decimal:{ slots:['dec1','dec2'], digits:['2','5'] }, // 0.25\n    fraction:{ num:{ slots:['num1'], digits:['1'] }, den:{ slots:['den1'], digits:['4'] } },\n    digits:['1','2','4','5']\n  },\n  {\n    id:'p2',\n    decimal:{ slots:['dec1','dec2'], digits:['7','5'] }, // 0.75\n    fraction:{ num:{ slots:['num1'], digits:['3'] }, den:{ slots:['den1'], digits:['4'] } },\n    digits:['3','4','5','7']\n  },\n  {\n    id:'p3',\n    decimal:{ slots:['dec1'], digits:['6'] }, // 0.6\n    fraction:{ num:{ slots:['num1'], digits:['3'] }, den:{ slots:['den1'], digits:['5'] } },\n    digits:['3','5','6']\n  },\n  {\n    id:'p4',\n    decimal:{ slots:['dec1','dec2'], digits:['3','3'] }, // 0.33 -> 1/3\n    fraction:{ num:{ slots:['num1'], digits:['1'] }, den:{ slots:['den1'], digits:['3'] } },\n    digits:['1','3']\n  }\n]\n\nconst currentPuzzle = ref(puzzles[0])\nconst placements = reactive({})\nconst requirements = reactive({})\nconst bankCounts = reactive({})\nconst feedback = ref(null)\nconst solved = ref(false)\n\nfunction resetMaps(){\n  Object.keys(placements).forEach(k => delete placements[k])\n  Object.keys(requirements).forEach(k => delete requirements[k])\n  Object.keys(bankCounts).forEach(k => delete bankCounts[k])\n}\n\nfunction initPuzzle(){\n  const puzzle = puzzles[Math.floor(Math.random() * puzzles.length)]\n  currentPuzzle.value = puzzle\n  resetMaps()\n  feedback.value = null\n  solved.value = false\n\n  // build slots and requirements\n  const { decimal, fraction } = puzzle\n  decimal.slots.forEach((slot, idx) => {\n    placements[slot] = null\n    requirements[slot] = decimal.digits[idx]\n  })\n  fraction.num.slots.forEach((slot, idx) => {\n    placements[slot] = null\n    requirements[slot] = fraction.num.digits[idx]\n  })\n  fraction.den.slots.forEach((slot, idx) => {\n    placements[slot] = null\n    requirements[slot] = fraction.den.digits[idx]\n  })\n\n  puzzle.digits.forEach(d => {\n    bankCounts[d] = (bankCounts[d] || 0) + 1\n  })\n}\n\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDragStart(ev, digit){ ev.dataTransfer.setData('text/plain', digit) }\n\nfunction onDrop(ev, slot){\n  ev.preventDefault()\n  const digit = ev.dataTransfer.getData('text/plain')\n  if(!digit) return\n  if((bankCounts[digit] || 0) <= 0 && placements[slot] !== digit) return\n\n  if(placements[slot] != null){\n    const prev = placements[slot]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n\n  if(placements[slot] !== digit){\n    bankCounts[digit] = (bankCounts[digit] || 0) - 1\n    if(bankCounts[digit] < 0) bankCounts[digit] = 0\n  }\n\n  placements[slot] = digit\n  solved.value = false\n  feedback.value = null\n}\n\nfunction clearSlot(slot){\n  if(placements[slot] != null){\n    const digit = placements[slot]\n    bankCounts[digit] = (bankCounts[digit] || 0) + 1\n    placements[slot] = null\n    solved.value = false\n    feedback.value = null\n  }\n}\n\nconst bankList = computed(()=>{\n  const list=[]\n  for(const [digit,count] of Object.entries(bankCounts)){\n    for(let i=0;i<count;i++) list.push({ digit, key:`${digit}-${i}` })\n  }\n  return list\n})\n\nfunction slotsFilled(){\n  return Object.keys(requirements).every(key => placements[key] != null)\n}\n\nfunction decimalValue(){\n  const digits = currentPuzzle.value.decimal.slots.map(slot => placements[slot])\n  const decimalPart = digits.join('')\n  return Number(`0.${decimalPart}`)\n}\n\nfunction fractionValue(){\n  const { fraction } = currentPuzzle.value\n  const numDigits = fraction.num.slots.map(slot => placements[slot]).join('')\n  const denDigits = fraction.den.slots.map(slot => placements[slot]).join('')\n  const numerator = Number(numDigits)\n  const denominator = Number(denDigits)\n  if(!denominator) return null\n  return numerator / denominator\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{ method:'GET', credentials:'include' }) }catch{}\n}\n\nasync function checkSolution(){\n  if(!slotsFilled()){\n    feedback.value = copy[L.value].needAll\n    sWrong && sWrong.play()\n    return\n  }\n  const dec = decimalValue()\n  const frac = fractionValue()\n  if(frac == null){\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n    return\n  }\n  if(Math.abs(dec - frac) < 1e-6){\n    feedback.value = copy[L.value].correct\n    solved.value = true\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\n\nfunction resetSelection(){\n  Object.keys(placements).forEach(slot => {\n    if(placements[slot] != null){\n      const digit = placements[slot]\n      bankCounts[digit] = (bankCounts[digit] || 0) + 1\n      placements[slot] = null\n    }\n  })\n  solved.value = false\n  feedback.value = null\n}\n\nonMounted(initPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c6 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"intro\">{{ copy[L].intro }}</p>\n    </header>\n\n    <section class=\"problem\">\n      <div class=\"decimal-card\">\n        <div class=\"label\">{{ copy[L].decimals }}</div>\n        <div class=\"decimal-display\">\n          <span class=\"fixed\">0.</span>\n          <div class=\"slots\">\n            <div\n              v-for=\"slot in currentPuzzle.decimal.slots\"\n              :key=\"slot\"\n              class=\"slot\"\n              @dragover=\"allowDrop\"\n              @drop=\"onDrop($event, slot)\"\n            >\n              <span v-if=\"placements[slot]\" class=\"digit\">{{ placements[slot] }}</span>\n              <span v-else class=\"placeholder\">?</span>\n              <button class=\"clear\" @click=\"clearSlot(slot)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <span class=\"equals\">=</span>\n\n      <div class=\"fraction-card\">\n        <div class=\"label\">{{ copy[L].fraction }}</div>\n        <div class=\"fraction\">\n          <div class=\"row\">\n            <div\n              v-for=\"slot in currentPuzzle.fraction.num.slots\"\n              :key=\"slot\"\n              class=\"slot\"\n              @dragover=\"allowDrop\"\n              @drop=\"onDrop($event, slot)\"\n            >\n              <span v-if=\"placements[slot]\" class=\"digit\">{{ placements[slot] }}</span>\n              <span v-else class=\"placeholder\">?</span>\n              <button class=\"clear\" @click=\"clearSlot(slot)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n            </div>\n          </div>\n          <div class=\"bar\"></div>\n          <div class=\"row\">\n            <div\n              v-for=\"slot in currentPuzzle.fraction.den.slots\"\n              :key=\"slot\"\n              class=\"slot\"\n              @dragover=\"allowDrop\"\n              @drop=\"onDrop($event, slot)\"\n            >\n              <span v-if=\"placements[slot]\" class=\"digit\">{{ placements[slot] }}</span>\n              <span v-else class=\"placeholder\">?</span>\n              <button class=\"clear\" @click=\"clearSlot(slot)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <section class=\"controls\">\n      <button class=\"btn\" @click=\"checkSolution\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetSelection\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"item in bankList\"\n          :key=\"item.key\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, item.digit)\"\n        >\n          {{ item.digit }}\n        </button>\n      </div>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c6{ --fg:#1f2937; --bg:#f8fafc; --panel:#ffffff; --bd:#c4d4f8; --accent:#2563eb;\n  padding:24px; border-radius:18px; background:var(--bg); color:var(--fg); box-shadow:0 14px 32px rgba(37,99,235,.12) }\n[data-theme=\"dark\"] .lvl3c6{ --fg:#e2e8f0; --bg:#0f172a; --panel:#111c34; --bd:#1e3a8a; --accent:#60a5fa }\n\n.head{ margin-bottom:20px }\n.title{ margin:0 0 10px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0; line-height:1.5; opacity:.85 }\n\n.problem{ display:flex; align-items:center; justify-content:center; gap:24px; flex-wrap:wrap; margin-bottom:22px }\n.decimal-card, .fraction-card{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px 20px; box-shadow:0 12px 28px rgba(15,23,42,.08); min-width:220px }\n.label{ font-weight:700; margin-bottom:12px; text-align:center }\n.decimal-display{ display:flex; align-items:center; gap:10px; justify-content:center }\n.fixed{ font-size:1.5rem; font-weight:700 }\n.slots{ display:flex; gap:10px }\n.slot{ min-width:46px; min-height:54px; border-radius:12px; border:2px dashed rgba(37,99,235,.35); display:flex; align-items:center; justify-content:center; position:relative; background:rgba(191,219,254,.35) }\n.placeholder{ font-size:1.5rem; color:var(--accent); opacity:.75 }\n.digit{ font-size:1.45rem; font-weight:700 }\n.clear{ position:absolute; bottom:-30px; left:50%; transform:translateX(-50%); background:transparent; border:none; color:var(--accent); cursor:pointer; font-size:.75rem; display:flex; align-items:center; gap:4px }\n.ic{ width:16px; height:16px }\n\n.fraction{ display:flex; flex-direction:column; gap:12px; align-items:center }\n.row{ display:flex; gap:10px }\n.bar{ width:100%; height:3px; background:var(--accent); border-radius:999px }\n.equals{ font-size:1.8rem; font-weight:700; color:var(--accent) }\n\n.controls{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-bottom:18px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); font-weight:700; cursor:pointer; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(15,23,42,.12) }\n\n.bank{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:18px; box-shadow:0 12px 24px rgba(15,23,42,.08) }\n.bank-title{ font-weight:700; margin-bottom:12px }\n.bank-items{ display:flex; flex-wrap:wrap; gap:10px }\n.chip{ padding:9px 14px; border-radius:12px; border:1px solid var(--bd); background:rgba(191,219,254,.45); font-weight:700; cursor:grab; transition:.15s }\n.chip:active{ cursor:grabbing }\n\n.feedback{ margin-top:20px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700; text-align:center }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n\n@media (max-width: 720px){\n  .slot{ min-width:42px; min-height:48px }\n  .clear{ bottom:-26px }\n}\n</style>\n","<script setup>\nimport { ref, computed, reactive, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 8: مسار الضرب',\n    intro:'ابدأ من النقطة أ ثم اختر نقاطًا متصلة للوصول إلى ب بحيث يكون حاصل ضرب الأرقام على الأضلاع مساويًا للقيمة المطلوبة.',\n    target:'القيمة المطلوبة', current:'الحاصل الحالي',\n    check:'تحقّق', reset:'مسح آخر نقطة', newQ:'تحدٍ جديد', clearAll:'إعادة المسار',\n    needStart:'ابدأ من النقطة أ.', invalid:'يجب اختيار نقطة متصلة.', wrong:'المسار لا يعطي القيمة المطلوبة، حاول مرة أخرى.', correct:'أحسنت! المسار يعطي القيمة المطلوبة.'\n  },\n  en:{\n    title:'Level 3 – Challenge 8: Multiplication Path',\n    intro:'Start at point A and travel along connected nodes to reach B so the product of edge values equals the required target.',\n    target:'Target product', current:'Current product',\n    check:'Check', reset:'Undo last', newQ:'New challenge', clearAll:'Clear path',\n    needStart:'Start from node A.', invalid:'Pick a connected node.', wrong:'Path does not meet the target—try again.', correct:'Great! The path matches the target.'\n  }\n}\nconst L = computed(() => (copy[props.lang] ? props.lang : 'ar'))\n\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst puzzles = [\n  {\n    id:'p1',\n    target:5,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'أ', x:420, y:150, type:'start' },\n      { id:'B', label:'ب', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:90 },\n      { id:'RB', x:340, y:210 },\n      { id:'CT', x:260, y:70 },\n      { id:'C',  x:260, y:150 },\n      { id:'CB', x:260, y:230 },\n      { id:'LT', x:180, y:90 },\n      { id:'LB', x:180, y:210 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:0.5 },\n      { from:'RT', to:'CT', value:1.0 },\n      { from:'CT', to:'C', value:0.5 },\n      { from:'C', to:'LT', value:2.0 },\n      { from:'LT', to:'B', value:2.5 },\n      { from:'A', to:'RB', value:2.0 },\n      { from:'RB', to:'CB', value:1.25 },\n      { from:'CB', to:'C', value:1.0 },\n      { from:'C', to:'LB', value:1.0 },\n      { from:'LB', to:'B', value:2.0 },\n      { from:'CT', to:'CB', value:2.0 },\n      { from:'RT', to:'C', value:1.4 },\n      { from:'C', to:'LT', value:1.6 }\n    ]\n  },\n  {\n    id:'p2',\n    target:6,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'أ', x:420, y:150, type:'start' },\n      { id:'B', label:'ب', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:100 },\n      { id:'RB', x:340, y:200 },\n      { id:'CT', x:260, y:60 },\n      { id:'C',  x:260, y:150 },\n      { id:'CB', x:260, y:240 },\n      { id:'LT', x:180, y:100 },\n      { id:'LB', x:180, y:200 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.5 },\n      { from:'RT', to:'CT', value:2.0 },\n      { from:'CT', to:'C', value:1.0 },\n      { from:'C', to:'LT', value:1.0 },\n      { from:'LT', to:'B', value:2.0 },\n      { from:'A', to:'RB', value:0.5 },\n      { from:'RB', to:'CB', value:1.2 },\n      { from:'CB', to:'C', value:2.0 },\n      { from:'C', to:'LB', value:1.0 },\n      { from:'LB', to:'B', value:2.0 },\n      { from:'RT', to:'C', value:1.2 },\n      { from:'C', to:'LT', value:1.5 }\n    ]\n  },\n  {\n    id:'p3',\n    target:5.4,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'أ', x:420, y:150, type:'start' },\n      { id:'B', label:'ب', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:90 },\n      { id:'RB', x:340, y:210 },\n      { id:'CT', x:260, y:70 },\n      { id:'C',  x:260, y:150 },\n      { id:'CB', x:260, y:230 },\n      { id:'LT', x:180, y:90 },\n      { id:'LB', x:180, y:210 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.2 },\n      { from:'RT', to:'CT', value:1.5 },\n      { from:'CT', to:'C', value:1.0 },\n      { from:'C', to:'LT', value:1.5 },\n      { from:'LT', to:'B', value:2.0 },\n      { from:'A', to:'RB', value:1.4 },\n      { from:'RB', to:'CB', value:1.1 },\n      { from:'CB', to:'C', value:1.2 },\n      { from:'C', to:'LB', value:1.3 },\n      { from:'LB', to:'B', value:1.8 },\n      { from:'RT', to:'C', value:1.3 },\n      { from:'CT', to:'CB', value:1.4 }\n    ]\n  },\n  {\n    id:'p4',\n    target:4.5,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'أ', x:420, y:150, type:'start' },\n      { id:'B', label:'ب', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:110 },\n      { id:'RB', x:340, y:210 },\n      { id:'CT', x:260, y:90 },\n      { id:'C',  x:260, y:160 },\n      { id:'CB', x:260, y:240 },\n      { id:'LT', x:180, y:120 },\n      { id:'LB', x:180, y:210 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.1 },\n      { from:'RT', to:'CT', value:1.3 },\n      { from:'CT', to:'C', value:1.2 },\n      { from:'C', to:'LT', value:1.25 },\n      { from:'LT', to:'B', value:2.0 },\n      { from:'A', to:'RB', value:1.5 },\n      { from:'RB', to:'CB', value:1.2 },\n      { from:'CB', to:'C', value:1.0 },\n      { from:'C', to:'LB', value:1.4 },\n      { from:'LB', to:'B', value:1.8 },\n      { from:'RT', to:'C', value:1.4 },\n      { from:'CT', to:'CB', value:1.1 }\n    ]\n  },\n  {\n    id:'p5',\n    target:7.2,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'أ', x:420, y:150, type:'start' },\n      { id:'B', label:'ب', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:95 },\n      { id:'RB', x:340, y:205 },\n      { id:'CT', x:260, y:65 },\n      { id:'C',  x:260, y:150 },\n      { id:'CB', x:260, y:235 },\n      { id:'LT', x:180, y:105 },\n      { id:'LB', x:180, y:205 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.2 },\n      { from:'RT', to:'CT', value:1.5 },\n      { from:'CT', to:'C', value:1.0 },\n      { from:'C', to:'LT', value:1.2 },\n      { from:'LT', to:'B', value:1.6 },\n      { from:'A', to:'RB', value:0.9 },\n      { from:'RB', to:'CB', value:1.4 },\n      { from:'CB', to:'C', value:1.3 },\n      { from:'C', to:'LB', value:2.0 },\n      { from:'LB', to:'B', value:2.0 },\n      { from:'RT', to:'C', value:1.3 },\n      { from:'CT', to:'CB', value:1.2 }\n    ]\n  },\n  {\n    id:'p6',\n    target:4.8,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'أ', x:420, y:150, type:'start' },\n      { id:'B', label:'ب', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:105 },\n      { id:'RB', x:340, y:215 },\n      { id:'CT', x:260, y:75 },\n      { id:'C',  x:260, y:155 },\n      { id:'CB', x:260, y:235 },\n      { id:'LT', x:180, y:110 },\n      { id:'LB', x:180, y:215 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.3 },\n      { from:'RT', to:'CT', value:1.2 },\n      { from:'CT', to:'C', value:1.1 },\n      { from:'C', to:'LT', value:1.4 },\n      { from:'LT', to:'B', value:1.7 },\n      { from:'A', to:'RB', value:1.25 },\n      { from:'RB', to:'CB', value:1.2 },\n      { from:'CB', to:'C', value:1.0 },\n      { from:'C', to:'LB', value:1.6 },\n      { from:'LB', to:'B', value:2.0 },\n      { from:'RT', to:'C', value:1.2 },\n      { from:'CT', to:'CB', value:1.3 }\n    ]\n  }\n]\n\nfunction withCoords(edge, nodes){\n  const from = nodes.find(n => n.id === edge.from)\n  const to = nodes.find(n => n.id === edge.to)\n  return { ...edge, x1: from.x, y1: from.y, x2: to.x, y2: to.y, midX:(from.x+to.x)/2, midY:(from.y+to.y)/2 }\n}\n\nconst currentPuzzle = ref(puzzles[0])\nconst lastPuzzleId = ref(null)\nconst path = ref([]) // array of node ids\nconst feedback = ref(null)\nconst solved = ref(false)\n\nconst nodes = computed(() => currentPuzzle.value.nodes)\nconst edges = computed(() => currentPuzzle.value.edges.map(e => withCoords(e, nodes.value)))\n\nconst selectedEdges = computed(() => {\n  const e = []\n  for(let i=0;i<path.value.length-1;i++){\n    const a = path.value[i]\n    const b = path.value[i+1]\n    const edge = edges.value.find(ed => (ed.from===a && ed.to===b) || (ed.from===b && ed.to===a))\n    if(edge) e.push(edge)\n  }\n  return e\n})\n\nconst product = computed(() => selectedEdges.value.reduce((acc, ed) => acc * ed.value, 1))\n\nfunction hasEdge(a,b){\n  return edges.value.some(ed => (ed.from===a && ed.to===b) || (ed.from===b && ed.to===a))\n}\n\nfunction pickNextPuzzle(){\n  if(puzzles.length === 1){\n    lastPuzzleId.value = puzzles[0].id\n    return puzzles[0]\n  }\n  let candidate\n  do{\n    candidate = puzzles[Math.floor(Math.random() * puzzles.length)]\n  }while(candidate.id === lastPuzzleId.value)\n  lastPuzzleId.value = candidate.id\n  return candidate\n}\n\nfunction resetPath(){\n  path.value = []\n  solved.value = false\n  feedback.value = null\n}\n\nfunction undoLast(){\n  if(path.value.length > 0){\n    path.value = path.value.slice(0, -1)\n    solved.value = false\n    feedback.value = null\n  }\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\n\nfunction onNodeClick(node){\n  const { start, end } = currentPuzzle.value\n  if(!path.value.length){\n    if(node.id !== start){\n      feedback.value = copy[L.value].needStart\n      sWrong && sWrong.play()\n      return\n    }\n    path.value = [node.id]\n    feedback.value = null\n    return\n  }\n  const last = path.value[path.value.length-1]\n  if(node.id === last) return\n  if(!hasEdge(last, node.id)){\n    feedback.value = copy[L.value].invalid\n    sWrong && sWrong.play()\n    return\n  }\n  const newPath = path.value.slice()\n  newPath.push(node.id)\n  path.value = newPath\n  feedback.value = null\n  if(node.id === end){\n    checkPath()\n  }\n}\n\nasync function checkPath(){\n  const { end, target } = currentPuzzle.value\n  if(path.value[path.value.length-1] !== end){\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n    return\n  }\n  if(Math.abs(product.value - target) < 1e-6){\n    feedback.value = copy[L.value].correct\n    solved.value = true\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    feedback.value = copy[L.value].wrong\n    solved.value = false\n    sWrong && sWrong.play()\n  }\n}\n\nfunction initPuzzle(){\n  const puzzle = pickNextPuzzle()\n  currentPuzzle.value = puzzle\n  resetPath()\n}\n\nonMounted(initPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c8 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"intro\">{{ copy[L].intro }}</p>\n    </header>\n\n    <section class=\"status\">\n      <div class=\"chip\">{{ copy[L].target }}: <strong>{{ currentPuzzle.target }}</strong></div>\n      <div class=\"chip\">{{ copy[L].current }}: <strong>{{ product.toFixed(3) }}</strong></div>\n    </section>\n\n    <section class=\"graph\">\n      <svg viewBox=\"0 0 500 300\">\n        <g v-for=\"edge in edges\" :key=\"edge.from + edge.to\">\n          <line :x1=\"edge.x1\" :y1=\"edge.y1\" :x2=\"edge.x2\" :y2=\"edge.y2\" :class=\"['edge', { active: selectedEdges.includes(edge) }]\" />\n          <text :x=\"edge.midX\" :y=\"edge.midY\" class=\"edge-label\">{{ edge.value }}</text>\n        </g>\n        <g v-for=\"node in nodes\" :key=\"node.id\" class=\"node\" @click=\"onNodeClick(node)\">\n          <circle :cx=\"node.x\" :cy=\"node.y\" :r=\"node.type ? 20 : 12\" :class=\"['point', node.type, { selected: path.includes(node.id) }]\" />\n          <text :x=\"node.x\" :y=\"node.y + 4\" class=\"node-label\">{{ node.label || '' }}</text>\n        </g>\n      </svg>\n    </section>\n\n    <section class=\"controls\">\n      <button class=\"btn\" @click=\"checkPath\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"undoLast\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"resetPath\"><RefreshCw class=\"ic\" /> {{ copy[L].clearAll }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c8{ --fg:#111827; --bg:#f0f9ff; --panel:#ffffff; --bd:#bae6fd; --accent:#2563eb;\n  padding:24px; border-radius:18px; background:var(--bg); color:var(--fg); box-shadow:0 16px 36px rgba(37,99,235,.12) }\n[data-theme=\"dark\"] .lvl3c8{ --fg:#e2e8f0; --bg:#0b1424; --panel:#12203b; --bd:#1d4ed8; --accent:#60a5fa }\n\n.head{ margin-bottom:20px }\n.title{ margin:0 0 10px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0; opacity:.85; line-height:1.55 }\n\n.status{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:18px }\n.chip{ padding:8px 14px; border-radius:999px; background:var(--panel); border:1px solid var(--bd); box-shadow:0 6px 16px rgba(15,23,42,.08); font-weight:600 }\n.chip strong{ font-weight:700 }\n\n.graph{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px; box-shadow:0 12px 28px rgba(15,23,42,.12); margin-bottom:20px }\nsvg{ width:100%; height:auto }\n.edge{ stroke:#3b82f6; stroke-width:4; stroke-linecap:round; opacity:.6; transition:.15s }\n.edge.active{ stroke:#2563eb; opacity:1 }\n.edge-label{ fill:var(--fg); font-size:12px; text-anchor:middle; dominant-baseline:middle; font-weight:600 }\n.node{ cursor:pointer }\n.point{ fill:#1d4ed8; stroke:#fff; stroke-width:2; transition:.15s }\n.point.start, .point.end{ fill:#fde68a; stroke:#fbbf24; stroke-width:3 }\n.point.selected{ stroke:var(--accent); stroke-width:4 }\n.node-label{ fill:var(--fg); font-weight:700; font-size:14px; text-anchor:middle }\n\n.controls{ display:flex; gap:12px; flex-wrap:wrap }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); font-weight:700; cursor:pointer; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(15,23,42,.12) }\n.ic{ width:18px; height:18px }\n\n.feedback{ margin-top:18px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700; text-align:center }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 9: شيفرة الرموز',\n    intro:'حلّ المعادلات لتحديد قيمة كل رمز، ثم اسحب الحروف/الأرقام إلى مواقعها لفك الشيفرة.',\n    letters:'التحويل الحرفي', equations:'المعادلات', message:'الرسالة المشفّرة', bank:'بنك القيم',\n    decoded:'الرسالة بعد الفَك', check:'تحقّق', reset:'مسح التعيينات', newQ:'تحدٍ جديد',\n    needAll:'أكمل كل الحروف أولاً.', wrong:'التعيينات غير صحيحة، راجع الحلول.', correct:'رائع! قمت بفك الشيفرة بنجاح.'\n  },\n  en:{\n    title:'Level 3 – Challenge 9: Cipher Grid',\n    intro:'Solve each expression to find the value of every symbol, then drag letters/numbers into place to decode the message.',\n    letters:'Letter mapping', equations:'Expressions', message:'Encoded message', bank:'Value bank',\n    decoded:'Decoded message', check:'Check', reset:'Reset assignments', newQ:'New challenge',\n    needAll:'Assign all letters first.', wrong:'Some assignments are incorrect. Try again.', correct:'Great job! You decoded the cipher.'\n  }\n}\nconst L = computed(() => (copy[props.lang] ? props.lang : 'ar'))\n\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst puzzles = [\n  {\n    id:'p1',\n    equations:[\n      { id:'M', expr:'M + 7 = 16', value:9 },\n      { id:'A', expr:'A / 2 = 7', value:14 },\n      { id:'T', expr:'T - 5 = 16', value:21 },\n      { id:'H', expr:'3 * H = 36', value:12 },\n      { id:'W', expr:'W - 4 = 14', value:18 },\n      { id:'I', expr:'I + 2 = 8', value:6 },\n      { id:'Z', expr:'Z / 2 = 13', value:26 },\n      { id:'L', expr:'L / 4 = 5', value:20 },\n      { id:'E', expr:'2 * E - 4 = 22', value:13 },\n      { id:'D', expr:'D + 9 = 25', value:16 }\n    ],\n    mappingTable:[\n      { letter:'M', value:9 },\n      { letter:'A', value:14 },\n      { letter:'T', value:21 },\n      { letter:'H', value:12 },\n      { letter:'W', value:18 },\n      { letter:'I', value:6 },\n      { letter:'Z', value:26 },\n      { letter:'L', value:20 },\n      { letter:'E', value:13 },\n      { letter:'D', value:16 }\n    ],\n    message:[9,14,21,12,18,6,26]\n  },\n  {\n    id:'p2',\n    equations:[\n      { id:'V', expr:'V / 3 = 8', value:24 },\n      { id:'I', expr:'I + 2 = 7', value:5 },\n      { id:'C', expr:'3 * C = 54', value:18 },\n      { id:'T', expr:'T + 4 = 16', value:12 },\n      { id:'O', expr:'O - 5 = 15', value:20 },\n      { id:'R', expr:'R / 3 = 9', value:27 },\n      { id:'Y', expr:'2 * Y = 20', value:10 },\n      { id:'E', expr:'2 * E + 6 = 34', value:14 },\n      { id:'L', expr:'L * 2 = 16', value:8 },\n      { id:'S', expr:'S / 4 + 3 = 7', value:16 }\n    ],\n    mappingTable:[\n      { letter:'V', value:24 },\n      { letter:'I', value:5 },\n      { letter:'C', value:18 },\n      { letter:'T', value:12 },\n      { letter:'O', value:20 },\n      { letter:'R', value:27 },\n      { letter:'Y', value:10 },\n      { letter:'E', value:14 },\n      { letter:'L', value:8 },\n      { letter:'S', value:16 }\n    ],\n    message:[24,5,18,12,20,27,10]\n  },\n  {\n    id:'p3',\n    equations:[\n      { id:'P', expr:'P + 5 = 16', value:11 },\n      { id:'U', expr:'U / 4 = 7', value:28 },\n      { id:'Z', expr:'3 * Z = 27', value:9 },\n      { id:'L', expr:'L - 6 = 12', value:18 },\n      { id:'E', expr:'E + 6 = 21', value:15 },\n      { id:'S', expr:'2 * S = 24', value:12 },\n      { id:'A', expr:'A / 2 = 11', value:22 },\n      { id:'R', expr:'R + 5 = 19', value:14 },\n      { id:'T', expr:'T / 5 = 6', value:30 },\n      { id:'M', expr:'2 * M = 32', value:16 }\n    ],\n    mappingTable:[\n      { letter:'P', value:11 },\n      { letter:'U', value:28 },\n      { letter:'Z', value:9 },\n      { letter:'L', value:18 },\n      { letter:'E', value:15 },\n      { letter:'S', value:12 },\n      { letter:'A', value:22 },\n      { letter:'R', value:14 },\n      { letter:'T', value:30 },\n      { letter:'M', value:16 }\n    ],\n    message:[11,28,9,9,18,15,12]\n  }\n]\n\nconst currentPuzzle = ref(puzzles[0])\nconst lastPuzzleId = ref(null)\n\nfunction pickNextPuzzle(){\n  if(puzzles.length === 1){\n    lastPuzzleId.value = puzzles[0].id\n    return puzzles[0]\n  }\n  let candidate\n  do {\n    candidate = puzzles[Math.floor(Math.random() * puzzles.length)]\n  } while(candidate.id === lastPuzzleId.value)\n  lastPuzzleId.value = candidate.id\n  return candidate\n}\n\nconst assignments = reactive({})\nconst feedback = ref(null)\nconst solved = ref(false)\n\nfunction initPuzzle(){\n  const puzzle = pickNextPuzzle()\n  currentPuzzle.value = puzzle\n  Object.keys(assignments).forEach(k => delete assignments[k])\n  feedback.value = null\n  solved.value = false\n}\n\nconst options = computed(()=> currentPuzzle.value.mappingTable.map(item => item.value))\nconst availableLetters = computed(()=> currentPuzzle.value.mappingTable.map(item => item.letter))\n\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction onDrop(ev, letter){\n  ev.preventDefault()\n  const val = ev.dataTransfer.getData('text/plain')\n  if(!val) return\n  assignments[letter] = Number(val)\n  solved.value = false\n  feedback.value = null\n}\nfunction clearAssignment(letter){\n  if(assignments[letter] != null){\n    assignments[letter] = null\n    solved.value = false\n    feedback.value = null\n  }\n}\n\nconst decodedMessage = computed(()=> currentPuzzle.value.message.map(code => {\n  const entry = currentPuzzle.value.mappingTable.find(m => assignments[m.letter] === code)\n  return entry ? entry.letter : '?'\n}).join(''))\n\nfunction allAssigned(){\n  return currentPuzzle.value.mappingTable.every(entry => assignments[entry.letter] != null)\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\n\nasync function checkSolution(){\n  if(!allAssigned()){\n    feedback.value = copy[L.value].needAll\n    sWrong && sWrong.play()\n    return\n  }\n  for(const entry of currentPuzzle.value.mappingTable){\n    if(assignments[entry.letter] !== entry.value){\n      feedback.value = copy[L.value].wrong\n      sWrong && sWrong.play()\n      return\n    }\n  }\n  feedback.value = copy[L.value].correct\n  solved.value = true\n  sOK && sOK.play(); sClap && sClap.play()\n  await addPoint()\n}\n\nfunction resetAssignments(){\n  currentPuzzle.value.mappingTable.forEach(entry => { assignments[entry.letter] = null })\n  feedback.value = null\n  solved.value = false\n}\n\nonMounted(initPuzzle)\nwatch(()=>props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c9 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"intro\">{{ copy[L].intro }}</p>\n    </header>\n\n    <section class=\"table\">\n      <div class=\"table-title\">{{ copy[L].letters }}</div>\n      <div class=\"grid\">\n        <template v-for=\"entry in currentPuzzle.mappingTable\" :key=\"entry.letter\">\n          <div class=\"cell letter\">{{ entry.letter }}</div>\n          <div class=\"cell slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, entry.letter)\">\n            <span v-if=\"assignments[entry.letter] != null\" class=\"value\">{{ assignments[entry.letter] }}</span>\n            <span v-else class=\"placeholder\">?</span>\n            <button class=\"clear\" @click=\"clearAssignment(entry.letter)\"><Eraser class=\"ic\" /></button>\n          </div>\n        </template>\n      </div>\n    </section>\n\n    <section class=\"equations\">\n      <h3>{{ copy[L].equations }}</h3>\n      <ul>\n        <li v-for=\"eq in currentPuzzle.equations\" :key=\"eq.id\">{{ eq.expr }}</li>\n      </ul>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"value in options\"\n          :key=\"value\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, value)\"\n        >\n          {{ value }}\n        </button>\n      </div>\n    </section>\n\n    <section class=\"message\">\n      <h3>{{ copy[L].message }}</h3>\n      <div class=\"encoded\">\n        <span v-for=\"(code, idx) in currentPuzzle.message\" :key=\"idx\">{{ code }}</span>\n      </div>\n      <h4>{{ copy[L].decoded }}</h4>\n      <div class=\"decoded\">{{ decodedMessage }}</div>\n    </section>\n\n    <section class=\"controls\">\n      <button class=\"btn\" @click=\"checkSolution\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetAssignments\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c9{ --fg:#1f2937; --bg:#f8fafc; --panel:#ffffff; --bd:#d1d5db; --accent:#2563eb;\n  padding:24px; border-radius:18px; background:var(--bg); color:var(--fg); box-shadow:0 16px 36px rgba(37,99,235,.12) }\n[data-theme=\"dark\"] .lvl3c9{ --fg:#f1f5f9; --bg:#0f172a; --panel:#18223a; --bd:#1e293b; --accent:#60a5fa }\n\n.head{ margin-bottom:20px }\n.title{ margin:0 0 10px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0; opacity:.85; line-height:1.55 }\n\n.table{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px 18px; margin-bottom:20px; box-shadow:0 12px 28px rgba(15,23,42,.12) }\n.table-title{ font-weight:700; margin-bottom:12px }\n.grid{ display:grid; grid-template-columns:repeat(2, minmax(60px,1fr)); gap:10px }\n.cell{ padding:10px; border-radius:10px; border:1px solid var(--bd); text-align:center; font-weight:600 }\n.letter{ background:rgba(59,130,246,.18) }\n.slot{ position:relative; min-height:44px; display:flex; align-items:center; justify-content:center; background:rgba(191,219,254,.25) }\n.placeholder{ color:var(--accent); opacity:.7 }\n.value{ font-size:1.2rem; font-weight:700 }\n.clear{ position:absolute; right:6px; top:6px; border:none; background:transparent; color:var(--accent); cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.equations{ margin-bottom:20px }\n.equations h3{ margin:0 0 10px; font-size:1.1rem }\n.equations ul{ margin:0; padding-left:18px; columns:2; gap:20px }\n\n.bank{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px; margin-bottom:20px; box-shadow:0 12px 28px rgba(15,23,42,.08) }\n.bank-title{ font-weight:700; margin-bottom:10px }\n.bank-items{ display:flex; gap:10px; flex-wrap:wrap }\n.chip{ padding:8px 14px; border-radius:10px; border:1px solid var(--bd); background:rgba(191,219,254,.45); font-weight:700; cursor:grab }\n.chip:active{ cursor:grabbing }\n\n.message{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px; margin-bottom:20px }\n.encoded span{ padding:6px 10px; border-radius:8px; border:1px solid var(--bd); margin-inline-end:6px; display:inline-block }\n.decoded{ margin-top:8px; font-size:1.3rem; font-weight:700 }\n.controls{ display:flex; gap:12px; flex-wrap:wrap }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); cursor:pointer; font-weight:700; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(15,23,42,.12) }\n\n.feedback{ margin-top:18px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700; text-align:center }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n\n@media (max-width: 700px){\n  .equations ul{ columns:1 }\n}\n</style>\n","const EVENT_NAME = 'ml-toast'\n\nexport function emitToast({ message, type = 'info', duration = 2600 } = {}) {\n  if (!message) return\n  window.dispatchEvent(new CustomEvent(EVENT_NAME, {\n    detail: {\n      message,\n      type,\n      duration,\n      id: crypto.randomUUID?.() || Math.random().toString(36).slice(2),\n      timestamp: Date.now(),\n    },\n  }))\n}\n\nexport function onToast(listener) {\n  window.addEventListener(EVENT_NAME, listener)\n  return () => window.removeEventListener(EVENT_NAME, listener)\n}\n","import { ref } from 'vue'\nimport { emitToast } from '@/utils/toastBus'\n\nconst score = ref(null)\nconst rank = ref(null)\nconst totalPlayers = ref(null)\nconst bestScore = ref(null)\nconst loading = ref(false)\nconst error = ref(null)\nconst lastUpdated = ref(0)\nconst profileImage = ref(null)\nconst username = ref(null)\nconst gameUserName = ref(null)\n\nasync function fetchScore(force = false) {\n  const now = Date.now()\n  if (!force && score.value !== null && now - lastUpdated.value < 60_000) {\n    return\n  }\n  if (loading.value) return\n\n  loading.value = true\n  error.value = null\n  try {\n    const res = await fetch('/api/method/mathematics_leaders.api.game_points.get_points', {\n      method: 'GET',\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' },\n    })\n    const data = await res.json()\n    if (!res.ok || !data?.message?.ok) {\n      throw new Error(data?.message || 'Unable to load score')\n    }\n    const payload = data.message\n    score.value = Number(payload.points || 0)\n    rank.value = payload.rank || 1\n    totalPlayers.value = payload.players || 1\n    bestScore.value = Number(payload.best || payload.points || 0)\n    profileImage.value = payload.profile_image || null\n    username.value = payload.username || null\n    gameUserName.value = payload.game_user_name || null\n    lastUpdated.value = now\n  } catch (err) {\n    error.value = err instanceof Error ? err.message : String(err)\n    emitToast({ message: error.value, type: 'danger' })\n  } finally {\n    loading.value = false\n  }\n}\n\nexport function useGameScore() {\n  return {\n    score,\n    rank,\n    totalPlayers,\n    bestScore,\n    loading,\n    error,\n    lastUpdated,\n    profileImage,\n    username,\n    gameUserName,\n    refresh: fetchScore,\n  }\n}\n","<script setup>\nimport { computed, onMounted, onUnmounted, ref } from 'vue'\nimport { RefreshCw, TrendingUp, Award, Activity, Target } from 'lucide-vue-next'\nimport { useGameScore } from '@/composables/useGameScore'\n\nconst {\n  score,\n  rank,\n  totalPlayers,\n  bestScore,\n  loading,\n  error,\n  lastUpdated,\n  refresh,\n} = useGameScore()\n\nconst detectLang = () => {\n  const htmlLang = (document.documentElement.lang || '').toLowerCase()\n  if (htmlLang.startsWith('en')) return 'en'\n  const stored = (localStorage.getItem('ml_lang') || '').toLowerCase()\n  return stored.startsWith('en') ? 'en' : 'ar'\n}\nconst detectTheme = () => (localStorage.getItem('ml_theme') || 'light')\n\nconst langState = ref(detectLang())\nconst theme = ref(detectTheme())\n\nconst isRTL = computed(() => langState.value === 'ar')\nconst strings = computed(() => langState.value === 'ar' ? {\n  totalPoints: 'إجمالي النقاط',\n  progressLabel: 'التقدم نحو الرتبة التالية',\n  refresh: 'تحديث النقاط',\n  lastUpdated: 'آخر تحديث',\n  insightHeading: 'تحليلات سريعة',\n  scoreTrendTitle: 'منحنى الأداء',\n  scoreTrendCopy: 'يميل الأداء إلى التحسن خلال آخر المحاولات.',\n  percentRankTitle: 'موقعك بين اللاعبين',\n  topTierCopy: 'لقد بلغت أعلى رتبة متاحة! استمر في التألق.',\n  nextTierLabel: 'المتبقي للوصول للرتبة التالية',\n  recordTitle: 'أفضل نتيجة مسجلة',\n  sparkLabel: 'تحوّل النقاط (آخر الجلسات)',\n  metricsHeading: 'مؤشرات سريعة',\n  playersLabel: 'عدد اللاعبين',\n  rankLabel: 'ترتيبك',\n  recordLabel: 'رقمك القياسي',\n  minutesAgo: 'منذ دقائق',\n  justNow: 'الآن',\n} : {\n  totalPoints: 'Total points',\n  progressLabel: 'Progress to next tier',\n  refresh: 'Refresh score',\n  lastUpdated: 'Last updated',\n  insightHeading: 'Quick insights',\n  scoreTrendTitle: 'Performance trend',\n  scoreTrendCopy: 'Your recent attempts show an upward trend.',\n  percentRankTitle: 'Position among players',\n  topTierCopy: 'You already sit at the highest tier—keep shining!',\n  nextTierLabel: 'To reach the next tier',\n  recordTitle: 'Best recorded score',\n  sparkLabel: 'Score changes (recent sessions)',\n  metricsHeading: 'Key metrics',\n  playersLabel: 'Players',\n  rankLabel: 'Your rank',\n  recordLabel: 'Personal best',\n  minutesAgo: 'minutes ago',\n  justNow: 'just now',\n})\n\nconst tiers = [\n  { threshold: 0, title: { ar: 'مبتدئ الأرقام', en: 'Number Novice' } },\n  { threshold: 25, title: { ar: 'مستكشف الأنماط', en: 'Pattern Explorer' } },\n  { threshold: 75, title: { ar: 'مايسترو الرياضيات', en: 'Math Maestro' } },\n  { threshold: 150, title: { ar: 'أسطورة التحديات', en: 'Challenge Legend' } },\n]\n\nconst scoreValue = computed(() => Number(score.value || 0))\nconst bestValue = computed(() => Number(bestScore.value || 0))\n\nconst tierIndex = computed(() => {\n  let idx = 0\n  tiers.forEach((tier, i) => {\n    if (scoreValue.value >= tier.threshold) idx = i\n  })\n  return idx\n})\n\nconst currentTier = computed(() => tiers[tierIndex.value])\nconst nextTier = computed(() => tiers[tierIndex.value + 1] || null)\nconst tierLabel = computed(() => currentTier.value?.title?.[langState.value] || currentTier.value?.title?.en || '')\n\nconst progress = computed(() => {\n  if (!nextTier.value) return 1\n  const span = nextTier.value.threshold - currentTier.value.threshold\n  if (span <= 0) return 1\n  return Math.min(1, (scoreValue.value - currentTier.value.threshold) / span)\n})\n\nconst intl = new Intl.NumberFormat('en-US', { maximumFractionDigits: 0 })\n\nconst formattedScore = computed(() => intl.format(scoreValue.value))\nconst formattedBest = computed(() => intl.format(bestValue.value))\nconst formattedRank = computed(() => (rank.value != null ? `#${rank.value}` : '--'))\nconst totalPlayersLabel = computed(() => (totalPlayers.value != null ? intl.format(totalPlayers.value) : '--'))\n\nconst lastUpdatedLabel = computed(() => {\n  if (!lastUpdated.value) return '--'\n  const delta = Date.now() - lastUpdated.value\n  if (delta < 60_000) return strings.value.justNow\n  const minutes = Math.round(delta / 60_000)\n  return `${minutes} ${strings.value.minutesAgo}`\n})\n\nconst sparkSteps = 9\nconst trendPoints = computed(() => {\n  const peak = Math.max(scoreValue.value, bestValue.value, 1)\n  const baseline = Math.max(10, peak * 0.45)\n  const result = []\n  for (let i = 0; i < sparkSteps; i += 1) {\n    const ratio = sparkSteps === 1 ? 1 : i / (sparkSteps - 1)\n    const wave = Math.sin((scoreValue.value + i) * 0.35) * peak * 0.05\n    const val = Math.max(0, baseline + (peak - baseline) * ratio + wave)\n    result.push(Math.round(val))\n  }\n  result[result.length - 1] = Math.max(scoreValue.value, 0)\n  return result\n})\n\nconst sparklineGeometry = computed(() => {\n  const pts = trendPoints.value\n  if (!pts.length) return []\n  const width = 180\n  const height = 54\n  const max = Math.max(...pts)\n  const min = Math.min(...pts)\n  const range = max - min || 1\n  return pts.map((value, index) => {\n    const x = pts.length === 1 ? width : (width / (pts.length - 1)) * index\n    const y = height - ((value - min) / range) * height\n    return { x: Number(x.toFixed(2)), y: Number(y.toFixed(2)), value }\n  })\n})\n\nconst sparklinePath = computed(() => {\n  const pts = sparklineGeometry.value\n  if (!pts.length) return ''\n  return pts.map((pt, idx) => `${idx === 0 ? 'M' : 'L'}${pt.x},${pt.y}`).join(' ')\n})\n\nconst sparklineArea = computed(() => {\n  const pts = sparklineGeometry.value\n  if (!pts.length) return ''\n  const height = 54\n  const first = pts[0]\n  const last = pts[pts.length - 1]\n  const line = pts.map((pt, idx) => `${idx === 0 ? 'L' : 'L'}${pt.x},${pt.y}`).join(' ')\n  return `M${first.x},${height} ${line} L${last.x},${height} Z`\n})\n\nconst trendDelta = computed(() => {\n  const pts = trendPoints.value\n  if (pts.length < 2) return 0\n  return pts[pts.length - 1] - pts[0]\n})\n\nconst donutRadius = 58\nconst donutCircumference = 2 * Math.PI * donutRadius\nconst donutOffset = computed(() => donutCircumference * (1 - progress.value))\nconst progressPercent = computed(() => Math.round(progress.value * 100))\n\nconst percentile = computed(() => {\n  if (!rank.value || !totalPlayers.value) return null\n  const pct = Math.max(0, 100 - Math.round(((rank.value - 1) / totalPlayers.value) * 100))\n  return pct\n})\n\nconst iconLibrary = { trend: TrendingUp, award: Award, activity: Activity, target: Target }\n\nconst insightCards = computed(() => {\n  const cards = []\n  if (nextTier.value) {\n    const remaining = Math.max(0, nextTier.value.threshold - scoreValue.value)\n    cards.push({\n      icon: 'target',\n      title: strings.value.nextTierLabel,\n      body: langState.value === 'ar'\n        ? `تبقى ${intl.format(remaining)} نقطة للوصول إلى «${nextTier.value.title.ar}».`\n        : `${intl.format(remaining)} pts to unlock “${nextTier.value.title.en}”.`,\n    })\n  } else {\n    cards.push({\n      icon: 'target',\n      title: strings.value.nextTierLabel,\n      body: langState.value === 'ar' ? strings.value.topTierCopy : strings.value.topTierCopy,\n    })\n  }\n\n  cards.push({\n    icon: 'trend',\n    title: strings.value.scoreTrendTitle,\n    body: langState.value === 'ar'\n      ? `${strings.value.scoreTrendCopy} (+${intl.format(Math.max(0, trendDelta.value))}).`\n      : `${strings.value.scoreTrendCopy} (+${intl.format(Math.max(0, trendDelta.value))}).`,\n  })\n\n  if (percentile.value != null) {\n    cards.push({\n      icon: 'award',\n      title: strings.value.percentRankTitle,\n      body: langState.value === 'ar'\n        ? `أنت ضمن أفضل ${percentile.value}% من اللاعبين.`\n        : `You currently outperform ${percentile.value}% of players.`,\n    })\n  }\n\n  cards.push({\n    icon: 'activity',\n    title: strings.value.recordTitle,\n    body: langState.value === 'ar'\n      ? `أفضل نتيجة حققتها هي ${formattedBest.value} نقطة.`\n      : `Your personal best sits at ${formattedBest.value} pts.`,\n  })\n\n  return cards\n})\n\nconst metrics = computed(() => [\n  { label: strings.value.rankLabel, value: formattedRank.value },\n  { label: strings.value.playersLabel, value: totalPlayersLabel.value },\n  { label: strings.value.recordLabel, value: formattedBest.value },\n])\n\nfunction handleRefresh() {\n  refresh(true)\n}\n\nlet langObserver = null\nlet themeObserver = null\nlet storageHandler = null\n\nonMounted(() => {\n  refresh(true)\n\n  const updateLang = () => { langState.value = detectLang() }\n  const updateTheme = () => { theme.value = detectTheme() }\n\n  langObserver = new MutationObserver(updateLang)\n  langObserver.observe(document.documentElement, { attributes: true, attributeFilter: ['lang'] })\n\n  themeObserver = new MutationObserver(updateTheme)\n  themeObserver.observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] })\n\n  storageHandler = () => {\n    updateLang()\n    updateTheme()\n  }\n  window.addEventListener('storage', storageHandler)\n})\n\nonUnmounted(() => {\n  if (langObserver) langObserver.disconnect()\n  if (themeObserver) themeObserver.disconnect()\n  if (storageHandler) window.removeEventListener('storage', storageHandler)\n})\n</script>\n\n<template>\n  <div\n    class=\"scores-page\"\n    :dir=\"isRTL ? 'rtl' : 'ltr'\"\n    :data-theme=\"theme\"\n  >\n    <section class=\"overview\">\n      <article class=\"panel donut-panel\">\n        <header class=\"panel__header\">\n          <span class=\"tier-chip\">{{ tierLabel }}</span>\n          <button class=\"refresh\" data-ripple :disabled=\"loading\" @click=\"handleRefresh\">\n            <RefreshCw class=\"ic\" :class=\"{ spin: loading }\" />\n            {{ strings.refresh }}\n          </button>\n        </header>\n\n        <div class=\"donut\">\n          <svg viewBox=\"0 0 160 160\" aria-hidden=\"true\">\n            <defs>\n              <linearGradient id=\"donutGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n                <stop offset=\"0%\" stop-color=\"#c8a03b\" />\n                <stop offset=\"100%\" stop-color=\"#0f8a3e\" />\n              </linearGradient>\n            </defs>\n            <circle class=\"track\" cx=\"80\" cy=\"80\" :r=\"donutRadius\" />\n            <circle\n              class=\"progress\"\n              cx=\"80\"\n              cy=\"80\"\n              :r=\"donutRadius\"\n              :style=\"{ strokeDasharray: `${donutCircumference}px`, strokeDashoffset: `${donutOffset}px` }\"\n            />\n          </svg>\n          <div class=\"donut__label\">\n            <strong>{{ formattedScore }}</strong>\n            <span>{{ strings.totalPoints }}</span>\n          </div>\n        </div>\n\n        <footer class=\"panel__footer\">\n          <div class=\"progress-caption\">\n            <span>{{ strings.progressLabel }}</span>\n            <span>{{ progressPercent }}%</span>\n          </div>\n          <div class=\"timestamp\">{{ strings.lastUpdated }} · {{ lastUpdatedLabel }}</div>\n        </footer>\n      </article>\n\n      <article class=\"panel spark-panel\">\n        <header class=\"panel__header\">\n          <span class=\"panel__title\">{{ strings.sparkLabel }}</span>\n        </header>\n        <div class=\"spark\">\n          <svg viewBox=\"0 0 180 72\" aria-hidden=\"true\">\n            <defs>\n              <linearGradient id=\"sparkFill\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n                <stop offset=\"0%\" stop-color=\"rgba(15,138,62,0.35)\" />\n                <stop offset=\"100%\" stop-color=\"rgba(200,160,59,0.05)\" />\n              </linearGradient>\n            </defs>\n            <path v-if=\"sparklineArea\" class=\"spark__area\" :d=\"sparklineArea\" fill=\"url(#sparkFill)\" />\n            <path v-if=\"sparklinePath\" class=\"spark__path\" :d=\"sparklinePath\" />\n          </svg>\n          <div class=\"spark__meta\">\n            <span class=\"spark__delta\" :class=\"{ up: trendDelta >= 0 }\">\n              {{ trendDelta >= 0 ? '+' : '' }}{{ intl.format(trendDelta) }}\n            </span>\n            <span class=\"spark__hint\">{{ strings.scoreTrendCopy }}</span>\n          </div>\n        </div>\n\n        <div class=\"metrics\">\n          <div v-for=\"metric in metrics\" :key=\"metric.label\" class=\"metric\">\n            <span class=\"metric__label\">{{ metric.label }}</span>\n            <strong class=\"metric__value\">{{ metric.value }}</strong>\n          </div>\n        </div>\n      </article>\n    </section>\n\n    <section class=\"insights\">\n      <h3>{{ strings.insightHeading }}</h3>\n      <div class=\"insights__grid\">\n        <article\n          v-for=\"(card, index) in insightCards\"\n          :key=\"index\"\n          class=\"insight-card\"\n        >\n          <div class=\"insight-card__icon\">\n            <component :is=\"iconLibrary[card.icon]\" class=\"glyph\" />\n          </div>\n          <div class=\"insight-card__body\">\n            <h4>{{ card.title }}</h4>\n            <p>{{ card.body }}</p>\n          </div>\n        </article>\n      </div>\n      <p v-if=\"error\" class=\"error\">{{ error }}</p>\n    </section>\n  </div>\n</template>\n\n<style scoped>\n.scores-page{\n  display:flex;\n  flex-direction:column;\n  gap:28px;\n  width:min(1100px,100%);\n  margin:0 auto;\n  padding:24px 20px 48px;\n  color:var(--color-neutral-900);\n}\n.scores-page[data-theme=\"dark\"]{\n  color:var(--color-neutral-900);\n}\n\n.overview{\n  display:grid;\n  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));\n  gap:20px;\n}\n\n.panel{\n  position:relative;\n  display:flex;\n  flex-direction:column;\n  gap:18px;\n  padding:22px 24px;\n  border-radius:26px;\n  background:linear-gradient(135deg,rgba(15,138,62,0.08),rgba(200,160,59,0.12));\n  border:1px solid rgba(200,160,59,0.25);\n  box-shadow:0 28px 52px rgba(15,138,62,0.18);\n  overflow:hidden;\n}\n[data-theme=\"dark\"] .panel{\n  background:linear-gradient(135deg,rgba(15,138,62,0.32),rgba(21,32,43,0.82));\n  border-color:rgba(200,160,59,0.32);\n  box-shadow:0 30px 60px rgba(0,0,0,0.55);\n}\n\n.panel::after{\n  content:\"\";\n  position:absolute;\n  inset:-40% -20% auto -20%;\n  height:70%;\n  background:radial-gradient(circle at top,rgba(255,255,255,0.48),transparent 60%);\n  opacity:.4;\n  pointer-events:none;\n}\n\n.panel__header{\n  display:flex;\n  align-items:center;\n  justify-content:space-between;\n  gap:12px;\n  position:relative;\n  z-index:1;\n}\n\n.panel__title{font-weight:700;font-size:1.08rem}\n\n.panel__footer{\n  display:flex;\n  flex-direction:column;\n  gap:10px;\n  position:relative;\n  z-index:1;\n}\n\n.tier-chip{\n  display:inline-flex;\n  align-items:center;\n  gap:6px;\n  padding:6px 16px;\n  border-radius:999px;\n  background:rgba(200,160,59,0.18);\n  color:#0f8a3e;\n  font-weight:700;\n  letter-spacing:.08em;\n  text-transform:uppercase;\n}\n[data-theme=\"dark\"] .tier-chip{\n  background:rgba(200,160,59,0.36);\n  color:#f4d67c;\n}\n\n.refresh{\n  display:inline-flex;\n  align-items:center;\n  gap:6px;\n  border-radius:999px;\n  border:1px solid rgba(200,160,59,0.4);\n  background:rgba(255,255,255,0.2);\n  color:#0f8a3e;\n  padding:8px 14px;\n  font-weight:600;\n  cursor:pointer;\n  transition:transform .2s ease, box-shadow .2s ease;\n}\n.refresh:disabled{opacity:.6;cursor:wait}\n.refresh:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 14px 28px rgba(15,138,62,0.18)}\n[data-theme=\"dark\"] .refresh{background:rgba(21,32,43,0.6);color:#f4d67c;border-color:rgba(200,160,59,0.45)}\n\n.ic{width:18px;height:18px}\n.spin{animation:spin 1.1s linear infinite}\n\n.donut{\n  position:relative;\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  width:100%;\n  min-height:200px;\n  z-index:1;\n}\n.donut svg{width:200px;height:200px;transform:rotate(-90deg)}\n.track{fill:none;stroke:rgba(200,160,59,0.18);stroke-width:14;stroke-linecap:round}\n.progress{fill:none;stroke:url(#donutGradient);stroke-width:14;stroke-linecap:round;transition:stroke-dashoffset .9s cubic-bezier(.22,1,.36,1)}\n\n.donut__label{\n  position:absolute;\n  display:flex;\n  flex-direction:column;\n  align-items:center;\n  justify-content:center;\n  gap:6px;\n  color:#0f8a3e;\n}\n.donut__label strong{font-size:2.8rem;line-height:1;font-weight:800;text-shadow:0 12px 26px rgba(15,138,62,0.28)}\n.donut__label span{font-weight:600;letter-spacing:.04em}\n[data-theme=\"dark\"] .donut__label{color:#f4d67c;text-shadow:0 14px 32px rgba(0,0,0,0.55)}\n\n.progress-caption{\n  display:flex;\n  justify-content:space-between;\n  font-weight:600;\n  color:rgba(17,24,39,0.75);\n}\n[data-theme=\"dark\"] .progress-caption{color:rgba(255,255,255,0.72)}\n.timestamp{font-size:.82rem;opacity:.7}\n\n.spark{display:flex;flex-direction:column;gap:10px;position:relative;z-index:1}\n.spark svg{width:100%;max-width:220px}\n.spark__area{stroke:none;opacity:.9}\n.spark__path{fill:none;stroke:#0f8a3e;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;filter:drop-shadow(0 10px 16px rgba(15,138,62,0.25))}\n.spark__meta{display:flex;align-items:center;gap:10px;font-size:.9rem}\n.spark__delta{font-weight:700;color:#0f8a3e}\n.spark__delta.up::before{content:'↗';margin-inline-end:4px}\n[data-theme=\"dark\"] .spark__delta{color:#f4d67c}\n.spark__hint{opacity:.7}\n\n.metrics{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px}\n.metric{position:relative;padding:14px 16px;border-radius:18px;background:rgba(255,255,255,0.78);border:1px solid rgba(200,160,59,0.25);box-shadow:0 16px 26px rgba(15,138,62,0.12)}\n.metric__label{display:block;font-size:.85rem;opacity:.75;font-weight:600}\n.metric__value{display:block;font-size:1.6rem;font-weight:800;color:#0f8a3e}\n[data-theme=\"dark\"] .metric{background:rgba(21,32,43,0.85);border-color:rgba(200,160,59,0.3);box-shadow:0 20px 42px rgba(0,0,0,0.55)}\n[data-theme=\"dark\"] .metric__value{color:#f4d67c}\n\n.insights{display:flex;flex-direction:column;gap:18px}\n.insights h3{margin:0;font-size:1.3rem;font-weight:800}\n.insights__grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}\n\n.insight-card{\n  position:relative;\n  display:flex;\n  gap:14px;\n  padding:18px 20px;\n  border-radius:22px;\n  background:rgba(255,255,255,0.92);\n  border:1px solid rgba(200,160,59,0.25);\n  box-shadow:0 18px 36px rgba(15,138,62,0.16);\n  overflow:hidden;\n}\n.insight-card::after{\n  content:\"\";\n  position:absolute;\n  inset:auto -30% -50% 0;\n  height:140px;\n  background:linear-gradient(135deg,rgba(200,160,59,0.18),transparent);\n  opacity:.4;\n}\n[data-theme=\"dark\"] .insight-card{background:rgba(21,32,43,0.88);border-color:rgba(200,160,59,0.28);box-shadow:0 26px 48px rgba(0,0,0,0.6)}\n\n.insight-card__icon{width:40px;height:40px;border-radius:14px;background:linear-gradient(135deg,#c8a03b,#0f8a3e);display:flex;align-items:center;justify-content:center;flex-shrink:0;animation:float 3.2s ease-in-out infinite}\n[data-theme=\"dark\"] .insight-card__icon{background:linear-gradient(135deg,#f4d67c,#0f8a3e)}\n.glyph{width:22px;height:22px;color:#fff}\n\n.insight-card__body{position:relative;z-index:1;display:flex;flex-direction:column;gap:6px}\n.insight-card__body h4{margin:0;font-size:1.05rem;font-weight:700}\n.insight-card__body p{margin:0;opacity:.78;line-height:1.45}\n[data-theme=\"dark\"] .insight-card__body p{color:rgba(255,255,255,0.78)}\n\n.error{color:#dc2626;font-weight:600}\n\n@keyframes spin{to{transform:rotate(360deg)}}\n@keyframes float{0%,100%{transform:translateY(0);}50%{transform:translateY(-6px);}}\n\n@media (max-width: 720px){\n  .panel{padding:18px}\n  .metrics{grid-template-columns:repeat(auto-fit,minmax(140px,1fr))}\n  .insight-card{padding:16px}\n  .scores-page{padding:20px 16px 36px}\n}\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, onUnmounted } from 'vue'\nimport { Image as ImageIcon, Upload, Check, KeyRound, RefreshCw, ShieldCheck, Sparkles, Loader2 } from 'lucide-vue-next'\nimport { useGameScore } from '@/composables/useGameScore'\nimport { emitToast } from '@/utils/toastBus'\n\nconst store = useGameScore()\n\nconst detectLang = () => {\n  const doc = (document.documentElement.lang || '').toLowerCase()\n  if (doc.startsWith('en')) return 'en'\n  const stored = (localStorage.getItem('ml_lang') || '').toLowerCase()\n  return stored.startsWith('en') ? 'en' : 'ar'\n}\nconst detectTheme = () => localStorage.getItem('ml_theme') || 'light'\n\nconst lang = ref(detectLang())\nconst theme = ref(detectTheme())\nconst isRTL = computed(() => lang.value === 'ar')\n\nconst strings = computed(() => lang.value === 'ar'\n  ? {\n      title: 'إعدادات الحساب',\n      avatarTitle: 'صورة البروفايل',\n      avatarHint: 'ارفع صورة مربعة بدقة جيدة (حتى 2 م.ب).',\n      chooseFile: 'اختر صورة',\n      cancel: 'إزالة التحديد',\n      upload: 'حفظ الصورة',\n      loading: 'جارٍ الرفع...',\n      changeSuccess: 'تم تحديث الصورة بنجاح.',\n      changeError: 'تعذر تحديث الصورة، حاول لاحقًا.',\n      passwordTitle: 'تغيير كلمة المرور',\n      formHint: 'استخدم كلمة مرور قوية تجمع بين الأحرف والأرقام والرموز.',\n      currentPassword: 'كلمة المرور الحالية',\n      newPassword: 'كلمة المرور الجديدة',\n      confirmPassword: 'تأكيد كلمة المرور',\n      verify: 'تحقّق',\n      verified: 'تم التحقق من كلمة المرور.',\n      verifyError: 'تحقق من كلمة المرور الحالية أولًا.',\n      savePassword: 'حفظ كلمة المرور',\n      reset: 'إعادة التعيين',\n      passwordSuccess: 'تم تغيير كلمة المرور بنجاح.',\n      passwordError: 'تعذر تغيير كلمة المرور، تحقق من البيانات.',\n      selectImageFirst: 'اختر صورة أولًا.',\n      notImage: 'الملف ليس صورة.',\n      tooLarge: 'حجم الصورة يتجاوز 2 م.ب.',\n      missingPlayer: 'تعذر إيجاد ملف اللاعب.',\n    }\n  : {\n      title: 'Account settings',\n      avatarTitle: 'Profile picture',\n      avatarHint: 'Upload a crisp square image (up to 2 MB).',\n      chooseFile: 'Choose image',\n      cancel: 'Remove selection',\n      upload: 'Save avatar',\n      loading: 'Uploading...',\n      changeSuccess: 'Profile picture updated successfully.',\n      changeError: 'We could not update your picture. Try again later.',\n      passwordTitle: 'Change password',\n      formHint: 'Use a strong password that mixes letters, numbers, and symbols.',\n      currentPassword: 'Current password',\n      newPassword: 'New password',\n      confirmPassword: 'Confirm password',\n      verify: 'Verify',\n      verified: 'Password verified.',\n      verifyError: 'Verify your current password first.',\n      savePassword: 'Save password',\n      reset: 'Reset form',\n      passwordSuccess: 'Password updated successfully.',\n      passwordError: 'Unable to change password. Check your entries.',\n      selectImageFirst: 'Select an image first.',\n      notImage: 'The selected file is not an image.',\n      tooLarge: 'Image size exceeds 2 MB.',\n      missingPlayer: 'Unable to identify player record.',\n    })\n\nconst avatarFile = ref(null)\nconst avatarPreview = ref('')\nconst avatarStatus = reactive({ loading: false, message: '', error: '' })\n\nconst passwordForm = reactive({ current: '', next: '', confirm: '' })\nconst verifyState = reactive({ loading: false, verified: false, message: '', error: '' })\nconst passwordStatus = reactive({ loading: false, message: '', error: '' })\n\nconst displayName = computed(() => store.username.value || 'Player')\nconst fallbackInitial = computed(() => displayName.value.trim().charAt(0).toUpperCase() || 'P')\nconst avatarUrl = computed(() => avatarPreview.value || store.profileImage.value || null)\n\nfunction handleFileChange(event) {\n  avatarStatus.message = ''\n  avatarStatus.error = ''\n  const file = event.target.files?.[0]\n  if (!file) {\n    clearSelection()\n    return\n  }\n  if (!file.type.startsWith('image/')) {\n    avatarStatus.error = strings.value.notImage\n    return\n  }\n  if (file.size > 2 * 1024 * 1024) {\n    avatarStatus.error = strings.value.tooLarge\n    return\n  }\n  if (avatarPreview.value) URL.revokeObjectURL(avatarPreview.value)\n  avatarFile.value = file\n  avatarPreview.value = URL.createObjectURL(file)\n}\n\nfunction clearSelection() {\n  if (avatarPreview.value) URL.revokeObjectURL(avatarPreview.value)\n  avatarFile.value = null\n  avatarPreview.value = ''\n  avatarStatus.message = ''\n  avatarStatus.error = ''\n}\n\nasync function uploadAvatar() {\n  if (!avatarFile.value) {\n    avatarStatus.error = strings.value.selectImageFirst\n    return\n  }\n  if (!store.gameUserName.value) await store.refresh(true)\n  const docname = store.gameUserName.value\n  if (!docname) {\n    avatarStatus.error = strings.value.missingPlayer\n    return\n  }\n  avatarStatus.loading = true\n  avatarStatus.error = ''\n  avatarStatus.message = ''\n  try {\n    const fd = new FormData()\n    fd.append('file', avatarFile.value)\n    fd.append('filename', avatarFile.value.name)\n    fd.append('is_private', '0')\n    fd.append('attached_to_doctype', 'Game Users')\n    fd.append('attached_to_name', docname)\n\n    const uploadRes = await fetch('/api/method/upload_file', {\n      method: 'POST',\n      credentials: 'include',\n      body: fd,\n    })\n    const uploadData = await uploadRes.json()\n    if (!uploadRes.ok || !uploadData?.message?.file_url) {\n      throw new Error(uploadData?._server_messages || uploadData?.message || 'Upload failed')\n    }\n    const fileUrl = uploadData.message.file_url\n    const saveRes = await fetch('/api/method/mathematics_leaders.api.profile.set_profile_image', {\n      method: 'POST',\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ file_url: fileUrl }),\n    })\n    const saveData = await saveRes.json()\n    if (!saveRes.ok || !saveData?.message?.ok) {\n      throw new Error(saveData?.message || 'Unable to store profile image')\n    }\n    avatarStatus.message = strings.value.changeSuccess\n    emitToast({ message: strings.value.changeSuccess, type: 'success' })\n    await store.refresh(true)\n    clearSelection()\n  } catch (err) {\n    avatarStatus.error = err instanceof Error ? err.message : strings.value.changeError\n    emitToast({ message: avatarStatus.error, type: 'danger' })\n  } finally {\n    avatarStatus.loading = false\n  }\n}\n\nasync function verifyCurrent() {\n  verifyState.loading = true\n  verifyState.error = ''\n  verifyState.message = ''\n  try {\n    if (!passwordForm.current) {\n      throw new Error(strings.value.verifyError)\n    }\n    const res = await fetch('/api/method/mathematics_leaders.api.profile.verify_current_password', {\n      method: 'POST',\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ current_password: passwordForm.current }),\n    })\n    const data = await res.json()\n    if (!res.ok || !data?.message?.ok) {\n      throw new Error(data?.message || strings.value.verifyError)\n    }\n    verifyState.verified = true\n    verifyState.message = strings.value.verified\n    passwordStatus.error = ''\n  } catch (err) {\n    verifyState.verified = false\n    verifyState.error = err instanceof Error ? err.message : strings.value.verifyError\n  } finally {\n    verifyState.loading = false\n  }\n}\n\nasync function updatePassword() {\n  if (!verifyState.verified) {\n    verifyState.error = strings.value.verifyError\n    return\n  }\n  passwordStatus.loading = true\n  passwordStatus.message = ''\n  passwordStatus.error = ''\n  const { current, next, confirm } = passwordForm\n  try {\n    if (!current || !next || !confirm) {\n      throw new Error(lang.value === 'ar' ? 'املأ كل الحقول.' : 'Fill in every field.')\n    }\n    if (next !== confirm) {\n      throw new Error(lang.value === 'ar' ? 'كلمتا المرور غير متطابقتين.' : 'Passwords do not match.')\n    }\n    if (next.length < 8) {\n      throw new Error(lang.value === 'ar' ? 'كلمة المرور يجب أن تكون 8 أحرف على الأقل.' : 'Password must be at least 8 characters.')\n    }\n    const res = await fetch('/api/method/mathematics_leaders.api.profile.change_password', {\n      method: 'POST',\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ current_password: current, new_password: next }),\n    })\n    const data = await res.json()\n    if (!res.ok || !data?.message?.ok) {\n      throw new Error(data?.message || strings.value.passwordError)\n    }\n    passwordStatus.message = strings.value.passwordSuccess\n    emitToast({ message: strings.value.passwordSuccess, type: 'success' })\n    passwordForm.current = ''\n    passwordForm.next = ''\n    passwordForm.confirm = ''\n    verifyState.verified = false\n    verifyState.message = ''\n  } catch (err) {\n    passwordStatus.error = err instanceof Error ? err.message : strings.value.passwordError\n    emitToast({ message: passwordStatus.error, type: 'danger' })\n  } finally {\n    passwordStatus.loading = false\n  }\n}\n\nfunction resetPasswordForm() {\n  passwordForm.current = ''\n  passwordForm.next = ''\n  passwordForm.confirm = ''\n  verifyState.loading = false\n  verifyState.verified = false\n  verifyState.message = ''\n  verifyState.error = ''\n  passwordStatus.loading = false\n  passwordStatus.message = ''\n  passwordStatus.error = ''\n}\n\nlet langObserver = null\nlet themeObserver = null\nlet storageHandler = null\n\nonMounted(() => {\n  if (store.score.value == null) store.refresh(true)\n\n  const updateLang = () => { lang.value = detectLang() }\n  const updateTheme = () => { theme.value = detectTheme() }\n\n  langObserver = new MutationObserver(updateLang)\n  langObserver.observe(document.documentElement, { attributes: true, attributeFilter: ['lang'] })\n\n  themeObserver = new MutationObserver(updateTheme)\n  themeObserver.observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] })\n\n  storageHandler = () => {\n    updateLang()\n    updateTheme()\n  }\n  window.addEventListener('storage', storageHandler)\n})\n\nonUnmounted(() => {\n  if (avatarPreview.value) URL.revokeObjectURL(avatarPreview.value)\n  if (langObserver) langObserver.disconnect()\n  if (themeObserver) themeObserver.disconnect()\n  if (storageHandler) window.removeEventListener('storage', storageHandler)\n})\n</script>\n\n<template>\n  <div class=\"settings\" :dir=\"isRTL ? 'rtl' : 'ltr'\" :data-theme=\"theme\">\n    <header class=\"settings__header\">\n      <Sparkles class=\"heading-icon\" />\n      <h1 class=\"page-title\">{{ strings.title }}</h1>\n    </header>\n\n    <div class=\"settings__grid\">\n      <section class=\"settings-card profile-card\">\n        <header class=\"card-header\">\n          <div class=\"title\">\n            <ImageIcon class=\"icon\" />\n            <div>\n              <h2>{{ strings.avatarTitle }}</h2>\n              <p>{{ strings.avatarHint }}</p>\n            </div>\n          </div>\n        </header>\n        <div class=\"card-body\">\n          <div class=\"avatar-stack\">\n            <div class=\"avatar-orbit\">\n              <div class=\"avatar-ring\">\n                <img v-if=\"avatarUrl\" :src=\"avatarUrl\" alt=\"avatar preview\" />\n                <span v-else>{{ fallbackInitial }}</span>\n              </div>\n            </div>\n            <span class=\"display-name\">{{ displayName }}</span>\n          </div>\n\n          <div class=\"controls\">\n            <label class=\"btn ghost\" data-ripple>\n              <Upload class=\"icon\" />\n              <span>{{ strings.chooseFile }}</span>\n              <input type=\"file\" accept=\"image/*\" @change=\"handleFileChange\" hidden />\n            </label>\n            <button v-if=\"avatarFile\" type=\"button\" class=\"btn subtle\" data-ripple @click=\"clearSelection\">{{ strings.cancel }}</button>\n            <button type=\"button\" class=\"btn solid\" data-ripple :disabled=\"avatarStatus.loading\" @click=\"uploadAvatar\">\n              <Loader2 v-if=\"avatarStatus.loading\" class=\"icon spinner\" />\n              <ImageIcon v-else class=\"icon\" />\n              <span>{{ avatarStatus.loading ? strings.loading : strings.upload }}</span>\n            </button>\n          </div>\n\n          <transition name=\"fade-slide\" mode=\"out-in\">\n            <p v-if=\"avatarStatus.message\" key=\"avatar-ok\" class=\"status success\">\n              <ShieldCheck class=\"icon\" />\n              <span>{{ avatarStatus.message }}</span>\n            </p>\n          </transition>\n          <transition name=\"fade-slide\" mode=\"out-in\">\n            <p v-if=\"avatarStatus.error\" key=\"avatar-err\" class=\"status error\">{{ avatarStatus.error }}</p>\n          </transition>\n        </div>\n      </section>\n\n      <section class=\"settings-card password-card\">\n        <header class=\"card-header\">\n          <div class=\"title\">\n            <KeyRound class=\"icon\" />\n            <div>\n              <h2>{{ strings.passwordTitle }}</h2>\n              <p>{{ strings.formHint }}</p>\n            </div>\n          </div>\n        </header>\n\n        <form class=\"card-body password-form\" @submit.prevent=\"updatePassword\">\n          <div class=\"verify-block\">\n            <label>\n              <span>{{ strings.currentPassword }}</span>\n              <input type=\"password\" v-model=\"passwordForm.current\" autocomplete=\"current-password\" />\n            </label>\n            <button type=\"button\" class=\"btn solid\" data-ripple :disabled=\"verifyState.loading\" @click=\"verifyCurrent\">\n              <Loader2 v-if=\"verifyState.loading\" class=\"icon spinner\" />\n              <Check v-else class=\"icon\" />\n              <span>{{ verifyState.loading ? strings.loading : strings.verify }}</span>\n            </button>\n            <transition name=\"fade-slide\" mode=\"out-in\">\n              <p v-if=\"verifyState.message\" key=\"verify-ok\" class=\"status success\">\n                <ShieldCheck class=\"icon\" />\n                <span>{{ verifyState.message }}</span>\n              </p>\n            </transition>\n            <transition name=\"fade-slide\" mode=\"out-in\">\n              <p v-if=\"verifyState.error\" key=\"verify-err\" class=\"status error\">{{ verifyState.error }}</p>\n            </transition>\n          </div>\n\n          <transition name=\"panel-grow\">\n            <div v-if=\"verifyState.verified\" class=\"password-fields\">\n              <label>\n                <span>{{ strings.newPassword }}</span>\n                <input type=\"password\" v-model=\"passwordForm.next\" autocomplete=\"new-password\" required />\n              </label>\n              <label>\n                <span>{{ strings.confirmPassword }}</span>\n                <input type=\"password\" v-model=\"passwordForm.confirm\" autocomplete=\"new-password\" required />\n              </label>\n              <div class=\"form-actions\">\n                <button class=\"btn success\" data-ripple type=\"submit\" :disabled=\"passwordStatus.loading\">\n                  <Loader2 v-if=\"passwordStatus.loading\" class=\"icon spinner\" />\n                  <Check v-else class=\"icon\" />\n                  <span>{{ passwordStatus.loading ? strings.loading : strings.savePassword }}</span>\n                </button>\n                <button type=\"button\" class=\"btn subtle\" data-ripple @click=\"resetPasswordForm\">\n                  <RefreshCw class=\"icon\" />\n                  <span>{{ strings.reset }}</span>\n                </button>\n              </div>\n              <transition name=\"fade-slide\" mode=\"out-in\">\n                <p v-if=\"passwordStatus.message\" key=\"pass-ok\" class=\"status success\">\n                  <ShieldCheck class=\"icon\" />\n                  <span>{{ passwordStatus.message }}</span>\n                </p>\n              </transition>\n              <transition name=\"fade-slide\" mode=\"out-in\">\n                <p v-if=\"passwordStatus.error\" key=\"pass-err\" class=\"status error\">{{ passwordStatus.error }}</p>\n              </transition>\n            </div>\n          </transition>\n        </form>\n      </section>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.settings{\n  display:flex;\n  flex-direction:column;\n  gap:28px;\n  width:min(1100px,100%);\n  margin:0 auto;\n  padding:24px 20px 48px;\n}\n.settings__header{display:flex;align-items:center;gap:12px}\n.heading-icon{width:24px;height:24px;color:#c8a03b;filter:drop-shadow(0 6px 12px rgba(200,160,59,0.35))}\n.page-title{margin:0;font-size:2rem;font-weight:800}\n\n.settings__grid{\n  display:grid;\n  gap:24px;\n  grid-template-columns:repeat(auto-fit,minmax(320px,1fr));\n}\n\n.settings-card{\n  position:relative;\n  display:flex;\n  flex-direction:column;\n  gap:18px;\n  padding:24px 26px;\n  border-radius:30px;\n  background:linear-gradient(140deg,rgba(15,138,62,0.1),rgba(200,160,59,0.14));\n  border:1px solid rgba(200,160,59,0.22);\n  box-shadow:0 30px 60px rgba(15,138,62,0.18);\n  overflow:hidden;\n}\n.settings-card::after{\n  content:\"\";\n  position:absolute;\n  inset:auto -30% -40% 0;\n  height:160px;\n  background:linear-gradient(140deg,rgba(200,160,59,0.25),transparent);\n  opacity:.4;\n}\n[data-theme=\"dark\"] .settings-card{\n  background:linear-gradient(140deg,rgba(15,138,62,0.28),rgba(21,32,43,0.82));\n  border-color:rgba(200,160,59,0.32);\n  box-shadow:0 32px 70px rgba(0,0,0,0.55);\n}\n\n.card-header{position:relative;z-index:1;display:flex;flex-direction:column;gap:12px}\n.card-header .title{display:flex;align-items:flex-start;gap:14px}\n.card-header .icon{width:28px;height:28px;color:#0f8a3e}\n.card-header h2{margin:0;font-size:1.4rem;font-weight:700}\n.card-header p{margin:4px 0 0;color:rgba(17,24,39,0.65)}\n[data-theme=\"dark\"] .card-header .icon{color:#f4d67c}\n[data-theme=\"dark\"] .card-header p{color:rgba(255,255,255,0.65)}\n\n.card-body{position:relative;z-index:1;display:flex;flex-direction:column;gap:20px}\n\n.avatar-stack{display:flex;align-items:center;gap:18px}\n.avatar-orbit{position:relative;width:120px;height:120px;display:flex;align-items:center;justify-content:center}\n.avatar-orbit::after{\n  content:\"\";\n  position:absolute;\n  inset:-6px;\n  border-radius:50%;\n  background:radial-gradient(circle,rgba(200,160,59,0.4),transparent 65%);\n  filter:blur(12px);\n  opacity:.65;\n}\n.avatar-ring{\n  position:relative;\n  width:104px;\n  height:104px;\n  border-radius:50%;\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  background:linear-gradient(135deg,rgba(255,255,255,0.9),rgba(248,238,212,0.9));\n  border:3px solid rgba(200,160,59,0.55);\n  box-shadow:0 18px 36px rgba(15,138,62,0.22);\n  overflow:hidden;\n  font-size:2.8rem;\n  font-weight:800;\n  color:#0f8a3e;\n}\n.avatar-ring img{width:100%;height:100%;object-fit:cover}\n[data-theme=\"dark\"] .avatar-ring{background:linear-gradient(135deg,rgba(27,32,38,0.95),rgba(18,21,24,0.92));color:#f4d67c}\n\n.display-name{font-size:1.3rem;font-weight:700}\n\n.controls{display:flex;gap:12px;flex-wrap:wrap}\n.btn{\n  display:inline-flex;\n  align-items:center;\n  gap:8px;\n  padding:10px 16px;\n  border-radius:14px;\n  font-weight:600;\n  cursor:pointer;\n  border:1px solid transparent;\n  transition:transform .2s ease, box-shadow .2s ease, background .2s ease;\n}\n.btn .icon{width:18px;height:18px}\n.btn .spinner{animation:spin .9s linear infinite}\n.btn:disabled{opacity:.6;cursor:not-allowed}\n.btn:hover:not(:disabled){transform:translateY(-2px)}\n\n.btn.ghost{background:rgba(15,138,62,0.12);border-color:rgba(15,138,62,0.18);color:#0f8a3e}\n.btn.ghost:hover{box-shadow:0 14px 28px rgba(15,138,62,0.18)}\n.btn.solid{background:linear-gradient(135deg,#c8a03b,#0f8a3e);color:#fff;box-shadow:0 16px 36px rgba(15,138,62,0.22)}\n.btn.solid:hover{box-shadow:0 22px 44px rgba(15,138,62,0.28)}\n.btn.subtle{background:rgba(255,255,255,0.55);border-color:rgba(200,160,59,0.28);color:#7a5a13}\n.btn.success{background:linear-gradient(135deg,#22c55e,#0f8a3e);color:#fff;border-color:rgba(34,197,94,0.4);box-shadow:0 16px 34px rgba(34,197,94,0.25)}\n[data-theme=\"dark\"] .btn.subtle{background:rgba(21,32,43,0.7);color:#f4d67c}\n[data-theme=\"dark\"] .btn.ghost{background:rgba(200,160,59,0.22);color:#f4d67c}\n\n.status{display:flex;align-items:center;gap:8px;font-weight:600}\n.status.success{color:#0f8a3e}\n.status.error{color:#dc2626}\n[data-theme=\"dark\"] .status.success{color:#f4d67c}\n\n.password-form{display:flex;flex-direction:column;gap:18px}\n.verify-block{display:flex;flex-direction:column;gap:12px;background:rgba(255,255,255,0.38);padding:16px 18px;border-radius:20px;border:1px solid rgba(200,160,59,0.18)}\n.verify-block label{display:flex;flex-direction:column;gap:6px;font-weight:600}\n.verify-block input{border-radius:12px;border:1px solid rgba(17,24,39,0.18);padding:10px 12px;font-size:1rem}\n.verify-block input:focus{outline:none;border-color:#0f8a3e;box-shadow:0 0 0 3px rgba(15,138,62,0.18)}\n[data-theme=\"dark\"] .verify-block{background:rgba(21,32,43,0.72);border-color:rgba(200,160,59,0.28)}\n[data-theme=\"dark\"] .verify-block input{background:rgba(12,18,20,0.92);color:#f4f4f4;border-color:rgba(200,160,59,0.25)}\n\n.password-fields{display:flex;flex-direction:column;gap:16px;padding:8px 0}\n.password-fields label{display:flex;flex-direction:column;gap:6px;font-weight:600}\n.password-fields input{border-radius:12px;border:1px solid rgba(17,24,39,0.18);padding:10px 12px;font-size:1rem}\n.password-fields input:focus{outline:none;border-color:#0f8a3e;box-shadow:0 0 0 3px rgba(15,138,62,0.18)}\n\n.form-actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:4px}\n\n.fade-slide-enter-active,.fade-slide-leave-active{transition:opacity .25s ease, transform .25s ease}\n.fade-slide-enter-from,.fade-slide-leave-to{opacity:0;transform:translateY(6px)}\n\n.panel-grow-enter-active,.panel-grow-leave-active{transition:opacity .28s ease, transform .28s ease}\n.panel-grow-enter-from,.panel-grow-leave-to{opacity:0;transform:scale(.95)}\n\n@keyframes spin{to{transform:rotate(360deg)}}\n\n@media (max-width: 720px){\n  .settings{padding:20px 16px 36px}\n  .settings-card{padding:20px}\n  .avatar-stack{flex-direction:column;align-items:flex-start}\n  .avatar-orbit{width:108px;height:108px}\n  .avatar-ring{width:92px;height:92px}\n}\n</style>\n","<script setup>\nimport { ref, computed, reactive, onMounted, onUnmounted, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport {\n  Target, Settings, LogOut, ChevronDown, Sun, Moon,\n  Hand, ChevronLeft, Menu, Crown, Loader2\n} from 'lucide-vue-next'\n\nimport Challenge1 from '@/pages/challenges/challenge_1.vue'\nimport Challenge2 from '@/pages/challenges/challenge_2.vue'\nimport Challenge3 from '@/pages/challenges/challenge_3.vue'\nimport Challenge4 from '@/pages/challenges/challenge_4.vue'\nimport Challenge5 from '@/pages/challenges/challenge_5.vue'\nimport Challenge6 from '@/pages/challenges/challenge_6.vue'\nimport Challenge7 from '@/pages/challenges/challenge_7.vue'\nimport challenge_level_two_1 from '@/pages/challenges/challenge_level_two_1.vue'\nimport challenge_level_two_2 from '@/pages/challenges/challenge_level_two_2.vue'\nimport challenge_level_two_3 from '@/pages/challenges/challenge_level_two_3.vue'\nimport challenge_level_two_4 from '@/pages/challenges/challenge_level_two_4.vue'\nimport challenge_level_two_5 from '@/pages/challenges/challenge_level_two_5.vue'\nimport challenge_level_two_6 from '@/pages/challenges/challenge_level_two_6.vue'\nimport challenge_level_three_1 from '@/pages/challenges/challenge_level_three_1.vue'\nimport challenge_level_three_2 from '@/pages/challenges/challenge_level_three_2.vue'\nimport challenge_level_three_3 from '@/pages/challenges/challenge_level_three_3.vue'\nimport challenge_level_three_4 from '@/pages/challenges/challenge_level_three_4.vue'\nimport challenge_level_three_5 from '@/pages/challenges/challenge_level_three_5.vue'\nimport challenge_level_three_6 from '@/pages/challenges/challenge_level_three_6.vue'\nimport challenge_level_three_8 from '@/pages/challenges/challenge_level_three_8.vue'\nimport challenge_level_three_9 from '@/pages/challenges/challenge_level_three_9.vue'\nimport MyScores from '@/pages/other/my_scores.vue'\nimport SettingsPage from '@/pages/other/settings.vue'\nimport { useGameScore } from '@/composables/useGameScore'\nimport { onToast } from '@/utils/toastBus'\n\nconst router = useRouter()\nconst props = defineProps({ view: { type: String, default: '' } })\n\nconst levels = [\n  {\n    id: 'level1',\n    label: { ar: 'المستوى الأول', en: 'Level One' },\n    challenges: [\n      { id: 'challenge_1', component: Challenge1, symbol: '∑', label: { ar: 'التحدي 1', en: 'Challenge 1' }, summary: { ar: 'إكمال عملية جمع عمودية بأرقام مخفية.', en: 'Complete a column addition puzzle with hidden digits.' } },\n      { id: 'challenge_2', component: Challenge2, symbol: '√', label: { ar: 'التحدي 2', en: 'Challenge 2' }, summary: { ar: 'شبكة أعداد تتزايد بمقدار ثابت، أعد القيم المفقودة.', en: 'Fill a number grid that increases by a fixed step.' } },\n      { id: 'challenge_3', component: Challenge3, symbol: 'π', label: { ar: 'التحدي 3', en: 'Challenge 3' }, summary: { ar: 'اختر زوج الأعداد الصحيح حسب المجموع والفرق.', en: 'Pick the number pair that matches the given sum and difference.' } },\n      { id: 'challenge_4', component: Challenge4, symbol: '×', label: { ar: 'التحدي 4', en: 'Challenge 4' }, summary: { ar: 'استكمل جدول ضرب مصغر.', en: 'Complete the mini multiplication table.' } },\n      { id: 'challenge_5', component: Challenge5, symbol: 'Δ', label: { ar: 'التحدي 5', en: 'Challenge 5' }, summary: { ar: 'املأ مثلث الضرب على الأضلاع.', en: 'Fill in the edge products of the triangle.' } },\n      { id: 'challenge_6', component: Challenge6, symbol: '≡', label: { ar: 'التحدي 6', en: 'Challenge 6' }, summary: { ar: 'اختر ثلاث خلايا مختلفة الصف والعمود لتحقيق مجموع محدد.', en: 'Pick three distinct-row/column cells to reach the target sum.' } },\n      { id: 'challenge_7', component: Challenge7, symbol: '∴', label: { ar: 'التحدي 7', en: 'Challenge 7' }, summary: { ar: 'أكمل هرم الجمع بإسقاط القيم الصحيحة.', en: 'Complete the sum pyramid with the correct values.' } },\n    ],\n  },\n  {\n    id: 'level2',\n    label: { ar: 'المستوى الثاني', en: 'Level Two' },\n    challenges: [\n      { id: 'challenge_level_two_1', component: challenge_level_two_1, symbol: '∫', label: { ar: 'التحدي 1', en: 'Challenge 1' }, summary: { ar: 'كوّن تعبيرًا يستخدم الأرقام 1 إلى 5 مرة واحدة.', en: 'Build an expression that uses digits 1–5 exactly once.' } },\n      { id: 'challenge_level_two_2', component: challenge_level_two_2, symbol: '≠', label: { ar: 'التحدي 2', en: 'Challenge 2' }, summary: { ar: 'أكمل مربّعًا سحريًا بمجاميع متساوية.', en: 'Complete a magic square with equal sums.' } },\n      { id: 'challenge_level_two_3', component: challenge_level_two_3, symbol: '≈', label: { ar: 'التحدي 3', en: 'Challenge 3' }, summary: { ar: 'طابق أعدادًا سداسية مع خواص القسمة.', en: 'Match six-digit numbers to divisibility rules.' } },\n      { id: 'challenge_level_two_4', component: challenge_level_two_4, symbol: '∞', label: { ar: 'التحدي 4', en: 'Challenge 4' }, summary: { ar: 'اختر الزوج الذي يطابق المجموع والفرق.', en: 'Choose the pair that matches the required sum and difference.' } },\n      { id: 'challenge_level_two_5', component: challenge_level_two_5, symbol: '∂', label: { ar: 'التحدي 5', en: 'Challenge 5' }, summary: { ar: 'اكمل طرح الكسور بوضع الأعداد الصحيحة.', en: 'Complete the fraction subtraction by placing the right integers.' } },\n      { id: 'challenge_level_two_6', component: challenge_level_two_6, symbol: '⊗', label: { ar: 'التحدي 6', en: 'Challenge 6' }, summary: { ar: 'رتّب خطوات حل معادلة الموازين.', en: 'Order the solution steps for the balance puzzle.' } },\n    ],\n  },\n  {\n    id: 'level3',\n    label: { ar: 'المستوى الثالث', en: 'Level Three' },\n    challenges: [\n      { id: 'challenge_level_three_1', component: challenge_level_three_1, symbol: 'Φ', label: { ar: 'التحدي 1', en: 'Challenge 1' }, summary: { ar: 'ابن هرم الضرب من أرقام مبعثرة.', en: 'Rebuild the multiplication pyramid from scattered numbers.' } },\n      { id: 'challenge_level_three_2', component: challenge_level_three_2, symbol: 'Ψ', label: { ar: 'التحدي 2', en: 'Challenge 2' }, summary: { ar: 'لغز تفكير متقدم في الأعداد.', en: 'An advanced numerical reasoning puzzle.' } },\n      { id: 'challenge_level_three_3', component: challenge_level_three_3, symbol: 'Λ', label: { ar: 'التحدي 3', en: 'Challenge 3' }, summary: { ar: 'لغز منطق متقدم لاختبار السرعة.', en: 'Advanced logic to test your speed.' } },\n      { id: 'challenge_level_three_4', component: challenge_level_three_4, symbol: 'Ξ', label: { ar: 'التحدي 4', en: 'Challenge 4' }, summary: { ar: 'تحدٍ عالي المستوى لربط الأنماط.', en: 'High-level challenge for spotting patterns.' } },\n      { id: 'challenge_level_three_5', component: challenge_level_three_5, symbol: 'Θ', label: { ar: 'التحدي 5', en: 'Challenge 5' }, summary: { ar: 'مسألة حسابية تحتاج إلى خطوات دقيقة.', en: 'A numeric problem that needs careful steps.' } },\n      { id: 'challenge_level_three_6', component: challenge_level_three_6, symbol: 'β', label: { ar: 'التحدي 6', en: 'Challenge 6' }, summary: { ar: 'إستراتيجية جديدة لبناء الحل خطوة بخطوة.', en: 'Strategic puzzle solved step by step.' } },\n      { id: 'challenge_level_three_8', component: challenge_level_three_8, symbol: 'η', label: { ar: 'التحدي 7', en: 'Challenge 7' }, summary: { ar: 'اختبار المنطق السريع بالأرقام.', en: 'Fast-paced numeric logic test.' } },\n      { id: 'challenge_level_three_9', component: challenge_level_three_9, symbol: 'ζ', label: { ar: 'التحدي 8', en: 'Challenge 8' }, summary: { ar: 'لغز أخير يجمع بين التفكير والسرعة.', en: 'A final puzzle mixing reasoning with speed.' } },\n    ],\n  },\n]\n\nconst levelAccents = {\n  level1: { primary: 'var(--color-primary)', secondary: 'rgba(15,138,62,0.16)' },\n  level2: { primary: 'var(--color-secondary)', secondary: 'rgba(200,160,59,0.22)' },\n  level3: { primary: 'var(--color-accent)', secondary: 'rgba(13,110,140,0.24)' },\n}\nconst fallbackAccent = { primary: 'var(--color-primary)', secondary: 'rgba(15,138,62,0.15)' }\nconst CARD_SYMBOLS = ['∑','√','π','∞','Δ','∫','≠','⊕','≈','∂','Φ','Ψ','Ω','λ','μ','θ','β','γ','η','ζ','ξ']\n\nconst cardSymbol = (levelId, challenge, index) => challenge.symbol || CARD_SYMBOLS[index % CARD_SYMBOLS.length] || '∑'\nconst cardStyle = (levelId, index) => {\n  const palette = levelAccents[levelId] || fallbackAccent\n  return {\n    '--card-accent': palette.primary,\n    '--card-accent-soft': palette.secondary,\n    '--card-index': index,\n  }\n}\n\nconst scoreStore = useGameScore()\nconst dashTiers = [\n  { threshold: 0, title: { ar: 'مبتدئ', en: 'Novice' } },\n  { threshold: 25, title: { ar: 'متقدم', en: 'Skilled' } },\n  { threshold: 80, title: { ar: 'قائد', en: 'Leader' } },\n  { threshold: 160, title: { ar: 'أسطورة', en: 'Legend' } },\n]\n\nconst scoreValue = computed(() => Number(scoreStore.score.value || 0))\nconst tierIndex = computed(() => {\n  let idx = 0\n  dashTiers.forEach((tier, index) => {\n    if (scoreValue.value >= tier.threshold) idx = index\n  })\n  return idx\n})\nconst scoreTier = computed(() => dashTiers[tierIndex.value])\nconst nextTier = computed(() => dashTiers[tierIndex.value + 1] || null)\nconst scoreTierName = computed(() => scoreTier.value?.title?.[lang.value] || scoreTier.value?.title?.en || '')\nconst scoreProgress = computed(() => {\n  if (!nextTier.value) return 1\n  const span = nextTier.value.threshold - scoreTier.value.threshold\n  if (span <= 0) return 1\n  return Math.min(1, (scoreValue.value - scoreTier.value.threshold) / span)\n})\nconst scoreFormatter = new Intl.NumberFormat('en-US', { maximumFractionDigits: 0 })\nconst scoreDisplay = computed(() => scoreFormatter.format(scoreValue.value))\nconst rankDisplay = computed(() => {\n  const rank = scoreStore.rank.value\n  return rank ? `#${rank}` : '--'\n})\nconst totalPlayersDisplay = computed(() => {\n  const total = scoreStore.totalPlayers.value\n  return total ? scoreFormatter.format(total) : '--'\n})\nconst scoreLoading = computed(() => scoreStore.loading.value)\nconst scoreProgressPercent = computed(() => Math.round(scoreProgress.value * 100))\nconst avatarUrl = computed(() => scoreStore.profileImage.value || null)\nconst avatarInitial = computed(() => {\n  const source = fullName.value || scoreStore.username.value || username.value || 'P'\n  return source.trim().charAt(0).toUpperCase() || 'P'\n})\nconst scoreDisplayKey = computed(() => (scoreLoading.value ? 'loading' : `score-${scoreValue.value}`))\nconst progressSpring = ref(0)\nconst scorePulse = ref(false)\n\nwatch(scoreProgress, value => {\n  progressSpring.value = value\n}, { immediate: true })\n\nwatch(() => scoreStore.score.value, (next, prev) => {\n  if (prev == null || Number(next) === Number(prev)) return\n  scorePulse.value = false\n  requestAnimationFrame(() => {\n    scorePulse.value = true\n    setTimeout(() => { scorePulse.value = false }, 720)\n  })\n})\n\nfunction viewScores(){\n  goto('/scores')\n}\n\nconst componentRegistry = {}\nlevels.forEach(level => {\n  level.challenges.forEach(challenge => {\n    componentRegistry[challenge.id] = challenge.component\n  })\n})\nconst specialViews = { scores: MyScores, settings: SettingsPage }\n\n/* ================= اللغة ================= */\nconst lang = ref(localStorage.getItem('ml_lang') || 'ar')\nconst dir  = computed(() => (lang.value === 'ar' ? 'rtl' : 'ltr'))\nconst T = {\n  ar: {\n    challenges:'المستوى الأول', challenges2:'المستوى الثاني', myScores:'درجاتي', settings:'الإعدادات', logout:'خروج',\n    hello:'مرحبًا', sub:'اختر تحديًا وابدأ اللعب!', challenge:'التحدي',\n    brand:'زعماء الرياضيات', tagline:'رحلة إنجاز رقمية', pickPrompt:'اختر تحديًا من البطاقات أدناه للبدء.',\n    cardCTA:'ابدأ التحدي',\n    scoreWidgetTitle:'نقاطي', scoreWidgetSubtitle:'نظرة سريعة على تقدّمك',\n    scoreWidgetRank:'الترتيب', scoreWidgetPlayers:'عدد اللاعبين',\n    scoreWidgetProgress:'نحو الرتبة التالية', scoreWidgetView:'عرض التفاصيل',\n    scoreWidgetLoading:'جار تحديث النقاط...',\n    teacherTitle:'الشريك التربوي',\n    teacherSubtitle:'ميعاد سفر المالكي',\n    teacherMessage:'✨ “من هنا بدأت الرحلة… رحلة شغف صاغتها الأستاذة ميعاد سفر المالكي لتلهم طلابها نحو الإبداع والتفكير.'\n  },\n  en: {\n    challenges:'Level One', challenges2:'Level Two', myScores:'My Scores', settings:'Settings', logout:'Log out',\n    hello:'Hello', sub:'Pick a challenge and start!', challenge:'Challenge',\n    brand:'Math Leaders', tagline:'Interactive mastery journey', pickPrompt:'Select a challenge from the cards below to get started.',\n    cardCTA:'Start challenge',\n    scoreWidgetTitle:'My points', scoreWidgetSubtitle:'Quick glance at your progress',\n    scoreWidgetRank:'Rank', scoreWidgetPlayers:'Players',\n    scoreWidgetProgress:'To next tier', scoreWidgetView:'View details',\n    scoreWidgetLoading:'Refreshing score...',\n    teacherTitle:'Presented by',\n    teacherSubtitle:'Miyaad Safar Al-Malki',\n    teacherMessage:'A heartfelt thanks to Ms. Miyaad Safar Al-Malki for curating these inspiring challenges.'\n  }\n}\nconst t = (k)=>T[lang.value][k]\nconst extraView = computed(() => props.view || '')\nwatch(lang, v=>{\n  localStorage.setItem('ml_lang', v)\n  document.documentElement.dir = dir.value\n  document.documentElement.lang = v\n})\n\n/* ================= الثيم ================= */\nconst theme = ref(localStorage.getItem('ml_theme') || 'light')\nconst shellTransitioning = ref(false)\nconst isCompact = ref(false)\nconst globalToasts = ref([])\n\nfunction applyTheme(value){\n  document.documentElement.setAttribute('data-ml-theme', value)\n}\n\nlet disposeToastListener = null\n\nfunction animateShell(){\n  shellTransitioning.value = true\n  window.clearTimeout(animateShell.timer)\n  animateShell.timer = window.setTimeout(() => {\n    shellTransitioning.value = false\n  }, 360)\n}\n\nfunction dismissToast(id){\n  globalToasts.value = globalToasts.value.filter(toast => toast.id !== id)\n}\n\nfunction switchLang(){\n  animateShell()\n  lang.value = lang.value === 'ar' ? 'en' : 'ar'\n}\n\nfunction switchTheme(){\n  animateShell()\n  theme.value = theme.value === 'light' ? 'dark' : 'light'\n}\n\nwatch(theme, v=>{\n  localStorage.setItem('ml_theme', v)\n  applyTheme(v)\n})\n\nfunction handleViewportChange(){\n  if (typeof window === 'undefined') return\n  const compact = window.matchMedia('(max-width: 1024px)').matches\n  isCompact.value = compact\n  if (!compact) {\n    sidebarCollapsed.value = false\n  }\n}\n\nfunction handleClickOutside(event){\n  if (!profileRef.value) return\n  if (!profileRef.value.contains(event.target)) {\n    profileOpen.value = false\n  }\n}\n\n/* ================= GET helper ================= */\nasync function get(url, params = {}) {\n  const qs = new URLSearchParams(params).toString()\n  const r  = await fetch(url + (qs ? `?${qs}` : ''), {\n    method: 'GET',\n    credentials: 'include',\n  })\n  const data = await r.json().catch(()=> ({}))\n  if (!r.ok) throw data\n  return data\n}\n\n/* ================= المستخدم/الحماية ================= */\nconst username = ref('player')\nconst fullName = ref('')\n\nasync function fetchMe(){\n  try {\n    const data = await get('/api/method/mathematics_leaders.api.get_my_details.get_me')\n    const msg  = data?.message\n    if (!msg?.ok) { router.replace('/'); return }\n    const prof = msg.profile || {}\n    username.value = prof.username || 'player'\n    fullName.value = prof.full_name || ''\n    if (prof.language && !localStorage.getItem('ml_lang')) lang.value = prof.language\n  } catch {\n    router.replace('/')\n  }\n}\n\n/* ================= تنقّل وقائمة ================= */\nconst profileOpen      = ref(false)\nconst profileRef       = ref(null)\nconst sidebarCollapsed = ref(false)\nconst expandedLevels = reactive(Object.fromEntries(levels.map((lvl) => [lvl.id, false])))\nconst selectedLevel = ref(levels[0]?.id || 'level1')\nconst selectedChallenge = ref(null)\n\nfunction toggleSidebar(){\n  sidebarCollapsed.value = !sidebarCollapsed.value\n}\nfunction goto(path){ router.push(path) }\nasync function logout(){\n  await get('/api/method/logout')\n  router.replace('/')\n}\nfunction toggleLevel(levelId){\n  expandedLevels[levelId] = !expandedLevels[levelId]\n}\nfunction isExpanded(levelId){\n  return !!expandedLevels[levelId]\n}\nfunction selectChallenge(levelId, challengeId){\n  expandedLevels[levelId] = true\n  selectedLevel.value = levelId\n  selectedChallenge.value = challengeId\n  if (isCompact.value) {\n    sidebarCollapsed.value = true\n  }\n  if (router.currentRoute.value.path !== '/home') {\n    router.push('/home')\n  }\n}\nfunction isActiveChallenge(levelId, challengeId){\n  return selectedLevel.value === levelId && selectedChallenge.value === challengeId\n}\n\nconst currentSelection = computed(() => {\n  if (props.view && specialViews[props.view]) {\n    return { level: null, challenge: null }\n  }\n  if (!selectedChallenge.value) {\n    const level = levels.find(l => l.id === selectedLevel.value) || null\n    return { level, challenge: null }\n  }\n  for (const level of levels) {\n    const challenge = level.challenges.find(ch => ch.id === selectedChallenge.value)\n    if (challenge) return { level, challenge }\n  }\n  return { level: levels.find(l => l.id === selectedLevel.value) || null, challenge: null }\n})\nconst currentComponent = computed(() => {\n  if (props.view && specialViews[props.view]) {\n    return specialViews[props.view]\n  }\n  const id = selectedChallenge.value\n  return id ? componentRegistry[id] : null\n})\n\n/* ================= تهيئة ================= */\nonMounted(()=>{\n  document.documentElement.dir  = dir.value\n  document.documentElement.lang = lang.value\n  applyTheme(theme.value)\n  fetchMe()\n  scoreStore.refresh()\n  handleViewportChange()\n  if (isCompact.value) {\n    sidebarCollapsed.value = true\n  }\n  if (typeof window !== 'undefined') {\n    window.addEventListener('resize', handleViewportChange)\n  }\n  document.addEventListener('click', handleClickOutside)\n  disposeToastListener = onToast(event => {\n    const detail = event.detail || {}\n    if (!detail.message) return\n    const toast = {\n      id: detail.id || Math.random().toString(36).slice(2),\n      message: detail.message,\n      type: detail.type || 'info',\n    }\n    globalToasts.value.push(toast)\n    if (globalToasts.value.length > 4) {\n      globalToasts.value.shift()\n    }\n    const lifetime = Math.max(1500, detail.duration || 2600)\n    window.setTimeout(() => dismissToast(toast.id), lifetime)\n  })\n})\n\nonUnmounted(() => {\n  if (disposeToastListener) disposeToastListener()\n  window.clearTimeout(animateShell.timer)\n  if (typeof window !== 'undefined') {\n    window.removeEventListener('resize', handleViewportChange)\n  }\n  document.removeEventListener('click', handleClickOutside)\n})\n\n/* شعار */\nconst logoUrl = new URL('../assets/images/logo3.jpeg', import.meta.url).href\n</script>\n\n\n<template>\n  <div :class=\"['dashboard', theme, { transitioning: shellTransitioning }]\" :dir=\"dir\">\n    <div class=\"dashboard__background\" aria-hidden=\"true\">\n      <span class=\"glow glow-one\"></span>\n      <span class=\"glow glow-two\"></span>\n      <span class=\"glow glow-three\"></span>\n      <span class=\"mesh\"></span>\n    </div>\n\n    <transition-group name=\"toast-fade\" tag=\"div\" class=\"toasts\" aria-live=\"polite\">\n      <div v-for=\"toast in globalToasts\" :key=\"toast.id\" class=\"toast\" :class=\"toast.type\">\n        <span class=\"toast__dot\"></span>\n        <p>{{ toast.message }}</p>\n        <button type=\"button\" class=\"toast__close\" @click=\"dismissToast(toast.id)\">×</button>\n      </div>\n    </transition-group>\n\n    <header class=\"dashboard__topbar\">\n      <div class=\"topbar__left\">\n        <button\n          v-if=\"isCompact\"\n          class=\"topbar__menu\"\n          type=\"button\"\n          @click=\"toggleSidebar\"\n          :aria-expanded=\"!sidebarCollapsed\"\n          :aria-label=\"sidebarCollapsed ? (lang === 'ar' ? 'فتح قائمة التحديات' : 'Open challenges') : (lang === 'ar' ? 'إخفاء قائمة التحديات' : 'Hide challenges')\"\n        >\n          <Menu v-if=\"sidebarCollapsed\" />\n          <ChevronLeft v-else :style=\"{ transform: dir === 'rtl' ? 'scaleX(-1)' : '' }\" />\n        </button>\n\n        <div class=\"brand-chip\">\n          <div class=\"brand-chip__logo\">\n            <img :src=\"logoUrl\" alt=\"logo\" />\n          </div>\n          <div class=\"brand-chip__text\">\n            <span class=\"brand-chip__title\">{{ T[lang].brand }}</span>\n            <span class=\"brand-chip__subtitle\">{{ T[lang].tagline }}</span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"topbar__center\">\n        <Hand class=\"wave\" />\n        <div class=\"greet\">\n          <h1>{{ T[lang].hello }} {{ fullName || username }}</h1>\n          <p>{{ t('sub') }}</p>\n        </div>\n      </div>\n\n      <div class=\"topbar__actions\">\n        <button\n          class=\"action-btn\"\n          type=\"button\"\n          :aria-label=\"theme === 'dark' ? (lang === 'ar' ? 'التبديل إلى الوضع الفاتح' : 'Switch to light theme') : (lang === 'ar' ? 'التبديل إلى الوضع الداكن' : 'Switch to dark theme')\"\n          @click=\"switchTheme\"\n        >\n          <Sun v-if=\"theme === 'light'\" />\n          <Moon v-else />\n        </button>\n\n        <button\n          class=\"action-btn\"\n          type=\"button\"\n          :aria-label=\"lang === 'ar' ? 'Switch to English' : 'التبديل إلى العربية'\"\n          @click=\"switchLang\"\n        >\n          {{ lang === 'ar' ? 'EN' : 'ع' }}\n        </button>\n\n        <div class=\"profile\" ref=\"profileRef\" @click.stop=\"profileOpen = !profileOpen\">\n          <div class=\"avatar\">\n            <span v-if=\"avatarUrl\" class=\"avatar__image\" :style=\"{ backgroundImage: `url(${avatarUrl})` }\"></span>\n            <span v-else class=\"avatar__initial\">{{ avatarInitial }}</span>\n          </div>\n          <div class=\"profile__text\">\n            <span class=\"profile__name\">{{ fullName || username }}</span>\n            <span class=\"profile__meta\">{{ T[lang].brand }}</span>\n          </div>\n          <ChevronDown class=\"profile__chevron\" :class=\"{ open: profileOpen }\" />\n          <transition name=\"fade\">\n            <ul v-if=\"profileOpen\" class=\"profile__menu\">\n              <li>\n                <button type=\"button\" @click=\"goto('/settings')\">\n                  <Settings /> <span>{{ T[lang].settings }}</span>\n                </button>\n              </li>\n              <li>\n                <button type=\"button\" class=\"danger\" @click=\"logout\">\n                  <LogOut /> <span>{{ T[lang].logout }}</span>\n                </button>\n              </li>\n            </ul>\n          </transition>\n        </div>\n      </div>\n    </header>\n\n    <main class=\"dashboard__main\">\n      <section class=\"overview-grid\">\n        <article class=\"welcome-card\">\n          <div class=\"welcome-card__icon\">\n            <Crown />\n          </div>\n          <div class=\"welcome-card__copy\">\n            <h2>{{ T[lang].brand }}</h2>\n            <p>{{ T[lang].pickPrompt }}</p>\n          </div>\n          <div class=\"welcome-card__metrics\">\n            <div class=\"metric\">\n              <span class=\"metric__label\">{{ T[lang].scoreWidgetRank }}</span>\n              <strong>{{ scoreRankDisplay }}</strong>\n            </div>\n            <div class=\"metric\">\n              <span class=\"metric__label\">{{ T[lang].scoreWidgetPlayers }}</span>\n              <strong>{{ totalPlayersDisplay }}</strong>\n            </div>\n          </div>\n        </article>\n\n        <article class=\"score-card\" :class=\"{ loading: scoreLoading, pulse: scorePulse }\" :aria-busy=\"scoreLoading\">\n          <div v-if=\"scoreLoading\" class=\"score-card__overlay\" aria-hidden=\"true\">\n            <Loader2 class=\"overlay-spinner\" />\n          </div>\n          <div class=\"score-card__ring\">\n            <svg viewBox=\"0 0 120 120\" role=\"presentation\">\n              <defs>\n                <linearGradient id=\"dashboardScoreGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n                  <stop offset=\"0%\" stop-color=\"#c6a034\" />\n                  <stop offset=\"100%\" stop-color=\"#0f8a3e\" />\n                </linearGradient>\n              </defs>\n              <circle class=\"ring-bg\" cx=\"60\" cy=\"60\" r=\"52\" />\n              <circle class=\"ring-fg\" cx=\"60\" cy=\"60\" r=\"52\" stroke=\"url(#dashboardScoreGradient)\" :style=\"{ '--progress': progressSpring }\" />\n            </svg>\n            <div class=\"score-card__center\">\n              <transition name=\"score-flip\" mode=\"out-in\">\n                <span class=\"score-card__points\" :key=\"scoreDisplayKey\">{{ scoreLoading ? '...' : scoreDisplay }}</span>\n              </transition>\n              <small>{{ T[lang].scoreWidgetTitle }}</small>\n            </div>\n          </div>\n          <div class=\"score-card__details\">\n            <span class=\"score-card__tier\">{{ scoreTierName }}</span>\n            <p class=\"score-card__subtitle\">\n              {{ scoreLoading ? T[lang].scoreWidgetLoading : T[lang].scoreWidgetSubtitle }}\n            </p>\n            <div\n              class=\"progress\"\n              role=\"progressbar\"\n              :aria-valuenow=\"scoreProgressPercent\"\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            >\n              <div class=\"progress__track\">\n                <div class=\"progress__fill\" :style=\"{ '--progress': progressSpring }\"></div>\n              </div>\n              <div class=\"progress__meta\">\n                <span>{{ scoreProgressPercent }}%</span>\n                <button type=\"button\" class=\"progress__link\" @click=\"viewScores\">{{ T[lang].scoreWidgetView }}</button>\n              </div>\n            </div>\n          </div>\n        </article>\n\n        <article class=\"mentor-card\">\n          <div class=\"mentor-card__badge\">{{ T[lang].teacherTitle }}</div>\n          <h3>{{ T[lang].teacherSubtitle }}</h3>\n          <p>{{ T[lang].teacherMessage }}</p>\n        </article>\n      </section>\n\n      <section class=\"challenge-section\">\n        <aside class=\"challenge-list\" :class=\"{ collapsed: sidebarCollapsed && isCompact }\">\n          <header class=\"challenge-list__header\">\n            <h2>{{ T[lang].challenge }}</h2>\n            <p>{{ T[lang].pickPrompt }}</p>\n          </header>\n\n          <div class=\"levels\">\n            <div class=\"level-block\" v-for=\"level in levels\" :key=\"level.id\">\n              <button type=\"button\" class=\"level-head\" @click=\"toggleLevel(level.id)\">\n                <div class=\"level-head__info\">\n                  <Target class=\"level-head__icon\" />\n                  <span class=\"level-head__title\">{{ level.label[lang] }}</span>\n                </div>\n                <span class=\"level-head__count\">{{ level.challenges.length }}</span>\n                <ChevronDown class=\"level-head__chevron\" :class=\"{ open: isExpanded(level.id) }\" />\n              </button>\n              <transition name=\"fade\">\n                <div v-if=\"isExpanded(level.id)\" class=\"challenge-cards\">\n                  <button\n                    v-for=\"challenge in level.challenges\"\n                    :key=\"challenge.id\"\n                    type=\"button\"\n                    class=\"challenge-card\"\n                    :class=\"{ active: isActiveChallenge(level.id, challenge.id) }\"\n                    @click=\"selectChallenge(level.id, challenge.id)\"\n                  >\n                    <span class=\"challenge-card__symbol\">{{ challenge.symbol }}</span>\n                    <div class=\"challenge-card__body\">\n                      <span class=\"challenge-card__title\">{{ challenge.label[lang] }}</span>\n                      <p class=\"challenge-card__summary\">{{ challenge.summary[lang] }}</p>\n                    </div>\n                    <span class=\"challenge-card__cta\">{{ T[lang].cardCTA }}</span>\n                  </button>\n                </div>\n              </transition>\n            </div>\n          </div>\n       \n            <div class=\"logout-block\">\n            <button type=\"button\" class=\"logout-btn\" @click=\"logout\">\n              <LogOut />\n              <span>{{ T[lang].logout }}</span>\n            </button>\n          </div>\n </aside>\n        <div class=\"challenge-preview\">\n          <div class=\"preview-header\">\n            <span v-if=\"currentSelection.level\" class=\"preview-pill\">{{ currentSelection.level.label[lang] }}</span>\n            <div class=\"preview-text\">\n              <h3 v-if=\"extraView === 'scores'\">{{ T[lang].myScores }}</h3>\n              <h3 v-else-if=\"extraView === 'settings'\">{{ T[lang].settings }}</h3>\n              <h3 v-else-if=\"currentSelection.challenge\">{{ currentSelection.challenge.label[lang] }}</h3>\n              <h3 v-else>{{ T[lang].brand }}</h3>\n\n              <p v-if=\"currentSelection.challenge\">{{ currentSelection.challenge.summary[lang] }}</p>\n              <p v-else-if=\"extraView === 'scores'\">{{ T[lang].scoreWidgetSubtitle }}</p>\n              <p v-else-if=\"extraView === 'settings'\">{{ T[lang].settings }}</p>\n              <p v-else>{{ T[lang].pickPrompt }}</p>\n            </div>\n          </div>\n\n          <div class=\"preview-surface\">\n            <transition name=\"preview-fade\" mode=\"out-in\">\n              <component\n                v-if=\"currentComponent\"\n                :is=\"currentComponent\"\n                :key=\"extraView || currentSelection.challenge?.id || 'welcome'\"\n                class=\"preview-component\"\n                v-bind=\"{ lang, theme }\"\n              />\n              <div v-else class=\"preview-placeholder\" key=\"placeholder\">\n                <Crown />\n                <p>{{ T[lang].pickPrompt }}</p>\n              </div>\n            </transition>\n          </div>\n        </div>\n      </section>\n    </main>\n  </div>\n</template>\n\n<style scoped>\n.dashboard {\n  position: relative;\n  min-height: 100vh;\n  padding: clamp(28px, 6vw, 64px);\n  display: flex;\n  flex-direction: column;\n  gap: clamp(28px, 5vw, 44px);\n  background: var(--bg-gradient);\n  color: var(--text-primary);\n  transition: background 0.4s ease, color 0.4s ease;\n  overflow-x: hidden;\n  --bg-gradient: linear-gradient(135deg, #fdfcf8 0%, #f2f5ef 45%, #e6efe2 100%);\n  --text-primary: #1f2a24;\n  --text-secondary: #375447;\n  --text-muted: #5f7669;\n  --card-surface: rgba(255, 255, 255, 0.92);\n  --card-soft: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.7));\n  --card-border: rgba(198, 160, 52, 0.28);\n  --card-shadow: 0 28px 58px rgba(31, 42, 36, 0.18);\n  --glass-surface: rgba(255,255,255,0.78);\n  --glass-border: rgba(198,160,52,0.2);\n  --accent-green: #0f8a3e;\n  --accent-green-dark: #1c6b39;\n  --accent-gold: #c6a034;\n  --accent-gold-soft: rgba(198,160,52,0.38);\n  --chip-bg: rgba(15,138,62,0.12);\n  --chip-color: #0f8a3e;\n  --badge-bg: rgba(15,138,62,0.16);\n  --badge-color: #0f8a3e;\n  --outline: rgba(15,138,62,0.35);\n  --grid-color: rgba(31, 42, 36, 0.08);\n  --grid-opacity: 0.4;\n  --control-shadow: 0 18px 32px rgba(15,138,62,0.22);\n  --control-shadow-hover: 0 24px 42px rgba(15,138,62,0.28);\n  --toast-surface: linear-gradient(135deg, rgba(15,138,62,0.92), rgba(198,160,52,0.82));\n}\n\n.dashboard.dark {\n  --bg-gradient: linear-gradient(135deg, #040b07 0%, #102017 45%, #050f0a 100%);\n  --text-primary: #f4f8f5;\n  --text-secondary: #c5ded0;\n  --text-muted: #9eb6a9;\n  --card-surface: rgba(11, 23, 18, 0.9);\n  --card-soft: linear-gradient(135deg, rgba(28,45,35,0.92), rgba(10,22,16,0.82));\n  --card-border: rgba(90, 212, 140, 0.24);\n  --card-shadow: 0 32px 64px rgba(0, 0, 0, 0.48);\n  --glass-surface: rgba(18,32,26,0.78);\n  --glass-border: rgba(90,212,140,0.28);\n  --accent-green: #5ad48c;\n  --accent-green-dark: #2f9a54;\n  --accent-gold: #d6ba68;\n  --accent-gold-soft: rgba(214,186,104,0.48);\n  --chip-bg: rgba(214,186,104,0.18);\n  --chip-color: #f5d98a;\n  --badge-bg: rgba(90,212,140,0.16);\n  --badge-color: #edfaef;\n  --outline: rgba(90,212,140,0.42);\n  --grid-color: rgba(255, 255, 255, 0.08);\n  --grid-opacity: 0.2;\n  --control-shadow: 0 22px 40px rgba(0,0,0,0.45);\n  --control-shadow-hover: 0 30px 52px rgba(0,0,0,0.55);\n  --toast-surface: linear-gradient(135deg, rgba(54,171,110,0.92), rgba(214,186,104,0.86));\n}\n\n.dashboard__background {\n  position: absolute;\n  inset: 0;\n  pointer-events: none;\n  z-index: 0;\n}\n\n.glow {\n  position: absolute;\n  filter: blur(140px);\n  opacity: 0.6;\n  transition: opacity 0.4s ease;\n}\n\n.glow-one {\n  top: -12%;\n  left: 10%;\n  width: 360px;\n  height: 360px;\n  background: rgba(15,138,62,0.42);\n}\n\n.glow-two {\n  bottom: -24%;\n  right: 18%;\n  width: 460px;\n  height: 460px;\n  background: rgba(198,160,52,0.42);\n}\n\n.glow-three {\n  top: 35%;\n  right: 40%;\n  width: 280px;\n  height: 280px;\n  background: rgba(255,255,255,0.4);\n}\n\n.dashboard.dark .glow-three {\n  background: rgba(40,65,52,0.52);\n}\n\n.mesh {\n  position: absolute;\n  inset: 0;\n  background-image: radial-gradient(circle at 1px 1px, var(--grid-color) 1px, transparent 0);\n  background-size: 32px 32px;\n  opacity: var(--grid-opacity);\n}\n\n.toasts {\n  position: fixed;\n  top: clamp(12px, 2vw, 20px);\n  inset-inline: 0;\n  display: grid;\n  justify-content: center;\n  gap: 12px;\n  z-index: 200;\n  pointer-events: none;\n}\n\n.toast {\n  pointer-events: auto;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 18px;\n  border-radius: 999px;\n  background: var(--toast-surface);\n  color: #ffffff;\n  box-shadow: var(--control-shadow);\n  backdrop-filter: blur(10px);\n}\n\n.toast.success {\n  background: linear-gradient(135deg, rgba(34,197,94,0.92), rgba(15,138,62,0.9));\n}\n\n.toast.danger {\n  background: linear-gradient(135deg, rgba(214,76,66,0.92), rgba(143,44,36,0.9));\n}\n\n.toast__dot {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background: rgba(255,255,255,0.82);\n}\n\n.toast__close {\n  border: none;\n  background: transparent;\n  color: inherit;\n  font-size: 18px;\n  cursor: pointer;\n  padding: 0;\n  line-height: 1;\n  opacity: 0.85;\n}\n\n.toast__close:hover {\n  opacity: 1;\n}\n\n.toast-fade-enter-active,\n.toast-fade-leave-active {\n  transition: opacity 0.25s ease, transform 0.25s ease;\n}\n\n.toast-fade-enter-from,\n.toast-fade-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.dashboard__topbar {\n  position: relative;\n  z-index: 5;\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  align-items: center;\n  gap: clamp(16px, 3vw, 24px);\n}\n\n.topbar__left {\n  display: flex;\n  align-items: center;\n  gap: 14px;\n}\n\n.topbar__menu {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 48px;\n  height: 48px;\n  border-radius: 16px;\n  border: none;\n  background: linear-gradient(135deg, var(--accent-green), var(--accent-gold));\n  color: #ffffff;\n  cursor: pointer;\n  box-shadow: var(--control-shadow);\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\n}\n\n.topbar__menu:hover {\n  transform: translateY(-2px);\n  box-shadow: var(--control-shadow-hover);\n}\n\n\n.brand-chip {\n  display: inline-flex;\n  align-items: center;\n  gap: 18px;\n  padding: 18px 24px;\n  border-radius: 32px;\n  background: var(--card-soft);\n  border: 1px solid var(--card-border);\n  box-shadow: 0 24px 48px rgba(15, 23, 42, 0.14);\n  backdrop-filter: blur(20px);\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\n}\n\n.brand-chip:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 30px 60px rgba(15, 23, 42, 0.18);\n}\n\n.brand-chip__logo {\n  width: 78px;\n  height: 78px;\n  border-radius: 24px;\n  background: var(--glass-surface);\n  border: 1px solid var(--glass-border);\n  display: grid;\n  place-items: center;\n  overflow: hidden;\n  box-shadow: 0 18px 32px rgba(15, 138, 62, 0.15);\n}\n\n.brand-chip__logo img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: transform 0.3s ease;\n}\n\n.brand-chip:hover .brand-chip__logo img {\n  transform: scale(1.05);\n}\n\n.brand-chip__text {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.brand-chip__title {\n  font-weight: 800;\n  font-size: 1.1rem;\n  color: var(--text-primary);\n}\n\n.brand-chip__subtitle {\n  font-size: 0.88rem;\n  color: var(--text-muted);\n}\n\n.topbar__center {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.wave {\n  width: 32px;\n  height: 32px;\n  color: var(--accent-gold);\n}\n\n.greet h1 {\n  margin: 0;\n  font-size: clamp(1.1rem, 2.4vw, 1.6rem);\n  font-weight: 700;\n  color: var(--text-primary);\n}\n\n.greet p {\n  margin: 4px 0 0;\n  font-size: 0.92rem;\n  color: var(--text-muted);\n}\n\n.topbar__actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.action-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 48px;\n  height: 48px;\n  border-radius: 16px;\n  border: none;\n  background: linear-gradient(135deg, var(--accent-green), var(--accent-gold));\n  color: #ffffff;\n  cursor: pointer;\n  font-weight: 700;\n  box-shadow: var(--control-shadow);\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\n}\n\n.action-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: var(--control-shadow-hover);\n}\n\n.profile {\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  gap: 12px;\n  padding: 10px 14px;\n  border-radius: 24px;\n  background: var(--card-soft);\n  border: 1px solid var(--card-border);\n  box-shadow: var(--card-shadow);\n  cursor: pointer;\n}\n\n.avatar {\n  width: 42px;\n  height: 42px;\n  border-radius: 14px;\n  overflow: hidden;\n  display: grid;\n  place-items: center;\n  background: var(--chip-bg);\n  color: var(--chip-color);\n  font-weight: 700;\n  letter-spacing: 0.02em;\n}\n\n.avatar__image {\n  width: 100%;\n  height: 100%;\n  background-size: cover;\n  background-position: center;\n}\n\n.avatar__initial {\n  font-size: 1rem;\n}\n\n.profile__text {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.profile__name {\n  font-weight: 700;\n  font-size: 0.95rem;\n  color: var(--text-primary);\n}\n\n.profile__meta {\n  font-size: 0.75rem;\n  color: var(--text-muted);\n}\n\n.profile__chevron {\n  width: 18px;\n  height: 18px;\n  color: var(--accent-gold);\n  transition: transform 0.25s ease;\n}\n\n.profile__chevron.open {\n  transform: rotate(180deg);\n}\n\n.profile__menu {\n  position: absolute;\n  inset-inline-end: 0;\n  top: calc(100% + 12px);\n  display: grid;\n  gap: 8px;\n  padding: 12px;\n  border-radius: 18px;\n  background: var(--glass-surface);\n  border: 1px solid var(--glass-border);\n  box-shadow: var(--card-shadow);\n  backdrop-filter: blur(18px);\n  min-width: 180px;\n  z-index: 20;\n}\n\n.profile__menu li {\n  list-style: none;\n}\n\n.profile__menu button {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  width: 100%;\n  padding: 8px 10px;\n  border: none;\n  border-radius: 12px;\n  background: transparent;\n  color: var(--text-primary);\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.2s ease, color 0.2s ease;\n}\n\n.profile__menu button:hover {\n  background: var(--chip-bg);\n  color: var(--chip-color);\n}\n\n.profile__menu button svg {\n  width: 18px;\n  height: 18px;\n}\n\n.profile__menu button.danger {\n  color: #c74b3f;\n}\n\n.dashboard__main {\n  position: relative;\n  /* z-index: 5; */\n  display: flex;\n  flex-direction: column;\n  gap: clamp(24px, 4vw, 36px);\n}\n\n.overview-grid {\n  display: grid;\n  gap: clamp(18px, 3vw, 24px);\n  grid-template-columns: repeat(3, minmax(0, 1fr));\n}\n\n.welcome-card,\n.score-card,\n.mentor-card {\n  position: relative;\n  border-radius: 28px;\n  background: var(--card-surface);\n  border: 1px solid var(--card-border);\n  box-shadow: var(--card-shadow);\n  padding: clamp(20px, 3vw, 28px);\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n  backdrop-filter: blur(18px);\n}\n\n.welcome-card__icon {\n  width: 54px;\n  height: 54px;\n  border-radius: 18px;\n  background: var(--chip-bg);\n  color: var(--chip-color);\n  display: grid;\n  place-items: center;\n  font-size: 1.2rem;\n}\n\n.welcome-card__copy h2 {\n  margin: 0;\n  font-size: 1.4rem;\n  font-weight: 800;\n  color: var(--text-primary);\n}\n\n.welcome-card__copy p {\n  margin: 6px 0 0;\n  color: var(--text-muted);\n  font-size: 0.95rem;\n}\n\n.welcome-card__metrics {\n  display: flex;\n  gap: 18px;\n}\n\n.metric {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.metric__label {\n  font-size: 0.78rem;\n  text-transform: uppercase;\n  letter-spacing: 0.08em;\n  color: var(--text-muted);\n}\n\n.metric strong {\n  font-size: 1.4rem;\n  font-weight: 800;\n  color: var(--accent-green);\n}\n\n.dashboard.dark .metric strong {\n  color: var(--accent-gold);\n}\n\n.score-card {\n  position: relative;\n  overflow: hidden;\n}\n\n.score-card__overlay {\n  position: absolute;\n  inset: 0;\n  display: grid;\n  place-items: center;\n  background: rgba(0, 0, 0, 0.18);\n  z-index: 2;\n}\n\n.overlay-spinner {\n  width: 36px;\n  height: 36px;\n  animation: spin 1s linear infinite;\n}\n\n.score-card__ring {\n  position: relative;\n  display: grid;\n  place-items: center;\n}\n\n.score-card__ring svg {\n  width: clamp(140px, 16vw, 180px);\n  height: clamp(140px, 16vw, 180px);\n  transform: rotate(-90deg);\n}\n\n.ring-bg {\n  fill: none;\n  stroke: rgba(0, 0, 0, 0.08);\n  stroke-width: 10;\n}\n\n.dashboard.dark .ring-bg {\n  stroke: rgba(255, 255, 255, 0.08);\n}\n\n.ring-fg {\n  fill: none;\n  stroke-width: 10;\n  stroke-linecap: round;\n  stroke-dasharray: 327;\n  stroke-dashoffset: calc(327 - (327 * var(--progress, 0)));\n  transition: stroke-dashoffset 0.8s cubic-bezier(0.22, 1, 0.36, 1);\n}\n\n.score-card__center {\n  position: absolute;\n  display: grid;\n  place-items: center;\n  gap: 6px;\n  text-align: center;\n}\n\n.score-card__points {\n  font-size: clamp(1.6rem, 3vw, 2rem);\n  font-weight: 800;\n  color: var(--accent-green);\n}\n\n.dashboard.dark .score-card__points {\n  color: var(--accent-gold);\n}\n\n.score-card__center small {\n  font-size: 0.82rem;\n  color: var(--text-muted);\n}\n\n.score-card__details {\n  display: flex;\n  flex-direction: column;\n  gap: 14px;\n}\n\n.score-card__tier {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 14px;\n  border-radius: 999px;\n  background: var(--chip-bg);\n  color: var(--chip-color);\n  font-weight: 700;\n  letter-spacing: 0.08em;\n  font-size: 0.78rem;\n  text-transform: uppercase;\n  width: max-content;\n}\n\n.score-card__subtitle {\n  margin: 0;\n  color: var(--text-muted);\n  font-size: 0.94rem;\n}\n\n.progress {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.progress__track {\n  position: relative;\n  width: 100%;\n  height: 12px;\n  border-radius: 999px;\n  background: rgba(255, 255, 255, 0.5);\n  overflow: hidden;\n  border: 1px solid rgba(255, 255, 255, 0.7);\n}\n\n.dashboard.dark .progress__track {\n  background: rgba(17, 28, 22, 0.72);\n  border-color: rgba(90, 212, 140, 0.3);\n}\n\n.progress__fill {\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(90deg, var(--accent-green), var(--accent-gold));\n  transform-origin: left center;\n  transform: scaleX(var(--progress, 0));\n  transition: transform 0.8s cubic-bezier(0.22, 1, 0.36, 1);\n}\n\n.progress__meta {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 0.85rem;\n  color: var(--text-muted);\n}\n\n.progress__link {\n  border: none;\n  background: none;\n  color: var(--accent-green);\n  font-weight: 700;\n  cursor: pointer;\n  text-decoration: underline;\n}\n\n.dashboard.dark .progress__link {\n  color: var(--accent-gold);\n}\n\n.score-card.pulse .score-card__points {\n  animation: scorePulse 0.72s ease;\n}\n\n.mentor-card {\n  overflow: hidden;\n}\n\n.mentor-card__badge {\n  align-self: flex-start;\n  padding: 6px 16px;\n  border-radius: 999px;\n  background: var(--badge-bg);\n  color: var(--badge-color);\n  font-size: 0.75rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.08em;\n}\n\n.mentor-card h3 {\n  margin: 0;\n  font-size: 1.2rem;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n\n.mentor-card p {\n  margin: 6px 0 0;\n  color: var(--text-muted);\n  font-size: 0.94rem;\n}\n\n.challenge-section {\n  display: grid;\n  grid-template-columns: minmax(320px, 380px) minmax(0, 1fr);\n  gap: clamp(20px, 4vw, 32px);\n}\n\n.challenge-list {\n  position: relative;\n  border-radius: 32px;\n  background: var(--card-surface);\n  border: 1px solid var(--card-border);\n  box-shadow: var(--card-shadow);\n  padding: clamp(20px, 3vw, 26px);\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  max-height: 720px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  backdrop-filter: blur(18px);\n  scroll-behavior: smooth;\n  transition: background 0.35s ease, border-color 0.35s ease, box-shadow 0.35s ease;\n}\n\n.challenge-list.collapsed {\n  display: none;\n}\n\n.challenge-list__header h2 {\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 800;\n  color: var(--text-primary);\n}\n\n.challenge-list__header p {\n  margin: 6px 0 0;\n  color: var(--text-muted);\n  font-size: 0.92rem;\n}\n\n.level-block {\n  border-radius: 22px;\n  background: var(--glass-surface);\n  border: 1px solid var(--glass-border);\n  overflow: hidden;\n  transition: background 0.3s ease, border-color 0.3s ease;\n}\n\n.level-head {\n  width: 100%;\n  border: none;\n  background: transparent;\n  padding: 16px 18px;\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  cursor: pointer;\n  color: var(--text-primary);\n}\n\n.level-head__info {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  flex: 1;\n}\n\n.level-head__icon {\n  width: 22px;\n  height: 22px;\n  color: var(--accent-green);\n}\n\n.dashboard.dark .level-head__icon {\n  color: var(--accent-gold);\n}\n\n.level-head__title {\n  font-weight: 700;\n  font-size: 1rem;\n}\n\n.level-head__count {\n  font-size: 0.82rem;\n  font-weight: 600;\n  color: var(--text-muted);\n}\n\n.level-head__chevron {\n  width: 18px;\n  height: 18px;\n  transition: transform 0.25s ease;\n  color: var(--accent-gold);\n}\n\n.level-head__chevron.open {\n  transform: rotate(180deg);\n}\n\n.challenge-cards {\n  display: grid;\n  gap: 12px;\n  padding: 0 18px 18px;\n}\n\n.challenge-card {\n  position: relative;\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  gap: 14px;\n  align-items: center;\n  padding: 16px 18px;\n  border-radius: 18px;\n  border: 1px solid rgba(233,236,239,0.65);\n  background: rgba(255,255,255,0.9);\n  color: var(--text-primary);\n  cursor: pointer;\n  transition: transform 0.25s ease, box-shadow 0.25s ease, border 0.25s ease, background 0.25s ease;\n  box-shadow: 0 16px 32px rgba(31,42,36,0.14);\n}\n\n.dashboard.dark .challenge-card {\n  background: rgba(15,23,32,0.85);\n  border-color: rgba(90,212,140,0.2);\n  box-shadow: 0 18px 36px rgba(0,0,0,0.45);\n}\n\n.challenge-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 22px 40px rgba(15,138,62,0.22);\n  border-color: var(--outline);\n}\n\n.challenge-card.active {\n  border-color: var(--accent-gold);\n  box-shadow: 0 24px 42px rgba(15,138,62,0.26);\n}\n\n.challenge-card__symbol {\n  font-size: 1.6rem;\n  font-weight: 800;\n  color: var(--accent-green);\n}\n\n.dashboard.dark .challenge-card__symbol {\n  color: var(--accent-gold);\n}\n\n.challenge-card__body {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.challenge-card__title {\n  font-weight: 700;\n  font-size: 1rem;\n}\n\n.challenge-card__summary {\n  margin: 0;\n  font-size: 0.86rem;\n  color: var(--text-muted);\n  line-height: 1.5;\n}\n\n.challenge-card__cta {\n  font-size: 0.78rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.08em;\n  color: var(--accent-gold);\n}\n\n.challenge-preview {\n  position: relative;\n  border-radius: 32px;\n  background: var(--card-surface);\n  border: 1px solid var(--card-border);\n  box-shadow: var(--card-shadow);\n  padding: clamp(22px, 3vw, 30px);\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  backdrop-filter: blur(18px);\n  min-height: 520px;\n  transition: background 0.35s ease, border-color 0.35s ease, box-shadow 0.35s ease;\n}\n\n.preview-header {\n  display: flex;\n  gap: 18px;\n  align-items: flex-start;\n  flex-wrap: wrap;\n}\n\n.preview-pill {\n  padding: 6px 16px;\n  border-radius: 999px;\n  background: var(--chip-bg);\n  color: var(--chip-color);\n  font-weight: 700;\n  font-size: 0.78rem;\n  letter-spacing: 0.08em;\n  text-transform: uppercase;\n}\n\n.preview-text h3 {\n  margin: 0;\n  font-size: 1.4rem;\n  font-weight: 800;\n  color: var(--text-primary);\n}\n\n.preview-text p {\n  margin: 8px 0 0;\n  color: var(--text-muted);\n  font-size: 0.95rem;\n  max-width: 640px;\n}\n\n.preview-surface {\n  position: relative;\n  flex: 1;\n  border-radius: 26px;\n  background: rgba(255,255,255,0.82);\n  border: 1px solid rgba(233,236,239,0.8);\n  box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);\n  overflow: hidden;\n  transition: background 0.35s ease, border-color 0.35s ease, box-shadow 0.35s ease;\n}\n\n.dashboard.dark .preview-surface {\n  background: rgba(15,23,32,0.85);\n  border-color: rgba(90,212,140,0.32);\n  box-shadow: inset 0 1px 0 rgba(90,212,140,0.12);\n}\n\n.preview-component {\n  width: 100%;\n  height: 100%;\n  padding: clamp(16px, 3vw, 22px);\n  overflow: auto;\n}\n\n.preview-placeholder {\n  height: 100%;\n  display: grid;\n  place-items: center;\n  gap: 12px;\n  text-align: center;\n  color: var(--text-muted);\n  font-size: 1rem;\n}\n\n.preview-placeholder svg {\n  width: 54px;\n  height: 54px;\n  color: var(--accent-gold);\n}\n\n.fade-enter-active,\n.fade-leave-active,\n.preview-fade-enter-active,\n.preview-fade-leave-active {\n  transition: opacity 0.25s ease, transform 0.25s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to,\n.preview-fade-enter-from,\n.preview-fade-leave-to {\n  opacity: 0;\n  transform: translateY(-6px);\n}\n\n.score-flip-enter-active,\n.score-flip-leave-active {\n  transition: transform 0.28s ease, opacity 0.28s ease;\n}\n\n.score-flip-enter-from {\n  transform: rotateX(-90deg);\n  opacity: 0;\n}\n\n.score-flip-leave-to {\n  transform: rotateX(90deg);\n  opacity: 0;\n}\n.logout-block{\n  margin: 12px; padding-top: 10px; border-top: 1px solid var(--border-color,#ddd);\n}\n.logout-btn{\n  width: 100%; display: flex; align-items: center; gap: 8px;\n  background: transparent; border: 0; padding: 10px 8px; border-radius: 10px;\n  color: #b32020; font-weight: 700; cursor: pointer;\n}\n.logout-btn:hover{ background: rgba(179,32,32,.08); }\n.logout-btn svg{ width: 18px; height: 18px; }\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes scorePulse {\n  0% {\n    transform: scale(1);\n  }\n  40% {\n    transform: scale(1.08);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n\n@media (max-width: 1200px) {\n  .overview-grid {\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n  }\n\n  .mentor-card {\n    grid-column: span 2;\n  }\n}\n\n@media (max-width: 1024px) {\n  .dashboard {\n    padding: clamp(20px, 6vw, 32px);\n  }\n\n  .dashboard__topbar {\n    grid-template-columns: 1fr;\n    justify-items: stretch;\n  }\n\n  .brand-chip {\n    gap: 14px;\n    padding: 14px 18px;\n    border-radius: 26px;\n  }\n\n  .brand-chip__logo {\n    width: 66px;\n    height: 66px;\n  }\n\n  .topbar__left {\n    justify-content: space-between;\n  }\n\n  .topbar__center {\n    justify-content: space-between;\n    flex-wrap: wrap;\n  }\n\n  .topbar__actions {\n    justify-content: flex-end;\n    column-gap: 10px;\n  }\n\n  .overview-grid {\n    grid-template-columns: minmax(0, 1fr);\n  }\n\n  .mentor-card {\n    grid-column: span 1;\n  }\n\n  .challenge-section {\n    grid-template-columns: minmax(0, 1fr);\n  }\n\n  .challenge-list {\n    position: fixed;\n    inset: clamp(16px, 4vw, 24px);\n    inset-inline: clamp(16px, 4vw, 24px);\n    max-width: unset;\n    z-index: 40;\n    max-height: calc(100vh - clamp(32px, 8vw, 48px));\n    overflow-y: auto;\n  }\n\n  .challenge-list.collapsed {\n    display: none;\n  }\n\n  .challenge-preview {\n    min-height: 400px;\n  }\n}\n\n@media (max-width: 720px) {\n  .profile {\n    padding: 8px 12px;\n  }\n\n  .profile__text {\n    display: none;\n  }\n\n  .brand-chip {\n    gap: 12px;\n    padding: 12px 16px;\n  }\n\n  .brand-chip__logo {\n    width: 58px;\n    height: 58px;\n    border-radius: 20px;\n  }\n\n  .overview-grid {\n    gap: 16px;\n  }\n\n  .challenge-list__header h2 {\n    font-size: 1.1rem;\n  }\n\n  .challenge-card {\n    grid-template-columns: auto 1fr;\n    row-gap: 10px;\n  }\n\n  .challenge-card__cta {\n    grid-column: span 2;\n    justify-self: flex-start;\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .action-btn,\n  .topbar__menu,\n  .challenge-card,\n  .score-card__points {\n    transition: none;\n    animation: none;\n  }\n\n  .score-flip-enter-active,\n  .score-flip-leave-active,\n  .preview-fade-enter-active,\n  .preview-fade-leave-active,\n  .fade-enter-active,\n  .fade-leave-active {\n    transition: none;\n  }\n}\n</style>\n","import { createRouter, createWebHashHistory } from 'vue-router'\nimport Login from '@/components/Index.vue'\nimport Home from '@/components/Dashboard.vue'\nconst router = createRouter({\n  history: createWebHashHistory('/math-leaders-games/'),\n  routes: [\n    { path: '/', redirect: '/login' },\n    { path: '/login', component: Login },\n    { path: '/home', component: Home },\n    { path: '/scores', component: () => import('@/pages/other/ScoresView.vue') },\n    { path: '/settings', component: () => import('@/pages/other/SettingsView.vue') },\n  ],\n})\n\nexport default router\n","// import './assets/main.css'\n\n// import { createApp } from 'vue'\n// import App from './App.vue'\n\n// createApp(App).mount('#app')\n\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport './assets/main.css'\n\ncreateApp(App)\n  .use(router)\n  .mount('#app')\n"],"file":"js/platform.js"}