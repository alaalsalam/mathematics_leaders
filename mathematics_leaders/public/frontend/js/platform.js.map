{"version":3,"mappings":"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","names":["_hoisted_1","_openBlock","_createElementBlock","_createVNode","_component_RouterView","BASE","lang","ref","dir","computed","t","key","isArabic","toggleLang","theme","isDark","themeToggleText","themeAria","toggleTheme","applyTheme","value","watch","onMounted","showSignup","inForm","upForm","submitting","notice","logoUrl","heroTitle","heroSubtitle","heroHighlights","statBlocks","get","url","params","qs","response","data","extractErr","error","list","first","goHome","profile","payload","submit","loginRes","_a","_b","_createElementVNode","_hoisted_2","_hoisted_4","_hoisted_5","_cache","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_9","_hoisted_10","_hoisted_11","_unref","_hoisted_13","_hoisted_14","_hoisted_15","_Fragment","_renderList","feature","idx","_hoisted_16","_hoisted_17","_hoisted_18","stat","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_normalizeClass","_hoisted_24","_hoisted_25","_Transition","_hoisted_36","_hoisted_37","$event","_vModelText","_hoisted_39","_hoisted_40","_hoisted_42","_hoisted_43","_hoisted_46","_createTextVNode","_hoisted_26","_hoisted_27","_hoisted_29","_hoisted_30","_hoisted_32","_hoisted_33","_hoisted_35","_hoisted_47","toKebabCase","string","toCamelCase","match","p1","p2","toPascalCase","camelCase","mergeClasses","classes","className","index","array","isEmptyString","defaultAttributes","Icon","name","iconNode","absoluteStrokeWidth","absoluteStrokeWidthKebabCase","strokeWidth","strokeWidthKebabCase","size","color","props","slots","h","child","createLucideIcon","iconName","attrs","Activity","Award","Check","ChevronDown","ChevronLeft","Circle","Crown","Diamond","Eraser","Hand","Image","KeyRound","LoaderCircle","LogOut","Menu","Moon","RefreshCw","RotateCcw","Settings","ShieldCheck","Sparkles","Square","Sun","Target","TrendingUp","Triangle","Upload","successUrl$3","clapUrl","wrongUrl$5","__props","v","r","T","k","sndSuccess","successUrl","sndClap","sndWrong","wrongUrl","SHAPE_COMP","SHAPE_TYPES","shapeComp","rndInt","a","b","shuffle","q","reactive","rowA","rowB","rowS","newPuzzle","dA","dB","A","B","S","digitsPresent","n","howMany","hideDigits","typesPicked","d","i","used","tokenize","str","ch","sh","s","onDigitDragStart","e","digit","onShapeDrop","shape","checkNow","onDragOver","resetAssign","isFilled","makeNumber","tokens","tok","isCorrect","overlay","pushToast","nextQuestion","toasts","msg","type","id","x","_hoisted_3","_createBlock","_resolveDynamicComponent","_hoisted_8","_hoisted_12","successUrl$2","wrongUrl$4","L","sOK","sClap","sWrong","j","step","base","grid","blanks","answerMap","manualDrafts","bankCounts","solved","toast","titleText","ruleText","buildGrid","start","stp","g","row","c","pickBlanks","cells","K","buildBankCounts","counts","stepsPool","bankList","out","ct","setAnswer","fromManual","prev","onDragStart","ev","allowDrop","onDrop","clearCell","onManualInput","commitManual","raw","num","addPoint","resetAnswers","numDir","successUrl$1","wrongUrl$3","N","D","questions","solvedCount","allAnswered","makeAns","validPair","mkQuestion","alts","addAlt","y","opts","da","db","newRound","resetRound","pickOption","unjudge","op","wrongUrl$2","factorsR","factorsC","valueAt","keyH","pickFactors","all","body","keep","cand","rebuildBank","rc","resetAll","wrongUrl$1","EXTRA_CHOICES","circles","squares","buildTriangle","vals","cl","cr","keys","neededExtras","usedValues","answerValues","pool","candidate","old","_c","target","picks","flat","pickedSum","rows","cols","perm","solution","p","resetPicks","toggleCell","rowsDistinct","colsDistinct","cell","baseN","buildPyramid","rs","_","keyOf","candidates","real","_normalizeStyle","expr","digits","ops","buildTarget","nums","pick","arr","op1","op2","op3","evalSafe","core","guard","again","aa","bb","cc","dd","oo1","oo2","oo3","finalExpr","addToken","backspace","clearAll","usage","u","onlyAllowedChars","usesExactDigits","safeEval","o","M","LO_SHU","symmetries","mat","rot","m","flip","seen","SHAPES","buildMagic","off","chosen","filledMatrix","noDuplicates","sumsOk","bank","answer","isMul2","isMul3","isMul4","isMul5","rand6","predicate","rand6_last","extra","picked","addUnique","a5","a2","a4","a3","distract","dropTo","options","buildPuzzle","big","small","mkSameSum","mkSameDiff","LRI","PDI","puzzleBank","currentPuzzle","lastPuzzleId","pickNextPuzzle","buildBank","puz","set","digitsMap","formatDigit","lhs","rhs","_hoisted_28","_hoisted_31","copy","toArabicNumber","formatNumberByLang","unitsWord","optionTemplates","buildOptions","puzzle","magnitude","templates","buildPremiseLines","squareTotal","triangleTotal","correctId","selected","feedback","shuffledOptions","applyOptions","checkAnswer","wasSolved","randomizePrompt","optionsList","premiseLines","line","option","totalCounts","displayRows","usageOf","val","available","tot","remaining","generatePyramid","built","totals","items","cIdx","locale","colourPalette","computeHints","numbers","sorted","sum","acc","mean","median","range","cards","extraCounts","answerSource","hints","resetReactiveMap","obj","colours","arrangement","minVal","maxVal","lower","upper","extras","cardId","source","clearCard","count","formatNumber","card","item","puzzles","coordKey","resetSelection","pickPuzzle","next","selectedList","selectedSum","total","isLine","sameRow","sameCol","diag1","diag2","checkLine","isSolutionCell","NNBSP","decimals","makeEqA","multiplier","offset","aDigit","bDigit","multAr","multEn","offEnSuffix","offArSuffix","left","right","makeEqB","baseLeft","baseRight","cDigit","dDigit","result","blAr","brAr","blEn","brEn","resEn","resAr","makeEqC","secondBase","eDigit","fDigit","sbAr","sbEn","makeEqD","gDigit","hDigit","answers","slotsMeta","initPuzzle","meta","eq","slotName","clearSlot","allFilled","checkAll","equations","token","slotTemplate","placements","expectedDigits","digitsPool","resetMaps","group","valueOf","checkSolution","n1","d1","n2","d2","res","requirements","decimal","fraction","slot","slotsFilled","decimalValue","fractionValue","numDigits","denDigits","numerator","denominator","dec","frac","withCoords","edge","nodes","from","to","path","edges","selectedEdges","ed","product","hasEdge","resetPath","undoLast","onNodeClick","node","end","last","newPath","checkPath","EVENT_NAME","emitToast","message","duration","onToast","listener","score","rank","totalPlayers","bestScore","loading","lastUpdated","profileImage","username","gameUserName","fetchScore","force","now","err","useGameScore","sparkSteps","donutRadius","refresh","detectLang","detectTheme","langState","isRTL","strings","tiers","scoreValue","bestValue","tierIndex","tier","currentTier","nextTier","tierLabel","_d","progress","span","intl","formattedScore","formattedBest","formattedRank","totalPlayersLabel","lastUpdatedLabel","delta","trendPoints","peak","baseline","ratio","wave","sparklineGeometry","pts","width","height","max","min","sparklinePath","pt","sparklineArea","trendDelta","donutCircumference","donutOffset","progressPercent","percentile","iconLibrary","insightCards","metrics","handleRefresh","langObserver","themeObserver","storageHandler","updateLang","updateTheme","onUnmounted","metric","store","avatarFile","avatarPreview","avatarStatus","passwordForm","verifyState","passwordStatus","displayName","fallbackInitial","avatarUrl","handleFileChange","event","file","clearSelection","uploadAvatar","docname","fd","uploadRes","uploadData","fileUrl","saveRes","saveData","verifyCurrent","updatePassword","current","confirm","resetPasswordForm","ImageIcon","Loader2","router","useRouter","levels","Challenge1","Challenge2","Challenge3","Challenge4","Challenge5","Challenge6","Challenge7","challenge_level_two_1","challenge_level_two_2","challenge_level_two_3","challenge_level_two_4","challenge_level_two_5","challenge_level_two_6","challenge_level_three_1","challenge_level_three_2","challenge_level_three_3","challenge_level_three_4","challenge_level_three_5","challenge_level_three_6","challenge_level_three_7","challenge_level_three_8","scoreStore","dashTiers","scoreTier","scoreTierName","scoreProgress","scoreFormatter","scoreDisplay","totalPlayersDisplay","scoreLoading","scoreProgressPercent","avatarInitial","fullName","scoreDisplayKey","progressSpring","scorePulse","viewScores","goto","componentRegistry","level","challenge","specialViews","MyScores","SettingsPage","extraView","shellTransitioning","isCompact","globalToasts","disposeToastListener","animateShell","dismissToast","switchLang","switchTheme","handleViewportChange","compact","sidebarCollapsed","handleClickOutside","profileRef","profileOpen","fetchMe","prof","expandedLevels","lvl","selectedLevel","selectedChallenge","toggleSidebar","logout","toggleLevel","levelId","isExpanded","selectChallenge","challengeId","isActiveChallenge","currentSelection","l","currentComponent","detail","lifetime","_TransitionGroup","_withModifiers","scoreRankDisplay","_hoisted_34","_hoisted_38","_hoisted_44","_hoisted_45","_hoisted_48","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_68","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_mergeProps","_hoisted_74","createRouter","createWebHashHistory","Login","Home","__vitePreload","createApp","App"],"ignoreList":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],"sources":["../../../../frontend/src/App.vue","../../../../frontend/src/components/Index.vue","../../../../frontend/node_modules/lucide-vue-next/dist/esm/shared/src/utils.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/defaultAttributes.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/Icon.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/createLucideIcon.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/activity.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/award.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/check.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/chevron-down.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/chevron-left.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/circle.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/crown.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/diamond.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/eraser.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/hand.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/image.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/key-round.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/loader-circle.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/log-out.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/menu.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/moon.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/refresh-cw.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/rotate-ccw.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/settings.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/shield-check.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/sparkles.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/square.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/sun.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/target.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/trending-up.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/triangle.js","../../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/upload.js","../../../../frontend/src/assets/sounds/success.mp3","../../../../frontend/src/assets/sounds/clap.mp3","../../../../frontend/src/assets/sounds/wrong.mp3","../../../../frontend/src/pages/challenges/challenge_1.vue","../../../../frontend/src/assets/sounds/success2.mp3","../../../../frontend/src/assets/sounds/wrong2.mp3","../../../../frontend/src/pages/challenges/challenge_2.vue","../../../../frontend/src/assets/sounds/success3.mp3","../../../../frontend/src/assets/sounds/wrong3.mp3","../../../../frontend/src/pages/challenges/challenge_3.vue","../../../../frontend/src/assets/sounds/success4.mp3","../../../../frontend/src/assets/sounds/wrong4.mp3","../../../../frontend/src/pages/challenges/challenge_4.vue","../../../../frontend/src/assets/sounds/wrong5.mp3","../../../../frontend/src/pages/challenges/challenge_5.vue","../../../../frontend/src/pages/challenges/challenge_6.vue","../../../../frontend/src/pages/challenges/challenge_7.vue","../../../../frontend/src/assets/sounds/oh_no.mp3","../../../../frontend/src/pages/challenges/challenge_level_two_1.vue","../../../../frontend/src/pages/challenges/challenge_level_two_2.vue","../../../../frontend/src/pages/challenges/challenge_level_two_3.vue","../../../../frontend/src/pages/challenges/challenge_level_two_4.vue","../../../../frontend/src/pages/challenges/challenge_level_two_5.vue","../../../../frontend/src/pages/challenges/challenge_level_two_6.vue","../../../../frontend/src/pages/challenges/challenge_level_three_1.vue","../../../../frontend/src/pages/challenges/challenge_level_three_2.vue","../../../../frontend/src/pages/challenges/challenge_level_three_3.vue","../../../../frontend/src/pages/challenges/challenge_level_three_4.vue","../../../../frontend/src/pages/challenges/challenge_level_three_5.vue","../../../../frontend/src/pages/challenges/challenge_level_three_6.vue","../../../../frontend/src/pages/challenges/challenge_level_three_7.vue","../../../../frontend/src/pages/challenges/challenge_level_three_8.vue","../../../../frontend/src/utils/toastBus.js","../../../../frontend/src/composables/useGameScore.js","../../../../frontend/src/pages/other/my_scores.vue","../../../../frontend/src/pages/other/settings.vue","../../../../frontend/src/components/Dashboard.vue","../../../../frontend/src/router/index.js","../../../../frontend/src/main.js"],"sourcesContent":["<script setup>\n</script>\n\n<template>\n  <!-- <div class=\"min-h-screen bg-base-200\">\n\n    <div class=\"navbar bg-base-100 shadow mb-6 px-4\">\n      <div class=\"flex-1 font-semibold\">Mathematics Leaders</div>\n      <div class=\"flex-none gap-2\">\n        <RouterLink class=\"btn btn-ghost\" to=\"/\">Home</RouterLink>\n        <RouterLink class=\"btn btn-ghost\" to=\"/login\">Login</RouterLink>\n        <RouterLink class=\"btn btn-primary\" to=\"/register\">Register</RouterLink>\n      </div>\n    </div> -->\n\n    <!-- Page Content -->\n    <main class=\"p-6\">\n      <!-- <div class=\"p-6\">I render </div> -->\n      <RouterView />\n    </main>\n  <!-- </div> -->\n</template>\n","<script setup>\nimport { ref, computed, watch, onMounted } from 'vue'\n\nconst lang = ref(localStorage.getItem('ml_lang') || 'ar')\nconst dir = computed(() => (lang.value === 'ar' ? 'rtl' : 'ltr'))\nconst t = (key) => ({\n  en: {\n    signin: 'Sign In',\n    signup: 'Create Account',\n    username: 'Username',\n    password: 'Password',\n    confirm: 'Confirm Password',\n    login: 'Login',\n    register: 'Signup',\n    toSignup: 'Create account',\n    toSignin: 'Back to login',\n    forgot: 'Forgot password?'\n  },\n  ar: {\n    signin: ' ',\n    signup: ' ',\n    username: ' ',\n    password: ' ',\n    confirm: '  ',\n    login: '',\n    register: '',\n    toSignup: ' ',\n    toSignin: '  ',\n    forgot: '  '\n  }\n}[lang.value][key])\n\nconst isArabic = computed(() => lang.value === 'ar')\nfunction toggleLang() {\n  lang.value = isArabic.value ? 'en' : 'ar'\n}\n\nconst theme = ref(localStorage.getItem('ml_theme') || 'light')\nconst isDark = computed(() => theme.value === 'dark')\nconst themeToggleText = computed(() => (isArabic.value ? (isDark.value ? '' : '') : isDark.value ? 'Light' : 'Dark'))\nconst themeAria = computed(() =>\n  isArabic.value\n    ? isDark.value\n      ? '   '\n      : '   '\n    : isDark.value\n    ? 'Switch to light theme'\n    : 'Switch to dark theme'\n)\nfunction toggleTheme() {\n  theme.value = isDark.value ? 'light' : 'dark'\n}\n\nfunction applyTheme(value) {\n  document.documentElement.setAttribute('data-ml-theme', value)\n}\n\nwatch(lang, (value) => {\n  localStorage.setItem('ml_lang', value)\n  document.documentElement.dir = dir.value\n  document.documentElement.lang = value\n})\n\nwatch(theme, (value) => {\n  localStorage.setItem('ml_theme', value)\n  applyTheme(value)\n})\n\nonMounted(() => {\n  document.documentElement.dir = dir.value\n  document.documentElement.lang = lang.value\n  applyTheme(theme.value)\n})\n\nconst showSignup = ref(false)\nconst inForm = ref({ username: '', password: '' })\nconst upForm = ref({ username: '', password: '', confirm: '' })\nconst submitting = ref(false)\nconst notice = ref(null)\n\nwatch(showSignup, () => {\n  notice.value = null\n})\n\nconst logoUrl = new URL('../assets/images/logo3.jpeg', import.meta.url).href\n\nconst heroTitle = computed(() => (isArabic.value ? '  ' : 'Mathematics Leaders Platform'))\nconst heroSubtitle = computed(() =>\n  isArabic.value\n    ? '       .'\n    : 'Master mathematics with playful, interactive journeys built for young leaders.'\n)\nconst heroHighlights = computed(() =>\n  isArabic.value\n    ? ['    ', '   ', '    ']\n    : ['Interactive, AI-guided programmes', 'Real-time progress insights', 'A supportive teacher & student community']\n)\nconst statBlocks = computed(() =>\n  isArabic.value\n    ? [\n        { value: '12+', label: '  ' },\n        { value: '4K', label: ' ' },\n        { value: '92%', label: '  ' }\n      ]\n    : [\n        { value: '12+', label: 'Adaptive learning tracks' },\n        { value: '4K', label: 'Active learners' },\n        { value: '92%', label: 'Task completion rate' }\n      ]\n)\n\nconst BASE = ''\n\nasync function get(url, params = {}) {\n  const qs = new URLSearchParams(params).toString()\n  const response = await fetch(BASE + url + (qs ? `?${qs}` : ''), {\n    method: 'GET',\n    credentials: 'include'\n  })\n  const data = await response.json().catch(() => ({}))\n  if (!response.ok) throw data\n  return data\n}\n\nfunction extractErr(error) {\n  if (typeof error === 'string') return error\n  if (error?._server_messages) {\n    try {\n      const list = JSON.parse(error._server_messages)\n      const first = list?.[0] && JSON.parse(list[0])\n      return first?.message || first?._error_message || 'Invalid Request'\n    } catch {}\n  }\n  return error?.message || error?.exc || 'Invalid Request'\n}\n\nfunction goHome(profile) {\n  const payload = profile || { username: inForm.value.username }\n  localStorage.setItem('ml_profile', JSON.stringify({ ...payload, language: lang.value }))\n  window.location.href = '/math-leaders-games/#/home'\n}\n\nasync function submit() {\n  submitting.value = true\n  notice.value = null\n  try {\n    if (showSignup.value) {\n      if (!upForm.value.username || !upForm.value.password || !upForm.value.confirm) {\n        throw {\n          message: isArabic.value ? '   .' : 'Please fill all fields.'\n        }\n      }\n      if (upForm.value.password !== upForm.value.confirm) {\n        throw {\n          message: isArabic.value ? '   .' : 'Passwords do not match.'\n        }\n      }\n\n      await get('/api/method/mathematics_leaders.api.signup_and_login.signup_user', {\n        username: upForm.value.username,\n        password: upForm.value.password,\n        language: lang.value\n      })\n\n      const loginRes = await get('/api/method/mathematics_leaders.api.signup_and_login.verify_login', {\n        usr: upForm.value.username,\n        pwd: upForm.value.password\n      })\n\n      goHome(loginRes?.message?.profile || { username: upForm.value.username })\n    } else {\n      const loginRes = await get('/api/method/mathematics_leaders.api.signup_and_login.verify_login', {\n        usr: inForm.value.username,\n        pwd: inForm.value.password\n      })\n      goHome(loginRes?.message?.profile || { username: inForm.value.username })\n    }\n  } catch (error) {\n    notice.value = extractErr(error)\n  } finally {\n    submitting.value = false\n  }\n}\n</script>\n\n<template>\n  <section :class=\"['landing', theme]\" :dir=\"dir\">\n    <div class=\"background\" aria-hidden=\"true\">\n      <span class=\"glow glow-one\"></span>\n      <span class=\"glow glow-two\"></span>\n      <span class=\"glow glow-three\"></span>\n      <span class=\"grid\"></span>\n    </div>\n\n    <div class=\"floating-controls\">\n      <button\n        type=\"button\"\n        class=\"control-btn theme-toggle\"\n        :aria-label=\"themeAria\"\n        @click=\"toggleTheme\"\n      >\n        <span class=\"control-icon\" aria-hidden=\"true\">\n          <svg v-if=\"isDark\" viewBox=\"0 0 24 24\" focusable=\"false\">\n            <circle cx=\"12\" cy=\"12\" r=\"4.2\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.6\" />\n            <line x1=\"12\" y1=\"2.4\" x2=\"12\" y2=\"5.4\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n            <line x1=\"12\" y1=\"18.6\" x2=\"12\" y2=\"21.6\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n            <line x1=\"2.4\" y1=\"12\" x2=\"5.4\" y2=\"12\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n            <line x1=\"18.6\" y1=\"12\" x2=\"21.6\" y2=\"12\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n            <line x1=\"5.4\" y1=\"5.4\" x2=\"7.7\" y2=\"7.7\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n            <line x1=\"16.3\" y1=\"16.3\" x2=\"18.6\" y2=\"18.6\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n            <line x1=\"5.4\" y1=\"18.6\" x2=\"7.7\" y2=\"16.3\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n            <line x1=\"16.3\" y1=\"7.7\" x2=\"18.6\" y2=\"5.4\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" />\n          </svg>\n          <svg v-else viewBox=\"0 0 24 24\" focusable=\"false\">\n            <path\n              d=\"M15.8 21.2a7.6 7.6 0 0 1-6.9-10.6 6.9 6.9 0 0 0 8.5 8.5 7.6 7.6 0 0 1-1.6 2.1Z\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              stroke-width=\"1.6\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n        </span>\n        <span class=\"control-text\">{{ themeToggleText }}</span>\n      </button>\n\n      <button\n        type=\"button\"\n        class=\"control-btn lang-toggle\"\n        :aria-label=\"isArabic ? 'Switch to English' : '  '\"\n        @click=\"toggleLang\"\n      >\n        <span>{{ isArabic ? 'EN' : '' }}</span>\n      </button>\n    </div>\n\n    <div class=\"landing__wrapper\">\n      <div class=\"landing__intro\">\n        <div class=\"logo-card\">\n          <img :src=\"logoUrl\" alt=\"  \" />\n        </div>\n        <h1 class=\"intro__title\">{{ heroTitle }}</h1>\n        <p class=\"intro__subtitle\">{{ heroSubtitle }}</p>\n        <ul class=\"feature-grid\">\n          <li v-for=\"(feature, idx) in heroHighlights\" :key=\"idx\" class=\"feature-item\">\n            <span class=\"feature-index\">0{{ idx + 1 }}</span>\n            <span class=\"feature-text\">{{ feature }}</span>\n          </li>\n        </ul>\n        <div class=\"stats-row\">\n          <div v-for=\"(stat, idx) in statBlocks\" :key=\"idx\" class=\"stat-card\">\n            <span class=\"stat-value\">{{ stat.value }}</span>\n            <span class=\"stat-label\">{{ stat.label }}</span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"landing__auth\">\n        <div class=\"auth-card\">\n          <div class=\"auth-tabs\" role=\"tablist\">\n            <button\n              type=\"button\"\n              class=\"tab-btn\"\n              :class=\"{ active: !showSignup }\"\n              role=\"tab\"\n              :aria-selected=\"!showSignup\"\n              @click=\"showSignup = false\"\n            >\n              {{ t('signin') }}\n            </button>\n            <button\n              type=\"button\"\n              class=\"tab-btn\"\n              :class=\"{ active: showSignup }\"\n              role=\"tab\"\n              :aria-selected=\"showSignup\"\n              @click=\"showSignup = true\"\n            >\n              {{ t('signup') }}\n            </button>\n          </div>\n\n          <transition name=\"slide-fade\" mode=\"out-in\">\n            <form v-if=\"!showSignup\" key=\"signin\" class=\"auth-form\" @submit.prevent=\"submit\">\n              <div class=\"input-field\">\n                <label :for=\"isArabic ? 'signin-username-ar' : 'signin-username-en'\">{{ t('username') }}</label>\n                <input\n                  :id=\"isArabic ? 'signin-username-ar' : 'signin-username-en'\"\n                  v-model=\"inForm.username\"\n                  type=\"text\"\n                  :placeholder=\"t('username')\"\n                  autocomplete=\"username\"\n                  required\n                />\n              </div>\n              <div class=\"input-field\">\n                <label :for=\"isArabic ? 'signin-password-ar' : 'signin-password-en'\">{{ t('password') }}</label>\n                <input\n                  :id=\"isArabic ? 'signin-password-ar' : 'signin-password-en'\"\n                  v-model=\"inForm.password\"\n                  type=\"password\"\n                  :placeholder=\"t('password')\"\n                  autocomplete=\"current-password\"\n                  required\n                />\n              </div>\n              <div class=\"form-meta\">\n                <a href=\"#\">{{ t('forgot') }}</a>\n              </div>\n              <button class=\"primary-btn\" type=\"submit\" :disabled=\"submitting\">\n                <span>{{ t('login') }}</span>\n              </button>\n              <p class=\"switch-text\">\n                {{ isArabic ? '  ' : \"Don't have an account?\" }}\n                <button type=\"button\" @click=\"showSignup = true\">{{ t('toSignup') }}</button>\n              </p>\n            </form>\n\n            <form v-else key=\"signup\" class=\"auth-form\" @submit.prevent=\"submit\">\n              <div class=\"input-field\">\n                <label :for=\"isArabic ? 'signup-username-ar' : 'signup-username-en'\">{{ t('username') }}</label>\n                <input\n                  :id=\"isArabic ? 'signup-username-ar' : 'signup-username-en'\"\n                  v-model=\"upForm.username\"\n                  type=\"text\"\n                  :placeholder=\"t('username')\"\n                  autocomplete=\"username\"\n                  required\n                />\n              </div>\n              <div class=\"input-field\">\n                <label :for=\"isArabic ? 'signup-password-ar' : 'signup-password-en'\">{{ t('password') }}</label>\n                <input\n                  :id=\"isArabic ? 'signup-password-ar' : 'signup-password-en'\"\n                  v-model=\"upForm.password\"\n                  type=\"password\"\n                  :placeholder=\"t('password')\"\n                  autocomplete=\"new-password\"\n                  required\n                />\n              </div>\n              <div class=\"input-field\">\n                <label :for=\"isArabic ? 'signup-confirm-ar' : 'signup-confirm-en'\">{{ t('confirm') }}</label>\n                <input\n                  :id=\"isArabic ? 'signup-confirm-ar' : 'signup-confirm-en'\"\n                  v-model=\"upForm.confirm\"\n                  type=\"password\"\n                  :placeholder=\"t('confirm')\"\n                  autocomplete=\"new-password\"\n                  required\n                />\n              </div>\n              <button class=\"primary-btn\" type=\"submit\" :disabled=\"submitting\">\n                <span>{{ t('register') }}</span>\n              </button>\n              <p class=\"switch-text\">\n                {{ isArabic ? '  ' : 'Already have an account?' }}\n                <button type=\"button\" @click=\"showSignup = false\">{{ t('toSignin') }}</button>\n              </p>\n            </form>\n          </transition>\n\n          <p v-if=\"notice\" class=\"auth-notice\">{{ notice }}</p>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<style scoped>\n.landing {\n  position: relative;\n  min-height: 100vh;\n  padding: clamp(32px, 6vw, 64px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  background: var(--bg-gradient);\n  color: var(--text-primary);\n  transition: background 0.4s ease, color 0.4s ease;\n  --bg-gradient: linear-gradient(135deg, #fdfcf8 0%, #f4f6ef 45%, #e6efe2 100%);\n  --text-primary: #1f2a24;\n  --text-secondary: #335343;\n  --accent-green: #0f8a3e;\n  --accent-green-dark: #1c6b39;\n  --accent-gold: #c6a034;\n  --accent-gold-soft: rgba(198, 160, 52, 0.35);\n  --surface: rgba(255, 255, 255, 0.92);\n  --surface-soft: linear-gradient(120deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.65));\n  --surface-card-border: rgba(198, 160, 52, 0.28);\n  --surface-card-shadow: 0 30px 60px rgba(31, 42, 36, 0.18);\n  --feature-shadow: 0 12px 26px rgba(15, 138, 62, 0.12);\n  --stat-bg: rgba(24, 77, 45, 0.08);\n  --stat-border: rgba(24, 77, 45, 0.12);\n  --input-border: rgba(31, 42, 36, 0.12);\n  --input-bg: rgba(255, 255, 255, 0.96);\n  --input-focus-ring: rgba(15, 138, 62, 0.12);\n  --notice-bg: rgba(143, 41, 33, 0.1);\n  --notice-color: #8f2921;\n  --grid-color: rgba(31, 42, 36, 0.06);\n  --grid-opacity: 0.5;\n  --floating-shadow: 0 14px 30px rgba(15, 138, 62, 0.32);\n  --floating-shadow-hover: 0 18px 40px rgba(15, 138, 62, 0.36);\n  --control-icon: #ffffff;\n  --glow-green: rgba(15, 138, 62, 0.35);\n  --glow-gold: rgba(198, 160, 52, 0.4);\n  --glow-white: rgba(255, 255, 255, 0.3);\n  --tab-track: rgba(24, 77, 45, 0.08);\n  --primary-btn-shadow: 0 16px 28px rgba(15, 138, 62, 0.25);\n  --primary-btn-hover-shadow: 0 24px 36px rgba(15, 138, 62, 0.3);\n}\n\n.landing.dark {\n  --bg-gradient: linear-gradient(135deg, #050806 0%, #0e2419 45%, #041009 100%);\n  --text-primary: #f0f6f3;\n  --text-secondary: #c1d6cb;\n  --accent-green: #5ad48c;\n  --accent-green-dark: #2f9a54;\n  --accent-gold: #d6ba68;\n  --accent-gold-soft: rgba(214, 186, 104, 0.55);\n  --surface: rgba(10, 22, 16, 0.86);\n  --surface-soft: linear-gradient(140deg, rgba(30, 49, 38, 0.92), rgba(16, 30, 24, 0.78));\n  --surface-card-border: rgba(90, 212, 140, 0.22);\n  --surface-card-shadow: 0 32px 60px rgba(0, 0, 0, 0.45);\n  --feature-shadow: 0 16px 28px rgba(0, 0, 0, 0.36);\n  --stat-bg: rgba(20, 46, 33, 0.72);\n  --stat-border: rgba(90, 212, 140, 0.26);\n  --input-border: rgba(255, 255, 255, 0.14);\n  --input-bg: rgba(14, 28, 21, 0.9);\n  --input-focus-ring: rgba(90, 212, 140, 0.2);\n  --notice-bg: rgba(217, 99, 91, 0.22);\n  --notice-color: #ffd7d4;\n  --grid-color: rgba(255, 255, 255, 0.08);\n  --grid-opacity: 0.25;\n  --floating-shadow: 0 18px 36px rgba(0, 0, 0, 0.45);\n  --floating-shadow-hover: 0 26px 46px rgba(0, 0, 0, 0.55);\n  --control-icon: #0d1a13;\n  --glow-green: rgba(62, 171, 115, 0.55);\n  --glow-gold: rgba(214, 186, 104, 0.46);\n  --glow-white: rgba(32, 54, 42, 0.55);\n  --tab-track: rgba(90, 212, 140, 0.12);\n  --primary-btn-shadow: 0 20px 34px rgba(0, 0, 0, 0.4);\n  --primary-btn-hover-shadow: 0 28px 42px rgba(0, 0, 0, 0.5);\n}\n\n.background {\n  position: absolute;\n  inset: 0;\n  pointer-events: none;\n}\n\n.glow {\n  position: absolute;\n  filter: blur(120px);\n  opacity: 0.55;\n  transition: background 0.4s ease, opacity 0.4s ease;\n}\n\n.glow-one {\n  top: -10%;\n  left: 15%;\n  width: 320px;\n  height: 320px;\n  background: var(--glow-green);\n}\n\n.glow-two {\n  bottom: -20%;\n  right: 10%;\n  width: 420px;\n  height: 420px;\n  background: var(--glow-gold);\n}\n\n.glow-three {\n  top: 40%;\n  right: 35%;\n  width: 260px;\n  height: 260px;\n  background: var(--glow-white);\n}\n\n.grid {\n  position: absolute;\n  inset: 0;\n  background-image: radial-gradient(circle at 1px 1px, var(--grid-color) 1px, transparent 0);\n  background-size: 32px 32px;\n  opacity: var(--grid-opacity);\n  transition: opacity 0.4s ease;\n}\n\n.floating-controls {\n  position: absolute;\n  top: clamp(20px, 4vw, 36px);\n  inset-inline-end: clamp(20px, 4vw, 36px);\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 12px;\n  z-index: 25;\n}\n\n.control-btn {\n  border: none;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  padding: 12px 18px;\n  border-radius: 22px;\n  background: linear-gradient(135deg, var(--accent-green), var(--accent-gold));\n  color: #ffffff;\n  font-weight: 700;\n  font-size: 14px;\n  cursor: pointer;\n  box-shadow: var(--floating-shadow);\n  transition: transform 0.25s ease, box-shadow 0.25s ease, background 0.3s ease;\n}\n\n.control-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: var(--floating-shadow-hover);\n}\n\n.control-btn:focus-visible {\n  outline: none;\n  box-shadow: var(--floating-shadow-hover), 0 0 0 3px rgba(255, 255, 255, 0.32);\n}\n\n.control-icon {\n  display: grid;\n  place-items: center;\n  color: var(--control-icon);\n}\n\n.control-icon svg {\n  width: 26px;\n  height: 26px;\n}\n\n.control-text {\n  font-size: 12px;\n  letter-spacing: 0.08em;\n  text-transform: uppercase;\n}\n\n.lang-toggle {\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  padding: 0;\n  font-size: 18px;\n  letter-spacing: 0.08em;\n}\n\n.lang-toggle span {\n  line-height: 1;\n}\n\n.theme-toggle .control-icon {\n  color: #ffffff;\n}\n\n.landing__wrapper {\n  position: relative;\n  display: grid;\n  gap: clamp(32px, 5vw, 64px);\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n  max-width: 1120px;\n  width: 100%;\n  z-index: 10;\n}\n\n.landing__intro {\n  display: flex;\n  flex-direction: column;\n  gap: clamp(24px, 3vw, 36px);\n}\n\n.logo-card {\n  position: relative;\n  width: clamp(110px, 14vw, 160px);\n  aspect-ratio: 1 / 1;\n  border-radius: 24px;\n  display: grid;\n  place-items: center;\n  background: var(--surface-soft);\n  border: 1px solid var(--surface-card-border);\n  box-shadow: var(--surface-card-shadow);\n  backdrop-filter: blur(16px);\n  overflow: hidden;\n  animation: logoFloat 6s ease-in-out infinite;\n}\n\n.logo-card::before,\n.logo-card::after {\n  content: '';\n  position: absolute;\n  border-radius: 50%;\n  inset: 16%;\n  pointer-events: none;\n}\n\n.logo-card::before {\n  background: radial-gradient(circle, rgba(255, 255, 255, 0.55) 0%, transparent 70%);\n  opacity: 0.65;\n  animation: logoPulse 5.8s ease-in-out infinite;\n}\n\n.logo-card::after {\n  border: 2px solid var(--accent-gold-soft);\n  animation: logoPulse 4.5s ease-in-out infinite;\n}\n\n.logo-card img {\n  position: relative;\n  width: 76%;\n  height: auto;\n  z-index: 1;\n}\n\n.intro__title {\n  font-size: clamp(32px, 4vw, 52px);\n  font-weight: 800;\n  color: var(--text-primary);\n  margin: 0;\n}\n\n.intro__subtitle {\n  font-size: clamp(16px, 2.2vw, 20px);\n  line-height: 1.7;\n  max-width: 480px;\n  margin: 0;\n  color: var(--text-secondary);\n}\n\n.feature-grid {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: grid;\n  gap: 18px;\n}\n\n.feature-item {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  padding: 16px 20px;\n  border-radius: 18px;\n  background: var(--surface-soft);\n  box-shadow: var(--feature-shadow);\n  transition: transform 0.25s ease, box-shadow 0.25s ease, background 0.3s ease;\n}\n\n.feature-item:hover {\n  transform: translateY(-6px);\n}\n\n.feature-index {\n  font-weight: 700;\n  color: var(--accent-gold);\n  font-size: 18px;\n}\n\n.feature-text {\n  font-size: 16px;\n  color: var(--text-primary);\n}\n\n.stats-row {\n  display: grid;\n  grid-template-columns: repeat(3, minmax(0, 1fr));\n  gap: 16px;\n}\n\n.stat-card {\n  padding: 18px 20px;\n  border-radius: 16px;\n  background: var(--stat-bg);\n  border: 1px solid var(--stat-border);\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  text-align: start;\n  transition: background 0.3s ease, border 0.3s ease;\n}\n\n.stat-value {\n  font-size: 24px;\n  font-weight: 700;\n  color: var(--accent-green);\n}\n\n.stat-label {\n  font-size: 14px;\n  color: var(--text-secondary);\n}\n\n.landing__auth {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.auth-card {\n  width: min(100%, 420px);\n  padding: clamp(24px, 3vw, 32px);\n  border-radius: 28px;\n  background: var(--surface);\n  box-shadow: var(--surface-card-shadow);\n  backdrop-filter: blur(16px);\n  border: 1px solid var(--surface-card-border);\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n  transition: background 0.3s ease, border 0.3s ease, box-shadow 0.3s ease;\n}\n\n.auth-tabs {\n  display: grid;\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n  background: var(--tab-track);\n  border-radius: 18px;\n  padding: 4px;\n}\n\n.tab-btn {\n  border: none;\n  padding: 12px 16px;\n  background: transparent;\n  border-radius: 14px;\n  font-weight: 700;\n  font-size: 15px;\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: background 0.25s ease, color 0.25s ease, transform 0.25s ease;\n}\n\n.tab-btn.active {\n  background: linear-gradient(135deg, var(--accent-green), var(--accent-gold));\n  color: #ffffff;\n  transform: translateY(-2px);\n  box-shadow: 0 14px 24px rgba(0, 0, 0, 0.2);\n}\n\n.auth-form {\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n}\n\n.input-field {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.input-field label {\n  font-weight: 600;\n  color: var(--text-secondary);\n  font-size: 14px;\n}\n\n.input-field input {\n  padding: 14px 16px;\n  border-radius: 14px;\n  border: 1px solid var(--input-border);\n  background: var(--input-bg);\n  font-size: 15px;\n  color: var(--text-primary);\n  transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.3s ease;\n}\n\n.input-field input:focus {\n  border-color: var(--accent-green);\n  box-shadow: 0 0 0 4px var(--input-focus-ring);\n  outline: none;\n}\n\n.form-meta {\n  text-align: end;\n  font-size: 13px;\n}\n\n.form-meta a {\n  color: var(--accent-green);\n  text-decoration: none;\n  font-weight: 600;\n}\n\n.primary-btn {\n  position: relative;\n  border: none;\n  border-radius: 16px;\n  padding: 14px 16px;\n  font-weight: 700;\n  font-size: 16px;\n  background: linear-gradient(135deg, var(--accent-green), var(--accent-green-dark));\n  color: #ffffff;\n  cursor: pointer;\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\n  box-shadow: var(--primary-btn-shadow);\n}\n\n.primary-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  box-shadow: none;\n}\n\n.primary-btn:not(:disabled):hover {\n  transform: translateY(-2px);\n  box-shadow: var(--primary-btn-hover-shadow);\n}\n\n.primary-btn:focus-visible {\n  outline: none;\n  box-shadow: var(--primary-btn-hover-shadow), 0 0 0 3px var(--input-focus-ring);\n}\n\n.switch-text {\n  font-size: 14px;\n  color: var(--text-secondary);\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  justify-content: center;\n}\n\n.switch-text button {\n  border: none;\n  background: none;\n  color: var(--accent-gold);\n  font-weight: 700;\n  cursor: pointer;\n}\n\n.auth-notice {\n  text-align: center;\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--notice-color);\n  background: var(--notice-bg);\n  border-radius: 14px;\n  padding: 10px 14px;\n  transition: background 0.3s ease, color 0.3s ease;\n}\n\n.slide-fade-enter-active,\n.slide-fade-leave-active {\n  transition: all 0.28s ease;\n}\n\n.slide-fade-enter-from {\n  opacity: 0;\n  transform: translateY(12px);\n}\n\n.slide-fade-leave-to {\n  opacity: 0;\n  transform: translateY(-12px);\n}\n\n@keyframes logoFloat {\n  0%, 100% {\n    transform: translateY(0px);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n}\n\n@keyframes logoPulse {\n  0% {\n    transform: scale(0.92);\n    opacity: 0.55;\n  }\n  50% {\n    transform: scale(1.05);\n    opacity: 0;\n  }\n  100% {\n    transform: scale(0.92);\n    opacity: 0.55;\n  }\n}\n\n@media (max-width: 1024px) {\n  .landing__wrapper {\n    grid-template-columns: minmax(0, 1fr);\n  }\n\n  .landing__intro {\n    align-items: center;\n    text-align: center;\n  }\n\n  .intro__subtitle {\n    max-width: 580px;\n  }\n\n  .feature-item {\n    justify-content: center;\n  }\n\n  .stats-row {\n    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n  }\n}\n\n@media (max-width: 680px) {\n  .landing {\n    padding: 24px 20px 40px;\n  }\n\n  .floating-controls {\n    flex-direction: row;\n    align-items: center;\n    gap: 10px;\n  }\n\n  .theme-toggle {\n    padding: 10px 14px;\n  }\n\n  .lang-toggle {\n    width: 54px;\n    height: 54px;\n    font-size: 16px;\n  }\n\n  .feature-item {\n    padding: 14px 16px;\n  }\n\n  .auth-card {\n    padding: 22px;\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .logo-card,\n  .logo-card::before,\n  .logo-card::after,\n  .feature-item:hover,\n  .control-btn:hover {\n    animation: none;\n    transform: none;\n  }\n}\n</style>\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\nconst isEmptyString = (value) => value === \"\";\n\nexport { isEmptyString, mergeClasses, toCamelCase, toKebabCase, toPascalCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  \"stroke-width\": 2,\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport { mergeClasses, toKebabCase, toPascalCase, isEmptyString } from './shared/src/utils.js';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst Icon = ({\n  name,\n  iconNode,\n  absoluteStrokeWidth,\n  \"absolute-stroke-width\": absoluteStrokeWidthKebabCase,\n  strokeWidth,\n  \"stroke-width\": strokeWidthKebabCase,\n  size = defaultAttributes.width,\n  color = defaultAttributes.stroke,\n  ...props\n}, { slots }) => {\n  return h(\n    \"svg\",\n    {\n      ...defaultAttributes,\n      ...props,\n      width: size,\n      height: size,\n      stroke: color,\n      \"stroke-width\": isEmptyString(absoluteStrokeWidth) || isEmptyString(absoluteStrokeWidthKebabCase) || absoluteStrokeWidth === true || absoluteStrokeWidthKebabCase === true ? Number(strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"]) * 24 / Number(size) : strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"],\n      class: mergeClasses(\n        \"lucide\",\n        props.class,\n        ...name ? [`lucide-${toKebabCase(toPascalCase(name))}-icon`, `lucide-${toKebabCase(name)}`] : [\"lucide-icon\"]\n      )\n    },\n    [...iconNode.map((child) => h(...child)), ...slots.default ? [slots.default()] : []]\n  );\n};\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => (props, { slots, attrs }) => h(\n  Icon,\n  {\n    ...attrs,\n    ...props,\n    iconNode,\n    name: iconName\n  },\n  slots\n);\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Activity = createLucideIcon(\"activity\", [\n  [\n    \"path\",\n    {\n      d: \"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",\n      key: \"169zse\"\n    }\n  ]\n]);\n\nexport { Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Award = createLucideIcon(\"award\", [\n  [\n    \"path\",\n    {\n      d: \"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526\",\n      key: \"1yiouv\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"8\", r: \"6\", key: \"1vp47v\" }]\n]);\n\nexport { Award as default };\n//# sourceMappingURL=award.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronDown = createLucideIcon(\"chevron-down\", [\n  [\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]\n]);\n\nexport { ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronLeft = createLucideIcon(\"chevron-left\", [\n  [\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]\n]);\n\nexport { ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Circle = createLucideIcon(\"circle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n]);\n\nexport { Circle as default };\n//# sourceMappingURL=circle.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Crown = createLucideIcon(\"crown\", [\n  [\n    \"path\",\n    {\n      d: \"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z\",\n      key: \"1vdc57\"\n    }\n  ],\n  [\"path\", { d: \"M5 21h14\", key: \"11awu3\" }]\n]);\n\nexport { Crown as default };\n//# sourceMappingURL=crown.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Diamond = createLucideIcon(\"diamond\", [\n  [\n    \"path\",\n    {\n      d: \"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z\",\n      key: \"1f1r0c\"\n    }\n  ]\n]);\n\nexport { Diamond as default };\n//# sourceMappingURL=diamond.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eraser = createLucideIcon(\"eraser\", [\n  [\n    \"path\",\n    {\n      d: \"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21\",\n      key: \"g5wo59\"\n    }\n  ],\n  [\"path\", { d: \"m5.082 11.09 8.828 8.828\", key: \"1wx5vj\" }]\n]);\n\nexport { Eraser as default };\n//# sourceMappingURL=eraser.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Hand = createLucideIcon(\"hand\", [\n  [\"path\", { d: \"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2\", key: \"1fvzgz\" }],\n  [\"path\", { d: \"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2\", key: \"1kc0my\" }],\n  [\"path\", { d: \"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8\", key: \"10h0bg\" }],\n  [\n    \"path\",\n    {\n      d: \"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15\",\n      key: \"1s1gnw\"\n    }\n  ]\n]);\n\nexport { Hand as default };\n//# sourceMappingURL=hand.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Image = createLucideIcon(\"image\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", ry: \"2\", key: \"1m3agn\" }],\n  [\"circle\", { cx: \"9\", cy: \"9\", r: \"2\", key: \"af1f0g\" }],\n  [\"path\", { d: \"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\", key: \"1xmnt7\" }]\n]);\n\nexport { Image as default };\n//# sourceMappingURL=image.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst KeyRound = createLucideIcon(\"key-round\", [\n  [\n    \"path\",\n    {\n      d: \"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z\",\n      key: \"1s6t7t\"\n    }\n  ],\n  [\"circle\", { cx: \"16.5\", cy: \"7.5\", r: \".5\", fill: \"currentColor\", key: \"w0ekpg\" }]\n]);\n\nexport { KeyRound as default };\n//# sourceMappingURL=key-round.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LoaderCircle = createLucideIcon(\"loader-circle\", [\n  [\"path\", { d: \"M21 12a9 9 0 1 1-6.219-8.56\", key: \"13zald\" }]\n]);\n\nexport { LoaderCircle as default };\n//# sourceMappingURL=loader-circle.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LogOut = createLucideIcon(\"log-out\", [\n  [\"path\", { d: \"m16 17 5-5-5-5\", key: \"1bji2h\" }],\n  [\"path\", { d: \"M21 12H9\", key: \"dn1m92\" }],\n  [\"path\", { d: \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\", key: \"1uf3rs\" }]\n]);\n\nexport { LogOut as default };\n//# sourceMappingURL=log-out.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Menu = createLucideIcon(\"menu\", [\n  [\"path\", { d: \"M4 5h16\", key: \"1tepv9\" }],\n  [\"path\", { d: \"M4 12h16\", key: \"1lakjw\" }],\n  [\"path\", { d: \"M4 19h16\", key: \"1djgab\" }]\n]);\n\nexport { Menu as default };\n//# sourceMappingURL=menu.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Moon = createLucideIcon(\"moon\", [\n  [\n    \"path\",\n    {\n      d: \"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401\",\n      key: \"kfwtm\"\n    }\n  ]\n]);\n\nexport { Moon as default };\n//# sourceMappingURL=moon.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"refresh-cw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RotateCcw = createLucideIcon(\"rotate-ccw\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n]);\n\nexport { RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"settings\", [\n  [\n    \"path\",\n    {\n      d: \"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915\",\n      key: \"1i5ecw\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ShieldCheck = createLucideIcon(\"shield-check\", [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { ShieldCheck as default };\n//# sourceMappingURL=shield-check.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sparkles = createLucideIcon(\"sparkles\", [\n  [\n    \"path\",\n    {\n      d: \"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z\",\n      key: \"1s2grr\"\n    }\n  ],\n  [\"path\", { d: \"M20 2v4\", key: \"1rf3ol\" }],\n  [\"path\", { d: \"M22 4h-4\", key: \"gwowj6\" }],\n  [\"circle\", { cx: \"4\", cy: \"20\", r: \"2\", key: \"6kqj1y\" }]\n]);\n\nexport { Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Square = createLucideIcon(\"square\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }]\n]);\n\nexport { Square as default };\n//# sourceMappingURL=square.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sun = createLucideIcon(\"sun\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"path\", { d: \"M12 2v2\", key: \"tus03m\" }],\n  [\"path\", { d: \"M12 20v2\", key: \"1lh1kg\" }],\n  [\"path\", { d: \"m4.93 4.93 1.41 1.41\", key: \"149t6j\" }],\n  [\"path\", { d: \"m17.66 17.66 1.41 1.41\", key: \"ptbguv\" }],\n  [\"path\", { d: \"M2 12h2\", key: \"1t8f8n\" }],\n  [\"path\", { d: \"M20 12h2\", key: \"1q8mjw\" }],\n  [\"path\", { d: \"m6.34 17.66-1.41 1.41\", key: \"1m8zz5\" }],\n  [\"path\", { d: \"m19.07 4.93-1.41 1.41\", key: \"1shlcs\" }]\n]);\n\nexport { Sun as default };\n//# sourceMappingURL=sun.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Target = createLucideIcon(\"target\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"6\", key: \"1vlfrh\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"2\", key: \"1c9p78\" }]\n]);\n\nexport { Target as default };\n//# sourceMappingURL=target.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TrendingUp = createLucideIcon(\"trending-up\", [\n  [\"path\", { d: \"M16 7h6v6\", key: \"box55l\" }],\n  [\"path\", { d: \"m22 7-8.5 8.5-5-5L2 17\", key: \"1t1m79\" }]\n]);\n\nexport { TrendingUp as default };\n//# sourceMappingURL=trending-up.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Triangle = createLucideIcon(\"triangle\", [\n  [\n    \"path\",\n    { d: \"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\", key: \"14u9p9\" }\n  ]\n]);\n\nexport { Triangle as default };\n//# sourceMappingURL=triangle.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"upload\", [\n  [\"path\", { d: \"M12 3v12\", key: \"1x0j5s\" }],\n  [\"path\", { d: \"m17 8-5-5-5 5\", key: \"7q97r8\" }],\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","export default \"__VITE_ASSET__DoDbE3q3__\"","export default \"__VITE_ASSET__DqtGOgnA__\"","export default \"__VITE_ASSET__D8ec1TT4__\"","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Circle, Square, Triangle, Diamond } from 'lucide-vue-next'\n\n/* ===== props ===== */\nconst props = defineProps({\n  lang:  { type: String, default: 'ar' },\n  theme: { type: String, default: 'light' }\n})\nconst lang  = ref(props.lang)\nconst theme = ref(props.theme)\nwatch(()=>props.lang,  v=> lang.value  = v)\nwatch(()=>props.theme, v=> theme.value = v)\n\n/* ===== GET ===== */\nasync function get(url, params = {}) {\n  const qs = new URLSearchParams(params).toString()\n  const r  = await fetch(url + (qs ? `?${qs}` : ''), { method:'GET', credentials:'include' })\n  const data = await r.json().catch(()=> ({}))\n  if(!r.ok) throw data\n  return data\n}\n\n/* ===== i18n ===== */\nconst dir  = computed(() => (lang.value === 'ar' ? 'rtl' : 'ltr'))\nconst T = {\n  ar:{title:' 1:      ()',subtitle:'       .',digits:'',check:'',reset:' ',newQ:' ',correctBig:'!',correctSub:'     .',wrong:'   '},\n  en:{title:'Challenge 1: Column addition with missing (symbol) digits',subtitle:'Drag digits onto symbols until the addition becomes correct.',digits:'Digits',check:'Check',reset:'Reset',newQ:'New Question',correctBig:'Great!',correctSub:'Correct  You earned a point.',wrong:'Try again '}\n}\nconst t = (k)=>T[lang.value][k]\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong.mp3'\n\nconst sndSuccess = new Audio(successUrl)\nconst sndClap    = new Audio(clapUrl)\nconst sndWrong   = new Audio(wrongUrl)\n\nsndSuccess.preload = 'auto'\nsndClap.preload    = 'auto'\nsndWrong.preload   = 'auto'\n\n/* ===== shapes (lucide) ===== */\nconst SHAPE_COMP = { circle: Circle, square: Square, triangle: Triangle, diamond: Diamond }\nconst SHAPE_TYPES = ['circle','square','triangle','diamond']\nconst shapeComp = t => SHAPE_COMP[t] || Circle\n\n/* ===== utils ===== */\nfunction rndInt(a,b){ return a + Math.floor(Math.random()*(b-a+1)) }\nfunction shuffle(a){ return a.slice().sort(()=>Math.random()-0.5) }\n\n/* ===== state ===== */\nconst q     = reactive({ aStr:'', bStr:'', sStr:'', hiddenMap:{}, assignMap:{}, usedShapes:[] })\nconst rowA  = ref([])   // tokens\nconst rowB  = ref([])\nconst rowS  = ref([])\n\n/* ===== generate puzzle ===== */\nfunction newPuzzle(){\n  // 1)  \n  const dA = rndInt(2,3), dB = rndInt(2,3)\n  const A  = rndInt(10**(dA-1), 10**dA-1)\n  const B  = rndInt(10**(dB-1), 10**dB-1)\n  const S  = A + B\n  q.aStr = String(A); q.bStr = String(B); q.sStr = String(S)\n\n  // 2)        \n  const digitsPresent = Array.from(new Set((q.aStr+q.bStr+q.sStr).split('').map(n=>+n)))\n  const howMany       = Math.min(rndInt(2,3), digitsPresent.length)\n  const hideDigits    = shuffle(digitsPresent).slice(0, howMany)\n  const typesPicked   = shuffle(SHAPE_TYPES).slice(0, howMany)\n\n  q.hiddenMap = {}\n  hideDigits.forEach((d,i)=>{ q.hiddenMap[typesPicked[i]] = d })\n\n  // 3)      \n  const used = new Set()\n  function tokenize(str){\n    return str.split('').map(ch=>{\n      const d  = +ch\n      const sh = Object.entries(q.hiddenMap).find(([k,v])=>v===d)?.[0]\n      if (sh){ used.add(sh); return {t:'shape', v:sh} }\n      return {t:'digit', v:ch}\n    })\n  }\n  rowA.value = tokenize(q.aStr)\n  rowB.value = tokenize(q.bStr)\n  rowS.value = tokenize(q.sStr)\n\n  // 4)      \n  q.usedShapes = Array.from(used)\n  q.assignMap  = Object.fromEntries(q.usedShapes.map(s=>[s,null]))\n\n  //      \n  if(q.usedShapes.length===0) newPuzzle()\n}\n\n/* ===== DnD ===== */\nfunction onDigitDragStart(e, digit){ e.dataTransfer.setData('text/plain', String(digit)) }\nfunction onShapeDrop(e, shape){\n  const d = Number(e.dataTransfer.getData('text/plain'))\n  if(Number.isNaN(d)) return\n  if(Object.values(q.assignMap).includes(d) && q.assignMap[shape]!==d) return\n  q.assignMap[shape] = d\n  checkNow()\n}\nfunction onDragOver(e){ e.preventDefault() }\nfunction resetAssign(){ Object.keys(q.assignMap).forEach(sh=> q.assignMap[sh]=null) }\n\n/* ===== check ===== */\nconst isFilled = computed(()=> q.usedShapes.every(sh => Number.isInteger(q.assignMap[sh])) )\nfunction makeNumber(tokens){\n  return Number(tokens.map(tok => tok.t==='digit' ? tok.v : (q.assignMap[tok.v] ?? '?')).join(''))\n}\nfunction isCorrect(){\n  if(!isFilled.value) return false\n  const A = makeNumber(rowA.value), B = makeNumber(rowB.value), S = makeNumber(rowS.value)\n  return !([A,B,S].some(v => String(v).includes('?'))) && (A+B===S)\n}\n\nconst overlay = reactive({ open:false, good:true })\nasync function checkNow(){\n  if(!isFilled.value) return\n  if(isCorrect()){\n    try{ sndSuccess.currentTime=0; sndSuccess.play().catch(()=>{}) }catch{}\n    try{ sndClap.currentTime=0; sndClap.play().catch(()=>{}) }catch{}\n    overlay.open = true; overlay.good = true\n    get('/api/method/mathematics_leaders.api.game_points.add_point', { amount: 1 }).catch(()=>{})\n  }else{\n    try{ sndWrong.currentTime=0; sndWrong.play().catch(()=>{}) }catch{}\n    pushToast(t('wrong'),'warn')\n  }\n}\nfunction nextQuestion(){ overlay.open=false; newPuzzle() }\n\n/* ===== Toast ===== */\nconst toasts = ref([])\nfunction pushToast(msg,type='ok'){\n  const id = Math.random().toString(36).slice(2)\n  toasts.value.push({id,msg,type})\n  setTimeout(()=> toasts.value = toasts.value.filter(x=>x.id!==id), 1800)\n}\n\n/* init */\nonMounted(()=> newPuzzle())\n</script>\n\n<template>\n  <section class=\"wrap challenge-surface\" :dir=\"dir\" :data-theme=\"theme\">\n    <header class=\"hdr\">\n      <h2>{{ t('title') }}</h2>\n      <p class=\"sub\">{{ t('subtitle') }}</p>\n    </header>\n\n    <div class=\"board\">\n      <!--   (   ) -->\n      <div class=\"assign\" dir=\"ltr\">\n        <div v-for=\"sh in q.usedShapes\" :key=\"sh\" class=\"slot\" @drop=\"onShapeDrop($event, sh)\" @dragover=\"onDragOver\">\n          <component :is=\"shapeComp(sh)\" class=\"shape-ico\" :size=\"26\" stroke=\"var(--shape-stroke)\" :stroke-width=\"2\" :style=\"{fill:'var(--shape-fill)'}\" />\n          <div class=\"val\" :class=\"{empty: q.assignMap[sh]==null}\">\n            {{ q.assignMap[sh]==null ? '' : q.assignMap[sh] }}\n          </div>\n        </div>\n        <div class=\"actions\">\n          <button class=\"ghost\" @click=\"resetAssign\">{{ t('reset') }}</button>\n          <button class=\"primary\" :disabled=\"!isFilled\" @click=\"checkNow\">{{ t('check') }}</button>\n          <button class=\"ghost\" @click=\"newPuzzle\">{{ t('newQ') }}</button>\n        </div>\n      </div>\n\n      <!--  :  LTR   -->\n      <div class=\"col-sum\" dir=\"ltr\">\n        <div class=\"row\">\n          <span v-for=\"(tok,i) in rowA\" :key=\"'a'+i\" class=\"cell\" :class=\"tok.t\">\n            <span v-if=\"tok.t==='digit'\">{{ tok.v }}</span>\n            <component v-else :is=\"shapeComp(tok.v)\" class=\"shape-ico\" :size=\"26\" stroke=\"var(--shape-stroke)\" :stroke-width=\"2\" :style=\"{fill:'var(--shape-fill)'}\" />\n          </span>\n        </div>\n        <div class=\"row plus\"><span>+</span></div>\n        <div class=\"row\">\n          <span v-for=\"(tok,i) in rowB\" :key=\"'b'+i\" class=\"cell\" :class=\"tok.t\">\n            <span v-if=\"tok.t==='digit'\">{{ tok.v }}</span>\n            <component v-else :is=\"shapeComp(tok.v)\" class=\"shape-ico\" :size=\"26\" stroke=\"var(--shape-stroke)\" :stroke-width=\"2\" :style=\"{fill:'var(--shape-fill)'}\" />\n          </span>\n        </div>\n        <div class=\"line\"></div>\n        <div class=\"row\">\n          <span v-for=\"(tok,i) in rowS\" :key=\"'s'+i\" class=\"cell\" :class=\"tok.t\">\n            <span v-if=\"tok.t==='digit'\">{{ tok.v }}</span>\n            <component v-else :is=\"shapeComp(tok.v)\" class=\"shape-ico\" :size=\"26\" stroke=\"var(--shape-stroke)\" :stroke-width=\"2\" :style=\"{fill:'var(--shape-fill)'}\" />\n          </span>\n        </div>\n      </div>\n\n      <div class=\"digits\" dir=\"ltr\">\n        <h4>{{ t('digits') }}</h4>\n        <div class=\"tiles\">\n          <button v-for=\"d in 10\" :key=\"d-1\" class=\"tile\" draggable=\"true\" @dragstart=\"onDigitDragStart($event, d-1)\">{{ d-1 }}</button>\n        </div>\n      </div>\n    </div>\n\n    <transition name=\"fade\">\n      <div v-if=\"overlay.open\" class=\"overlay\">\n        <div class=\"sheet\">\n          <div class=\"big\">{{ t('correctBig') }}</div>\n          <p>{{ t('correctSub') }}</p>\n          <button class=\"primary\" @click=\"nextQuestion\">{{ t('newQ') }}</button>\n        </div>\n      </div>\n    </transition>\n\n    <div class=\"toasts\">\n      <div v-for=\"t in toasts\" :key=\"t.id\" class=\"toast\" :class=\"t.type\">{{ t.msg }}</div>\n    </div>\n  </section>\n</template>\n\n<style scoped>\n/*   () */\n.wrap{\n  --shape-fill:#FFC24B; --shape-stroke:#7a2a23;\n  --ink:#2b1a1a; --peach:#ffe7db; --accent:#d64c42;\n  --panel:#ffffff; --bd:#f1d8cf; --bg:linear-gradient(180deg,#fffaf6,#fff4e9);\n  color:var(--ink); background:var(--bg); min-height:100%; padding:24px\n}\n.wrap[data-theme=\"dark\"]{\n  --shape-fill:#ffb84f; --shape-stroke:#ff8c7a;\n  --ink:#f7ebe7; --peach:#2a1714; --accent:#ff8c7a;\n  --panel:rgba(24,15,13,.85); --bd:#3c2722;\n  --bg:linear-gradient(180deg,#1b1412,#241815);\n}\n\n.hdr h2{margin:0;font-weight:800;color:#5a261f}\n.wrap[data-theme=\"dark\"] .hdr h2{color:#ffc3ba}\n.hdr .sub{margin:6px 0 18px;opacity:.75}\n\n.board{display:grid;grid-template-columns:1fr auto 1fr;gap:22px;align-items:start}\n.assign,.col-sum,.digits{background:var(--panel);border:1px solid var(--bd);border-radius:14px;box-shadow:0 10px 24px rgba(214,76,66,.10)}\n.assign{padding:12px}\n.col-sum{padding:18px 22px;min-width:260px}\n.digits{padding:12px}\n\n/*    */\n.assign, .col-sum, .digits, .val, .tile { direction:ltr; unicode-bidi:isolate; }\n.cell, .val, .tile { font-variant-numeric: tabular-nums; }\n\n.slot{display:flex;align-items:center;gap:10px;padding:10px;border:1px dashed var(--bd);border-radius:12px;background:#fff;margin-bottom:8px}\n.wrap[data-theme=\"dark\"] .slot{background:#2a1a16}\n.shape-ico{width:26px;height:26px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}\n.val{margin-inline-start:auto;width:40px;height:34px;display:grid;place-items:center;font-weight:800;border-radius:10px;background:#fff4e9;border:1px solid var(--bd)}\n.wrap[data-theme=\"dark\"] .val{background:#1c1512}\n\n.actions{display:flex;gap:10px;margin-top:6px}\nbutton{border:none;cursor:pointer;padding:10px 14px;border-radius:12px;font-weight:700}\nbutton.primary{background:var(--accent);color:#fff}\nbutton.primary:disabled{opacity:.5;cursor:not-allowed}\nbutton.ghost{background:#fff;border:1px solid var(--bd)}\n.wrap[data-theme=\"dark\"] button.ghost{background:#2a1a16}\nbutton.tile{background:#fff;border:1px solid var(--bd);min-width:44px;height:44px;border-radius:12px;font-weight:800}\n.wrap[data-theme=\"dark\"] button.tile{background:#2a1a16}\n\n.row{display:flex;gap:8px;justify-content:flex-end}\n.row.plus{padding:6px 0;opacity:.7}\n.cell{width:28px;height:28px;display:grid;place-items:center;font-weight:800;font-size:20px}\n.line{height:2px;background:#d8b0a8;margin:8px 0 10px}\n\n.digits h4{margin:0 0 10px 0}\n.tiles{display:flex;flex-wrap:wrap;gap:8px}\n\n.overlay{position:fixed;inset:0;background:rgba(0,0,0,.25);display:grid;place-items:center;z-index:40}\n.sheet{width:min(560px,92vw);background:#fff;border-radius:18px;padding:26px;text-align:center;box-shadow:0 18px 40px rgba(0,0,0,.2)}\n.wrap[data-theme=\"dark\"] .sheet{background:#1c1512;color:var(--ink)}\n.big{font-size:32px;font-weight:900;color:#4a2019}\n.wrap[data-theme=\"dark\"] .big{color:#ffc3ba}\n\n.toasts{position:fixed;bottom:18px;inset-inline:0;display:grid;justify-content:center;gap:8px;z-index:50}\n.toast{background:#fff;border:1px solid var(--bd);padding:10px 14px;border-radius:999px;box-shadow:0 8px 20px rgba(0,0,0,.08);font-weight:700}\n.toast.warn{color:#7a2a23}\n.fade-enter-active,.fade-leave-active{transition:opacity .15s}\n.fade-enter-from,.fade-leave-to{opacity:0}\n\n@media (max-width: 900px){\n  .board{grid-template-columns:1fr}\n  .col-sum{order:-1}\n}\n</style>\n","export default \"__VITE_ASSET__DtFZ1X$K__\"","export default \"__VITE_ASSET__DPmZGsGU__\"","<!-- <script setup>\nimport { ref, computed, reactive, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{ title:' 2:     {STEP}',\n       rule:'   {STEP}    .     .',\n       newQ:' ', check:'', reset:' ', correct:' ',\n       wrong:'  ', bank:' ', clear:' ' },\n  en:{ title:'Challenge 2: Number grid with step {STEP}',\n       rule:'Each cell increases by {STEP} from its left and its top. Drag the missing numbers into place.',\n       newQ:'New puzzle', check:'Check', reset:'Reset', correct:'Correct answer',\n       wrong:'Check your values', bank:'Number bank', clear:'Clear cell' }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n// \n// const sOK = typeof Audio!=='undefined'?new Audio('/sounds/success.mp3'):null\n// const sClap = typeof Audio!=='undefined'?new Audio('/sounds/clap.mp3'):null\n// const sWrong = typeof Audio!=='undefined'?new Audio('/sounds/wrong.mp3'):null\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\n\nconst sOK   = typeof Audio !== 'undefined' ? new Audio(successUrl) : null\nconst sClap = typeof Audio !== 'undefined' ? new Audio(clapUrl)    : null\nconst sWrong= typeof Audio !== 'undefined' ? new Audio(wrongUrl)   : null\n\nsOK && (sOK.preload = 'auto')\nsClap && (sClap.preload = 'auto')\nsWrong && (sWrong.preload = 'auto')\n\n\n// \nconst stepsPool = [100,200,500,1000,2000]        //   \nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n// \nconst size = ref(3)\nconst step = ref(1000)          //    \nconst base = ref(0)\nconst grid = ref([])            //  \nconst blanks = ref(new Set())   // \"r,c\"\nconst answerMap = ref({})       // \"r,c\" -> value\nconst manualDrafts = ref({})    // \"r,c\" -> string for manual input\nconst bankCounts = ref({})      // value -> remaining count\nconst solved = ref(false)\nconst toast = ref(null)\n\n//     step \nconst titleText = computed(()=> T[L.value].title.replaceAll('{STEP}', step.value))\nconst ruleText  = computed(()=> T[L.value].rule.replaceAll('{STEP}', step.value))\n\nconst keyOf = (r,c)=>`${r},${c}`\n\nfunction buildGrid(n, start, stp){\n  const g=[]\n  for(let r=0;r<n;r++){ const row=[]\n    for(let c=0;c<n;c++){ row.push(start + stp*(r+c)) }\n    g.push(row)\n  } return g\n}\n\nfunction pickBlanks(n){\n  const all=[]\n  for(let r=0;r<n;r++) for(let c=0;c<n;c++) all.push([r,c])\n  const filtered = all.filter(([r,c])=>!(r===0&&c===0))\n  const k=rndInt(3,5)\n  return new Set(shuffle(filtered).slice(0,k).map(([r,c])=>keyOf(r,c)))\n}\n\nfunction buildBankCounts(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const [r,c]=k.split(',').map(Number)\n    const v=grid.value[r][c]\n    counts[v]=(counts[v]||0)+1\n  })\n  bankCounts.value=counts\n}\n\n//      \nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}; manualDrafts.value={}\n  //  step \n  step.value = stepsPool[rndInt(0, stepsPool.length-1)]\n  //  base\n  const thousands = rndInt(5, 19) * 100     //    35 \n  base.value = thousands\n  const n=size.value\n  grid.value=buildGrid(n, base.value, step.value)\n  blanks.value=pickBlanks(n)\n  buildBankCounts()\n}\n\nfunction isFilled(){\n  for(const k of blanks.value){ if(answerMap.value[k]==null) return false }\n  return true\n}\nfunction isCorrect(){\n  if(!isFilled()) return false\n  for(const k of blanks.value){\n    const [r,c]=k.split(',').map(Number)\n    if(answerMap.value[k]!==grid.value[r][c]) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value=L.value==='ar'?'  ':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\n\nfunction resetAnswers(){\n  answerMap.value={}\n  manualDrafts.value={}\n  buildBankCounts()\n  toast.value=null; solved.value=false\n}\n\n//   \nfunction setAnswer(key, value, { fromManual = false } = {}){\n  if(Number.isNaN(value)) return\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  if(fromManual){\n    if((bankCounts.value[value]||0)>0){\n      bankCounts.value[value]-=1\n    }\n  } else {\n    if((bankCounts.value[value]||0)===0){\n      return\n    }\n    bankCounts.value[value]-=1\n  }\n  answerMap.value[key]=value\n  manualDrafts.value = { ...manualDrafts.value, [key]: String(value) }\n  toast.value=null\n}\n\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev,key){\n  ev.preventDefault()\n  const v=Number(ev.dataTransfer.getData('text/plain'))\n  setAnswer(key, v)\n}\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n  manualDrafts.value = { ...manualDrafts.value, [key]: '' }\n}\n\nfunction onManualInput(key, value){\n  manualDrafts.value = { ...manualDrafts.value, [key]: value }\n}\n\nfunction commitManual(key){\n  const raw = (manualDrafts.value[key] ?? '').trim()\n  if(raw === ''){\n    clearCell(key)\n    return\n  }\n  const num = Number(raw)\n  if(!Number.isFinite(num)) return\n  setAnswer(key, num, { fromManual: true })\n}\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>toast.value=null)\n</script>\n\n<template>\n  <div class=\"challenge2 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ titleText }}</h2>\n    <p class=\"rule\">{{ ruleText }}</p>\n\n    <div class=\"layout\">\n      <div class=\"grid\">\n        <div v-for=\"r in size\" :key=\"'r'+r\" class=\"row\">\n          <div v-for=\"c in size\" :key=\"'c'+r+'-'+c\" class=\"cell\">\n            <template v-if=\"!blanks.has(`${r-1},${c-1}`)\">\n              <span class=\"num\" :style=\"numDir\">{{ grid[r-1][c-1] }}</span>\n            </template>\n            <template v-else>\n              <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event, `${r-1},${c-1}`)\">\n                <span v-if=\"answerMap[`${r-1},${c-1}`]!=null\" class=\"num\" :style=\"numDir\">\n                  {{ answerMap[`${r-1},${c-1}`] }}\n                </span>\n                <span v-else class=\"placeholder\"></span>\n              </div>\n              <input\n                class=\"manual-entry\"\n                type=\"number\"\n                :value=\"manualDrafts[`${r-1},${c-1}`] ?? ''\"\n                @input=\"onManualInput(`${r-1},${c-1}`, $event.target.value)\"\n                @change=\"commitManual(`${r-1},${c-1}`)\"\n                @blur=\"commitManual(`${r-1},${c-1}`)\"\n                :placeholder=\"props.lang==='ar' ? ' ' : 'Enter value'\"\n              />\n              <button class=\"clear\" @click=\"clearCell(`${r-1},${c-1}`)\"><Eraser class=\"ic\" /> {{ T[L].clear }}</button>\n            </template>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"bank\">\n        <div class=\"bank-title\">{{ T[L].bank }}</div>\n        <div class=\"bank-items\">\n          <button v-for=\"v in bankList\" :key=\"v + '_' + Math.random()\" class=\"chip\"\n                  draggable=\"true\" @dragstart=\"onDragStart($event, v)\" :style=\"numDir\">\n            {{ v }}\n          </button>\n        </div>\n\n        <div class=\"actions\">\n          <button class=\"btn\" @click=\"resetAnswers\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n          <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n          <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n        </div>\n\n        <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n      </div>\n    </div>\n\n    <div v-if=\"solved\" class=\"overlay\">\n      <div class=\"card\">\n        <div class=\"big\">{{ T[L].correct }}</div>\n        <button class=\"btn\" @click=\"newPuzzle\">{{ T[L].newQ }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/*       */\n.challenge2{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .challenge2{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem } .rule{ color:var(--muted); margin:0 0 1rem }\n.layout{ display:grid; grid-template-columns:1fr 260px; gap:1rem }\n.grid{ background:var(--bg); border:1px solid #e5e7eb22; border-radius:1rem; padding:1rem; box-shadow:0 4px 14px rgba(0,0,0,.06) }\n.row{ display:grid; grid-template-columns:repeat(3,1fr) }\n.cell{ border:1px dashed #cbd5e1; min-height:86px; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.25rem; padding:.25rem }\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.25rem }\n.placeholder{ color:var(--muted); font-size:1.25rem }\n.dropzone{ width:100%; flex:1; display:flex; align-items:center; justify-content:center; background:rgba(99,102,241,.06); border-radius:.5rem }\n.manual-entry{ width:100%; padding:.45rem .6rem; border-radius:.6rem; border:1px solid rgba(99,102,241,.2); background:rgba(255,255,255,.92); font-size:.95rem; direction:ltr; color:var(--fg); }\n.manual-entry:focus{ outline:none; border-color:rgba(15,138,62,.45); box-shadow:0 0 0 3px rgba(15,138,62,.16); }\n[data-theme=\"dark\"] .manual-entry{ background:rgba(15,23,42,.8); border-color:rgba(148,163,184,.25); color:var(--fg); }\n.clear{ font-size:.75rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n.bank{ display:flex; flex-direction:column; gap:.75rem }\n.bank-title{ font-weight:600; color:var(--muted) }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ border:1px solid #e5e7eb55; background:var(--bg); padding:.4rem .6rem; border-radius:.75rem; cursor:grab; font-variant-numeric:tabular-nums }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.25rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n.toast{ margin-top:.5rem; padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n.overlay{ position:fixed; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center }\n.card{ background:var(--bg); color:var(--fg); padding:1rem 1.25rem; border-radius:1rem; box-shadow:0 10px 30px rgba(0,0,0,.25); display:flex; flex-direction:column; gap:.75rem; align-items:center }\n.big{ font-size:1.25rem; font-weight:700 }\n</style> -->\n<script setup>\n/* ------------ Imports ------------ */\nimport { ref, computed, reactive, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\n/* ------------ Props ------------ */\nconst props = defineProps({\n  lang:  { type: String, default: 'ar' },\n  theme: { type: String, default: 'light' } // 'light' | 'dark'\n})\n\n/* ------------ Copy ------------ */\nconst T = {\n  ar: {\n    title: ' 2:     {STEP}',\n    rule:  '   {STEP}    .     .',\n    newQ:  ' ', check: '', reset: ' ',\n    correct: ' ', wrong: '  ',\n    bank: ' ', clear: ' '\n  },\n  en: {\n    title: 'Challenge 2: Number grid with step {STEP}',\n    rule:  'Each cell increases by {STEP} from its left and from the top. Drag the missing numbers into place.',\n    newQ:  'New puzzle', check: 'Check', reset: 'Reset',\n    correct: 'Correct answer', wrong: 'Check your values',\n    bank: 'Number bank', clear: 'Clear cell'\n  }\n}\nconst L = computed(() => (T[props.lang] ? props.lang : 'ar'))\n\n/* ------------ Sounds (kept lightweight) ------------ */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio !== 'undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio !== 'undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio !== 'undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ------------ Helpers ------------ */\n// Return random int in [a,b]\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\n// FisherYates\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n/* ------------ State ------------ */\nconst size  = ref(3)                     // grid is size x size\nconst step  = ref(1000)                  // arithmetic step\nconst base  = ref(0)                     // top-left value\nconst grid  = ref([])                    // correct values matrix\nconst blanks = ref(new Set())            // set of \"r,c\" positions made blank\n\n// answerMap keeps user answers; manualDrafts mirrors input fields\nconst answerMap = ref({})\nconst manualDrafts = ref({})\n\n// bankCounts maps number -> remaining copies in the bank\nconst bankCounts = ref({})\nconst solved = ref(false)\nconst toast  = ref(null)\n\n// dynamic title/rule with live step\nconst titleText = computed(() => T[L.value].title.replaceAll('{STEP}', step.value))\nconst ruleText  = computed(() => T[L.value].rule.replaceAll('{STEP}', step.value))\n\n/* ------------ Grid generation ------------ */\n// Build arithmetic grid: value = base + step*(row+col)\nfunction buildGrid(n, start, stp){\n  const g=[]\n  for(let r=0;r<n;r++){\n    const row=[]\n    for(let c=0;c<n;c++) row.push(start + stp*(r+c))\n    g.push(row)\n  }\n  return g\n}\n\n// Pick K blank cells (not including [0,0]) where K[3..5]\nfunction pickBlanks(n){\n  const cells=[]\n  for(let r=0;r<n;r++) for(let c=0;c<n;c++) if(!(r===0&&c===0)) cells.push([r,c])\n  const K=rndInt(3,5)\n  return new Set(shuffle(cells).slice(0,K).map(([r,c])=>`${r},${c}`))\n}\n\n// Build bank according to the correct values at blank positions\nfunction buildBankCounts(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const [r,c]=k.split(',').map(Number)\n    const v=grid.value[r][c]\n    counts[v]=(counts[v]||0)+1\n  })\n  bankCounts.value=counts\n}\n\n/* ------------ New puzzle ------------ */\nconst stepsPool = [100,200,500,1000,2000]\nfunction newPuzzle(){\n  solved.value=false\n  toast.value=null\n  answerMap.value={}\n  manualDrafts.value={}\n\n  // choose step and base; base aligned to hundreds for neat numbers\n  step.value = stepsPool[rndInt(0, stepsPool.length-1)]\n  base.value = rndInt(5, 19) * 100\n\n  const n=size.value\n  grid.value = buildGrid(n, base.value, step.value)\n  blanks.value = pickBlanks(n)\n  buildBankCounts()\n}\n\n/* ------------ Bank list (expanded per remaining count) ------------ */\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\n/* ------------ DnD + manual entry ------------ */\nconst keyOf = (r,c)=>`${r},${c}`\n\nfunction setAnswer(key, value, { fromManual=false } = {}){\n  if(Number.isNaN(value)) return\n  // return previous to bank if replacing\n  if(answerMap.value[key]!=null){\n    const prev=answerMap.value[key]\n    bankCounts.value[prev]=(bankCounts.value[prev]||0)+1\n  }\n  // bank decremented whether drag or manual (manual still limited by counts)\n  if((bankCounts.value[value]||0) <= 0) return\n  bankCounts.value[value]-=1\n\n  answerMap.value[key]=value\n  manualDrafts.value = { ...manualDrafts.value, [key]: String(value) }\n  toast.value=null; solved.value=false\n}\n\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev, key){\n  ev.preventDefault()\n  const v=Number(ev.dataTransfer.getData('text/plain'))\n  setAnswer(key, v)\n}\n\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const prev=answerMap.value[key]\n    bankCounts.value[prev]=(bankCounts.value[prev]||0)+1\n    delete answerMap.value[key]\n  }\n  manualDrafts.value = { ...manualDrafts.value, [key]: '' }\n  toast.value=null; solved.value=false\n}\n\nfunction onManualInput(key, value){\n  manualDrafts.value = { ...manualDrafts.value, [key]: value }\n}\nfunction commitManual(key){\n  const raw = (manualDrafts.value[key] ?? '').trim()\n  if(raw===''){ clearCell(key); return }\n  const num = Number(raw)\n  if(!Number.isFinite(num)) return\n  setAnswer(key, num, { fromManual:true })\n}\n\n/* ------------ Validation ------------ */\nfunction isFilled(){\n  for(const k of blanks.value) if(answerMap.value[k]==null) return false\n  return true\n}\nfunction isCorrect(){\n  if(!isFilled()) return false\n  for(const k of blanks.value){\n    const [r,c]=k.split(',').map(Number)\n    if(answerMap.value[k] !== grid.value[r][c]) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',\n      { method:'GET', credentials:'include' })\n  }catch{}\n}\n\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar' ? '  ' : 'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\n\nfunction resetAnswers(){\n  answerMap.value={}\n  manualDrafts.value={}\n  buildBankCounts()\n  toast.value=null; solved.value=false\n}\n\n/* ------------ Number direction isolation (for RTL) ------------ */\nconst numDir = computed(()=>({ direction:'ltr', unicodeBidi:'isolate' }))\n\n/* ------------ Lifecycle ------------ */\nonMounted(newPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) toast.value=null })\n</script>\n\n<template>\n  <div class=\"challenge2 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ titleText }}</h2>\n    <p class=\"rule\">{{ ruleText }}</p>\n\n    <div class=\"layout\">\n      <!-- Grid -->\n      <div class=\"grid\">\n        <div v-for=\"r in size\" :key=\"'r'+r\" class=\"row\">\n          <div v-for=\"c in size\" :key=\"'c'+r+'-'+c\" class=\"cell\">\n            <template v-if=\"!blanks.has(`${r-1},${c-1}`)\">\n              <span class=\"num\" :style=\"numDir\">{{ grid[r-1][c-1] }}</span>\n            </template>\n            <template v-else>\n              <div class=\"dropzone\"\n                   @dragover=\"allowDrop\"\n                   @drop=\"onDrop($event, `${r-1},${c-1}`)\">\n                <span v-if=\"answerMap[`${r-1},${c-1}`]!=null\"\n                      class=\"num filled\" :style=\"numDir\">\n                  {{ answerMap[`${r-1},${c-1}`] }}\n                </span>\n                <span v-else class=\"placeholder\"></span>\n              </div>\n\n              <input class=\"manual-entry\" type=\"number\"\n                     :value=\"manualDrafts[`${r-1},${c-1}`] ?? ''\"\n                     @input=\"onManualInput(`${r-1},${c-1}`, $event.target.value)\"\n                     @change=\"commitManual(`${r-1},${c-1}`)\"\n                     @blur=\"commitManual(`${r-1},${c-1}`)\"\n                     :placeholder=\"props.lang==='ar' ? ' ' : 'Enter value'\"/>\n\n              <button class=\"clear\" @click=\"clearCell(`${r-1},${c-1}`)\">\n                <Eraser class=\"ic\" /> {{ T[L].clear }}\n              </button>\n            </template>\n          </div>\n        </div>\n      </div>\n\n      <!-- Bank -->\n      <div class=\"bank\">\n        <div class=\"bank-title\">{{ T[L].bank }}</div>\n        <div class=\"bank-items\">\n          <button v-for=\"v in bankList\"\n                  :key=\"v + '_' + Math.random()\"\n                  class=\"chip\"\n                  :style=\"numDir\"\n                  draggable=\"true\"\n                  @dragstart=\"onDragStart($event, v)\">\n            {{ v }}\n          </button>\n        </div>\n\n        <div class=\"actions\">\n          <button class=\"btn\" @click=\"resetAnswers\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n          <button class=\"btn primary\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n          <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n        </div>\n\n        <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n      </div>\n    </div>\n\n    <!-- Success overlay -->\n    <div v-if=\"solved\" class=\"overlay\">\n      <div class=\"card\">\n        <div class=\"big\">{{ T[L].correct }}</div>\n        <button class=\"btn primary\" @click=\"newPuzzle\">{{ T[L].newQ }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* ---------- Theme tokens (light) ---------- */\n.challenge2{\n  --bg: #ffffff;              /* page background */\n  --fg: #0b1220;              /* text color */\n  --muted: #64748b;           /* secondary text */\n  --panel: #ffffff;           /* card background */\n  --panel-bd: #e2e8f0;        /* card border */\n  --panel-shadow: 0 6px 20px rgba(2,6,23,.08);\n\n  --drop-bg: rgba(99,102,241,.06);\n  --drop-bd: #cbd5e1;\n  --placeholder: #94a3b8;\n\n  --chip-bg: #ffffff;\n  --chip-bd: #e5e7ebaa;\n\n  --btn-bg: #ffffff;\n  --btn-bd: #e5e7ebaa;\n  --btn-fg: #0b1220;\n\n  --btn-primary-bg: #0ea5e9;\n  --btn-primary-fg: #fff;\n\n  --toast-err-bg: #fee2e2;\n  --toast-err-fg: #991b1b;\n  --toast-err-bd: #fecaca;\n\n  --toast-ok-bg: #dcfce7;\n  --toast-ok-fg: #166534;\n  --toast-ok-bd: #bbf7d0;\n\n  --overlay: rgba(2,6,23,.45);\n}\n\n/* ---------- Theme tokens (dark) ---------- */\n[data-theme=\"dark\"] .challenge2{\n  --bg: #0b1220;\n  --fg: #e5e7eb;\n  --muted: #9ca3af;\n  --panel: #0f172a;                 /* higher contrast than before */\n  --panel-bd: #334155;\n  --panel-shadow: 0 8px 28px rgba(0,0,0,.45);\n\n  --drop-bg: rgba(59,130,246,.15);  /* visible in dark */\n  --drop-bd: #475569;\n  --placeholder: #94a3b8;\n\n  --chip-bg: #111827;\n  --chip-bd: #475569;\n\n  --btn-bg: #111827;\n  --btn-bd: #475569;\n  --btn-fg: #e5e7eb;\n\n  --btn-primary-bg: #38bdf8;       /* cyan for contrast on dark */\n  --btn-primary-fg: #0b1220;\n\n  --toast-err-bg: rgba(248,113,113,.18);\n  --toast-err-fg: #fecaca;\n  --toast-err-bd: rgba(248,113,113,.45);\n\n  --toast-ok-bg: rgba(34,197,94,.22);\n  --toast-ok-fg: #bbf7d0;\n  --toast-ok-bd: rgba(34,197,94,.5);\n\n  --overlay: rgba(0,0,0,.55);\n}\n\n/* ---------- Layout ---------- */\n.title{ font-weight:700; margin:0 0 .25rem; color:var(--fg) }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.layout{ display:grid; grid-template-columns:1fr 280px; gap:1rem }\n.grid{\n  background:var(--panel);\n  border:1px solid var(--panel-bd);\n  border-radius:1rem;\n  padding:1rem;\n  box-shadow:var(--panel-shadow);\n}\n.row{ display:grid; grid-template-columns:repeat(3,1fr); gap:.5rem }\n.cell{\n  border:1px dashed var(--panel-bd);\n  min-height:92px;\n  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.35rem;\n  padding:.35rem; border-radius:.75rem; background:color-mix(in oklab, var(--panel) 92%, black 8%);\n}\n\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.2rem; color:var(--fg) }\n.num.filled{ color:var(--fg) }\n\n.placeholder{ color:var(--placeholder); font-size:1.2rem }\n\n.dropzone{\n  width:100%; flex:1; display:flex; align-items:center; justify-content:center;\n  background:var(--drop-bg); border:2px dashed var(--drop-bd);\n  border-radius:.65rem; transition: box-shadow .15s, border-color .15s;\n}\n.dropzone:hover{ box-shadow:0 0 0 3px color-mix(in oklab, var(--drop-bd) 40%, transparent); }\n\n.manual-entry{\n  width:100%; padding:.5rem .65rem; border-radius:.6rem;\n  border:1px solid var(--panel-bd); background:var(--panel);\n  font-size:.95rem; direction:ltr; color:var(--fg)\n}\n.manual-entry:focus{ outline:none; border-color:color-mix(in oklab, var(--btn-primary-bg) 65%, white 35%);\n  box-shadow:0 0 0 3px color-mix(in oklab, var(--btn-primary-bg) 30%, transparent) }\n\n.clear{\n  font-size:.8rem; border:none; background:transparent; color:var(--muted);\n  display:flex; align-items:center; gap:.35rem; cursor:pointer\n}\n.ic{ width:16px; height:16px }\n\n/* ---------- Bank ---------- */\n.bank{ display:flex; flex-direction:column; gap:.75rem }\n.bank-title{ font-weight:700; color:var(--muted) }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{\n  border:1px solid var(--chip-bd); background:var(--chip-bg); color:var(--fg);\n  padding:.45rem .65rem; border-radius:.75rem; cursor:grab;\n  font-variant-numeric:tabular-nums; min-width:54px; text-align:center;\n  box-shadow:0 6px 16px rgba(0,0,0,.08)\n}\n.chip:active{ cursor:grabbing }\n\n/* ---------- Actions / Buttons ---------- */\n.actions{ display:flex; gap:.6rem; flex-wrap:wrap; margin-top:.25rem }\n.btn{\n  display:inline-flex; align-items:center; gap:.4rem; padding:.55rem .8rem;\n  border-radius:.8rem; border:1px solid var(--btn-bd); background:var(--btn-bg);\n  color:var(--btn-fg); cursor:pointer; transition:.15s\n}\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,0,0,.12) }\n.btn.primary{ background:var(--btn-primary-bg); color:var(--btn-primary-fg); border-color:transparent }\n\n/* ---------- Toast ---------- */\n.toast{\n  margin-top:.6rem; padding:.6rem .85rem; border-radius:.85rem;\n  background:var(--toast-err-bg); color:var(--toast-err-fg); border:1px solid var(--toast-err-bd);\n  font-weight:700; text-align:center\n}\n.toast.ok{ background:var(--toast-ok-bg); color:var(--toast-ok-fg); border-color:var(--toast-ok-bd) }\n\n/* ---------- Overlay ---------- */\n.overlay{ position:fixed; inset:0; background:var(--overlay); display:flex; align-items:center; justify-content:center; z-index:30 }\n.card{\n  background:var(--panel); color:var(--fg); padding:1rem 1.25rem; border-radius:1rem;\n  box-shadow:var(--panel-shadow); display:flex; flex-direction:column; gap:.75rem; align-items:center; border:1px solid var(--panel-bd)\n}\n.big{ font-size:1.25rem; font-weight:800 }\n</style>\n","export default \"__VITE_ASSET__DjkG8rNr__\"","export default \"__VITE_ASSET__MdmM32dY__\"","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { RefreshCw, RotateCcw, Check } from 'lucide-vue-next'\n\nconst props = defineProps({\n  lang: { type: String, default: 'ar' },\n  theme: { type: String, default: 'light' }\n})\n\nconst T = {\n  ar: {\n    title: ' 3:     ',\n    rule: '   ( )    S   D.',\n    newQ: ' ',\n    reset: ' ',\n    check: '',\n    correct: ' ',\n    wrong: '  ',\n    done: '  ',\n    q: (i, S, D) => `(${i})     ${S}   ${D}`\n  },\n  en: {\n    title: 'Challenge 3: Find two numbers from sum and difference',\n    rule: 'Pick the correct pair (greater, smaller) with sum S and difference D.',\n    newQ: 'New puzzle',\n    reset: 'Reset',\n    check: 'Check',\n    correct: 'Correct',\n    wrong: 'Incorrect',\n    done: 'Round completed',\n    q: (i, S, D) => `(${i}) Find two numbers with sum ${S} and difference ${D}`\n  }\n}\nconst L = computed(() => (T[props.lang] ? props.lang : 'ar'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success3.mp3'\n// import clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'   //     \n\nconst sOK   = typeof Audio !== 'undefined' ? new Audio(successUrl) : null\n// const sClap = typeof Audio !== 'undefined' ? new Audio(clapUrl)    : null\nconst sWrong= typeof Audio !== 'undefined' ? new Audio(wrongUrl)   : null\n\nsOK && (sOK.preload = 'auto')\n// sClap && (sClap.preload = 'auto')\nsWrong && (sWrong.preload = 'auto')\n\n\n// \nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n//  \n/**\n * question = {\n *  S, D, ans:[A,B], options:[{a,b,isAns}], pickedIndex:null|number, judged:false, firstTry:true\n * }\n */\nconst N = 4\nconst questions = ref([])\nconst solvedCount = computed(() => questions.value.filter(q => q.judged && q.options[q.pickedIndex]?.isAns).length)\nconst allAnswered = computed(() => questions.value.length>0 && questions.value.every(q => q.judged))\n\nfunction makeAns(S,D){\n  // :   parity  S >= D >= 0\n  // : A=(S+D)/2  B=(S-D)/2\n  return [(S + D)/2, (S - D)/2]\n}\nfunction validPair(x){ return Number.isInteger(x) && x>=0 }\nfunction mkQuestion(){\n  //  S,D      (A,B)\n  let S,D,A,B\n  while(true){\n    S = rndInt(10, 60)                 //   \n    D = rndInt(0, 20)                  //   \n    if ((S & 1) !== (D & 1)) continue  //  \n    if (S < D) continue\n    ;[A,B] = makeAns(S,D)\n    if (validPair(A) && validPair(B)) break\n  }\n  // :      \n  const alts = new Set()\n  const addAlt = (x,y)=>{\n    const k = `${x},${y}`\n    if (x>=0 && y>=0 && Number.isInteger(x) && Number.isInteger(y) && k !== `${A},${B}`) alts.add(k)\n  }\n  addAlt(A+1,B-1)\n  addAlt(A-1,B+1)\n  addAlt(A+2,B-2)\n  addAlt(A-2,B+2)\n  addAlt(A+1,B)    //   \n  addAlt(A,B+1)    //   \n  const opts = [{a:A,b:B,isAns:true}]\n  for (const k of Array.from(alts).slice(0,3)) {\n    const [a,b] = k.split(',').map(n=>Number(n))\n    opts.push({a,b,isAns:false})\n    if (opts.length===4) break\n  }\n  while(opts.length<4){ // \n    const da = rndInt(-3,3), db = rndInt(-3,3)\n    const a = Math.max(0, A+da), b = Math.max(0, B+db)\n    if(!(a===A && b===B)) opts.push({a,b,isAns:false})\n  }\n  return {\n    S, D, ans:[A,B],\n    options: shuffle(opts),\n    pickedIndex: null,\n    judged: false,\n    firstTry: true\n  }\n}\n\nfunction newRound(){\n  questions.value = Array.from({length:N}, ()=> mkQuestion())\n}\nfunction resetRound(){\n  for(const q of questions.value){\n    q.pickedIndex = null\n    q.judged = false\n    q.firstTry = true\n  }\n}\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1', {\n      method:'GET', credentials:'include'\n    })\n  }catch{}\n}\nasync function pickOption(q, idx){\n  if(q.judged) return\n  q.pickedIndex = idx\n  q.judged = true\n  const ok = q.options[idx].isAns\n  if(ok){\n    sOK && sOK.play()\n    if(allAnswered.value) sOK && sOK.play()\n    //       \n    if(q.firstTry) await addPoint()\n  }else{\n    sWrong && sWrong.play()\n  }\n}\nfunction unjudge(q){ //     \n  q.judged = false\n  q.firstTry = false\n  q.pickedIndex = null\n}\n\nonMounted(newRound)\nwatch(()=>props.lang,()=>{}) //       \n</script>\n\n<template>\n  <div class=\"challenge3 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <div class=\"qs\">\n      <div v-for=\"(q,i) in questions\" :key=\"i\" class=\"qcard\">\n        <div class=\"qtext\">{{ T[L].q(i+1, q.S, q.D) }}</div>\n\n        <div class=\"opts\">\n          <button\n            v-for=\"(op,j) in q.options\"\n            :key=\"j\"\n            class=\"opt\"\n            :class=\"{\n              chosen: q.pickedIndex===j,\n              ok: q.judged && q.options[j].isAns,\n              bad: q.judged && q.pickedIndex===j && !q.options[j].isAns\n            }\"\n            @click=\"pickOption(q, j)\"\n          >\n            ( {{ op.a }}  {{ op.b }} )\n          </button>\n        </div>\n\n        <div v-if=\"q.judged\" class=\"feedback\" :class=\"{ok: q.options[q.pickedIndex].isAns}\">\n          {{ q.options[q.pickedIndex].isAns ? T[L].correct : T[L].wrong }}\n          <button class=\"retry\" v-if=\"!q.options[q.pickedIndex].isAns\" @click=\"unjudge(q)\"></button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"toolbar\">\n      <div class=\"status\">\n        <Check class=\"ic\" /> {{ solvedCount }} / {{ questions.length }}\n        <span v-if=\"allAnswered && solvedCount===questions.length\" class=\"done\">  {{ T[L].done }}</span>\n      </div>\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetRound\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"newRound\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.challenge3{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .challenge3{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.qs{ display:grid; gap:.75rem }\n.qcard{\n  /* background:var(--bg); */\n  border:1px solid #e5e7eb55; border-radius:1rem;\n  padding:.75rem .9rem; box-shadow:0 4px 14px rgba(0,0,0,.06)\n}\n.qtext{ font-weight:600; margin-bottom:.5rem }\n.opts{ display:flex; flex-wrap:wrap; gap:.5rem }\n.opt{\n  padding:.45rem .7rem; border-radius:.75rem; cursor:pointer;\n  border:1px solid #e5e7ebaa;\n   /* background:var(--bg); */\n  font-variant-numeric:tabular-nums;\n}\n.opt.chosen{ box-shadow:0 0 0 2px rgba(99,102,241,.35) inset }\n.opt.ok{ background:#dcfce7; border-color:#bbf7d0; color:#166534 }\n.opt.bad{ background:#fee2e2; border-color:#fecaca; color:#991b1b }\n\n.feedback{ margin-top:.4rem; font-size:.9rem; color:#991b1b }\n.feedback.ok{ color:#166534 }\n.retry{ margin-inline-start:.5rem; border:none; background:transparent; cursor:pointer }\n\n.toolbar{\n  display:flex; justify-content:space-between; align-items:center; margin-top:1rem\n}\n.status{ color:var(--muted); display:flex; align-items:center; gap:.35rem }\n.done{ color:#166534 }\n.actions{ display:flex; gap:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem;\n      border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n[data-theme=\"dark\"] .challenge3{ background:transparent; color:#e2e8f0 }\n[data-theme=\"dark\"] .challenge3 .rule{ color:#cbd5f5 }\n[data-theme=\"dark\"] .challenge3 .qcard{ background:#132338; border:1px solid rgba(148,163,184,.45); box-shadow:0 18px 32px rgba(7,15,32,.55) }\n[data-theme=\"dark\"] .challenge3 .qtext{ color:#f1f5f9 }\n[data-theme=\"dark\"] .challenge3 .opt{ background:#1c3050; border-color:rgba(148,163,184,.5); color:#f8fafc }\n[data-theme=\"dark\"] .challenge3 .opt:hover{ border-color:#60a5fa; background:#223a60 }\n[data-theme=\"dark\"] .challenge3 .opt.chosen{ box-shadow:0 0 0 2px rgba(96,165,250,.55) inset }\n[data-theme=\"dark\"] .challenge3 .opt.ok{ background:rgba(34,197,94,.26); border-color:rgba(74,222,128,.6); color:#dcfce7 }\n[data-theme=\"dark\"] .challenge3 .opt.bad{ background:rgba(248,113,113,.28); border-color:rgba(248,113,113,.55); color:#fee2e2 }\n[data-theme=\"dark\"] .challenge3 .feedback{ color:#fca5a5 }\n[data-theme=\"dark\"] .challenge3 .feedback.ok{ color:#bbf7d0 }\n[data-theme=\"dark\"] .challenge3 .status{ color:#d1d9ff }\n[data-theme=\"dark\"] .challenge3 .done{ color:#86efac }\n[data-theme=\"dark\"] .challenge3 .btn{ background:#1c3050; border-color:rgba(148,163,184,.45); color:#f8fafc; box-shadow:0 10px 22px rgba(7,15,32,.4) }\n</style>\n","export default \"__VITE_ASSET__ddQL4cG6__\"","export default \"__VITE_ASSET__yY_pt9VM__\"","<script setup>\n/* ================================\n   Multiplication Table  Dark/Light polished\n   Notes:\n   - Strong theme tokens for dark mode contrast\n   - Numeric content isolated LTR for RTL UIs\n   - Bank uses quantity-aware drag & drop\n   - Manual entry limited by bank counts too\n================================== */\n\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\n/* -------- Props -------- */\nconst props = defineProps({\n  lang:  { type: String, default: 'ar' },\n  theme: { type: String, default: 'light' } // 'light' | 'dark'\n})\n\n/* -------- Copy -------- */\nconst T = {\n  ar:{\n    title:' 4:   ',\n    rule:'    .        .',\n    bank:' ', newQ:' ', reset:' ',\n    check:'', correct:' ', wrong:'  ', clear:' '\n  },\n  en:{\n    title:'Challenge 4: Complete the multiplication table',\n    rule:'A multiplication table with row/column headers. Drag correct values into the blanks.',\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset',\n    check:'Check', correct:'Correct', wrong:'Check your values', clear:'Clear cell'\n  }\n}\nconst L = computed(() => (T[props.lang] ? props.lang : 'ar'))\n\n/* -------- Sounds (lightweight) -------- */\nimport successUrl from '@/assets/sounds/success4.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong4.mp3'\nconst sOK    = typeof Audio !== 'undefined' ? new Audio(successUrl) : null\nconst sWrong = typeof Audio !== 'undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* -------- RNG helpers -------- */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\n\n/* -------- State -------- */\nconst n = 3                                // 3x3 body\nconst factorsR = ref([])                   // row headers\nconst factorsC = ref([])                   // column headers\nconst blanks   = ref(new Set())            // keys of empty cells\nconst answerMap = ref({})                  // key -> value\nconst manualDrafts = ref({})               // key -> input text\nconst bankCounts = ref({})                 // value -> remaining copies\nconst solved = ref(false)\nconst toast  = ref(null)\n\n/* -------- Value helpers -------- */\n// Cell value (including headers)\nfunction valueAt(r,c){\n  if(r===0 && c===0) return ''\n  if(r===0) return factorsC.value[c-1]\n  if(c===0) return factorsR.value[r-1]\n  return factorsR.value[r-1] * factorsC.value[c-1]\n}\n// Key builder (prefix h: for header, c: for body)\nconst keyH = (r,c)=> (r===0||c===0)?`h:${r},${c}`:`c:${r},${c}`\n\n/* -------- Puzzle generation -------- */\n// Pick distinct factors from 1..9\nfunction pickFactors(k){ return shuffle([1,2,3,4,5,6,7,8,9]).slice(0,k).sort((a,b)=>a-b) }\n// Choose blanks; keep at least one body cell visible as a clue\nfunction pickBlanks(){\n  const all=[]\n  for(let r=0;r<=n;r++) for(let c=0;c<=n;c++){\n    if(r===0 && c===0) continue\n    all.push([r,c])\n  }\n  const body = all.filter(([r,c])=>r>0&&c>0)\n  const keep = shuffle(body)[0]\n  const cand = all.filter(([r,c])=> !(r===keep[0]&&c===keep[1]))\n  const k = rndInt(6,8)\n  return new Set(shuffle(cand).slice(0,k).map(([r,c])=>keyH(r,c)))\n}\n// Recompute bank from blanks minus already placed answers\nfunction rebuildBank(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const [,rc]=k.split(':'); const [r,c]=rc.split(',').map(Number)\n    const v=valueAt(r,c); counts[v]=(counts[v]||0)+1\n  })\n  for(const [k,v] of Object.entries(answerMap.value)){ counts[v]=(counts[v]||0)-1 }\n  for(const [v,ct] of Object.entries(counts)){ if(ct<=0) delete counts[v] }\n  bankCounts.value=counts\n}\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)) for(let i=0;i<ct;i++) out.push(Number(v))\n  return shuffle(out)\n})\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}; manualDrafts.value={}\n  factorsR.value = pickFactors(n)\n  factorsC.value = pickFactors(n)\n  blanks.value   = pickBlanks()\n  rebuildBank()\n}\n\n/* -------- Validation -------- */\nfunction isFilled(){ for(const k of blanks.value){ if(answerMap.value[k]==null) return false } return true }\nfunction isCorrect(){\n  if(!isFilled()) return false\n  for(const k of blanks.value){\n    const [,rc]=k.split(':'); const [r,c]=rc.split(',').map(Number)\n    if(answerMap.value[k] !== valueAt(r,c)) return false\n  }\n  return true\n}\nasync function addPoint(){ try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{} }\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar'?'  ':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){ answerMap.value={}; manualDrafts.value={}; rebuildBank(); toast.value=null; solved.value=false }\n\n/* -------- DnD + manual entry (bank-limited) -------- */\nfunction setAnswer(key, value, { fromManual=false } = {}){\n  if(Number.isNaN(value)) return\n  if(answerMap.value[key]!=null){\n    const prev=answerMap.value[key]; bankCounts.value[prev]=(bankCounts.value[prev]||0)+1\n  }\n  if((bankCounts.value[value]||0)===0) return\n  bankCounts.value[value]-=1\n  answerMap.value[key]=value\n  manualDrafts.value = { ...manualDrafts.value, [key]: String(value) }\n  toast.value=null; solved.value=false\n}\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev,key){ ev.preventDefault(); const v=Number(ev.dataTransfer.getData('text/plain')); setAnswer(key,v) }\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const prev=answerMap.value[key]; bankCounts.value[prev]=(bankCounts.value[prev]||0)+1\n    delete answerMap.value[key]\n  }\n  manualDrafts.value = { ...manualDrafts.value, [key]: '' }\n  toast.value=null; solved.value=false\n}\nfunction onManualInput(key, value){ manualDrafts.value = { ...manualDrafts.value, [key]: value } }\nfunction commitManual(key){\n  const raw=(manualDrafts.value[key]??'').trim()\n  if(raw===''){ clearCell(key); return }\n  const num=Number(raw); if(!Number.isFinite(num)) return\n  setAnswer(key,num,{fromManual:true})\n}\n\n/* -------- LTR isolation for numbers in RTL UIs -------- */\nconst numDir = computed(()=>({ direction:'ltr', unicodeBidi:'isolate' }))\n\n/* -------- Lifecycle -------- */\nonMounted(newPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) toast.value=null })\n</script>\n\n<template>\n  <div class=\"challenge4 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <div class=\"wrap\">\n      <!-- Table -->\n      <div class=\"table\">\n        <div class=\"row\" v-for=\"r in (n+1)\" :key=\"'r'+r\">\n          <div\n            class=\"cell\"\n            v-for=\"c in (n+1)\"\n            :key=\"'c'+r+'-'+c\"\n            :class=\"{\n              head: r===1 || c===1,\n              corner: r===1 && c===1,\n              body: !(r===1 || c===1)\n            }\"\n          >\n            <!-- Corner -->\n            <template v-if=\"r===1 && c===1\"></template>\n\n            <!-- Pre-filled cells -->\n            <template v-else-if=\"!blanks.has((r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`)\">\n              <span class=\"num\" :style=\"numDir\">{{ valueAt(r-1,c-1) }}</span>\n            </template>\n\n            <!-- Blanks -->\n            <template v-else>\n              <div class=\"dropzone\"\n                   @dragover=\"allowDrop\"\n                   @drop=\"onDrop($event,(r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`)\">\n                <span\n                  v-if=\"answerMap[(r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`] != null\"\n                  class=\"num\"\n                  :style=\"numDir\"\n                >\n                  {{ answerMap[(r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`] }}\n                </span>\n                <span v-else class=\"placeholder\"></span>\n              </div>\n\n              <input class=\"manual-entry\" type=\"number\"\n                     :value=\"manualDrafts[(r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`] ?? ''\"\n                     @input=\"onManualInput((r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`, $event.target.value)\"\n                     @change=\"commitManual((r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`)\"\n                     @blur=\"commitManual((r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`)\"\n                     :placeholder=\"props.lang==='ar' ? ' ' : 'Enter value'\"/>\n\n              <button class=\"clear\" @click=\"clearCell((r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`)\">\n                <Eraser class=\"ic\" /> {{ T[L].clear }}\n              </button>\n            </template>\n          </div>\n        </div>\n      </div>\n\n      <!-- Bank -->\n      <div class=\"side\">\n        <div class=\"bank-title\">{{ T[L].bank }}</div>\n        <div class=\"bank-items\">\n          <button\n            v-for=\"v in bankList\"\n            :key=\"v + '_' + Math.random()\"\n            class=\"chip\"\n            draggable=\"true\"\n            @dragstart=\"onDragStart($event, v)\"\n            :style=\"numDir\"\n          >\n            {{ v }}\n          </button>\n        </div>\n\n        <div class=\"actions\">\n          <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n          <button class=\"btn primary\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n          <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n        </div>\n\n        <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n      </div>\n    </div>\n\n    <!-- Success overlay -->\n    <div v-if=\"solved\" class=\"overlay\">\n      <div class=\"card\">\n        <div class=\"big\">{{ T[L].correct }}</div>\n        <button class=\"btn primary\" @click=\"newPuzzle\">{{ T[L].newQ }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* =========================\n   Theme tokens\n   - High contrast in dark mode\n   - All surfaces and borders derive from tokens\n========================= */\n.challenge4{\n  --bg: #ffffff;\n  --fg: #0b1220;\n  --muted: #64748b;\n\n  --panel: #ffffff;\n  --panel-bd: #cbd5e1;\n  --panel-shadow: 0 6px 22px rgba(2,6,23,.08);\n\n  --head-bg: #fff7e6;             /* header cells */\n  --head-bd: #fbbf24;\n  --head-fg: #7c2d12;\n\n  --cell-bd: #cbd5e1;\n  --cell-bg: #ffffff;\n\n  --drop-bg: rgba(59,130,246,.10);\n  --drop-bd: #93c5fd;\n\n  --input-bg: #ffffff;\n  --input-bd: #cbd5e1;\n\n  --chip-bg: #ffffff;\n  --chip-bd: #cbd5e1;\n\n  --btn-bg: #ffffff;\n  --btn-bd: #cbd5e1;\n  --btn-fg: #0b1220;\n\n  --btn-primary-bg: #0ea5e9;\n  --btn-primary-fg: #ffffff;\n\n  --toast-err-bg: #fee2e2; --toast-err-fg: #991b1b; --toast-err-bd: #fecaca;\n  --toast-ok-bg: #dcfce7;  --toast-ok-fg: #166534;  --toast-ok-bd: #bbf7d0;\n\n  --overlay: rgba(2,6,23,.45);\n}\n\n[data-theme=\"dark\"] .challenge4{\n  --bg: #0b1220;\n  --fg: #e5e7eb;\n  --muted: #9ca3af;\n\n  --panel: #0f172a;\n  --panel-bd: #334155;\n  --panel-shadow: 0 10px 28px rgba(0,0,0,.45);\n\n  --head-bg: #3b3a1a;            /* warm but subdued */\n  --head-bd: #a16207;\n  --head-fg: #fde68a;\n\n  --cell-bd: #475569;\n  --cell-bg: #111827;\n\n  --drop-bg: rgba(56,189,248,.20);\n  --drop-bd: #38bdf8;\n\n  --input-bg: #111827;\n  --input-bd: #475569;\n\n  --chip-bg: #111827;\n  --chip-bd: #475569;\n\n  --btn-bg: #111827;\n  --btn-bd: #475569;\n  --btn-fg: #e5e7eb;\n\n  --btn-primary-bg: #38bdf8;\n  --btn-primary-fg: #0b1220;\n\n  --toast-err-bg: rgba(248,113,113,.18); --toast-err-fg: #fecaca; --toast-err-bd: rgba(248,113,113,.45);\n  --toast-ok-bg: rgba(34,197,94,.22);    --toast-ok-fg: #bbf7d0;  --toast-ok-bd: rgba(34,197,94,.50);\n\n  --overlay: rgba(0,0,0,.55);\n}\n\n/* =========================\n   Layout\n========================= */\n.title{ margin:0 0 .4rem; font-weight:800; color:var(--fg) }\n.rule{ margin:0 0 1rem; color:var(--muted) }\n\n.wrap{ display:grid; grid-template-columns:auto 280px; gap:1rem }\n\n/* table */\n.table{\n  background:var(--panel);\n  border:1px solid var(--panel-bd);\n  border-radius:12px;\n  padding:.75rem;\n  box-shadow:var(--panel-shadow);\n}\n.row{ display:grid; grid-template-columns: repeat(4, 120px); gap:.5rem }\n.cell{\n  min-height:84px; border-radius:10px; padding:.4rem;\n  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.35rem;\n  background:var(--cell-bg); border:1.5px dashed var(--cell-bd);\n}\n.cell.head{ background:var(--head-bg); border-color:var(--head-bd); color:var(--head-fg); font-weight:800 }\n.cell.corner{ background:color-mix(in oklab, var(--head-bg) 80%, black 20%); border-color:var(--head-bd) }\n\n.num{ font-variant-numeric:tabular-nums; font-weight:800; font-size:1.1rem; color:var(--fg) }\n.placeholder{ color:var(--muted); font-size:1.15rem }\n\n.dropzone{\n  width:100%; flex:1; display:flex; align-items:center; justify-content:center;\n  background:var(--drop-bg); border:2px dashed var(--drop-bd);\n  border-radius:.6rem; transition:border-color .15s, box-shadow .15s;\n}\n.dropzone:hover{ box-shadow:0 0 0 3px color-mix(in oklab, var(--drop-bd) 40%, transparent) }\n\n.manual-entry{\n  width:100%; padding:.5rem .65rem; border-radius:.6rem;\n  background:var(--input-bg); border:1px solid var(--input-bd);\n  color:var(--fg); font-size:.95rem; direction:ltr;\n}\n.manual-entry:focus{\n  outline:none; border-color:var(--drop-bd);\n  box-shadow:0 0 0 3px color-mix(in oklab, var(--drop-bd) 30%, transparent)\n}\n.clear{ border:none; background:transparent; color:var(--muted); cursor:pointer; display:flex; align-items:center; gap:.35rem; font-size:.85rem }\n.ic{ width:16px; height:16px }\n\n/* bank */\n.side{ display:flex; flex-direction:column; gap:.75rem }\n.bank-title{ font-weight:800; color:var(--muted) }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.55rem }\n.chip{\n  background:var(--chip-bg); border:1px solid var(--chip-bd); color:var(--fg);\n  padding:.5rem .7rem; border-radius:.8rem; cursor:grab; min-width:56px; text-align:center;\n  font-variant-numeric:tabular-nums; box-shadow:0 6px 16px rgba(0,0,0,.10)\n}\n.chip:active{ cursor:grabbing }\n\n/* actions */\n.actions{ display:flex; gap:.6rem; flex-wrap:wrap }\n.btn{\n  display:inline-flex; align-items:center; gap:.45rem; padding:.6rem .85rem;\n  background:var(--btn-bg); border:1px solid var(--btn-bd); color:var(--btn-fg);\n  border-radius:.9rem; cursor:pointer; transition:transform .12s, box-shadow .12s\n}\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,0,0,.12) }\n.btn.primary{ background:var(--btn-primary-bg); color:var(--btn-primary-fg); border-color:transparent }\n\n/* toast */\n.toast{\n  padding:.65rem .9rem; border-radius:.9rem; text-align:center; font-weight:800;\n  background:var(--toast-err-bg); color:var(--toast-err-fg); border:1px solid var(--toast-err-bd)\n}\n.toast.ok{ background:var(--toast-ok-bg); color:var(--toast-ok-fg); border-color:var(--toast-ok-bd); margin-top:.35rem }\n\n/* success overlay */\n.overlay{ position:fixed; inset:0; background:var(--overlay); display:flex; align-items:center; justify-content:center; z-index:30 }\n.card{\n  background:var(--panel); border:1px solid var(--panel-bd);\n  color:var(--fg); padding:1rem 1.25rem; border-radius:1rem; box-shadow:var(--panel-shadow);\n  display:flex; flex-direction:column; gap:.8rem; align-items:center\n}\n.big{ font-size:1.25rem; font-weight:900 }\n</style>\n","export default \"__VITE_ASSET___uDUUqD3__\"","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{ title:' 5:   ()',\n       rule:'           .     .',\n       bank:' ', newQ:' ', reset:' ', check:'',\n       correct:' ', wrong:'  ', clear:' ' },\n  en:{ title:'Challenge 5: Triangle product',\n       rule:'Each edge-square equals the product of the two adjacent circles. Drag missing values into the squares.',\n       bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n       correct:'Correct answer', wrong:'Check your values', clear:'Clear cell' }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong5.mp3'   //     \n\nconst sOK   = typeof Audio !== 'undefined' ? new Audio(successUrl) : null\nconst sClap = typeof Audio !== 'undefined' ? new Audio(clapUrl)    : null\nconst sWrong= typeof Audio !== 'undefined' ? new Audio(wrongUrl)   : null\n\nsOK && (sOK.preload = 'auto')\nsClap && (sClap.preload = 'auto')\nsWrong && (sWrong.preload = 'auto')\n\nconst EXTRA_CHOICES = 4\n\n// utils\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n// state\nconst circles = ref([2,3,4])         // [top, left, right]\nconst squares = ref({ t:0, l:0, r:0 }) // edge squares: top edge between left-right? define: t=top (left-right base), l=left (top-left), r=right (top-right)\nconst blanks = ref(new Set())        // which of ['t','l','r'] are blank\nconst answerMap = ref({})            // key -> value\nconst manualDrafts = ref({})         // key -> manual string\nconst bankCounts = ref({})           // value -> remaining copies\nconst solved = ref(false)\nconst toast = ref(null)\n\nfunction buildTriangle(){\n  // choose distinct circle values 2..9\n  const vals = shuffle([2,3,4,5,6,7,8,9]).slice(0,3)\n  circles.value = [vals[0], vals[1], vals[2]]\n  const [ct, cl, cr] = circles.value   // top, left, right\n  // products\n  squares.value = {\n    l: ct * cl, // left edge (top-left)\n    r: ct * cr, // right edge (top-right)\n    t: cl * cr  // base edge (left-right)\n  }\n}\n\nfunction pickBlanks(){\n  const keys = ['l','r','t']\n  const k = rndInt(2,3)\n  blanks.value = new Set(shuffle(keys).slice(0,k))\n}\n\nfunction rebuildBank(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const v = squares.value[k]\n    counts[v]=(counts[v]||0)+1\n  })\n  // subtract placed answers\n  for(const [k,v] of Object.entries(answerMap.value)){\n    counts[v]=(counts[v]||0)-1\n  }\n  for(const [v,ct] of Object.entries(counts)){ if(ct<=0) delete counts[v] }\n\n  // inject extra distractor values to broaden the number bank\n  const neededExtras = EXTRA_CHOICES\n  if (neededExtras > 0) {\n    const usedValues = new Set(Object.keys(counts).map(Number))\n    const answerValues = new Set(Object.values(squares.value))\n    const pool = []\n    for (let value = 4; value <= 81; value++) {\n      if (!usedValues.has(value) && !answerValues.has(value)) {\n        pool.push(value)\n      }\n    }\n    for (let i = 0; i < neededExtras && pool.length; i++) {\n      const idx = Math.floor(Math.random() * pool.length)\n      const candidate = pool.splice(idx, 1)[0]\n      counts[candidate] = (counts[candidate] || 0) + 1\n    }\n  }\n\n  bankCounts.value = counts\n}\n\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}; manualDrafts.value={}\n  buildTriangle()\n  pickBlanks()\n  rebuildBank()\n}\n\nfunction isFilled(){\n  for(const k of blanks.value){ if(answerMap.value[k]==null) return false }\n  return true\n}\nfunction isCorrect(){\n  if(!isFilled()) return false\n  for(const k of blanks.value){\n    if(answerMap.value[k] !== squares.value[k]) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar'?'  ':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){\n  answerMap.value={}\n  rebuildBank()\n  toast.value=null; solved.value=false\n}\n\n// drag & drop\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction setAnswer(key, value, { fromManual = false } = {}){\n  if(Number.isNaN(value)) return\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  if(fromManual){\n    if((bankCounts.value[value]||0)>0){\n      bankCounts.value[value]-=1\n    }\n  } else {\n    if((bankCounts.value[value]||0)===0) return\n    bankCounts.value[value]-=1\n  }\n  answerMap.value[key]=value\n  manualDrafts.value = { ...manualDrafts.value, [key]: String(value) }\n  toast.value=null\n}\n\nfunction onDrop(ev,key){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  setAnswer(key, v)\n}\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n  manualDrafts.value = { ...manualDrafts.value, [key]: '' }\n}\n\nfunction onManualInput(key, value){\n  manualDrafts.value = { ...manualDrafts.value, [key]: value }\n}\n\nfunction commitManual(key){\n  const raw = (manualDrafts.value[key] ?? '').trim()\n  if(raw === ''){\n    clearCell(key)\n    return\n  }\n  const num = Number(raw)\n  if(!Number.isFinite(num)) return\n  setAnswer(key, num, { fromManual: true })\n}\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"challenge5 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <!--  -->\n    <div class=\"tri-wrap\">\n      <!--  -->\n      <svg class=\"links\" viewBox=\"0 0 300 260\" preserveAspectRatio=\"none\">\n        <line x1=\"150\" y1=\"40\" x2=\"60\"  y2=\"140\" />\n        <line x1=\"150\" y1=\"40\" x2=\"240\" y2=\"140\" />\n        <line x1=\"60\"  y1=\"140\" x2=\"240\" y2=\"140\" />\n      </svg>\n\n      <!--  -->\n      <div class=\"circle top\" :style=\"numDir\">{{ circles[0] }}</div>\n      <div class=\"circle left\" :style=\"numDir\">{{ circles[1] }}</div>\n      <div class=\"circle right\" :style=\"numDir\">{{ circles[2] }}</div>\n\n      <!--    -->\n      <!-- left edge -->\n      <div class=\"square left-sq\">\n        <template v-if=\"!blanks.has('l')\">\n          <span class=\"num\" :style=\"numDir\">{{ squares.l }}</span>\n        </template>\n        <template v-else>\n          <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event,'l')\">\n            <span v-if=\"answerMap['l']!=null\" class=\"num\" :style=\"numDir\">{{ answerMap['l'] }}</span>\n            <span v-else class=\"placeholder\"></span>\n          </div>\n          <input\n            class=\"manual-entry\"\n            type=\"number\"\n            :value=\"manualDrafts['l'] ?? ''\"\n            @input=\"onManualInput('l', $event.target.value)\"\n            @change=\"commitManual('l')\"\n            @blur=\"commitManual('l')\"\n            :placeholder=\"props.lang==='ar' ? ' ' : 'Enter value'\"\n          />\n          <button class=\"clear\" @click=\"clearCell('l')\"><Eraser class=\"ic\"/> {{ T[L].clear }}</button>\n        </template>\n      </div>\n\n      <!-- right edge -->\n      <div class=\"square right-sq\">\n        <template v-if=\"!blanks.has('r')\">\n          <span class=\"num\" :style=\"numDir\">{{ squares.r }}</span>\n        </template>\n        <template v-else>\n          <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event,'r')\">\n            <span v-if=\"answerMap['r']!=null\" class=\"num\" :style=\"numDir\">{{ answerMap['r'] }}</span>\n            <span v-else class=\"placeholder\"></span>\n          </div>\n          <input\n            class=\"manual-entry\"\n            type=\"number\"\n            :value=\"manualDrafts['r'] ?? ''\"\n            @input=\"onManualInput('r', $event.target.value)\"\n            @change=\"commitManual('r')\"\n            @blur=\"commitManual('r')\"\n            :placeholder=\"props.lang==='ar' ? ' ' : 'Enter value'\"\n          />\n          <button class=\"clear\" @click=\"clearCell('r')\"><Eraser class=\"ic\"/> {{ T[L].clear }}</button>\n        </template>\n      </div>\n\n      <!-- base edge -->\n      <div class=\"square base-sq\">\n        <template v-if=\"!blanks.has('t')\">\n          <span class=\"num\" :style=\"numDir\">{{ squares.t }}</span>\n        </template>\n        <template v-else>\n          <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event,'t')\">\n            <span v-if=\"answerMap['t']!=null\" class=\"num\" :style=\"numDir\">{{ answerMap['t'] }}</span>\n            <span v-else class=\"placeholder\"></span>\n          </div>\n          <input\n            class=\"manual-entry\"\n            type=\"number\"\n            :value=\"manualDrafts['t'] ?? ''\"\n            @input=\"onManualInput('t', $event.target.value)\"\n            @change=\"commitManual('t')\"\n            @blur=\"commitManual('t')\"\n            :placeholder=\"props.lang==='ar' ? ' ' : 'Enter value'\"\n          />\n          <button class=\"clear\" @click=\"clearCell('t')\"><Eraser class=\"ic\"/> {{ T[L].clear }}</button>\n        </template>\n      </div>\n    </div>\n\n    <!--  -->\n    <div class=\"side\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button v-for=\"v in bankList\" :key=\"v + '_' + Math.random()\" class=\"chip\"\n                draggable=\"true\" @dragstart=\"onDragStart($event, v)\" :style=\"numDir\">\n          {{ v }}\n        </button>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n\n    <div v-if=\"solved\" class=\"overlay\">\n      <div class=\"card\">\n        <div class=\"big\">{{ T[L].correct }}</div>\n        <button class=\"btn\" @click=\"newPuzzle\">{{ T[L].newQ }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.challenge5{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .challenge5{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n/*  */\n.tri-wrap{\n  position:relative;\n  width:360px;            /*      */\n  height:300px;\n  margin:0 auto 1rem;\n  background:var(--bg);\n  border-radius:1rem;\n  box-shadow:0 4px 14px rgba(0,0,0,.06);\n  padding:8px;            /*     */\n}\n\n.links{ position:absolute; inset:0; pointer-events:none }\n.links line{ stroke:#cbd5e1; stroke-width:2 }\n\n.circle{\n  position:absolute; width:58px; height:58px; border-radius:9999px;\n  background:rgba(234,179,8,.22);\n  display:flex; align-items:center; justify-content:center;\n  font-weight:700; font-variant-numeric:tabular-nums;\n}\n.top{   left:151px; top:24px }     /* 180 - 29 */\n.left{  left:51px;  top:168px }\n.right{ right:51px; top:168px }\n\n.square{\n  position:absolute; width:74px; height:60px;\n  background:rgba(99,102,241,.08);\n  border-radius:.75rem; border:1px dashed #cbd5e1;\n  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.25rem;\n}\n.left-sq{  left:70px;  top:88px }  /*    */\n.right-sq{ right:70px; top:88px }\n.base-sq{  left:143px; bottom:32px } /* (360-74)/2   */\n\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.15rem }\n.placeholder{ color:var(--muted); font-size:1.15rem }\n.dropzone{ width:100%; flex:1; display:flex; align-items:center; justify-content:center; }\n.manual-entry{ width:100%; padding:.4rem .55rem; border-radius:.6rem; border:1px solid rgba(99,102,241,.2); background:rgba(255,255,255,.92); font-size:.95rem; direction:ltr; color:var(--fg); }\n.manual-entry:focus{ outline:none; border-color:rgba(15,138,62,.45); box-shadow:0 0 0 3px rgba(15,138,62,.16); }\n[data-theme=\"dark\"] .manual-entry{ background:rgba(15,23,42,.8); border-color:rgba(148,163,184,.25); color:var(--fg); }\n.clear{ font-size:.75rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n\n/*  */\n.side{ max-width:420px; margin:0 auto }\n.bank-title{ font-weight:600; color:var(--muted); margin:.25rem 0 }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ border:1px solid #e5e7eb55; background:var(--bg); padding:.4rem .6rem; border-radius:.75rem; cursor:grab; font-variant-numeric:tabular-nums }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.toast{ margin-top:.5rem; padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n\n/*  */\n.overlay{ position:fixed; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center }\n.card{ background:var(--bg); color:var(--fg); padding:1rem 1.25rem; border-radius:1rem; box-shadow:0 10px 30px rgba(0,0,0,.25); display:flex; flex-direction:column; gap:.75rem; align-items:center }\n.big{ font-size:1.25rem; font-weight:700 }\n</style>\n","<script setup>\n/* =========================================================\n   Challenge 6  Pick 3 cells (distinct rows/cols) to reach target\n   Fixes for dark mode:\n   - High-contrast theme tokens\n   - Cells, hover, picked, and focus states tuned for dark\n   - Panel and toast colors adapted\n   Code notes are short and human.\n========================================================= */\n\nimport { ref, computed, onMounted } from 'vue'\nimport { RefreshCw, RotateCcw, Check } from 'lucide-vue-next'\n\nconst props = defineProps({\n  lang:  { type: String, default: 'ar' },\n  theme: { type: String, default: 'light' } // 'light' | 'dark'\n})\n\n/* -------- copy -------- */\nconst T = {\n  ar:{\n    title:' 6:                ',\n    rule:(n,t)=>` ${n}${n}.             ${t}.`,\n    newQ:' ', reset:' ', check:'',\n    correct:' ', wrong:'     ',\n    pick3:'  '\n  },\n  en:{\n    title:'Challenge 6: Pick 3 cells in different rows and columns to reach the target',\n    rule:(n,t)=>`A ${n}${n} grid. Pick three cells, one per distinct row and column, that sum to ${t}.`,\n    newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct', wrong:'Check constraints or sum',\n    pick3:'Pick three cells'\n  }\n}\nconst L = computed(() => (T[props.lang] ? props.lang : 'ar'))\n\n/* -------- sounds (tiny) -------- */\nimport successUrl from '@/assets/sounds/success.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio !== 'undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio !== 'undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio !== 'undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* -------- utils -------- */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\n\n/* -------- state -------- */\nconst n = ref(3)          // grid size (3 or 4)\nconst grid = ref([])      // 2D numbers\nconst target = ref(0)     // target sum (guaranteed solvable)\nconst picks = ref([])     // [{r,c}]\nconst solved = ref(false)\nconst toast  = ref(null)\n\n/* numbers stay LTR even in RTL UI */\nconst numDir = computed(() => ({ direction:'ltr', unicodeBidi:'isolate' }))\n\n/* flatten grid for a simple v-for */\nconst flat = computed(() => grid.value.flatMap((row,r) => row.map((v,c) => ({ v, r, c })) ))\n\n/* recompute current picked sum */\nconst pickedSum = computed(() => picks.value.reduce((s,p)=> s + grid.value[p.r][p.c], 0))\n\n/* build a puzzle that is guaranteed to have at least one solution */\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; picks.value=[]\n  n.value = [3,4][rndInt(0,1)]\n  grid.value = Array.from({length:n.value}, () => Array.from({length:n.value}, () => rndInt(1,9)))\n  const rows = shuffle([...Array(n.value).keys()]).slice(0,3)\n  const cols = shuffle([...Array(n.value).keys()]).slice(0,3)\n  const perm = shuffle(cols.slice())\n  const solution = rows.map((r,i)=>({ r, c: perm[i] }))\n  target.value = solution.reduce((s,p)=> s + grid.value[p.r][p.c], 0)\n}\nonMounted(newPuzzle)\n\n/* interactions */\nfunction resetPicks(){ picks.value=[]; toast.value=null; solved.value=false }\nfunction toggleCell(r,c){\n  if(solved.value) return\n  const i = picks.value.findIndex(p => p.r===r && p.c===c)\n  if(i>=0){ picks.value.splice(i,1); return }\n  if(picks.value.length===3) return\n  picks.value.push({ r,c })\n}\nfunction rowsDistinct(){ return new Set(picks.value.map(p=>p.r)).size === picks.value.length }\nfunction colsDistinct(){ return new Set(picks.value.map(p=>p.c)).size === picks.value.length }\n\n/* checking */\nasync function addPoint(){ try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{} }\nasync function checkNow(){\n  if(picks.value.length!==3){ toast.value = T[L.value].pick3; sWrong&&sWrong.play(); return }\n  if(!rowsDistinct() || !colsDistinct()){ toast.value=T[L.value].wrong; sWrong&&sWrong.play(); return }\n  if(pickedSum.value === target.value){\n    solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint()\n  }else{\n    toast.value=T[L.value].wrong; sWrong&&sWrong.play()\n  }\n}\n</script>\n\n<template>\n  <div class=\"challenge6 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(n, target) }}</p>\n\n    <!-- grid -->\n    <div class=\"grid\" :style=\"{'--n': n}\">\n      <button\n        v-for=\"cell in flat\" :key=\"cell.r + '-' + cell.c\"\n        class=\"cell\"\n        :class=\"{ picked: picks.some(p => p.r===cell.r && p.c===cell.c) }\"\n        :aria-pressed=\"picks.some(p => p.r===cell.r && p.c===cell.c)\"\n        @click=\"toggleCell(cell.r, cell.c)\"\n        :style=\"numDir\"\n      >\n        {{ cell.v }}\n      </button>\n    </div>\n\n    <!-- controls -->\n    <div class=\"panel\">\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetPicks\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn primary\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* =========================\n   Theme tokens with high contrast\n========================= */\n.challenge6{\n  --bg:#ffffff; --fg:#0b1220; --muted:#64748b;\n\n  --panel:#ffffff; --panel-bd:#cbd5e1; --panel-shadow:0 8px 24px rgba(2,6,23,.08);\n\n  --cell-bg:#ffffff; --cell-bd:#cbd5e1;\n  --cell-hover:rgba(59,130,246,.14);\n  --cell-picked-bg:rgba(59,130,246,.18);\n  --cell-picked-bd:#60a5fa;\n  --cell-focus:#38bdf8;\n\n  --btn-bg:#ffffff; --btn-bd:#cbd5e1; --btn-fg:#0b1220;\n  --btn-primary-bg:#0ea5e9; --btn-primary-fg:#ffffff;\n\n  --toast-err-bg:#fee2e2; --toast-err-fg:#991b1b; --toast-err-bd:#fecaca;\n  --toast-ok-bg:#dcfce7;  --toast-ok-fg:#166534;  --toast-ok-bd:#bbf7d0;\n}\n\n[data-theme=\"dark\"] .challenge6{\n  --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af;\n\n  --panel:#0f172a; --panel-bd:#334155; --panel-shadow:0 12px 28px rgba(0,0,0,.5);\n\n  --cell-bg:#111827; --cell-bd:#475569;\n  --cell-hover:rgba(56,189,248,.22);\n  --cell-picked-bg:rgba(56,189,248,.26);\n  --cell-picked-bd:#38bdf8;\n  --cell-focus:#38bdf8;\n\n  --btn-bg:#111827; --btn-bd:#475569; --btn-fg:#e5e7eb;\n  --btn-primary-bg:#38bdf8; --btn-primary-fg:#0b1220;\n\n  --toast-err-bg:rgba(248,113,113,.18); --toast-err-fg:#fecaca; --toast-err-bd:rgba(248,113,113,.45);\n  --toast-ok-bg:rgba(34,197,94,.22);    --toast-ok-fg:#bbf7d0;  --toast-ok-bd:rgba(34,197,94,.50);\n}\n\n/* =========================\n   Layout\n========================= */\n.title{ margin:0 0 .35rem; font-weight:800; color:var(--fg) }\n.rule{  margin:0 0 1rem; color:var(--muted) }\n\n/* grid container */\n.grid{\n  --gap:.6rem;\n  display:grid;\n  grid-template-columns: repeat(var(--n), 84px);\n  grid-auto-rows: 84px;\n  gap:var(--gap);\n  background:var(--panel);\n  border:1px solid var(--panel-bd);\n  border-radius:14px;\n  box-shadow:var(--panel-shadow);\n  padding:.8rem;\n  width:max-content;\n}\n\n/* cell button */\n.cell{\n  border:1px solid var(--cell-bd);\n  background:var(--cell-bg);\n  color:var(--fg);\n  border-radius:12px;\n  font-variant-numeric:tabular-nums;\n  font-weight:800;\n  font-size:1.25rem;\n  cursor:pointer;\n  display:flex; align-items:center; justify-content:center;\n  transition:box-shadow .12s, background .12s, border-color .12s, transform .06s;\n}\n.cell:hover{ background:var(--cell-hover) }\n.cell:focus-visible{\n  outline:none;\n  box-shadow:0 0 0 3px color-mix(in oklab, var(--cell-focus) 35%, transparent);\n  border-color:var(--cell-focus)\n}\n.cell.picked{\n  background:var(--cell-picked-bg);\n  border-color:var(--cell-picked-bd);\n}\n\n/* actions */\n.panel{ display:flex; align-items:center; gap:1rem; flex-wrap:wrap; margin-top:.8rem }\n.actions{ display:flex; gap:.6rem; flex-wrap:wrap }\n.btn{\n  display:inline-flex; align-items:center; gap:.45rem;\n  padding:.6rem .85rem; border-radius:.95rem;\n  background:var(--btn-bg); border:1px solid var(--btn-bd); color:var(--btn-fg);\n  cursor:pointer; transition:transform .12s, box-shadow .12s\n}\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,0,0,.12) }\n.btn.primary{ background:var(--btn-primary-bg); color:var(--btn-primary-fg); border-color:transparent }\n.ic{ width:16px; height:16px }\n\n/* feedback */\n.toast{\n  padding:.6rem .9rem; border-radius:.9rem; text-align:center; font-weight:800;\n  background:var(--toast-err-bg); color:var(--toast-err-fg); border:1px solid var(--toast-err-bd)\n}\n.toast.ok{ background:var(--toast-ok-bg); color:var(--toast-ok-fg); border-color:var(--toast-ok-bd) }\n</style>\n","<script setup>\n/* =========================================================\n   Level 1  Challenge 7: Sum Pyramid (Addition Wall)\n   Dark-mode fixes:\n   - Stronger contrast tokens for panels, cells, borders, text\n   - Hover/focus states tuned for dark\n   - Chips, inputs, and toasts readable on both themes\n   Notes are short and human.\n========================================================= */\n\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({\n  lang:  { type:String, default:'ar' },\n  theme: { type:String, default:'light' } // 'light' | 'dark'\n})\n\n/* ---------- copy ---------- */\nconst T = {\n  ar:{ title:' 7:   ( )',\n       rule:'       .     .',\n       bank:' ', newQ:' ', reset:' ', check:'',\n       correct:' ', wrong:'  ', clear:' ' },\n  en:{ title:'Challenge 7: Sum Pyramid',\n       rule:'Each cell equals the sum of the two cells directly below. Drag missing values to complete the pyramid.',\n       bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n       correct:'Correct answer', wrong:'Check your values', clear:'Clear cell' }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ---------- tiny sounds ---------- */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ---------- helpers ---------- */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\n\n/* ---------- config ---------- */\nconst EXTRA_CHOICES = 6\n\n/* ---------- state ---------- */\nconst baseN        = ref(4)               // base width\nconst rows         = ref([])              // rows[0] = base\nconst blanks       = ref(new Set())       // \"r,c\" (r=0 is base)\nconst answerMap    = ref({})              // placed answers\nconst manualDrafts = ref({})              // input drafts\nconst bankCounts   = ref({})              // value -> remaining\nconst solved       = ref(false)\nconst toast        = ref(null)\n\n/* keep numerals LTR even in RTL UI */\nconst numDir = computed(()=>({ direction:'ltr', unicodeBidi:'isolate' }))\n\n/* ---------- build pyramid ---------- */\nfunction buildPyramid(n){\n  const rs=[]\n  rs[0] = Array.from({length:n}, ()=> rndInt(1,9))\n  for(let r=1;r<n;r++){\n    rs[r] = Array.from({length:n-r}, (_,c)=> rs[r-1][c] + rs[r-1][c+1])\n  }\n  return rs\n}\nconst keyOf = (r,c)=>`${r},${c}`\n\n/* choose blanks (keep at least one visible per non-base row) */\nfunction pickBlanks(n){\n  const keep = new Set()\n  for(let r=1;r<n;r++){\n    const idx = rndInt(0, rows.value[r].length-1)\n    keep.add(keyOf(r, idx))\n  }\n  const candidates=[]\n  for(let r=1;r<n;r++) for(let c=0;c<rows.value[r].length;c++){\n    if(!keep.has(keyOf(r,c))) candidates.push([r,c])\n  }\n  const k = rndInt(4, 6)\n  return new Set(shuffle(candidates).slice(0,k).map(([r,c])=>keyOf(r,c)))\n}\n\n/* rebuild number bank with counts + distractors */\nfunction rebuildBank(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const [r,c]=k.split(',').map(Number)\n    const v=rows.value[r][c]\n    counts[v]=(counts[v]||0)+1\n  })\n  for(const v of Object.values(answerMap.value)){\n    counts[v]=(counts[v]||0)-1\n  }\n  for(const [v,ct] of Object.entries(counts)){ if(ct<=0) delete counts[v] }\n\n  // add extras that are not real answers\n  const used = new Set(Object.keys(counts).map(Number))\n  const real = new Set(rows.value.flat())\n  const pool=[]\n  for(let v=2; v<=150; v++){\n    if(!used.has(v) && !real.has(v)) pool.push(v)\n  }\n  shuffle(pool).slice(0,EXTRA_CHOICES).forEach(v=>{\n    counts[v]=(counts[v]||0)+1\n  })\n\n  bankCounts.value = counts\n}\n\n/* list bank items honoring counts */\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\n/* ---------- lifecycle ---------- */\nfunction newPuzzle(){\n  solved.value=false; toast.value=null\n  answerMap.value={}; manualDrafts.value={}\n  rows.value   = buildPyramid(baseN.value)\n  blanks.value = pickBlanks(baseN.value)\n  rebuildBank()\n}\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{ if(!solved.value) toast.value=null })\n\n/* ---------- checks ---------- */\nfunction isFilled(){ for(const k of blanks.value){ if(answerMap.value[k]==null) return false } return true }\nfunction isCorrect(){\n  if(!isFilled()) return false\n  for(const k of blanks.value){\n    const [r,c]=k.split(',').map(Number)\n    if(answerMap.value[k] !== rows.value[r][c]) return false\n  }\n  return true\n}\nasync function addPoint(){ try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{} }\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar'?'  ':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){\n  answerMap.value={}; manualDrafts.value={}\n  rebuildBank(); toast.value=null; solved.value=false\n}\n\n/* ---------- DnD + manual ---------- */\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction setAnswer(key, value, { fromManual=false } = {}){\n  if(Number.isNaN(value)) return\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  if(!fromManual){\n    if((bankCounts.value[value]||0)===0) return\n  }\n  bankCounts.value[value]=(bankCounts.value[value]||0)-1\n  if(bankCounts.value[value]<0) bankCounts.value[value]=0\n  answerMap.value[key]=value\n  manualDrafts.value = { ...manualDrafts.value, [key]: String(value) }\n  toast.value=null\n}\nfunction onDrop(ev,key){ ev.preventDefault(); const v=Number(ev.dataTransfer.getData('text/plain')); setAnswer(key,v) }\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n  manualDrafts.value = { ...manualDrafts.value, [key]: '' }\n}\nfunction onManualInput(key, value){ manualDrafts.value = { ...manualDrafts.value, [key]: value } }\nfunction commitManual(key){\n  const raw=(manualDrafts.value[key]??'').trim()\n  if(raw===''){ clearCell(key); return }\n  const num=Number(raw); if(!Number.isFinite(num)) return\n  setAnswer(key, num, { fromManual:true })\n}\n</script>\n\n<template>\n  <div class=\"challenge7 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <!-- pyramid -->\n    <div class=\"pyramid\">\n      <div class=\"prow\" v-for=\"(row,r) in rows\" :key=\"'r'+r\" :style=\"{ '--cols': row.length }\">\n        <div class=\"cell\" v-for=\"(v,c) in row\" :key=\"r+'-'+c\">\n          <template v-if=\"!blanks.has(`${r},${c}`)\">\n            <span class=\"num\" :style=\"numDir\">{{ v }}</span>\n          </template>\n          <template v-else>\n            <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event, `${r},${c}`)\">\n              <span v-if=\"answerMap[`${r},${c}`]!=null\" class=\"num\" :style=\"numDir\">{{ answerMap[`${r},${c}`] }}</span>\n              <span v-else class=\"placeholder\"></span>\n            </div>\n            <input\n              class=\"manual-entry\"\n              type=\"number\"\n              :value=\"manualDrafts[`${r},${c}`] ?? ''\"\n              @input=\"onManualInput(`${r},${c}`, $event.target.value)\"\n              @change=\"commitManual(`${r},${c}`)\"\n              @blur=\"commitManual(`${r},${c}`)\"\n              :placeholder=\"props.lang==='ar' ? ' ' : 'Enter value'\"\n            />\n            <button class=\"clear\" @click=\"clearCell(`${r},${c}`)\"><Eraser class=\"ic\" /> {{ T[L].clear }}</button>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <!-- bank + actions -->\n    <div class=\"side\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"v in bankList\" :key=\"v + '_' + Math.random()\"\n          class=\"chip\" draggable=\"true\"\n          @dragstart=\"onDragStart($event, v)\" :style=\"numDir\"\n        >{{ v }}</button>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn primary\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* =========================\n   High-contrast theme tokens\n========================= */\n.challenge7{\n  --bg:#ffffff; --fg:#0b1220; --muted:#64748b;\n\n  --panel:#ffffff; --panel-bd:#cbd5e1; --panel-shadow:0 8px 24px rgba(2,6,23,.08);\n\n  --cell-bg:#f8fafc; --cell-bd:#cbd5e1; --cell-dashed:#93c5fd;\n  --cell-hover:rgba(59,130,246,.12);\n  --input-bg:#ffffff; --input-bd:#cbd5e1;\n\n  --chip-bg:#ffffff; --chip-bd:#cbd5e1;\n\n  --btn-bg:#ffffff; --btn-bd:#cbd5e1; --btn-fg:#0b1220;\n  --btn-primary-bg:#0ea5e9; --btn-primary-fg:#ffffff;\n\n  --toast-err-bg:#fee2e2; --toast-err-fg:#991b1b; --toast-err-bd:#fecaca;\n  --toast-ok-bg:#dcfce7;  --toast-ok-fg:#166534;  --toast-ok-bd:#bbf7d0;\n}\n\n[data-theme=\"dark\"] .challenge7{\n  --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af;\n\n  --panel:#0f172a; --panel-bd:#334155; --panel-shadow:0 12px 28px rgba(0,0,0,.5);\n\n  --cell-bg:#111827; --cell-bd:#475569; --cell-dashed:#60a5fa;\n  --cell-hover:rgba(56,189,248,.22);\n  --input-bg:#0b1220; --input-bd:#475569;\n\n  --chip-bg:#111827; --chip-bd:#475569;\n\n  --btn-bg:#111827; --btn-bd:#475569; --btn-fg:#e5e7eb;\n  --btn-primary-bg:#38bdf8; --btn-primary-fg:#0b1220;\n\n  --toast-err-bg:rgba(248,113,113,.18); --toast-err-fg:#fecaca; --toast-err-bd:rgba(248,113,113,.45);\n  --toast-ok-bg:rgba(34,197,94,.22);    --toast-ok-fg:#bbf7d0;  --toast-ok-bd:rgba(34,197,94,.50);\n}\n\n/* =========================\n   Layout\n========================= */\n.title{ margin:0 0 .35rem; font-weight:800; color:var(--fg) }\n.rule{  margin:0 0 1rem; color:var(--muted) }\n\n/* pyramid panel */\n.pyramid{\n  background:var(--panel);\n  border:1px solid var(--panel-bd);\n  border-radius:16px;\n  box-shadow:var(--panel-shadow);\n  padding:14px;\n  width:max-content;\n  margin-bottom:1rem;\n}\n.prow{\n  display:grid;\n  grid-template-columns: repeat(var(--cols), 92px);\n  gap:.6rem;\n  justify-content:center;\n  margin-top:.6rem;\n}\n.cell{\n  min-height:68px;\n  background:var(--cell-bg);\n  border:1px dashed var(--cell-dashed);\n  border-radius:12px;\n  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.3rem;\n}\n.cell:hover{ background:var(--cell-hover) }\n.num{ font-variant-numeric:tabular-nums; font-weight:800; font-size:1.15rem; color:var(--fg) }\n.placeholder{ color:var(--muted); font-size:1.15rem }\n.dropzone{ width:100%; height:100%; display:flex; align-items:center; justify-content:center }\n\n/* input inside cell */\n.manual-entry{\n  width:100%; padding:.45rem .6rem; border-radius:.6rem;\n  background:var(--input-bg); border:1px solid var(--input-bd);\n  color:var(--fg); font-size:.95rem; direction:ltr;\n}\n.manual-entry:focus{ outline:none; box-shadow:0 0 0 3px rgba(56,189,248,.25); border-color:#38bdf8 }\n.clear{ font-size:.78rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n.ic{ width:16px; height:16px }\n\n/* bank + actions */\n.side{ max-width:560px }\n.bank-title{ font-weight:700; color:var(--muted); margin:.35rem 0 }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{\n  padding:.45rem .65rem; border-radius:.8rem; font-weight:800;\n  background:var(--chip-bg); border:1px solid var(--chip-bd); cursor:grab;\n  color:var(--fg); font-variant-numeric:tabular-nums\n}\n\n.actions{ display:flex; gap:.6rem; flex-wrap:wrap; margin-top:.6rem }\n.btn{\n  display:inline-flex; align-items:center; gap:.45rem;\n  padding:.6rem .85rem; border-radius:.95rem;\n  background:var(--btn-bg); border:1px solid var(--btn-bd); color:var(--btn-fg);\n  cursor:pointer; transition:transform .12s, box-shadow .12s\n}\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,0,0,.12) }\n.btn.primary{ background:var(--btn-primary-bg); color:var(--btn-primary-fg); border-color:transparent }\n\n/* feedback */\n.toast{\n  margin-top:.6rem; padding:.6rem .9rem; border-radius:.9rem; text-align:center; font-weight:800;\n  background:var(--toast-err-bg); color:var(--toast-err-fg); border:1px solid var(--toast-err-bd)\n}\n.toast.ok{ background:var(--toast-ok-bg); color:var(--toast-ok-fg); border-color:var(--toast-ok-bd) }\n</style>\n","export default \"__VITE_ASSET__BwH7CfKX__\"","<!-- <script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { RefreshCw, RotateCcw, Check } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title: ' 1 ( ):     12345  ',\n    rule: (t)=> `            ${t}.   + -          .`,\n    inputPH: '   : (5*4)*(3+2)*1',\n    keys: ' ',\n    newQ:' ', reset:'', check:'',\n    correct:' ', wrong:'     ',\n    used: ' :',\n    note: ':    1   .'\n  },\n  en:{\n    title: 'Level 2  Challenge 1: Build an expression with 1..5 once each',\n    rule: (t)=> `Write an expression that uses digits 1,2,3,4,5 exactly once and evaluates to ${t}. Allowed: + - * / and parentheses. No other digits or repeats.`,\n    inputPH: 'Type expression e.g., (5*4)*(3+2)*1',\n    keys: 'Keypad',\n    newQ:'New puzzle', reset:'Clear', check:'Check',\n    correct:'Correct', wrong:'Check constraints or value',\n    used: 'Digits usage:',\n    note: 'Hint: multiplying by 1 keeps the value unchanged.'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds (approved style) ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/oh_no.mp3'\n\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== random helpers ===== */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\n\n/* ===== state ===== */\nconst expr = ref('')\nconst target = ref(0)\nconst toast = ref(null)\nconst solved = ref(false)\n\nconst digits = [1,2,3,4,5]\nconst ops = ['+','-','*','/','(',')']\n\n/* build guaranteed-solvable target:\n   we form E = (a op1 b) op2 (c op3 d) then optionally *1 or +1\n   where {a,b,c,d} is a permutation of {2,3,4,5} and '1' remains available. */\nfunction buildTarget(){\n  const nums = shuffle([2,3,4,5])\n  const [a,b,c,d] = nums\n  const pick = arr => arr[rndInt(0,arr.length-1)]\n  const op1 = pick(['+','-','*','/'])\n  const op2 = pick(['+','-','*','/'])\n  const op3 = pick(['+','-','*','/'])\n  // build safely using Function\n  const val = (x)=>{\n    try{ return Function(`return (${x});`)() }catch{ return null }\n  }\n  let e = `( ${a} ${op1} ${b} ) ${op2} ( ${c} ${op3} ${d} )`\n  let v = val(e)\n  // if invalid (division by zero or non-integer not required), retry a few times\n  let tries=0\n  while((v==null || !isFinite(v)) && tries<20){\n    return buildTarget()\n  }\n  // randomly decide to multiply by 1 or leave as-is but attach *1 so digit 1 is used\n  if(Math.random()<0.7){\n    e = `(${e}) * 1`\n    v = val(e)\n  }else{\n    // if we didn't use *1, add +1 and then subtract 1 using grouping to still use digit 1 once:\n    // ((...)+1) - 1  == original value\n    e = `((${e}) + 1) - 1`\n    v = val(e)\n  }\n  target.value = v\n  // reset input\n  expr.value = ''\n  toast.value = null\n  solved.value = false\n  // we don't show the internal expression to \n}\n\n/* keypad helpers */\nfunction addToken(t){ expr.value += t }\nfunction backspace(){ expr.value = expr.value.slice(0,-1) }\nfunction clearAll(){ expr.value=''; toast.value=null; solved.value=false }\n\n/* validators */\nconst usage = computed(()=>{\n  const u = {1:0,2:0,3:0,4:0,5:0}\n  for(const ch of expr.value){\n    if('12345'.includes(ch)) u[ch]++\n  }\n  return u\n})\nfunction onlyAllowedChars(s){\n  return /^[\\d\\+\\-\\*\\/\\(\\)\\s]*$/.test(s)\n}\nfunction usesExactDigits(){\n  // forbid any digit other than 1..5\n  if(/[06789]/.test(expr.value)) return false\n  const u = usage.value\n  return digits.every(d => u[d]===1)\n}\nfunction safeEval(s){\n  try{\n    // prevent dangerous tokens\n    if(!onlyAllowedChars(s)) return null\n    // replace '' or '' if user pasted them\n    s = s.replace(//g,'*').replace(//g,'/')\n    // block consecutive digits that create multi-digit numbers not from 1..5\n    // allow numbers 1..5 and parentheses/ops/spaces\n    if(/\\b(?![1-5]\\b)\\d+\\b/.test(s)) return null\n    return Function(`\"use strict\"; return (${s});`)()\n  }catch{ return null }\n}\nasync function checkNow(){\n  const v = safeEval(expr.value)\n  if(v==null || !isFinite(v) || !usesExactDigits()){\n    toast.value = T[L.value].wrong\n    sWrong && sWrong.play()\n    return\n  }\n  if(Math.abs(v - target.value) < 1e-9){\n    solved.value = true\n    toast.value = T[L.value].correct\n    sOK && sOK.play(); sClap && sClap.play()\n    try{\n      await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'})\n    }catch{}\n  }else{\n    toast.value = T[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\n\nonMounted(buildTarget)\n</script>\n\n<template>\n  <div class=\"lvl2c1 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(target) }}</p>\n\n    <div class=\"panel\">\n      <input\n        class=\"expr\"\n        :placeholder=\"T[L].inputPH\"\n        v-model=\"expr\"\n        dir=\"ltr\"\n        inputmode=\"numeric\"\n        autocomplete=\"off\"\n        spellcheck=\"false\"\n      />\n\n      <div class=\"usage\">\n        {{ T[L].used }}\n        <span v-for=\"d in digits\" :key=\"d\" class=\"u\"\n              :class=\"{ok: usage[d]===1, bad: usage[d]>1}\">\n          {{ d }}: {{ usage[d] }}\n        </span>\n      </div>\n\n      <div class=\"keypad\">\n        <div class=\"label\">{{ T[L].keys }}</div>\n        <div class=\"row\">\n          <button class=\"k\" v-for=\"d in digits\" :key=\"'d'+d\" @click=\"addToken(String(d))\">{{ d }}</button>\n          <button class=\"k\" v-for=\"o in ops\" :key=\"'o'+o\" @click=\"addToken(o)\">{{ o }}</button>\n          <button class=\"k wide\" @click=\"backspace\"></button>\n        </div>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"clearAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"buildTarget\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div class=\"hint\">{{ T[L].note }}</div>\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c1{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl2c1{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.panel{\n  background:var(--bg); border-radius:1rem; padding:1rem;\n  box-shadow:0 4px 14px rgba(0,0,0,.06); max-width:720px\n}\n.expr{\n  width:100%; padding:.6rem .75rem; border-radius:.75rem;\n  border:1px solid #e5e7ebaa; background:var(--bg); color:var(--fg);\n  font-size:1.1rem; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", monospace;\n}\n.usage{ margin:.5rem 0; color:var(--muted); display:flex; gap:.6rem; flex-wrap:wrap }\n.u{ padding:.15rem .45rem; border-radius:.5rem; border:1px solid #e5e7ebaa; background:var(--bg) }\n.u.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n.u.bad{ background:#fee2e2; color:#991b1b; border-color:#fecaca }\n\n.keypad{ margin-top:.5rem }\n.keypad .label{ color:var(--muted); margin-bottom:.25rem }\n.keypad .row{ display:flex; flex-wrap:wrap; gap:.4rem }\n.k{\n  padding:.45rem .6rem; border-radius:.6rem; border:1px solid #e5e7ebaa;\n  background:var(--bg); cursor:pointer; min-width:40px\n}\n.k.wide{ min-width:64px }\n\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.6rem }\n.btn{\n  display:inline-flex; align-items:center; gap:.35rem;\n  padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55;\n  background:var(--bg); cursor:pointer\n}\n.ic{ width:16px; height:16px }\n\n.hint{ color:var(--muted); margin-top:.5rem; font-size:.9rem }\n\n.toast{ margin-top:.6rem; padding:.55rem .8rem; border-radius:.75rem;\n        background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style> -->\n\n<script setup>\n/* =========================================================\n   Level 2  Challenge 1: Build an expression using 1..5 once\n   Dark-mode pass:\n   - Stronger tokens for backgrounds, borders, text, and rings\n   - Inputs / keypad / badges readable in both themes\n   - Subtle hover/focus for keys and buttons\n   Notes are short and human-readable.\n========================================================= */\n\nimport { ref, computed, onMounted } from 'vue'\nimport { RefreshCw, RotateCcw, Check } from 'lucide-vue-next'\n\nconst props = defineProps({\n  lang:  { type:String, default:'ar' },\n  theme: { type:String, default:'light' } // 'light' | 'dark'\n})\n\n/* ---------- copy ---------- */\nconst T = {\n  ar:{\n    title:' 1 ( ):     12345  ',\n    rule: (t)=>`           ${t}. : +    .     .`,\n    inputPH:'   : (5*4)*(3+2)*1',\n    keys:' ',\n    newQ:' ', reset:'', check:'',\n    correct:' ', wrong:'     ',\n    used:' :',\n    note:':    1   .'\n  },\n  en:{\n    title:'Level 2  Challenge 1: Build an expression with 1..5 once each',\n    rule: (t)=>`Write an expression that uses digits 1,2,3,4,5 exactly once and evaluates to ${t}. Allowed: + - * / and parentheses. No other digits or repeats.`,\n    inputPH:'Type expression e.g., (5*4)*(3+2)*1',\n    keys:'Keypad',\n    newQ:'New puzzle', reset:'Clear', check:'Check',\n    correct:'Correct', wrong:'Check constraints or value',\n    used:'Digits usage:',\n    note:'Hint: multiplying by 1 keeps the value unchanged.'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ---------- tiny sounds ---------- */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/oh_no.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ---------- helpers ---------- */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n/* ---------- state ---------- */\nconst expr   = ref('')\nconst target = ref(0)\nconst toast  = ref(null)\nconst solved = ref(false)\n\nconst digits = [1,2,3,4,5]\nconst ops    = ['+','-','*','/','(',')']\n\n/* Build a solvable target then reset input.\n   We use numbers 2,3,4,5 to generate a core value and guarantee digit 1 is used via *1 or +1-1. */\nfunction buildTarget(){\n  const nums = shuffle([2,3,4,5])\n  const [a,b,c,d] = nums\n  const pick = arr => arr[rndInt(0,arr.length-1)]\n  const op1 = pick(['+','-','*','/'])\n  const op2 = pick(['+','-','*','/'])\n  const op3 = pick(['+','-','*','/'])\n\n  const evalSafe = (x)=>{ try{ return Function(`\"use strict\";return(${x})`)() }catch{ return null } }\n\n  let core = `( ${a} ${op1} ${b} ) ${op2} ( ${c} ${op3} ${d} )`\n  let v = evalSafe(core)\n\n  // If invalid (NaN/Infinity), regenerate a few times.\n  let guard = 0\n  while((v==null || !isFinite(v)) && guard<20){\n    const again = shuffle([2,3,4,5])\n    const [aa,bb,cc,dd] = again\n    const oo1 = pick(['+','-','*','/'])\n    const oo2 = pick(['+','-','*','/'])\n    const oo3 = pick(['+','-','*','/'])\n    core = `( ${aa} ${oo1} ${bb} ) ${oo2} ( ${cc} ${oo3} ${dd} )`\n    v = evalSafe(core)\n    guard++\n  }\n\n  // Ensure digit 1 participates exactly once.\n  const finalExpr = Math.random() < 0.7 ? `(${core}) * 1` : `((${core}) + 1) - 1`\n  target.value = evalSafe(finalExpr)\n\n  expr.value  = ''\n  toast.value = null\n  solved.value= false\n}\n\n/* keypad / editing */\nfunction addToken(t){ expr.value += t }\nfunction backspace(){ expr.value = expr.value.slice(0,-1) }\nfunction clearAll(){ expr.value=''; toast.value=null; solved.value=false }\n\n/* usage and validation */\nconst usage = computed(()=>{\n  const u={1:0,2:0,3:0,4:0,5:0}\n  for(const ch of expr.value){ if('12345'.includes(ch)) u[ch]++ }\n  return u\n})\nfunction onlyAllowedChars(s){ return /^[\\d\\+\\-\\*\\/\\(\\)\\s]*$/.test(s) }\nfunction usesExactDigits(){\n  if(/[06789]/.test(expr.value)) return false\n  const u=usage.value\n  return digits.every(d => u[d]===1)\n}\nfunction safeEval(s){\n  try{\n    if(!onlyAllowedChars(s)) return null\n    s = s.replace(//g,'*').replace(//g,'/')\n    // Disallow multi-digit numbers (only single digits 1..5 allowed)\n    if(/\\b(?![1-5]\\b)\\d+\\b/.test(s)) return null\n    return Function(`\"use strict\";return(${s})`)()\n  }catch{ return null }\n}\nasync function checkNow(){\n  const v = safeEval(expr.value)\n  if(v==null || !isFinite(v) || !usesExactDigits()){\n    toast.value = T[L.value].wrong; sWrong&&sWrong.play(); return\n  }\n  if(Math.abs(v - target.value) < 1e-9){\n    solved.value = true; toast.value = T[L.value].correct\n    sOK&&sOK.play(); sClap&&sClap.play()\n    try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n  }else{\n    toast.value = T[L.value].wrong; sWrong&&sWrong.play()\n  }\n}\n\nonMounted(buildTarget)\n</script>\n\n<template>\n  <div class=\"lvl2c1 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(target) }}</p>\n\n    <div class=\"panel\">\n      <input\n        class=\"expr\"\n        :placeholder=\"T[L].inputPH\"\n        v-model=\"expr\"\n        dir=\"ltr\"\n        inputmode=\"numeric\"\n        autocomplete=\"off\"\n        spellcheck=\"false\"\n      />\n\n      <div class=\"usage\">\n        {{ T[L].used }}\n        <span v-for=\"d in digits\" :key=\"d\" class=\"u\" :class=\"{ ok: usage[d]===1, bad: usage[d]>1 }\">\n          {{ d }}: {{ usage[d] }}\n        </span>\n      </div>\n\n      <div class=\"keypad\">\n        <div class=\"label\">{{ T[L].keys }}</div>\n        <div class=\"row\">\n          <button class=\"k\" v-for=\"d in digits\" :key=\"'d'+d\" @click=\"addToken(String(d))\">{{ d }}</button>\n          <button class=\"k\" v-for=\"o in ops\" :key=\"'o'+o\" @click=\"addToken(o)\">{{ o }}</button>\n          <button class=\"k wide\" @click=\"backspace\"></button>\n        </div>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"clearAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn primary\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"buildTarget\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div class=\"hint\">{{ T[L].note }}</div>\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* =========================\n   High-contrast design tokens\n========================= */\n.lvl2c1{\n  --bg:#ffffff; --fg:#0b1220; --muted:#64748b;\n\n  --panel:#ffffff; --panel-bd:#cbd5e1; --panel-shadow:0 8px 24px rgba(2,6,23,.08);\n\n  --input-bg:#ffffff; --input-bd:#cbd5e1; --ring:#38bdf8;\n\n  --chip-bg:#ffffff; --chip-bd:#cbd5e1;\n\n  --btn-bg:#ffffff; --btn-bd:#cbd5e1; --btn-fg:#0b1220;\n  --btn-primary-bg:#0ea5e9; --btn-primary-fg:#ffffff;\n\n  --badge-ok-bg:#dcfce7; --badge-ok-fg:#166534; --badge-ok-bd:#bbf7d0;\n  --badge-bad-bg:#fee2e2; --badge-bad-fg:#991b1b; --badge-bad-bd:#fecaca;\n\n  --toast-err-bg:#fee2e2; --toast-err-fg:#991b1b; --toast-err-bd:#fecaca;\n  --toast-ok-bg:#dcfce7;  --toast-ok-fg:#166534;  --toast-ok-bd:#bbf7d0;\n}\n\n[data-theme=\"dark\"] .lvl2c1{\n  --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af;\n\n  --panel:#0f172a; --panel-bd:#334155; --panel-shadow:0 12px 28px rgba(0,0,0,.55);\n\n  --input-bg:#0b1220; --input-bd:#475569; --ring:#38bdf8;\n\n  --chip-bg:#111827; --chip-bd:#475569;\n\n  --btn-bg:#111827; --btn-bd:#475569; --btn-fg:#e5e7eb;\n  --btn-primary-bg:#38bdf8; --btn-primary-fg:#0b1220;\n\n  --badge-ok-bg:rgba(34,197,94,.22); --badge-ok-fg:#bbf7d0; --badge-ok-bd:rgba(34,197,94,.5);\n  --badge-bad-bg:rgba(248,113,113,.18); --badge-bad-fg:#fecaca; --badge-bad-bd:rgba(248,113,113,.45);\n\n  --toast-err-bg:rgba(248,113,113,.18); --toast-err-fg:#fecaca; --toast-err-bd:rgba(248,113,113,.45);\n  --toast-ok-bg:rgba(34,197,94,.22);    --toast-ok-fg:#bbf7d0;  --toast-ok-bd:rgba(34,197,94,.5);\n}\n\n/* =========================\n   Layout & components\n========================= */\n.title{ margin:0 0 .35rem; font-weight:800; color:var(--fg) }\n.rule{  margin:0 0 1rem; color:var(--muted) }\n\n.panel{\n  background:var(--panel);\n  border:1px solid var(--panel-bd);\n  border-radius:16px;\n  box-shadow:var(--panel-shadow);\n  padding:16px;\n  max-width:760px;\n}\n\n.expr{\n  width:100%; padding:.65rem .8rem; border-radius:.75rem;\n  background:var(--input-bg); border:1px solid var(--input-bd);\n  color:var(--fg); font-size:1.1rem;\n  font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", monospace;\n}\n.expr:focus{ outline:none; box-shadow:0 0 0 3px color-mix(in oklab, var(--ring) 35%, transparent); border-color:var(--ring) }\n\n.usage{ margin:.55rem 0; color:var(--muted); display:flex; gap:.6rem; flex-wrap:wrap }\n.u{\n  padding:.18rem .5rem; border-radius:.6rem; border:1px solid var(--chip-bd);\n  background:var(--chip-bg); color:var(--fg); font-weight:700\n}\n.u.ok{ background:var(--badge-ok-bg); color:var(--badge-ok-fg); border-color:var(--badge-ok-bd) }\n.u.bad{ background:var(--badge-bad-bg); color:var(--badge-bad-fg); border-color:var(--badge-bad-bd) }\n\n.keypad{ margin-top:.55rem }\n.keypad .label{ color:var(--muted); margin-bottom:.3rem }\n.keypad .row{ display:flex; flex-wrap:wrap; gap:.45rem }\n.k{\n  padding:.5rem .7rem; min-width:42px; border-radius:.7rem;\n  background:var(--chip-bg); border:1px solid var(--chip-bd); color:var(--fg);\n  cursor:pointer; transition:transform .1s, box-shadow .1s\n}\n.k:hover{ transform:translateY(-1px); box-shadow:0 8px 18px rgba(0,0,0,.12) }\n.k.wide{ min-width:68px }\n\n.actions{ display:flex; gap:.6rem; flex-wrap:wrap; margin-top:.7rem }\n.btn{\n  display:inline-flex; align-items:center; gap:.45rem;\n  padding:.55rem .85rem; border-radius:.9rem;\n  background:var(--btn-bg); border:1px solid var(--btn-bd); color:var(--btn-fg);\n  cursor:pointer; transition:transform .1s, box-shadow .1s\n}\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,0,0,.14) }\n.btn.primary{ background:var(--btn-primary-bg); color:var(--btn-primary-fg); border-color:transparent }\n.ic{ width:16px; height:16px }\n\n.hint{ color:var(--muted); margin-top:.6rem; font-size:.92rem }\n\n.toast{\n  margin-top:.65rem; padding:.6rem .9rem; border-radius:.9rem; text-align:center; font-weight:800;\n  background:var(--toast-err-bg); color:var(--toast-err-fg); border:1px solid var(--toast-err-bd)\n}\n.toast.ok{ background:var(--toast-ok-bg); color:var(--toast-ok-fg); border-color:var(--toast-ok-bd) }\n</style>\n","<!-- <script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'    2:   ',\n    rule:(M)=>`          ${M}.     .   .`,\n    bank:' ', newQ:' ', reset:' ', check:'',\n    correct:' ', wrong:'    ', clear:' '\n  },\n  en:{\n    title:'Level 2  Challenge 2: Complete a magic square',\n    rule:(M)=>`Place numbers so each row, column, and diagonal sums to ${M}. Drag the missing values into place. All numbers are distinct.`,\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct answer', wrong:'Check sums or duplicates', clear:'Clear cell'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds (approved style) ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\n\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== utils ===== */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\n\n/* ===== Lo Shu base (1..9, magic sum 15) ===== */\nconst LO_SHU = [\n  [8,1,6],\n  [3,5,7],\n  [4,9,2]\n]\nfunction symmetries(mat){\n  const rot = m => [[m[2][0],m[1][0],m[0][0]],[m[2][1],m[1][1],m[0][1]],[m[2][2],m[1][2],m[0][2]]]\n  const flipH = m => m.map(r=>r.slice().reverse())\n  const s = []\n  let m = mat\n  for(let i=0;i<4;i++){ s.push(m); s.push(flipH(m)); m = rot(m) }\n  // remove duplicates by string\n  const uniq = []; const seen = new Set()\n  for(const k of s){ const t=JSON.stringify(k); if(!seen.has(t)){ uniq.push(k); seen.add(t) } }\n  return uniq\n}\nconst SHAPES = symmetries(LO_SHU)\n\n/* ===== state ===== */\nconst grid = ref([[0,0,0],[0,0,0],[0,0,0]])     //  \nconst M = ref(0)                                 //  \nconst blanks = ref(new Set())                    // \"r,c\"\nconst answerMap = ref({})                        // \"r,c\" -> value\nconst bankCounts = ref({})                       // value -> count\nconst solved = ref(false)\nconst toast = ref(null)\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\nconst keyOf = (r,c)=> `${r},${c}`\n\n/*     : a + s*L */\nfunction buildMagic(){\n  const shape = SHAPES[rndInt(0, SHAPES.length-1)]\n  const step = [1,2,3,4,5][rndInt(0,4)]          //   \n  const off  = rndInt(0, 6)                      //  \n  const g = Array.from({length:3}, ()=> Array(3).fill(0))\n  for(let r=0;r<3;r++) for(let c=0;c<3;c++){\n    g[r][c] = off + step*shape[r][c]\n  }\n  grid.value = g\n  M.value = step*15 + 3*off\n}\n\n/*   */\nfunction pickBlanks(){\n  const all=[]\n  for(let r=0;r<3;r++) for(let c=0;c<3;c++) all.push([r,c])\n  //  34   \n  const keep = shuffle(all).slice(0, rndInt(3,4))\n  const keepSet = new Set(keep.map(([r,c])=>keyOf(r,c)))\n  const chosen = all.filter(([r,c])=> !keepSet.has(keyOf(r,c)))\n  blanks.value = new Set(chosen.map(([r,c])=>keyOf(r,c)))\n}\n\n/*   */\nfunction rebuildBank(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const [r,c]=k.split(',').map(Number)\n    const v=grid.value[r][c]\n    counts[v]=(counts[v]||0)+1\n  })\n  for(const [k,v] of Object.entries(answerMap.value)){\n    counts[v]=(counts[v]||0)-1\n  }\n  for(const [v,ct] of Object.entries(counts)){ if(ct<=0) delete counts[v] }\n  bankCounts.value=counts\n}\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\n/*   */\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}\n  buildMagic()\n  pickBlanks()\n  rebuildBank()\n}\n\n/*  */\nfunction isFilled(){ for(const k of blanks.value){ if(answerMap.value[k]==null) return false } return true }\nfunction filledMatrix(){\n  const m = grid.value.map(r=>r.slice())\n  for(const k of blanks.value){\n    const [r,c]=k.split(',').map(Number)\n    m[r][c]=answerMap.value[k]\n  }\n  return m\n}\nfunction noDuplicates(m){\n  const seen=new Set()\n  for(const r of m) for(const v of r){\n    if(seen.has(v)) return false\n    seen.add(v)\n  }\n  return true\n}\nfunction sumsOk(m){\n  const s = (a,b,c)=> a+b+c\n  for(let i=0;i<3;i++){\n    if(s(m[i][0],m[i][1],m[i][2])!==M.value) return false\n    if(s(m[0][i],m[1][i],m[2][i])!==M.value) return false\n  }\n  if(s(m[0][0],m[1][1],m[2][2])!==M.value) return false\n  if(s(m[0][2],m[1][1],m[2][0])!==M.value) return false\n  return true\n}\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value=L.value==='ar'?'  ':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  const m = filledMatrix()\n  if(noDuplicates(m) && sumsOk(m)){\n    solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint()\n  }else{\n    toast.value=T[L.value].wrong; sWrong&&sWrong.play()\n  }\n}\nfunction resetAll(){ answerMap.value={}; rebuildBank(); toast.value=null; solved.value=false }\n\n/* / */\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev,key){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  if((bankCounts.value[v]||0)===0) return\n  bankCounts.value[v]-=1\n  answerMap.value[key]=v\n  toast.value=null\n}\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n}\n\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"lvl2c2 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(M) }}</p>\n\n    <div class=\"board\">\n      <div class=\"row\" v-for=\"r in 3\" :key=\"'r'+r\">\n        <div class=\"cell\" v-for=\"c in 3\" :key=\"'c'+r+'-'+c\">\n          <template v-if=\"!blanks.has(`${r-1},${c-1}`)\">\n            <span class=\"num\" :style=\"numDir\">{{ grid[r-1][c-1] }}</span>\n          </template>\n          <template v-else>\n            <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event, `${r-1},${c-1}`)\">\n              <span v-if=\"answerMap[`${r-1},${c-1}`]!=null\" class=\"num\" :style=\"numDir\">\n                {{ answerMap[`${r-1},${c-1}`] }}\n              </span>\n              <span v-else class=\"placeholder\"></span>\n            </div>\n            <button class=\"clear\" @click=\"clearCell(`${r-1},${c-1}`)\"><Eraser class=\"ic\" /> {{ T[L].clear }}</button>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"side\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button v-for=\"v in bankList\" :key=\"v + '_' + Math.random()\" class=\"chip\"\n                draggable=\"true\" @dragstart=\"onDragStart($event, v)\" :style=\"numDir\">\n          {{ v }}\n        </button>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c2{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl2c2{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n/*  */\n.board{\n  display:inline-block; background:var(--bg);\n  padding:1rem; border-radius:1rem; box-shadow:0 4px 14px rgba(0,0,0,.06)\n}\n.row{ display:grid; grid-template-columns:repeat(3, 96px) }\n.cell{\n  border:1px dashed #cbd5e1; min-height:88px; display:flex; flex-direction:column;\n  align-items:center; justify-content:center; gap:.25rem; padding:.25rem\n}\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.25rem }\n.placeholder{ color:var(--muted); font-size:1.25rem }\n.dropzone{ width:100%; height:100%; display:flex; align-items:center; justify-content:center; background:rgba(99,102,241,.06); border-radius:.5rem }\n.clear{ font-size:.75rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n\n/*  */\n.side{ margin-top:1rem; max-width:520px }\n.bank-title{ font-weight:600; color:var(--muted); margin:.25rem 0 }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ border:1px solid #e5e7eb55; background:var(--bg); padding:.4rem .6rem; border-radius:.75rem; cursor:grab; font-variant-numeric:tabular-nums }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.toast{ margin-top:.5rem; padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style> -->\n<script setup>\n/* =========================================================\n   Level 2  Challenge 2: Magic Square (33)\n   Dark-mode pass:\n   - Strong, themeable tokens for panels/borders/placeholders\n   - Higher contrast dropzones & chips\n   - Clear focus rings and hover states\n   - No logic changes (drag & drop with quantities)\n========================================================= */\n\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\n/* ---------- copy ---------- */\nconst T = {\n  ar:{\n    title:'    2:   ',\n    rule:(M)=>`          ${M}.     .   .`,\n    bank:' ', newQ:' ', reset:' ', check:'',\n    correct:' ', wrong:'    ', clear:' '\n  },\n  en:{\n    title:'Level 2  Challenge 2: Complete a magic square',\n    rule:(M)=>`Place numbers so each row, column, and diagonal sums to ${M}. Drag the missing values into place. All numbers are distinct.`,\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct answer', wrong:'Check sums or duplicates', clear:'Clear cell'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ---------- sounds (optional) ---------- */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK&&(sOK.preload='auto'); sClap&&(sClap.preload='auto'); sWrong&&(sWrong.preload='auto')\n\n/* ---------- helpers ---------- */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n/* ---------- Lo Shu base (sum 15) + symmetries ---------- */\nconst LO_SHU = [[8,1,6],[3,5,7],[4,9,2]]\nfunction symmetries(mat){\n  const rot  = m => [[m[2][0],m[1][0],m[0][0]],[m[2][1],m[1][1],m[0][1]],[m[2][2],m[1][2],m[0][2]]]\n  const flip = m => m.map(r=>r.slice().reverse())\n  const s=[]; let m=mat\n  for(let i=0;i<4;i++){ s.push(m); s.push(flip(m)); m=rot(m) }\n  const seen=new Set(), out=[]\n  for(const k of s){ const t=JSON.stringify(k); if(!seen.has(t)){ out.push(k); seen.add(t) } }\n  return out\n}\nconst SHAPES = symmetries(LO_SHU)\n\n/* ---------- state ---------- */\nconst grid   = ref([[0,0,0],[0,0,0],[0,0,0]])  // final numbers\nconst M      = ref(0)                          // magic sum\nconst blanks = ref(new Set())                  // \"r,c\"\nconst answerMap = ref({})                      // \"r,c\" -> value\nconst bankCounts = ref({})                     // value -> count\nconst solved = ref(false)\nconst toast  = ref(null)\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\nconst keyOf = (r,c)=>`${r},${c}`\n\n/* ---------- build a generalized magic square: off + step*LoShu ---------- */\nfunction buildMagic(){\n  const shape = SHAPES[rndInt(0, SHAPES.length-1)]\n  const step  = [1,2,3,4,5][rndInt(0,4)]\n  const off   = rndInt(0,6)\n  const g = Array.from({length:3}, ()=> Array(3).fill(0))\n  for(let r=0;r<3;r++) for(let c=0;c<3;c++) g[r][c] = off + step*shape[r][c]\n  grid.value = g\n  M.value = step*15 + 3*off\n}\n\n/* ---------- choose blanks (leave 34 shown) ---------- */\nfunction pickBlanks(){\n  const all=[]; for(let r=0;r<3;r++) for(let c=0;c<3;c++) all.push([r,c])\n  const keep = new Set(shuffle(all).slice(0, rndInt(3,4)).map(([r,c])=>keyOf(r,c)))\n  const chosen = all.filter(([r,c])=>!keep.has(keyOf(r,c)))\n  blanks.value = new Set(chosen.map(([r,c])=>keyOf(r,c)))\n}\n\n/* ---------- bank with quantities ---------- */\nfunction rebuildBank(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const [r,c]=k.split(',').map(Number)\n    const v=grid.value[r][c]\n    counts[v]=(counts[v]||0)+1\n  })\n  for(const [k,v] of Object.entries(answerMap.value)){\n    counts[v]=(counts[v]||0)-1\n  }\n  for(const [v,ct] of Object.entries(counts)){ if(ct<=0) delete counts[v] }\n  bankCounts.value = counts\n}\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)) for(let i=0;i<ct;i++) out.push(Number(v))\n  return shuffle(out)\n})\n\n/* ---------- new puzzle ---------- */\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}\n  buildMagic(); pickBlanks(); rebuildBank()\n}\n\n/* ---------- checks ---------- */\nfunction isFilled(){ for(const k of blanks.value){ if(answerMap.value[k]==null) return false } return true }\nfunction filledMatrix(){\n  const m = grid.value.map(r=>r.slice())\n  for(const k of blanks.value){ const [r,c]=k.split(',').map(Number); m[r][c]=answerMap.value[k] }\n  return m\n}\nfunction noDuplicates(m){\n  const seen=new Set()\n  for(const r of m) for(const v of r){ if(seen.has(v)) return false; seen.add(v) }\n  return true\n}\nfunction sumsOk(m){\n  const s=(a,b,c)=>a+b+c\n  for(let i=0;i<3;i++){\n    if(s(m[i][0],m[i][1],m[i][2])!==M.value) return false\n    if(s(m[0][i],m[1][i],m[2][i])!==M.value) return false\n  }\n  if(s(m[0][0],m[1][1],m[2][2])!==M.value) return false\n  if(s(m[0][2],m[1][1],m[2][0])!==M.value) return false\n  return true\n}\n\nasync function addPoint(){ try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{} }\nasync function checkNow(){\n  if(!isFilled()){ toast.value=L.value==='ar'?'  ':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  const m = filledMatrix()\n  if(noDuplicates(m) && sumsOk(m)){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){ answerMap.value={}; rebuildBank(); toast.value=null; solved.value=false }\n\n/* ---------- DnD ---------- */\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev,key){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]; bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  if((bankCounts.value[v]||0)===0) return\n  bankCounts.value[v]-=1; answerMap.value[key]=v; toast.value=null\n}\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]; bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n}\n\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"lvl2c2 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(M) }}</p>\n\n    <div class=\"board\">\n      <div class=\"row\" v-for=\"r in 3\" :key=\"'r'+r\">\n        <div class=\"cell\" v-for=\"c in 3\" :key=\"'c'+r+'-'+c\">\n          <template v-if=\"!blanks.has(`${r-1},${c-1}`)\">\n            <span class=\"num\" :style=\"numDir\">{{ grid[r-1][c-1] }}</span>\n          </template>\n          <template v-else>\n            <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event, `${r-1},${c-1}`)\">\n              <span v-if=\"answerMap[`${r-1},${c-1}`]!=null\" class=\"num\" :style=\"numDir\">\n                {{ answerMap[`${r-1},${c-1}`] }}\n              </span>\n              <span v-else class=\"placeholder\"></span>\n            </div>\n            <button class=\"clear\" @click=\"clearCell(`${r-1},${c-1}`)\"><Eraser class=\"ic\" /> {{ T[L].clear }}</button>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"side\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button v-for=\"v in bankList\" :key=\"v + '_' + Math.random()\" class=\"chip\"\n                draggable=\"true\" @dragstart=\"onDragStart($event, v)\" :style=\"numDir\">\n          {{ v }}\n        </button>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn primary\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* =========================\n   Contrast variables\n========================= */\n.lvl2c2{\n  --bg:#ffffff; --fg:#0b1220; --muted:#64748b;\n\n  --panel:#ffffff; --panel-bd:#cbd5e1; --panel-shadow:0 8px 24px rgba(2,6,23,.08);\n\n  --cell-bd:#cbd5e1; --cell-bg:rgba(99,102,241,.06);\n  --placeholder:#94a3b8;\n\n  --chip-bg:#ffffff; --chip-bd:#cbd5e1;\n\n  --btn-bg:#ffffff; --btn-bd:#cbd5e1; --btn-fg:#0b1220;\n  --btn-primary-bg:#0ea5e9; --btn-primary-fg:#ffffff;\n\n  --toast-err-bg:#fee2e2; --toast-err-fg:#991b1b; --toast-err-bd:#fecaca;\n  --toast-ok-bg:#dcfce7;  --toast-ok-fg:#166534;  --toast-ok-bd:#bbf7d0;\n\n  --ring:#38bdf8;\n}\n\n[data-theme=\"dark\"] .lvl2c2{\n  --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af;\n\n  --panel:#0f172a; --panel-bd:#334155; --panel-shadow:0 12px 28px rgba(0,0,0,.55);\n\n  --cell-bd:#475569; --cell-bg:rgba(148,163,184,.10);\n  --placeholder:#cbd5e1;\n\n  --chip-bg:#111827; --chip-bd:#475569;\n\n  --btn-bg:#111827; --btn-bd:#475569; --btn-fg:#e5e7eb;\n  --btn-primary-bg:#38bdf8; --btn-primary-fg:#0b1220;\n\n  --toast-err-bg:rgba(248,113,113,.18); --toast-err-fg:#fecaca; --toast-err-bd:rgba(248,113,113,.45);\n  --toast-ok-bg:rgba(34,197,94,.22);    --toast-ok-fg:#bbf7d0;  --toast-ok-bd:rgba(34,197,94,.5);\n}\n\n/* =========================\n   Layout\n========================= */\n.title{ font-weight:800; margin:0 0 .35rem; color:var(--fg) }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.board{\n  display:inline-block; background:var(--panel);\n  padding:1rem; border-radius:16px;\n  border:1px solid var(--panel-bd);\n  box-shadow:var(--panel-shadow);\n}\n.row{ display:grid; grid-template-columns:repeat(3, 96px) }\n.cell{\n  min-height:88px; padding:.25rem;\n  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.25rem;\n  border:1.5px dashed var(--cell-bd); border-radius:12px;\n}\n.num{ font-variant-numeric:tabular-nums; font-weight:800; font-size:1.25rem; color:var(--fg) }\n.placeholder{ color:var(--placeholder); font-size:1.25rem }\n.dropzone{\n  width:100%; height:100%; display:flex; align-items:center; justify-content:center;\n  background:var(--cell-bg); border-radius:10px; transition:box-shadow .15s,border-color .15s\n}\n.dropzone:focus-within{ box-shadow:0 0 0 3px color-mix(in oklab, var(--ring) 35%, transparent) inset }\n\n.clear{\n  font-size:.78rem; border:none; background:transparent; color:var(--muted);\n  display:flex; align-items:center; gap:.25rem; cursor:pointer\n}\n.ic{ width:16px; height:16px }\n\n/* bank */\n.side{ margin-top:1rem; max-width:560px }\n.bank-title{ font-weight:700; color:var(--muted); margin:.25rem 0 }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{\n  border:1px solid var(--chip-bd); background:var(--chip-bg); color:var(--fg);\n  padding:.45rem .65rem; border-radius:.8rem; cursor:grab; font-weight:800; min-width:48px;\n  transition:transform .1s, box-shadow .1s\n}\n.chip:hover{ transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,0,0,.14) }\n\n/* actions & toasts */\n.actions{ display:flex; gap:.6rem; flex-wrap:wrap; margin-top:.6rem }\n.btn{\n  display:inline-flex; align-items:center; gap:.45rem; padding:.55rem .85rem;\n  border-radius:.9rem; border:1px solid var(--btn-bd); background:var(--btn-bg); color:var(--btn-fg);\n  cursor:pointer; transition:transform .1s, box-shadow .1s\n}\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,0,0,.14) }\n.btn.primary{ background:var(--btn-primary-bg); color:var(--btn-primary-fg); border-color:transparent }\n\n.toast{\n  margin-top:.55rem; padding:.6rem .9rem; border-radius:.9rem; font-weight:800; text-align:center;\n  background:var(--toast-err-bg); color:var(--toast-err-fg); border:1px solid var(--toast-err-bd)\n}\n.toast.ok{ background:var(--toast-ok-bg); color:var(--toast-ok-fg); border-color:var(--toast-ok-bd) }\n</style>\n\n","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'    3:    ',\n    rule:'          :  2 3 4 5.     .',\n    bank:' ', newQ:' ', reset:' ', check:'',\n    correct:' ', wrong:'  ', clear:' ',\n    lab2:'  2', lab3:'  3', lab4:'  4', lab5:'  5'\n  },\n  en:{\n    title:'Level 2  Challenge 3: Match each rule to a six-digit number',\n    rule:'Drag one six-digit number to each rule: multiple of 2, 3, 4, 5. Each number can be used once.',\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct', wrong:'Check the properties', clear:'Clear cell',\n    lab2:'Multiple of 2', lab3:'Multiple of 3', lab4:'Multiple of 4', lab5:'Multiple of 5'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* sounds (approved style) */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* utils */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n/* state */\nconst bank = ref([])                // numbers to drag\nconst bankCounts = ref({})          // number -> remaining count (always 1 here)\nconst answer = ref({ m2:null, m3:null, m4:null, m5:null })\nconst toast = ref(null)\nconst solved = ref(false)\n\n/* helpers: properties */\nconst isMul2 = n => n%2===0\nconst isMul3 = n => (String(n).split('').reduce((s,d)=>s+ +d,0))%3===0\nconst isMul4 = n => n%100 % 4===0\nconst isMul5 = n => n%10===0 || n%10===5\n\n/* random six-digit generators with constraints */\nfunction rand6(predicate=(n)=>true){\n  // ensure six digits (no leading zero)\n  while(true){\n    const first = rndInt(1,9)\n    let s = String(first)\n    for(let i=0;i<5;i++) s += String(rndInt(0,9))\n    const n = Number(s)\n    if(predicate(n)) return n\n  }\n}\nfunction rand6_last(d, extra=()=>true){\n  // generate with last digit d and extra predicate\n  while(true){\n    const first = rndInt(1,9)\n    let s = String(first)\n    for(let i=0;i<4;i++) s += String(rndInt(0,9))\n    s += String(d)\n    const n = Number(s)\n    if(extra(n)) return n\n  }\n}\n\n/* build puzzle: guarantee at least one valid for each slot */\nfunction newPuzzle(){\n  solved.value=false; toast.value=null\n  answer.value = { m2:null, m3:null, m4:null, m5:null }\n\n  const picked = new Set()\n  const addUnique = (n)=>{\n    const k=String(n); if(picked.has(k)) return false; picked.add(k); return true\n  }\n\n  // One clear candidate for each property\n  // m5: end with 5 (not even)\n  let a5 = rand6_last(5, n=>!isMul3(n) || rndInt(0,1)) // sometimes also mult3\n  while(!addUnique(a5)) a5 = rand6_last(5)\n  // m2: even but not *4 (to reduce ambiguity)\n  let a2 = rand6_last([0,2,4,6,8][rndInt(0,4)], n=>!isMul5(n) && !isMul4(n))\n  while(!addUnique(a2)) a2 = rand6_last([0,2,4,6,8][rndInt(0,4)], n=>!isMul5(n) && !isMul4(n))\n  // m4: divisible by 4 (this is even by nature)\n  let a4 = rand6(n=>isMul4(n))\n  while(!addUnique(a4)) a4 = rand6(n=>isMul4(n))\n  // m3: sum of digits divisible by 3, avoid ending 0/5 to reduce overlap\n  let a3 = rand6(n=>isMul3(n) && !isMul5(n))\n  while(!addUnique(a3)) a3 = rand6(n=>isMul3(n) && !isMul5(n))\n\n  const core = [a2,a3,a4,a5]\n\n  // add distractors that satisfy none of the four props\n  const distract = []\n  while(distract.length<4){\n    let d = rand6(n=> (n%2!==0) && !isMul3(n) && !isMul5(n) && !isMul4(n))\n    if(addUnique(d)) distract.push(d)\n  }\n\n  bank.value = shuffle(core.concat(distract))\n  bankCounts.value = Object.fromEntries(bank.value.map(v=>[v,1]))\n}\n\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction dropTo(key, ev){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  if((bankCounts.value[v]||0)===0) return\n  // return previous value to bank\n  if(answer.value[key]!=null){\n    bankCounts.value[answer.value[key]] = (bankCounts.value[answer.value[key]]||0)+1\n  }\n  answer.value[key] = v\n  bankCounts.value[v]-=1\n  toast.value=null\n}\nfunction clearCell(key){\n  if(answer.value[key]!=null){\n    bankCounts.value[answer.value[key]] = (bankCounts.value[answer.value[key]]||0)+1\n    answer.value[key]=null\n  }\n}\n\nfunction isFilled(){ return ['m2','m3','m4','m5'].every(k=>answer.value[k]!=null) }\nfunction isCorrect(){\n  return  isMul2(answer.value.m2) &&\n          isMul3(answer.value.m3) &&\n          isMul4(answer.value.m4) &&\n          isMul5(answer.value.m5)\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',\n      {method:'GET',credentials:'include'})\n  }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value=L.value==='ar'?'  ':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){\n    solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint()\n  }else{ toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){\n  answer.value = { m2:null, m3:null, m4:null, m5:null }\n  // restore counts\n  bankCounts.value = Object.fromEntries(bank.value.map(v=>[v,1]))\n  toast.value=null; solved.value=false\n}\n\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"lvl2c3 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <div class=\"cards\">\n      <div class=\"card\">\n        <div class=\"label\">{{ T[L].lab2 }}</div>\n        <div class=\"drop\"\n             @dragover=\"allowDrop\" @drop=\"dropTo('m2', $event)\">\n          <span v-if=\"answer.m2!=null\" class=\"num\">{{ answer.m2 }}</span>\n          <span v-else class=\"placeholder\"></span>\n        </div>\n        <button class=\"clear\" @click=\"clearCell('m2')\"><Eraser class=\"ic\"/>{{ T[L].clear }}</button>\n      </div>\n\n      <div class=\"card\">\n        <div class=\"label\">{{ T[L].lab3 }}</div>\n        <div class=\"drop\"\n             @dragover=\"allowDrop\" @drop=\"dropTo('m3', $event)\">\n          <span v-if=\"answer.m3!=null\" class=\"num\">{{ answer.m3 }}</span>\n          <span v-else class=\"placeholder\"></span>\n        </div>\n        <button class=\"clear\" @click=\"clearCell('m3')\"><Eraser class=\"ic\"/>{{ T[L].clear }}</button>\n      </div>\n\n      <div class=\"card\">\n        <div class=\"label\">{{ T[L].lab4 }}</div>\n        <div class=\"drop\"\n             @dragover=\"allowDrop\" @drop=\"dropTo('m4', $event)\">\n          <span v-if=\"answer.m4!=null\" class=\"num\">{{ answer.m4 }}</span>\n          <span v-else class=\"placeholder\"></span>\n        </div>\n        <button class=\"clear\" @click=\"clearCell('m4')\"><Eraser class=\"ic\"/>{{ T[L].clear }}</button>\n      </div>\n\n      <div class=\"card\">\n        <div class=\"label\">{{ T[L].lab5 }}</div>\n        <div class=\"drop\"\n             @dragover=\"allowDrop\" @drop=\"dropTo('m5', $event)\">\n          <span v-if=\"answer.m5!=null\" class=\"num\">{{ answer.m5 }}</span>\n          <span v-else class=\"placeholder\"></span>\n        </div>\n        <button class=\"clear\" @click=\"clearCell('m5')\"><Eraser class=\"ic\"/>{{ T[L].clear }}</button>\n      </div>\n    </div>\n\n    <div class=\"bank\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button v-for=\"v in bank\"\n                :key=\"v\"\n                class=\"chip\"\n                :disabled=\"(bankCounts[v]||0)===0\"\n                draggable=\"true\"\n                @dragstart=\"onDragStart($event, v)\">\n          {{ v }}\n          <small v-if=\"(bankCounts[v]||0)===0\"></small>\n        </button>\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n      <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n      <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n    </div>\n\n    <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c3{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl2c3{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.cards{ display:grid; grid-template-columns: repeat(2, minmax(260px,1fr)); gap:1rem; margin-bottom:.75rem }\n.card{ background:var(--bg); border:1px solid #e5e7eb55; border-radius:1rem; padding:.75rem }\n.label{ color:var(--muted); margin-bottom:.35rem }\n.drop{\n  height:74px; border:1px dashed #cbd5e1; border-radius:.75rem; background:rgba(99,102,241,.06);\n  display:flex; align-items:center; justify-content:center;\n}\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.25rem }\n.placeholder{ color:var(--muted); font-size:1.25rem }\n.clear{ margin-top:.35rem; font-size:.8rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.bank-title{ font-weight:600; color:var(--muted); margin:.25rem 0 }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{\n  border:1px solid #e5e7eb55; background:var(--bg); padding:.45rem .6rem; border-radius:.75rem; cursor:grab;\n  font-variant-numeric:tabular-nums; min-width:108px; display:flex; justify-content:space-between; align-items:center;\n}\n.chip[disabled]{ opacity:.55; cursor:not-allowed }\n\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n\n.toast{ margin-top:.6rem; padding:.55rem .8rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","<script setup>\n/* =========================================================\n   Level 2  Challenge 4: Pick the correct pair (Sum & Diff)\n   Dark-mode pass\n   ---------------------------------------------------------\n   - Keeps your game logic unchanged.\n   - Adds strong theme tokens and high-contrast styles.\n   - Clear selected/hover states + accessible focus rings.\n   - Radios are purely decorative; click the whole card.\n========================================================= */\n\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { RefreshCw, RotateCcw, Check } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\n/* --------- copy --------- */\nconst T = {\n  ar:{\n    title:'    4:   ',\n    rule:(S,D)=>`     ${S}   ${D}   .`,\n    choices:'',\n    newQ:' ', reset:' ', check:'',\n    correct:' ', wrong:'  '\n  },\n  en:{\n    title:'Level 2  Challenge 4: Pick the correct pair',\n    rule:(S,D)=>`Which two numbers have sum ${S} and difference ${D}? Pick the correct pair.`,\n    choices:'Choices',\n    newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct', wrong:'Incorrect'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* --------- sounds (optional) --------- */\nimport successUrl from '@/assets/sounds/success4.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong4.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK&&(sOK.preload='auto'); sClap&&(sClap.preload='auto'); sWrong&&(sWrong.preload='auto')\n\n/* --------- utils --------- */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n/* --------- state --------- */\nconst S = ref(0)\nconst D = ref(0)\nconst solution = ref([0,0])   // [big, small]\nconst options = ref([])       // [[b,s], ...]\nconst pick = ref(null)\nconst toast = ref(null)\nconst solved = ref(false)\n\n/* Build a consistent puzzle with realistic distractors */\nfunction buildPuzzle(){\n  solved.value=false; toast.value=null; pick.value=null\n\n  // Pick two positive integers and derive S,D so parity is consistent.\n  const a = rndInt(6, 60)\n  const b = rndInt(1, a-1)\n  const big = Math.max(a,b), small = Math.min(a,b)\n\n  S.value = big + small\n  D.value = big - small\n  solution.value = [big, small]\n\n  // Build distractors: some share only sum, others only diff.\n  const opts = [[big, small]]\n\n  const mkSameSum = () => {\n    const s = S.value\n    const x = rndInt(1, s-1); const y = s-x\n    const p = [Math.max(x,y), Math.min(x,y)]\n    return (p[0]-p[1]===D.value) ? mkSameSum() : p\n  }\n  const mkSameDiff = () => {\n    const d = D.value\n    const y = rndInt(1, 60); const x = y + d\n    const p = [x,y]\n    return (p[0]+p[1]===S.value) ? mkSameDiff() : p\n  }\n\n  while(opts.length<6){\n    const p = (Math.random()<0.5) ? mkSameSum() : mkSameDiff()\n    if(!opts.some(q=>q[0]===p[0] && q[1]===p[1])) opts.push(p)\n  }\n  options.value = shuffle(opts)\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'})\n  }catch{}\n}\n\nasync function checkNow(){\n  if(pick.value==null){ toast.value = L.value==='ar'?' ':'Pick an answer'; sWrong&&sWrong.play(); return }\n  const [x,y] = options.value[pick.value]\n  const ok = (x+y===S.value) && (x-y===D.value)\n  if(ok){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\n\nfunction resetAll(){ pick.value=null; toast.value=null; solved.value=false }\n\nonMounted(buildPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"lvl2c4 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(S, D) }}</p>\n\n    <div class=\"choices\" role=\"list\">\n      <button\n        v-for=\"(op,i) in options\"\n        :key=\"i\"\n        class=\"choice\"\n        :class=\"{ sel: pick===i }\"\n        @click=\"pick=i\"\n        role=\"listitem\"\n      >\n        <!-- decorative radio -->\n        <span class=\"dot\" aria-hidden=\"true\"></span>\n        <span class=\"pair\" :style=\"{direction:'ltr', unicodeBidi:'isolate'}\">{{ op[0] }} , {{ op[1] }}</span>\n      </button>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n      <button class=\"btn primary\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n      <button class=\"btn\" @click=\"buildPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n    </div>\n\n    <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n  </div>\n</template>\n\n<style scoped>\n/* =========================\n   Theme tokens (high contrast)\n========================= */\n.lvl2c4{\n  --bg:#ffffff; --fg:#0b1220; --muted:#64748b;\n\n  --panel:#ffffff; --panel-bd:#cbd5e1; --panel-shadow:0 8px 24px rgba(2,6,23,.08);\n\n  --card-bg:#ffffff; --card-bd:#cbd5e1; --card-ring:#38bdf8; --card-sel:#0ea5e9;\n  --dot-bg:#e2e8f0; --dot-active:#0ea5e9;\n\n  --btn-bg:#ffffff; --btn-bd:#cbd5e1; --btn-fg:#0b1220;\n  --btn-primary-bg:#0ea5e9; --btn-primary-fg:#ffffff;\n\n  --toast-err-bg:#fee2e2; --toast-err-fg:#991b1b; --toast-err-bd:#fecaca;\n  --toast-ok-bg:#dcfce7;  --toast-ok-fg:#166534;  --toast-ok-bd:#bbf7d0;\n}\n\n[data-theme=\"dark\"] .lvl2c4{\n  --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af;\n\n  --panel:#0f172a; --panel-bd:#334155; --panel-shadow:0 12px 28px rgba(0,0,0,.55);\n\n  --card-bg:#111827; --card-bd:#475569; --card-ring:#38bdf8; --card-sel:#38bdf8;\n  --dot-bg:#334155; --dot-active:#38bdf8;\n\n  --btn-bg:#111827; --btn-bd:#475569; --btn-fg:#e5e7eb;\n  --btn-primary-bg:#38bdf8; --btn-primary-fg:#0b1220;\n\n  --toast-err-bg:rgba(248,113,113,.18); --toast-err-fg:#fecaca; --toast-err-bd:rgba(248,113,113,.45);\n  --toast-ok-bg:rgba(34,197,94,.22);    --toast-ok-fg:#bbf7d0;  --toast-ok-bd:rgba(34,197,94,.5);\n}\n\n/* =========================\n   Layout & text\n========================= */\n.title{ font-weight:800; margin:0 0 .35rem; color:var(--fg) }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n/* Choices grid */\n.choices{\n  display:grid; gap:.6rem;\n  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\n  margin-bottom:.9rem;\n}\n.choice{\n  display:flex; align-items:center; gap:.6rem;\n  padding:.7rem .9rem; border-radius:14px;\n  background:var(--card-bg); color:var(--fg);\n  border:1px solid var(--card-bd);\n  box-shadow:var(--panel-shadow);\n  cursor:pointer;\n  transition:box-shadow .15s, transform .1s, border-color .15s;\n}\n.choice:hover{ transform:translateY(-1px); box-shadow:0 14px 26px rgba(0,0,0,.18) }\n.choice:focus-visible{ outline:none; box-shadow:0 0 0 3px color-mix(in oklab, var(--card-ring) 35%, transparent) inset }\n.choice.sel{\n  border-color:var(--card-sel);\n  box-shadow:0 0 0 3px color-mix(in oklab, var(--card-sel) 35%, transparent) inset;\n}\n\n/* Decorative radio dot */\n.dot{\n  width:18px; height:18px; border-radius:999px;\n  background:var(--dot-bg); position:relative; flex:0 0 18px;\n}\n.choice.sel .dot::after{\n  content:\"\"; position:absolute; inset:3px; border-radius:999px; background:var(--dot-active);\n}\n\n.pair{ font-variant-numeric:tabular-nums; font-weight:800 }\n\n/* Actions */\n.actions{ display:flex; gap:.6rem; flex-wrap:wrap }\n.btn{\n  display:inline-flex; align-items:center; gap:.45rem;\n  padding:.55rem .85rem; border-radius:.9rem;\n  border:1px solid var(--btn-bd); background:var(--btn-bg); color:var(--btn-fg);\n  cursor:pointer; transition:transform .1s, box-shadow .1s\n}\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,0,0,.14) }\n.btn.primary{ background:var(--btn-primary-bg); color:var(--btn-primary-fg); border-color:transparent }\n.ic{ width:16px; height:16px }\n\n/* Toasts */\n.toast{\n  margin-top:.6rem; padding:.6rem .9rem; border-radius:.9rem; font-weight:800; text-align:center;\n  background:var(--toast-err-bg); color:var(--toast-err-fg); border:1px solid var(--toast-err-bd)\n}\n.toast.ok{ background:var(--toast-ok-bg); color:var(--toast-ok-fg); border-color:var(--toast-ok-bd) }\n</style>\n","<script setup>\n/* =========================================================\n   Level 2  Challenge 5: Fraction subtraction (dark-mode pass)\n   -----------------------------------------------------------\n   What changed (UI only):\n   - Strong theme tokens for light/dark (panels, borders, dividers).\n   - Higher-contrast fraction bars, dashed drops, and number chips.\n   - Numeric isolation + Arabic digits rendering kept and refined.\n   - Clear hover/focus states and subtle elevation on cards.\n========================================================= */\n\nimport { ref, computed, onMounted } from 'vue'\nimport { Check, RotateCcw, RefreshCw } from 'lucide-vue-next'\n\nconst props = defineProps({\n  lang:{type:String,default:'ar'},\n  theme:{type:String,default:'light'}\n})\n\n/* --------- copy --------- */\nconst T = {\n  ar:{\n    title:'    5:   ',\n    rule:(t)=>`        :  ${t.num}/${t.den} =  /    /${t.d2}.      .`,\n    bank:' ', newQ:' ', reset:' ', check:'',\n    correct:' ', wrong:'  ', clear:' '\n  },\n  en:{\n    title:'Level 2  Challenge 5: Complete the fraction subtraction',\n    rule:(t)=>`Place integers to make the equation true:  ${t.num}/${t.den} =  1/    /${t.d2}.  Drag the two numbers from the bank.`,\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct answer', wrong:'Check values', clear:'Clear'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* --------- sounds (optional) --------- */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK&&(sOK.preload='auto'); sClap&&(sClap.preload='auto'); sWrong&&(sWrong.preload='auto')\n\n/* --------- helpers --------- */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\n\n/* --------- puzzles --------- */\nconst target = ref({num:1, den:6, d2:6})\nconst bank   = ref([])\nconst answer = ref({ A:null, N:null })\nconst toast  = ref(null)\nconst solved = ref(false)\n\nconst puzzleBank = [\n  { id:'p1',  target:{ num:1, den:6 },  d2:6,  solution:{ A:2, N:2 }, extras:[1,3,4,5,7,8] },\n  { id:'p2',  target:{ num:1, den:6 },  d2:9,  solution:{ A:2, N:3 }, extras:[1,4,5,6,7,8] },\n  { id:'p3',  target:{ num:1, den:6 },  d2:12, solution:{ A:2, N:4 }, extras:[1,3,5,6,7,9] },\n  { id:'p4',  target:{ num:1, den:6 },  d2:6,  solution:{ A:3, N:1 }, extras:[2,4,5,7,8,9] },\n  { id:'p5',  target:{ num:2, den:6 },  d2:6,  solution:{ A:2, N:1 }, extras:[3,4,5,7,8,9] },\n  { id:'p6',  target:{ num:1, den:8 },  d2:8,  solution:{ A:2, N:3 }, extras:[1,2,4,5,6,7] },\n  { id:'p7',  target:{ num:3, den:8 },  d2:8,  solution:{ A:2, N:1 }, extras:[2,4,5,6,7,9] },\n  { id:'p8',  target:{ num:1, den:9 },  d2:9,  solution:{ A:3, N:2 }, extras:[1,3,4,5,6,7] },\n  { id:'p9',  target:{ num:3, den:9 },  d2:6,  solution:{ A:2, N:1 }, extras:[2,4,5,7,8,9] },\n  { id:'p10', target:{ num:1, den:10 }, d2:5,  solution:{ A:2, N:2 }, extras:[1,3,4,6,7,8] },\n  { id:'p11', target:{ num:2, den:10 }, d2:10, solution:{ A:2, N:3 }, extras:[1,4,5,6,7,9] },\n  { id:'p12', target:{ num:1, den:12 }, d2:4,  solution:{ A:3, N:1 }, extras:[2,5,6,7,8,9] }\n]\nconst currentPuzzle = ref(puzzleBank[0])\nconst lastPuzzleId  = ref(null)\n\nfunction pickNextPuzzle(){\n  let candidate\n  do{ candidate = puzzleBank[Math.floor(Math.random()*puzzleBank.length)] }\n  while(candidate.id === lastPuzzleId.value)\n  lastPuzzleId.value = candidate.id\n  return candidate\n}\nfunction buildBank(puz){\n  const set = new Set([puz.solution.A, puz.solution.N, ...(puz.extras||[])])\n  while(set.size<8) set.add(rndInt(1,15))\n  return shuffle([...set])\n}\n\n/* --------- Arabic digits with isolation --------- */\nconst digitsMap = ['','','','','','','','','','']\nconst LRI = '\\u2066', PDI = '\\u2069'\nfunction formatDigit(value){\n  const s = String(value)\n  return (props.lang==='ar') ? (LRI + s.replace(/[0-9]/g, d=>digitsMap[+d]) + PDI) : s\n}\n\n/* --------- rule line --------- */\nconst ruleText = computed(() => {\n  if(L.value==='ar'){\n    return `        :  ${formatDigit(target.value.num)}/${formatDigit(target.value.den)} =  ${formatDigit(1)}/    /${formatDigit(target.value.d2)}.`\n  }\n  return `Place integers to make the equation true:  ${target.value.num}/${target.value.den} =  1/    /${target.value.d2}.`\n})\n\n/* --------- game flow --------- */\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answer.value={A:null,N:null}\n  const puz = pickNextPuzzle()\n  currentPuzzle.value = puz\n  target.value = { num:puz.target.num, den:puz.target.den, d2:puz.d2 }\n  bank.value = buildBank(puz)\n}\nfunction onDragStart(ev,v){ ev.dataTransfer.setData('text/plain', String(v)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction dropTo(key, ev){\n  ev.preventDefault()\n  answer.value[key] = Number(ev.dataTransfer.getData('text/plain'))\n  toast.value=null\n}\nfunction isFilled(){ return answer.value.A!=null && answer.value.N!=null }\nfunction isCorrect(){\n  if(!isFilled()) return false\n  const lhs = (1/answer.value.A) - (answer.value.N/target.value.d2)\n  const rhs = target.value.num/target.value.den\n  return Math.abs(lhs-rhs) < 1e-9\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar'?' ':'Fill both blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){ answer.value={A:null,N:null}; toast.value=null; solved.value=false }\n\nonMounted(newPuzzle)\n</script>\n\n<template>\n  <div class=\"lvl2c5 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ ruleText }}</p>\n\n    <!-- equation card -->\n    <div class=\"equation\" :dir=\"L==='ar' ? 'rtl' : 'ltr'\">\n      <!-- AR layout:  /d2    1/ -->\n      <template v-if=\"L==='ar'\">\n        <div class=\"frac\">\n          <div class=\"top\">\n            <div class=\"drop\" @dragover=\"allowDrop\" @drop=\"dropTo('N',$event)\">\n              <span v-if=\"answer.N!=null\" class=\"num\">{{ formatDigit(answer.N) }}</span>\n              <span v-else class=\"placeholder\"></span>\n            </div>\n          </div>\n          <div class=\"bar\"></div>\n          <div class=\"bot\">{{ formatDigit(target.d2) }}</div>\n        </div>\n\n        <span class=\"minus\"></span>\n\n        <div class=\"frac\">\n          <div class=\"top\">{{ formatDigit(1) }}</div>\n          <div class=\"bar\"></div>\n          <div class=\"bot\">\n            <div class=\"drop\" @dragover=\"allowDrop\" @drop=\"dropTo('A',$event)\">\n              <span v-if=\"answer.A!=null\" class=\"num\">{{ formatDigit(answer.A) }}</span>\n              <span v-else class=\"placeholder\"></span>\n            </div>\n          </div>\n        </div>\n      </template>\n\n      <!-- EN layout:  1/  /d2 -->\n      <template v-else>\n        <div class=\"frac\">\n          <div class=\"top\">1</div>\n          <div class=\"bar\"></div>\n          <div class=\"bot\">\n            <div class=\"drop\" @dragover=\"allowDrop\" @drop=\"dropTo('A',$event)\">\n              <span v-if=\"answer.A!=null\" class=\"num\">{{ formatDigit(answer.A) }}</span>\n              <span v-else class=\"placeholder\"></span>\n            </div>\n          </div>\n        </div>\n\n        <span class=\"minus\"></span>\n\n        <div class=\"frac\">\n          <div class=\"top\">\n            <div class=\"drop\" @dragover=\"allowDrop\" @drop=\"dropTo('N',$event)\">\n              <span v-if=\"answer.N!=null\" class=\"num\">{{ formatDigit(answer.N) }}</span>\n              <span v-else class=\"placeholder\"></span>\n            </div>\n          </div>\n          <div class=\"bar\"></div>\n          <div class=\"bot\">{{ formatDigit(target.d2) }}</div>\n        </div>\n      </template>\n\n      <!-- fixed left side -->\n      <span class=\"eq\">=</span>\n      <div class=\"frac\">\n        <div class=\"top\">{{ formatDigit(target.num) }}</div>\n        <div class=\"bar\"></div>\n        <div class=\"bot\">{{ formatDigit(target.den) }}</div>\n      </div>\n    </div>\n\n    <!-- bank -->\n    <div class=\"bank\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"v in bank\" :key=\"v\" class=\"chip\"\n          draggable=\"true\" @dragstart=\"onDragStart($event,v)\"\n        >\n          {{ formatDigit(v) }}\n        </button>\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n      <button class=\"btn primary\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n      <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n    </div>\n\n    <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n  </div>\n</template>\n\n<style scoped>\n/* =========================\n   Theme tokens (high contrast)\n========================= */\n.lvl2c5{\n  --bg:#ffffff; --fg:#0b1220; --muted:#64748b;\n\n  --panel:#ffffff; --panel-bd:#cbd5e1; --panel-shadow:0 10px 24px rgba(2,6,23,.08);\n\n  --divider:#94a3b8;           /* fraction bar */\n  --drop-bg:#eef2ff;           /* drop area fill */\n  --drop-bd:#cbd5e1;\n\n  --chip-bg:#ffffff; --chip-bd:#cbd5e1;\n\n  --btn-bg:#ffffff; --btn-bd:#cbd5e1; --btn-fg:#0b1220;\n  --btn-primary-bg:#0ea5e9; --btn-primary-fg:#ffffff;\n\n  --toast-err-bg:#fee2e2; --toast-err-fg:#991b1b; --toast-err-bd:#fecaca;\n  --toast-ok-bg:#dcfce7;  --toast-ok-fg:#166534;  --toast-ok-bd:#bbf7d0;\n}\n\n[data-theme=\"dark\"] .lvl2c5{\n  --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af;\n\n  --panel:#0f172a; --panel-bd:#334155; --panel-shadow:0 12px 28px rgba(0,0,0,.55);\n\n  --divider:#94a3b8;            /* lighter line for contrast */\n  --drop-bg:rgba(99,102,241,.18);\n  --drop-bd:#475569;\n\n  --chip-bg:#111827; --chip-bd:#475569;\n\n  --btn-bg:#111827; --btn-bd:#475569; --btn-fg:#e5e7eb;\n  --btn-primary-bg:#38bdf8; --btn-primary-fg:#0b1220;\n\n  --toast-err-bg:rgba(248,113,113,.16); --toast-err-fg:#fecaca; --toast-err-bd:rgba(248,113,113,.45);\n  --toast-ok-bg:rgba(34,197,94,.22);    --toast-ok-fg:#bbf7d0;  --toast-ok-bd:rgba(34,197,94,.5);\n}\n\n/* =========================\n   Headings\n========================= */\n.title{ font-weight:800; margin:0 0 .35rem; color:var(--fg) }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n/* =========================\n   Equation card\n========================= */\n.equation{\n  display:flex; align-items:center; gap:1rem;\n  background:var(--panel); color:var(--fg);\n  border:1px solid var(--panel-bd);\n  border-radius:16px; padding:1rem;\n  box-shadow:var(--panel-shadow); width:max-content;\n}\n.eq,.minus{ font-size:1.35rem; font-weight:800 }\n.frac{ display:grid; grid-template-rows:auto 4px auto; align-items:center; min-width:66px }\n.frac .bar{ height:4px; background:var(--divider); border-radius:2px; margin:.15rem 0 }\n.top,.bot{ display:flex; align-items:center; justify-content:center; font-variant-numeric:tabular-nums; font-weight:800; font-size:1.2rem }\n\n/* drop zones */\n.drop{\n  min-width:46px; min-height:36px;\n  border:1px dashed var(--drop-bd);\n  border-radius:10px; background:var(--drop-bg);\n  display:flex; align-items:center; justify-content:center;\n  transition: box-shadow .15s, transform .1s;\n}\n.drop:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(56,189,248,.35) inset }\n.placeholder{ color:var(--muted); font-size:1.1rem }\n.num{ font-variant-numeric:tabular-nums; font-weight:800; font-size:1.1rem }\n\n/* =========================\n   Number bank\n========================= */\n.bank-title{ font-weight:700; color:var(--muted); margin:.85rem 0 .35rem }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{\n  border:1px solid var(--chip-bd); background:var(--chip-bg); color:var(--fg);\n  padding:.48rem .66rem; border-radius:12px; cursor:grab;\n  font-variant-numeric:tabular-nums; min-width:46px; text-align:center;\n  transition: transform .08s, box-shadow .12s\n}\n.chip:hover{ transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,0,0,.18) }\n\n/* =========================\n   Actions / toasts\n========================= */\n.actions{ display:flex; gap:.6rem; flex-wrap:wrap; margin-top:.6rem }\n.btn{\n  display:inline-flex; align-items:center; gap:.45rem;\n  padding:.55rem .85rem; border-radius:.9rem;\n  border:1px solid var(--btn-bd); background:var(--btn-bg); color:var(--btn-fg);\n  cursor:pointer; transition: transform .1s, box-shadow .1s\n}\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,0,0,.14) }\n.btn.primary{ background:var(--btn-primary-bg); color:var(--btn-primary-fg); border-color:transparent }\n.ic{ width:16px; height:16px }\n\n.toast{\n  margin-top:.7rem; padding:.6rem .9rem; border-radius:.9rem; text-align:center; font-weight:800;\n  background:var(--toast-err-bg); color:var(--toast-err-fg); border:1px solid var(--toast-err-bd)\n}\n.toast.ok{ background:var(--toast-ok-bg); color:var(--toast-ok-fg); border-color:var(--toast-ok-bd) }\n\n/* Ensure numerals are left-to-right inside fractions */\n.top, .bot, .num { direction:ltr; unicode-bidi:isolate; }\n</style>\n","<script setup>\nimport { ref, computed, watch, onMounted } from 'vue'\nimport { Check, RotateCcw, RefreshCw } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\nconst copy = {\n  ar:{\n    title:'    6:  ',\n    question:'     ',\n    newQ:' ', reset:' ', check:'',\n    correct:' !    .',\n    wrong:'  .    .',\n    pick:'  .'\n  },\n  en:{\n    title:'Level 2  Challenge 6: Comparing weights',\n    question:'How does the weight of the square compare to the triangle?',\n    newQ:'New question', reset:'Reset', check:'Check',\n    correct:'Correct! Great job comparing the weights.',\n    wrong:'That is incorrect. Revisit the equations.',\n    pick:'Select an option first.'\n  }\n}\n\nconst L = computed(()=> (copy[props.lang]?props.lang:'ar'))\n/* sounds */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst digitsMap = ['','','','','','','','','','']\n\nfunction toArabicNumber(value){\n  return String(value).replace(/[0-9]/g, d => digitsMap[Number(d)])\n}\n\nfunction formatNumberByLang(value, lang){\n  return lang === 'ar' ? toArabicNumber(value) : String(value)\n}\n\nfunction unitsWord(value, lang){\n  if(lang === 'ar'){\n    return value <= 2 ? '' : ''\n  }\n  return value === 1 ? 'unit' : 'units'\n}\n\nconst optionTemplates = {\n  ar:{\n    double:'  ',\n    equal:'  ',\n    half:'  ',\n    less:(n) => ` ${toArabicNumber(n)} ${unitsWord(n,'ar')}   `,\n    more:(n) => ` ${toArabicNumber(n)} ${unitsWord(n,'ar')}   `\n  },\n  en:{\n    double:'Twice the triangle',\n    equal:'Equal to the triangle',\n    half:'Half the triangle',\n    less:(n) => `${n} ${unitsWord(n,'en')} less than the triangle`,\n    more:(n) => `${n} ${unitsWord(n,'en')} more than the triangle`\n  }\n}\n\nfunction buildOptions(puzzle, lang){\n  const magnitude = Math.abs(puzzle.difference)\n  const templates = optionTemplates[lang]\n  return [\n    { id:'a', text:templates.double },\n    { id:'b', text:templates.equal },\n    { id:'c', text:templates.half },\n    { id:'d', text:templates.less(magnitude) },\n    { id:'e', text:templates.more(magnitude) }\n  ]\n}\n\nfunction buildPremiseLines(puzzle, lang){\n  const squareTotal = formatNumberByLang(puzzle.totals.square, lang)\n  const triangleTotal = formatNumberByLang(puzzle.totals.triangle, lang)\n  if(lang === 'ar'){\n    return [\n      `     ${squareTotal} .`,\n      `     ${triangleTotal} .`\n    ]\n  }\n  return [\n    `Two balls and one square weigh ${squareTotal} units.`,\n    `Two balls and one triangle weigh ${triangleTotal} units.`\n  ]\n}\n\nconst puzzleBank = [\n  { id:'p1', totals:{ square:8, triangle:6 }, difference:2, correctId:'e' },\n  { id:'p2', totals:{ square:10, triangle:7 }, difference:3, correctId:'e' },\n  { id:'p3', totals:{ square:9, triangle:11 }, difference:-2, correctId:'d' },\n  { id:'p4', totals:{ square:12, triangle:8 }, difference:4, correctId:'e' },\n  { id:'p5', totals:{ square:7, triangle:10 }, difference:-3, correctId:'d' }\n]\n\nconst currentPuzzle = ref(puzzleBank[0])\nconst lastPuzzleId = ref(null)\n\nconst correctId = computed(() => currentPuzzle.value.correctId)\nfunction pickNextPuzzle(){\n  if(puzzleBank.length === 1){\n    lastPuzzleId.value = puzzleBank[0].id\n    return puzzleBank[0]\n  }\n  let candidate\n  do{\n    candidate = puzzleBank[Math.floor(Math.random() * puzzleBank.length)]\n  }while(candidate.id === lastPuzzleId.value)\n  lastPuzzleId.value = candidate.id\n  return candidate\n}\n\nfunction shuffle(arr){\n  return arr.slice().sort(() => Math.random() - 0.5)\n}\n\nconst selected = ref(null)\nconst feedback = ref(null)\nconst solved = ref(false)\nconst shuffledOptions = ref(null)\n\nfunction applyOptions(){\n  shuffledOptions.value = shuffle(buildOptions(currentPuzzle.value, L.value))\n}\n\nfunction resetAll(){\n  selected.value = null\n  feedback.value = null\n  solved.value = false\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',\n      { method:'GET', credentials:'include' })\n  }catch{}\n}\n\nasync function checkAnswer(){\n  if(!selected.value){\n    feedback.value = copy[L.value].pick\n    sWrong && sWrong.play()\n    return\n  }\n  if(selected.value === correctId.value){\n    const wasSolved = solved.value\n    solved.value = true\n    feedback.value = copy[L.value].correct\n    sOK && sOK.play(); sClap && sClap.play()\n    if(!wasSolved){\n      await addPoint()\n    }\n  } else {\n    solved.value = false\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\n\nfunction randomizePrompt(){\n  const puzzle = pickNextPuzzle()\n  currentPuzzle.value = puzzle\n  resetAll()\n  applyOptions()\n}\n\nwatch(() => props.lang, () => {\n  resetAll()\n  applyOptions()\n})\n\nconst optionsList = computed(() => shuffledOptions.value || buildOptions(currentPuzzle.value, L.value))\n\nconst premiseLines = computed(() => buildPremiseLines(currentPuzzle.value, L.value))\n\nonMounted(() => {\n  randomizePrompt()\n})\n</script>\n\n<template>\n  <div class=\"lvl2c6 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p v-for=\"(line, idx) in premiseLines\" :key=\"idx\" class=\"premise\">{{ line }}</p>\n      <p class=\"question\">{{ copy[L].question }}</p>\n    </header>\n\n    <section class=\"options\">\n      <label\n        v-for=\"option in optionsList\"\n        :key=\"option.id\"\n        class=\"option\"\n        :class=\"{ selected: selected === option.id }\"\n      >\n        <input\n          type=\"radio\"\n          name=\"weight-comparison\"\n          :value=\"option.id\"\n          v-model=\"selected\"\n        />\n        <span class=\"mark\"></span>\n        <span class=\"text\">{{ option.text }}</span>\n      </label>\n    </section>\n\n    <section class=\"actions\">\n      <button class=\"btn\" @click=\"checkAnswer\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"randomizePrompt\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c6{ --fg:#1f2937; --bg:#f8fafc; --panel:#ffffff; --bd:#cbd5f5; --accent:#2563eb;\n  padding:24px; border-radius:18px; color:var(--fg); background:linear-gradient(135deg,#eef2ff,#f8fafc);\n  box-shadow:0 14px 30px rgba(37,99,235,.12) }\n[data-theme=\"dark\"] .lvl2c6{ --fg:#e2e8f0; --bg:#0f172a; --panel:#111c32; --bd:#1d2a44; --accent:#60a5fa;\n  background:linear-gradient(135deg,#0f172a,#1e293b) }\n\n.head{ margin-bottom:18px }\n.title{ margin:0 0 12px; font-size:1.6rem; font-weight:800 }\n.premise{ margin:0 0 6px; line-height:1.6; opacity:.85 }\n.question{ margin:10px 0 0; font-size:1.1rem; font-weight:700 }\n\n.options{ display:grid; gap:12px; margin:20px 0 }\n.option{ position:relative; display:flex; align-items:center; gap:12px; padding:14px 16px; border-radius:14px;\n  border:2px solid transparent; background:var(--panel); box-shadow:0 8px 20px rgba(37,99,235,.08); cursor:pointer;\n  transition:.18s }\n.option:hover{ transform:translateY(-1px); box-shadow:0 12px 28px rgba(37,99,235,.12) }\n.option.selected{ border-color:var(--accent); box-shadow:0 12px 28px rgba(37,99,235,.18) }\n.option input{ display:none }\n.mark{ width:18px; height:18px; border-radius:50%; border:2px solid var(--accent); display:inline-block; flex-shrink:0; position:relative }\n.option.selected .mark::after{ content:''; position:absolute; inset:3px; border-radius:50%; background:var(--accent) }\n.text{ font-weight:600; line-height:1.5 }\n\n.actions{ display:flex; flex-wrap:wrap; gap:12px; margin-top:18px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 20px; border-radius:12px; border:1px solid var(--bd);\n  background:var(--panel); cursor:pointer; font-weight:700; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(37,99,235,.12) }\n.ic{ width:18px; height:18px }\n\n.feedback{ margin-top:20px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700 }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n</style>\n","<!-- <script setup>\nimport { ref, computed, reactive, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'    1:  ',\n    rule:'           .        .',\n    hint:'            .',\n    bank:' ', newQ:' ', reset:' ', check:'',\n    correct:'!  .', wrong:'       .',\n    clear:' '\n  },\n  en:{\n    title:'Level 3  Challenge 1: Multiplication Pyramid',\n    rule:'Fill the pyramid so that every cell above equals the product of the two cells directly beneath it. Drag the correct numbers from the bank.',\n    hint:'Remember: each step upward is the product of the two numbers underneath.',\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Great! The pyramid is complete.', wrong:'Something is off. Recheck the placements.',\n    clear:'Clear cell'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* sounds */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* helpers */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\nfunction keyOf(r,c){ return `${r},${c}` }\n\n/* state */\nconst rows = ref([])                  //     \nconst blanks = ref(new Set())         //   \nconst answerMap = reactive({})        // key -> value \nconst totalCounts = reactive({})      //     \nconst bankCounts = reactive({})       //    \nconst toast = ref(null)\nconst solved = ref(false)\n\nconst numDir = computed(()=>({ direction:'ltr', unicodeBidi:'isolate' }))\nconst displayRows = computed(()=> rows.value.map((cells,index)=>({ cells, index })).slice().reverse())\n\nfunction usageOf(val){\n  let used = 0\n  for(const k in answerMap){ if(answerMap[k] === val) used++ }\n  return used\n}\n\nfunction rebuildBank(){\n  const available = {}\n  for(const [valStr,total] of Object.entries(totalCounts)){\n    const val = Number(valStr)\n    const remaining = total - usageOf(val)\n    if(remaining > 0) available[val] = remaining\n  }\n  for(const k in bankCounts){ delete bankCounts[k] }\n  for(const [val,ct] of Object.entries(available)) bankCounts[val] = ct\n}\n\nfunction generatePyramid(){\n  while(true){\n    const base = Array.from({length:4}, ()=> rndInt(2,6))\n    const built = [base]\n    for(let r=1;r<4;r++){\n      const prev = built[r-1]\n      const row = []\n      for(let c=0;c<prev.length-1;c++) row.push(prev[c] * prev[c+1])\n      built.push(row)\n    }\n    const top = built[3][0]\n    if(top <= 50000) return built\n  }\n}\n\nfunction newPuzzle(){\n  solved.value=false\n  toast.value=null\n  const built = generatePyramid()\n  rows.value = built\n  blanks.value = new Set()\n  for(const k in answerMap) delete answerMap[k]\n  for(let r=1;r<rows.value.length;r++){\n    for(let c=0;c<rows.value[r].length;c++) blanks.value.add(keyOf(r,c))\n  }\n  const totals = {}\n  blanks.value.forEach(k=>{\n    const [r,c] = k.split(',').map(Number)\n    const val = rows.value[r][c]\n    totals[val] = (totals[val] || 0) + 1\n  })\n  for(const k in totalCounts) delete totalCounts[k]\n  for(const [val,ct] of Object.entries(totals)) totalCounts[val] = ct\n  rebuildBank()\n}\n\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction dropTo(key, ev){\n  ev.preventDefault()\n  if(!blanks.value.has(key)) return\n  const raw = ev.dataTransfer.getData('text/plain')\n  const val = Number(raw)\n  if(Number.isNaN(val) || !totalCounts[val]) return\n  const current = answerMap[key]\n  if(current === val){ return }\n  const used = usageOf(val)\n  if(used >= totalCounts[val]) return\n  if(current != null) delete answerMap[key]\n  answerMap[key] = val\n  rebuildBank()\n  toast.value=null\n}\nfunction clearCell(key){\n  if(answerMap[key] != null){\n    delete answerMap[key]\n    rebuildBank()\n  }\n}\n\nfunction isFilled(){\n  for(const key of blanks.value){ if(answerMap[key]==null) return false }\n  return true\n}\nfunction isCorrect(){\n  for(const key of blanks.value){\n    const [r,c] = key.split(',').map(Number)\n    if(answerMap[key] !== rows.value[r][c]) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1', { method:'GET', credentials:'include' })\n  }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar' ? '   .' : 'Fill all blanks first.'; sWrong && sWrong.play(); return }\n  if(isCorrect()){\n    solved.value = true\n    toast.value = T[L.value].correct\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    toast.value = T[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\nfunction resetAll(){\n  for(const k in answerMap) delete answerMap[k]\n  solved.value=false\n  toast.value=null\n  rebuildBank()\n}\n\nconst bankList = computed(()=>{\n  const items = []\n  for(const [val,ct] of Object.entries(bankCounts)){\n    for(let i=0;i<ct;i++) items.push(Number(val))\n  }\n  return shuffle(items)\n})\n\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{ if(toast.value) toast.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c1 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n    <p class=\"hint\">{{ T[L].hint }}</p>\n\n    <div class=\"pyramid\" :dir=\"props.lang==='ar' ? 'rtl' : 'ltr'\">\n      <div class=\"p-row\" v-for=\"row in displayRows\" :key=\"row.index\">\n        <div\n          class=\"brick\"\n          v-for=\"(val,cIdx) in row.cells\"\n          :key=\"row.index + '-' + cIdx\"\n        >\n          <template v-if=\"!blanks.has(keyOf(row.index, cIdx))\">\n            <span class=\"num\" :style=\"numDir\">{{ val }}</span>\n          </template>\n          <template v-else>\n            <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"dropTo(keyOf(row.index, cIdx), $event)\">\n              <span v-if=\"answerMap[keyOf(row.index, cIdx)] != null\" class=\"num\" :style=\"numDir\">{{ answerMap[keyOf(row.index, cIdx)] }}</span>\n              <span v-else class=\"placeholder\"></span>\n            </div>\n            <button class=\"clear\" @click=\"clearCell(keyOf(row.index, cIdx))\"><Eraser class=\"ic\" /> {{ T[L].clear }}</button>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"bank\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"(val, idx) in bankList\"\n          :key=\"val + '_' + idx\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, val)\"\n          :style=\"numDir\"\n        >\n          {{ val }}\n        </button>\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n      <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n      <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n    </div>\n\n    <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c1{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl3c1{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ margin:0 0 .35rem; color:var(--muted) }\n.hint{ margin:0 0 1rem; color:var(--muted); font-size:.9rem }\n\n.pyramid{ display:flex; flex-direction:column; align-items:center; gap:.65rem; margin-bottom:1.25rem }\n.p-row{ display:flex; gap:.65rem; justify-content:center }\n.brick{ background:var(--bg); border:1px solid #e5e7ebaa; border-radius:.9rem; padding:.5rem .75rem; min-width:96px; min-height:72px; display:flex; flex-direction:column; align-items:center; justify-content:center; box-shadow:0 4px 12px rgba(0,0,0,.06) }\n[data-theme=\"dark\"] .brick{ border-color:#1f2937; box-shadow:0 4px 12px rgba(0,0,0,.3) }\n\n.num{ font-weight:700; font-size:1.2rem; font-variant-numeric:tabular-nums }\n.placeholder{ color:#cbd5f5; font-size:1.4rem }\n.dropzone{ display:flex; align-items:center; justify-content:center; width:100%; height:100% }\n.dropzone:hover{ box-shadow:0 0 0 3px rgba(59,130,246,.22) inset; border-radius:.6rem }\n.clear{ margin-top:.45rem; align-self:center; display:inline-flex; gap:.3rem; align-items:center; padding:.3rem .55rem; border-radius:.6rem; border:1px solid #e5e7eb88; background:var(--bg); cursor:pointer; font-size:.75rem }\n.ic{ width:16px; height:16px }\n\n.bank{ margin-bottom:1rem }\n.bank-title{ font-weight:600; margin-bottom:.5rem }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ padding:.45rem .8rem; border-radius:.8rem; border:1px solid #cbd5f5aa; background:var(--bg); cursor:grab; font-weight:600; font-variant-numeric:tabular-nums }\n.chip:active{ cursor:grabbing }\n\n.actions{ display:flex; gap:.6rem; flex-wrap:wrap; margin-bottom:1rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .8rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n\n.toast{ padding:.6rem .9rem; border-radius:.8rem; border:1px solid #fecaca; background:#fee2e2; color:#991b1b }\n.toast.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n</style> -->\n<script setup>\n/* =========================================================\n   Level 3  Challenge 1: Multiplication Pyramid\n   Dark-mode polish + higher contrast across the board\n   ---------------------------------------------------------\n   What I changed (UI only):\n   - Strong theme tokens for light/dark (panel, borders, chips).\n   - Visible dropzones in dark mode (solid dashed border + tint).\n   - Bricks get a subtle card panel instead of transparent white.\n   - Clearer hover/focus states and consistent shadows.\n   - Numbers are forced LTR (so Arabic UI doesnt flip digits).\n========================================================= */\n\nimport { ref, computed, reactive, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\n/* ---------- copy ---------- */\nconst T = {\n  ar:{\n    title:'    1:  ',\n    rule:'           .        .',\n    hint:'            .',\n    bank:' ', newQ:' ', reset:' ', check:'',\n    correct:'!  .', wrong:'       .',\n    clear:' '\n  },\n  en:{\n    title:'Level 3  Challenge 1: Multiplication Pyramid',\n    rule:'Fill the pyramid so every cell above equals the product of the two cells directly beneath it.',\n    hint:'Each step upward = product of the two numbers underneath.',\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Great! The pyramid is complete.', wrong:'Something is off. Recheck placements.',\n    clear:'Clear cell'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ---------- sounds (optional) ---------- */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK&&(sOK.preload='auto'); sClap&&(sClap.preload='auto'); sWrong&&(sWrong.preload='auto')\n\n/* ---------- helpers ---------- */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\nfunction keyOf(r,c){ return `${r},${c}` }\n\n/* ---------- state ---------- */\nconst rows = ref([])            // rows from base to top\nconst blanks = ref(new Set())   // keys of blanks \"r,c\"\nconst answerMap = reactive({})  // placements\nconst totalCounts = reactive({})// total copies per value\nconst bankCounts  = reactive({})// remaining copies per value\nconst toast = ref(null)\nconst solved = ref(false)\n\n/* Keep numerals LTR even in Arabic UI */\nconst numDir = computed(()=>({ direction:'ltr', unicodeBidi:'isolate' }))\n\n/* Render from top to bottom (visual pyramid) */\nconst displayRows = computed(()=> rows.value.map((cells,index)=>({ cells, index })).slice().reverse())\n\nfunction usageOf(val){\n  let used = 0\n  for(const k in answerMap){ if(answerMap[k] === val) used++ }\n  return used\n}\nfunction rebuildBank(){\n  const available = {}\n  for(const [v,tot] of Object.entries(totalCounts)){\n    const val = Number(v)\n    const remaining = tot - usageOf(val)\n    if(remaining > 0) available[val] = remaining\n  }\n  for(const k in bankCounts) delete bankCounts[k]\n  Object.entries(available).forEach(([v,ct])=> bankCounts[v]=ct)\n}\n\n/* Generate a 4-level pyramid with a bounded top */\nfunction generatePyramid(){\n  while(true){\n    const base = Array.from({length:4}, ()=> rndInt(2,6))\n    const built = [base]\n    for(let r=1;r<4;r++){\n      const prev = built[r-1], row=[]\n      for(let c=0;c<prev.length-1;c++) row.push(prev[c]*prev[c+1])\n      built.push(row)\n    }\n    if(built[3][0] <= 50000) return built\n  }\n}\n\n/* Build puzzle and bank quantities from blanks */\nfunction newPuzzle(){\n  solved.value=false; toast.value=null\n  const built = generatePyramid()\n  rows.value = built\n\n  blanks.value = new Set()\n  for(const k in answerMap) delete answerMap[k]\n\n  // hide every cell except the base row\n  for(let r=1;r<rows.value.length;r++){\n    for(let c=0;c<rows.value[r].length;c++) blanks.value.add(keyOf(r,c))\n  }\n\n  const totals={}\n  blanks.value.forEach(k=>{\n    const [r,c]=k.split(',').map(Number)\n    const v = rows.value[r][c]\n    totals[v]=(totals[v]||0)+1\n  })\n  for(const k in totalCounts) delete totalCounts[k]\n  Object.entries(totals).forEach(([v,ct])=> totalCounts[v]=ct)\n  rebuildBank()\n}\n\n/* DnD with quantities */\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction dropTo(key, ev){\n  ev.preventDefault()\n  if(!blanks.value.has(key)) return\n  const val = Number(ev.dataTransfer.getData('text/plain'))\n  if(Number.isNaN(val) || !totalCounts[val]) return\n  if(answerMap[key] === val) return\n  if(usageOf(val) >= totalCounts[val]) return\n  answerMap[key] = val\n  rebuildBank()\n  toast.value=null\n}\nfunction clearCell(key){\n  if(answerMap[key]!=null){\n    delete answerMap[key]\n    rebuildBank()\n  }\n}\n\n/* Validation */\nfunction isFilled(){ for(const k of blanks.value){ if(answerMap[k]==null) return false } return true }\nfunction isCorrect(){ for(const k of blanks.value){ const [r,c]=k.split(',').map(Number); if(answerMap[k]!==rows.value[r][c]) return false } return true }\n\n/* Scoring */\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar' ? '   .' : 'Fill all blanks first.'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){\n  for(const k in answerMap) delete answerMap[k]\n  solved.value=false; toast.value=null; rebuildBank()\n}\n\n/* Bank list expands counts  flat array */\nconst bankList = computed(()=>{\n  const items=[]\n  for(const [v,ct] of Object.entries(bankCounts)) for(let i=0;i<ct;i++) items.push(Number(v))\n  return shuffle(items)\n})\n\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{ if(toast.value) toast.value=null })\n</script>\n\n<template>\n  <div class=\"lvl3c1 challenge-surface\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n    <p class=\"hint\">{{ T[L].hint }}</p>\n\n    <!-- pyramid -->\n    <div class=\"pyramid\" :dir=\"props.lang==='ar' ? 'rtl' : 'ltr'\">\n      <div class=\"p-row\" v-for=\"row in displayRows\" :key=\"row.index\">\n        <div class=\"brick\" v-for=\"(val,cIdx) in row.cells\" :key=\"row.index+'-'+cIdx\">\n          <template v-if=\"!blanks.has(keyOf(row.index,cIdx))\">\n            <span class=\"num\" :style=\"numDir\">{{ val }}</span>\n          </template>\n          <template v-else>\n            <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"dropTo(keyOf(row.index,cIdx),$event)\">\n              <span v-if=\"answerMap[keyOf(row.index,cIdx)]!=null\" class=\"num\" :style=\"numDir\">\n                {{ answerMap[keyOf(row.index,cIdx)] }}\n              </span>\n              <span v-else class=\"placeholder\"></span>\n            </div>\n            <button class=\"clear\" @click=\"clearCell(keyOf(row.index,cIdx))\"><Eraser class=\"ic\" /> {{ T[L].clear }}</button>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <!-- bank -->\n    <div class=\"bank\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"(val,idx) in bankList\" :key=\"val+'_'+idx\"\n          class=\"chip\" draggable=\"true\" @dragstart=\"onDragStart($event,val)\" :style=\"numDir\">\n          {{ val }}\n        </button>\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n      <button class=\"btn primary\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n      <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n    </div>\n\n    <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n  </div>\n</template>\n\n<style scoped>\n/* =========================\n   High-contrast theme tokens\n========================= */\n.lvl3c1{\n  --bg:#ffffff; --fg:#0b1220; --muted:#64748b;\n\n  --panel:#ffffff; --panel-bd:#cbd5e1; --panel-shadow:0 10px 24px rgba(2,6,23,.08);\n\n  --brick-bg:#ffffff; --brick-bd:#cbd5e1;\n\n  --drop-bg:#eef2ff;         /* visible in light mode */\n  --drop-bd:#94a3b8;\n\n  --chip-bg:#ffffff; --chip-bd:#cbd5e1;\n\n  --btn-bg:#ffffff; --btn-bd:#cbd5e1; --btn-fg:#0b1220;\n  --btn-primary-bg:#0ea5e9; --btn-primary-fg:#ffffff;\n\n  --toast-err-bg:#fee2e2; --toast-err-fg:#991b1b; --toast-err-bd:#fecaca;\n  --toast-ok-bg:#dcfce7;  --toast-ok-fg:#166534;  --toast-ok-bd:#bbf7d0;\n}\n\n[data-theme=\"dark\"] .lvl3c1{\n  --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af;\n\n  --panel:#0f172a; --panel-bd:#334155; --panel-shadow:0 12px 28px rgba(0,0,0,.55);\n\n  --brick-bg:#0f172a; --brick-bd:#475569;\n\n  --drop-bg:rgba(99,102,241,.18);   /* indigo tint for visibility */\n  --drop-bd:#64748b;\n\n  --chip-bg:#111827; --chip-bd:#475569;\n\n  --btn-bg:#111827; --btn-bd:#475569; --btn-fg:#e5e7eb;\n  --btn-primary-bg:#38bdf8; --btn-primary-fg:#0b1220;\n\n  --toast-err-bg:rgba(248,113,113,.16); --toast-err-fg:#fecaca; --toast-err-bd:rgba(248,113,113,.45);\n  --toast-ok-bg:rgba(34,197,94,.22);    --toast-ok-fg:#bbf7d0;  --toast-ok-bd:rgba(34,197,94,.5);\n}\n\n/* =========================\n   Headings\n========================= */\n.title{ font-weight:800; margin:0 0 .35rem; color:var(--fg) }\n.rule{ color:var(--muted); margin:0 0 .4rem }\n.hint{ color:var(--muted); margin:0 0 1rem; font-size:.9rem }\n\n/* =========================\n   Pyramid bricks (cards)\n========================= */\n.pyramid{ display:flex; flex-direction:column; align-items:center; gap:.7rem; margin-bottom:1.1rem }\n.p-row{ display:flex; gap:.7rem; justify-content:center }\n\n.brick{\n  background:var(--brick-bg);\n  border:1px solid var(--brick-bd);\n  border-radius:14px;\n  padding:.55rem .75rem;\n  min-width:104px; min-height:78px;\n  display:flex; flex-direction:column; align-items:center; justify-content:center;\n  box-shadow:var(--panel-shadow);\n}\n\n.num{ font-weight:800; font-size:1.2rem; font-variant-numeric:tabular-nums; color:var(--fg) }\n.placeholder{ color:var(--muted); font-size:1.35rem }\n\n/* Drop area is obvious in both themes */\n.dropzone{\n  width:100%; height:100%;\n  display:flex; align-items:center; justify-content:center;\n  border:1px dashed var(--drop-bd);\n  background:var(--drop-bg);\n  border-radius:10px;\n  transition: box-shadow .15s, transform .1s;\n}\n.dropzone:hover{ box-shadow:0 0 0 3px rgba(56,189,248,.28) inset }\n.dropzone:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(56,189,248,.45) inset }\n\n.clear{\n  margin-top:.45rem; align-self:center;\n  display:inline-flex; gap:.35rem; align-items:center;\n  padding:.34rem .6rem; border-radius:.6rem;\n  border:1px solid var(--panel-bd); background:var(--panel); color:var(--fg);\n  cursor:pointer; font-size:.78rem\n}\n.ic{ width:16px; height:16px }\n\n/* =========================\n   Bank\n========================= */\n.bank{ margin-bottom:1rem }\n.bank-title{ font-weight:700; color:var(--muted); margin-bottom:.45rem }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n\n.chip{\n  border:1px solid var(--chip-bd); background:var(--chip-bg); color:var(--fg);\n  padding:.48rem .7rem; border-radius:12px; cursor:grab;\n  font-weight:700; font-variant-numeric:tabular-nums;\n  transition: transform .08s, box-shadow .12s;\n  min-width:52px; text-align:center;\n}\n.chip:hover{ transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,0,0,.18) }\n.chip:active{ cursor:grabbing }\n\n/* =========================\n   Actions / toasts\n========================= */\n.actions{ display:flex; gap:.6rem; flex-wrap:wrap; margin:1rem 0 }\n.btn{\n  display:inline-flex; align-items:center; gap:.45rem;\n  padding:.55rem .85rem; border-radius:.9rem;\n  border:1px solid var(--btn-bd); background:var(--btn-bg); color:var(--btn-fg);\n  cursor:pointer; transition: transform .1s, box-shadow .1s\n}\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 22px rgba(0,0,0,.14) }\n.btn.primary{ background:var(--btn-primary-bg); color:var(--btn-primary-fg); border-color:transparent }\n\n.toast{\n  padding:.62rem .9rem; border-radius:.9rem; text-align:center; font-weight:800;\n  background:var(--toast-err-bg); color:var(--toast-err-fg); border:1px solid var(--toast-err-bd)\n}\n.toast.ok{ background:var(--toast-ok-bg); color:var(--toast-ok-fg); border-color:var(--toast-ok-bd) }\n\n/* Digits always LTR */\n.num{ direction:ltr; unicode-bidi:isolate }\n</style>\n\n","<!-- <script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\nconst copy = {\n  ar:{\n    title:'    2:    ',\n    rule:'    .    (   )             .',\n    bank:' ', newQ:' ', reset:'', check:'',\n    correct:'!  .', wrong:'    .', clear:' ',\n    hints:{ sum:'', mean:' ', median:'', range:'' },\n    manualPlaceholder:' '\n  },\n  en:{\n    title:'Level 3  Challenge 2: Missing numbers on the cards',\n    rule:'Each coloured card is missing its number. Use the given information (sum, mean, median, range) to deduce the correct value for every card, then drag a number from the bank or type it manually.',\n    bank:'Number bank', newQ:'New puzzle', reset:'Clear', check:'Check',\n    correct:'Great! All numbers are correct.', wrong:'Something is off  recheck the values.', clear:'Clear card',\n    hints:{ sum:'Sum', mean:'Mean', median:'Median', range:'Range' },\n    manualPlaceholder:'Type value'\n  }\n}\n\nconst L = computed(() => (copy[props.lang] ? props.lang : 'ar'))\nconst locale = computed(() => (props.lang === 'ar' ? 'ar-EG' : 'en-US'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== data templates ===== */\nconst colourPalette = ['green','gold','teal','magenta','sky','orange','crimson']\nconst templates = [\n  { numbers:[4,8,12,16,20] },\n  { numbers:[5,9,11,13,22] },\n  { numbers:[7,10,12,18,23] },\n  { numbers:[6,8,15,19,22] },\n  { numbers:[9,11,14,20,26] }\n]\n\nconst EXTRA_CHOICES = 4\n\nfunction computeHints(numbers){\n  const sorted = numbers.slice().sort((a,b)=>a-b)\n  const sum = sorted.reduce((acc,n)=>acc+n,0)\n  const mean = sum / sorted.length\n  const median = sorted[Math.floor(sorted.length/2)]\n  const range = sorted[sorted.length-1] - sorted[0]\n  return { sum, mean, median, range }\n}\n\n/* ===== state ===== */\nconst cards = ref([])                 // [{id,color,value}]\nconst solution = reactive({})         // id -> value\nconst blanks = ref(new Set())         // ids\nconst totalCounts = reactive({})      // value -> total copies (handles duplicates)\nconst extraCounts = reactive({})      // distractor values counts\nconst bankCounts = reactive({})       // value -> remaining copies\nconst answer = reactive({})           // id -> chosen value\nconst answerSource = reactive({})     // id -> 'bank' | 'manual'\nconst manualDrafts = reactive({})     // id -> string\nconst hints = ref({ sum:0, mean:0, median:0, range:0 })\nconst toast = ref(null)\nconst solved = ref(false)\n\nfunction resetReactiveMap(obj){ for (const key of Object.keys(obj)) delete obj[key] }\n\nfunction buildPuzzle(){\n  const tpl = templates[Math.floor(Math.random()*templates.length)]\n  const nums = tpl.numbers.slice()\n  const colours = colourPalette.slice(0, nums.length)\n  colours.sort(() => Math.random() - 0.5)\n  const arrangement = nums.slice().sort(() => Math.random() - 0.5)\n\n  cards.value = []\n  blanks.value = new Set()\n  resetReactiveMap(solution)\n  resetReactiveMap(answer)\n  resetReactiveMap(answerSource)\n  resetReactiveMap(manualDrafts)\n  resetReactiveMap(totalCounts)\n  resetReactiveMap(extraCounts)\n  resetReactiveMap(bankCounts)\n\n  arrangement.forEach((value, idx) => {\n    const id = `card-${idx}`\n    cards.value.push({ id, value, color: colours[idx % colours.length] })\n    solution[id] = value\n    blanks.value.add(id)\n    totalCounts[value] = (totalCounts[value] || 0) + 1\n  })\n  for (const [val, ct] of Object.entries(totalCounts)) {\n    bankCounts[val] = ct\n  }\n\n  const minVal = Math.min(...nums)\n  const maxVal = Math.max(...nums)\n  const lower = Math.max(1, minVal - 12)\n  const upper = maxVal + 12\n  const extras = new Set()\n  while(extras.size < EXTRA_CHOICES){\n    const candidate = Math.floor(Math.random() * (upper - lower + 1)) + lower\n    if(totalCounts[candidate]) continue\n    extras.add(candidate)\n  }\n  extras.forEach(val => {\n    extraCounts[val] = (extraCounts[val] || 0) + 1\n    bankCounts[val] = (bankCounts[val] || 0) + 1\n  })\n\n  hints.value = computeHints(nums)\n  toast.value = null\n  solved.value = false\n}\n\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\n\nfunction setAnswer(cardId, value, source){\n  if(Number.isNaN(value)) return false\n  if(answer[cardId] != null && answerSource[cardId] === 'bank'){\n    const prev = answer[cardId]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n\n  if(source === 'bank'){\n    if((bankCounts[value] || 0) <= 0) return false\n    bankCounts[value] = (bankCounts[value] || 0) - 1\n  }\n\n  answer[cardId] = value\n  answerSource[cardId] = source\n  manualDrafts[cardId] = String(value)\n  toast.value = null\n  solved.value = false\n  return true\n}\n\nfunction onDrop(ev, cardId){\n  ev.preventDefault()\n  const raw = ev.dataTransfer.getData('text/plain')\n  const val = Number(raw)\n  if(Number.isNaN(val)) return\n  setAnswer(cardId, val, 'bank')\n}\n\nfunction clearCard(cardId){\n  if(answer[cardId] != null && answerSource[cardId] === 'bank'){\n    const prev = answer[cardId]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n  delete answer[cardId]\n  delete answerSource[cardId]\n  manualDrafts[cardId] = ''\n  toast.value = null\n  solved.value = false\n}\n\nfunction isFilled(){\n  for(const id of blanks.value){ if(answer[id] == null) return false }\n  return true\n}\n// function isCorrect(){\n//   for(const id of blanks.value){ if(answer[id] !== solution[id]) return false }\n//   return true\n// }\n\nfunction isCorrect(){\n  const counts = {}\n  for (const id of blanks.value){\n    const v = answer[id]\n    if (v == null) return false\n    counts[v] = (counts[v] || 0) + 1\n  }\n  for (const [v, ct] of Object.entries(totalCounts)){\n    if ((counts[v] || 0) !== ct) return false\n  }\n  const need = Object.values(totalCounts).reduce((a,b)=>a+b,0)\n  const have = Object.values(counts).reduce((a,b)=>a+b,0)\n  return have === need\n}\n\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){\n    toast.value = L.value==='ar' ? '   .' : 'Fill every card first.'\n    sWrong && sWrong.play()\n    return\n  }\n  if(isCorrect()){\n    solved.value = true\n    toast.value = copy[L.value].correct\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  } else {\n    toast.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\nfunction resetAll(){\n  resetReactiveMap(answer)\n  resetReactiveMap(answerSource)\n  resetReactiveMap(manualDrafts)\n  resetReactiveMap(bankCounts)\n  for (const [val, ct] of Object.entries(totalCounts)) bankCounts[val] = ct\n  for (const [val, ct] of Object.entries(extraCounts)) bankCounts[val] = (bankCounts[val] || 0) + ct\n  toast.value = null\n  solved.value = false\n}\n\nconst bankList = computed(() => {\n  const arr = []\n  for(const [val, count] of Object.entries(bankCounts)){\n    for(let i=0;i<count;i++) arr.push({ value:Number(val), key:`${val}-${i}` })\n  }\n  return arr\n})\n\nfunction onManualInput(cardId, value){ manualDrafts[cardId] = value }\nfunction commitManual(cardId){\n  const raw = (manualDrafts[cardId] ?? '').trim()\n  if(raw === ''){ clearCard(cardId); return }\n  const num = Number(raw)\n  if(!Number.isFinite(num)) return\n  setAnswer(cardId, num, 'manual')\n}\n\nconst digitsMap = ['','','','','','','','','','']\nfunction formatDigit(value){\n  const str = String(value)\n  if(props.lang !== 'ar') return str\n  return str.replace(/[0-9]/g, d => digitsMap[Number(d)])\n}\nfunction formatNumber(value, options={}){\n  return new Intl.NumberFormat(locale.value, options).format(value)\n}\n\nonMounted(buildPuzzle)\nwatch(() => props.lang, () => { if(toast.value && solved.value) return; toast.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c2 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"rule\">{{ copy[L].rule }}</p>\n    </header>\n\n    <section class=\"board\">\n      <div class=\"cards\">\n        <div\n          v-for=\"card in cards\"\n          :key=\"card.id\"\n          class=\"card\"\n          :class=\"'color-' + card.color\"\n        >\n          <div class=\"drop\" @dragover=\"allowDrop\" @drop=\"onDrop($event, card.id)\">\n            <span v-if=\"answer[card.id] != null\" class=\"num\">{{ formatDigit(answer[card.id]) }}</span>\n            <span v-else class=\"placeholder\"></span>\n          </div>\n          <input\n            class=\"manual-entry\"\n            type=\"number\"\n            inputmode=\"numeric\"\n            :value=\"manualDrafts[card.id] ?? ''\"\n            @input=\"onManualInput(card.id, $event.target.value)\"\n            @change=\"commitManual(card.id)\"\n            @blur=\"commitManual(card.id)\"\n            :placeholder=\"copy[L].manualPlaceholder\"\n          />\n          <button class=\"clear\" @click=\"clearCard(card.id)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n        </div>\n      </div>\n\n      <aside class=\"facts\">\n        <h3>{{ props.lang==='ar' ? ' ' : 'Given facts' }}</h3>\n        <ul>\n          <li><strong>{{ copy[L].hints.sum }}:</strong> {{ formatNumber(hints.sum) }}</li>\n          <li><strong>{{ copy[L].hints.mean }}:</strong> {{ formatNumber(hints.mean, { maximumFractionDigits:2 }) }}</li>\n          <li><strong>{{ copy[L].hints.median }}:</strong> {{ formatNumber(hints.median) }}</li>\n          <li><strong>{{ copy[L].hints.range }}:</strong> {{ formatNumber(hints.range) }}</li>\n        </ul>\n      </aside>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"item in bankList\"\n          :key=\"item.key\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, item.value)\"\n        >\n          {{ formatDigit(item.value) }}\n        </button>\n      </div>\n    </section>\n\n    <section class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"buildPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c2{ --fg:#172554; --bg:#f6f7ff; --panel:#ffffff; --bd:#cbd5f5; --accent:#d64c42;\n  color:var(--fg); background:var(--bg); padding:24px; border-radius:18px; box-shadow:0 12px 32px rgba(23,37,84,.08) }\n[data-theme=\"dark\"] .lvl3c2{ --fg:#e0e7ff; --bg:#0b1220; --panel:#111a2b; --bd:#1e293b; }\n\n.head{ margin-bottom:18px }\n.title{ margin:0 0 8px; font-size:1.5rem; font-weight:700 }\n.rule{ margin:0; opacity:.75; line-height:1.5 }\n\n.board{ display:flex; flex-wrap:wrap; gap:24px; margin-bottom:24px }\n.cards{ display:flex; flex-wrap:wrap; gap:16px; flex:2 }\n.card{ width:170px; min-height:170px; border-radius:18px; padding:16px; box-shadow:0 10px 24px rgba(0,0,0,.08);\n  display:flex; flex-direction:column; align-items:stretch; gap:12px; border:2px solid transparent; background:var(--panel) }\n.card .drop{ width:100%; height:80px; border:2px dashed rgba(15,23,42,.25); border-radius:12px;\n  display:flex; align-items:center; justify-content:center; font-size:1.6rem; font-weight:700; color:var(--fg);\n  background:rgba(255,255,255,.55) }\n[data-theme=\"dark\"] .card .drop{ background:rgba(15,23,42,.45); border-color:rgba(226,232,240,.25) }\n.card .drop:hover{ border-color:rgba(214,76,66,.45); box-shadow:0 0 0 4px rgba(214,76,66,.12) }\n.placeholder{ opacity:.45 }\n.manual-entry{ width:100%; padding:.45rem .6rem; border-radius:.6rem; border:1px solid rgba(148,163,184,.35); font-size:.95rem; background:rgba(255,255,255,.92); color:inherit; direction:ltr }\n.manual-entry:focus{ outline:none; border-color:rgba(15,138,62,.45); box-shadow:0 0 0 3px rgba(15,138,62,.16) }\n[data-theme=\"dark\"] .manual-entry{ background:rgba(15,23,42,.8); border-color:rgba(148,163,184,.4); color:var(--fg) }\n.clear{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px;\n  border:1px solid rgba(15,23,42,.15); background:rgba(255,255,255,.8); cursor:pointer; font-size:.8rem }\n[data-theme=\"dark\"] .clear{ background:rgba(30,41,59,.6); border-color:rgba(148,163,184,.35) }\n.ic{ width:16px; height:16px }\n\n.facts{ flex:1; min-width:220px; background:var(--panel); border-radius:16px; padding:18px; border:1px solid var(--bd);\n  box-shadow:0 8px 20px rgba(0,0,0,.05) }\n.facts h3{ margin:0 0 12px; font-size:1.05rem }\n.facts ul{ list-style:none; padding:0; margin:0; display:grid; gap:8px }\n.facts li{ display:flex; justify-content:space-between; gap:12px; font-variant-numeric:tabular-nums }\n\n.bank{ background:var(--panel); border-radius:16px; padding:18px; border:1px solid var(--bd); margin-bottom:20px }\n.bank-title{ font-weight:600; margin-bottom:12px }\n.bank-items{ display:flex; gap:10px; flex-wrap:wrap }\n.chip{ padding:8px 14px; border-radius:999px; border:1px solid var(--bd); background:#fff; cursor:grab; font-weight:600;\n  box-shadow:0 6px 16px rgba(15,23,42,.12) }\n[data-theme=\"dark\"] .chip{ background:rgba(15,23,42,.6); border-color:rgba(148,163,184,.3) }\n.chip:active{ cursor:grabbing }\n\n.actions{ display:flex; flex-wrap:wrap; gap:12px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd);\n  background:var(--panel); cursor:pointer; transition:.15s; font-weight:600 }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(0,0,0,.08) }\n\n.toast{ margin-top:18px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#991b1b;\n  font-weight:600; text-align:center }\n.toast.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n\n/* card colours */\n.color-green{ border-color:#4ade80; background:linear-gradient(160deg,#bbf7d0,#f0fff4) }\n.color-gold{ border-color:#facc15; background:linear-gradient(160deg,#fef08a,#fffbe6) }\n.color-teal{ border-color:#2dd4bf; background:linear-gradient(160deg,#99f6e4,#ecfeff) }\n.color-magenta{ border-color:#f472b6; background:linear-gradient(160deg,#fbcfe8,#fff0f8) }\n.color-sky{ border-color:#38bdf8; background:linear-gradient(160deg,#bae6fd,#eff6ff) }\n.color-orange{ border-color:#fb923c; background:linear-gradient(160deg,#ffd7aa,#fff7ed) }\n.color-crimson{ border-color:#f87171; background:linear-gradient(160deg,#fecaca,#fff1f1) }\n\n@media (max-width: 900px){\n  .board{ flex-direction:column }\n  .cards{ justify-content:center }\n  .card{ width:140px }\n}\n</style> -->\n\n<script setup>\n/* =========================================================\n   Level 3  Challenge 2: Missing numbers on the cards\n   Dark-mode pass: stronger contrast, clearer borders/tints,\n   and consistent surfaces across light/dark.\n   ---------------------------------------------------------\n   Notes:\n   - Theme tokens drive all colors (see CSS variables below).\n   - Drop areas get a visible dashed border + subtle tint in dark.\n   - Coloured cards have dark-friendly gradients (no washed-out tones).\n   - Inputs, chips, and buttons use panel tokens for clear contrast.\n========================================================= */\n\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\n/* ---------- copy ---------- */\nconst copy = {\n  ar:{\n    title:'    2:    ',\n    rule:'    .    (   )             .',\n    bank:' ', newQ:' ', reset:'', check:'',\n    correct:'!  .', wrong:'    .', clear:' ',\n    hints:{ sum:'', mean:' ', median:'', range:'' },\n    manualPlaceholder:' '\n  },\n  en:{\n    title:'Level 3  Challenge 2: Missing numbers on the cards',\n    rule:'Each coloured card is missing its number. Use the given information (sum, mean, median, range) to deduce the correct value for every card, then drag a number from the bank or type it manually.',\n    bank:'Number bank', newQ:'New puzzle', reset:'Clear', check:'Check',\n    correct:'Great! All numbers are correct.', wrong:'Something is off  recheck the values.', clear:'Clear card',\n    hints:{ sum:'Sum', mean:'Mean', median:'Median', range:'Range' },\n    manualPlaceholder:'Type value'\n  }\n}\nconst L = computed(() => (copy[props.lang] ? props.lang : 'ar'))\nconst locale = computed(() => (props.lang === 'ar' ? 'ar-EG' : 'en-US'))\n\n/* ---------- sounds (optional) ---------- */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK&&(sOK.preload='auto'); sClap&&(sClap.preload='auto'); sWrong&&(sWrong.preload='auto')\n\n/* ---------- data templates ---------- */\nconst colourPalette = ['green','gold','teal','magenta','sky','orange','crimson']\nconst templates = [\n  { numbers:[4,8,12,16,20] },\n  { numbers:[5,9,11,13,22] },\n  { numbers:[7,10,12,18,23] },\n  { numbers:[6,8,15,19,22] },\n  { numbers:[9,11,14,20,26] }\n]\n\nconst EXTRA_CHOICES = 4\n\n/* Basic stats for the Given facts box */\nfunction computeHints(numbers){\n  const sorted = numbers.slice().sort((a,b)=>a-b)\n  const sum = sorted.reduce((acc,n)=>acc+n,0)\n  const mean = sum / sorted.length\n  const median = sorted[Math.floor(sorted.length/2)]\n  const range = sorted[sorted.length-1] - sorted[0]\n  return { sum, mean, median, range }\n}\n\n/* ---------- state ---------- */\nconst cards = ref([])                 // [{id,color,value}]\nconst solution = reactive({})         // id -> value\nconst blanks = ref(new Set())         // ids\nconst totalCounts = reactive({})      // correct value -> total copies (supports duplicates)\nconst extraCounts = reactive({})      // distractor value -> count\nconst bankCounts  = reactive({})      // value -> remaining copies (correct + extras)\nconst answer = reactive({})           // id -> chosen value\nconst answerSource = reactive({})     // id -> 'bank' | 'manual'\nconst manualDrafts = reactive({})     // id -> input string\nconst hints = ref({ sum:0, mean:0, median:0, range:0 })\nconst toast = ref(null)\nconst solved = ref(false)\n\n/* Convenience: wipe a reactive map in-place */\nfunction resetReactiveMap(obj){ for (const key of Object.keys(obj)) delete obj[key] }\n\n/* Build one puzzle instance */\nfunction buildPuzzle(){\n  const tpl = templates[Math.floor(Math.random()*templates.length)]\n  const nums = tpl.numbers.slice()\n\n  // Shuffle both colours and the card arrangement\n  const colours = colourPalette.slice(0, nums.length).sort(() => Math.random() - 0.5)\n  const arrangement = nums.slice().sort(() => Math.random() - 0.5)\n\n  // Reset everything\n  cards.value = []\n  blanks.value = new Set()\n  resetReactiveMap(solution); resetReactiveMap(answer); resetReactiveMap(answerSource)\n  resetReactiveMap(manualDrafts); resetReactiveMap(totalCounts); resetReactiveMap(extraCounts); resetReactiveMap(bankCounts)\n\n  // Make coloured cards and tally correct counts\n  arrangement.forEach((value, idx) => {\n    const id = `card-${idx}`\n    cards.value.push({ id, value, color: colours[idx % colours.length] })\n    solution[id] = value\n    blanks.value.add(id)\n    totalCounts[value] = (totalCounts[value] || 0) + 1\n  })\n  // Start bank with required counts\n  for (const [val, ct] of Object.entries(totalCounts)) bankCounts[val] = ct\n\n  // Add a few plausible distractors (do not overlap with required values)\n  const minVal = Math.min(...nums), maxVal = Math.max(...nums)\n  const lower = Math.max(1, minVal - 12), upper = maxVal + 12\n  const extras = new Set()\n  while(extras.size < EXTRA_CHOICES){\n    const candidate = Math.floor(Math.random() * (upper - lower + 1)) + lower\n    if(totalCounts[candidate]) continue\n    extras.add(candidate)\n  }\n  extras.forEach(val => {\n    extraCounts[val] = (extraCounts[val] || 0) + 1\n    bankCounts[val] = (bankCounts[val] || 0) + 1\n  })\n\n  // Facts box\n  hints.value = computeHints(nums)\n  toast.value = null\n  solved.value = false\n}\n\n/* DnD helpers (with quantity book-keeping) */\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\n\nfunction setAnswer(cardId, value, source){\n  if(Number.isNaN(value)) return false\n\n  // Return to bank if previous came from bank\n  if(answer[cardId] != null && answerSource[cardId] === 'bank'){\n    const prev = answer[cardId]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n\n  // Consume from bank when dragging\n  if(source === 'bank'){\n    if((bankCounts[value] || 0) <= 0) return false\n    bankCounts[value] = (bankCounts[value] || 0) - 1\n  }\n\n  answer[cardId] = value\n  answerSource[cardId] = source\n  manualDrafts[cardId] = String(value)\n  toast.value = null\n  solved.value = false\n  return true\n}\n\nfunction onDrop(ev, cardId){\n  ev.preventDefault()\n  const val = Number(ev.dataTransfer.getData('text/plain'))\n  if(Number.isNaN(val)) return\n  setAnswer(cardId, val, 'bank')\n}\n\nfunction clearCard(cardId){\n  if(answer[cardId] != null && answerSource[cardId] === 'bank'){\n    const prev = answer[cardId]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n  delete answer[cardId]; delete answerSource[cardId]\n  manualDrafts[cardId] = ''\n  toast.value = null; solved.value = false\n}\n\n/* Validation  compare multiset of chosen values to required multiset */\nfunction isFilled(){ for(const id of blanks.value){ if(answer[id] == null) return false } return true }\nfunction isCorrect(){\n  const counts = {}\n  for (const id of blanks.value){\n    const v = answer[id]\n    if (v == null) return false\n    counts[v] = (counts[v] || 0) + 1\n  }\n  for (const [v, ct] of Object.entries(totalCounts)){\n    if ((counts[v] || 0) !== ct) return false\n  }\n  return true\n}\n\n/* Evaluate */\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){\n    toast.value = L.value==='ar' ? '   .' : 'Fill every card first.'\n    sWrong && sWrong.play(); return\n  }\n  if(isCorrect()){\n    solved.value = true\n    toast.value = copy[L.value].correct\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    toast.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\n\n/* Reset to initial bank state without changing puzzle */\nfunction resetAll(){\n  resetReactiveMap(answer); resetReactiveMap(answerSource); resetReactiveMap(manualDrafts); resetReactiveMap(bankCounts)\n  for (const [val, ct] of Object.entries(totalCounts)) bankCounts[val] = ct\n  for (const [val, ct] of Object.entries(extraCounts)) bankCounts[val] = (bankCounts[val] || 0) + ct\n  toast.value = null; solved.value = false\n}\n\n/* Bank list as a flat array for v-for */\nconst bankList = computed(() => {\n  const arr = []\n  for(const [val, count] of Object.entries(bankCounts)){\n    for(let i=0;i<count;i++) arr.push({ value:Number(val), key:`${val}-${i}` })\n  }\n  return arr\n})\n\n/* Manual typing path (respects bank quantities only when dragged) */\nfunction onManualInput(cardId, value){ manualDrafts[cardId] = value }\nfunction commitManual(cardId){\n  const raw = (manualDrafts[cardId] ?? '').trim()\n  if(raw === ''){ clearCard(cardId); return }\n  const num = Number(raw)\n  if(!Number.isFinite(num)) return\n  setAnswer(cardId, num, 'manual')\n}\n\n/* Localised number formatting helpers */\nconst digitsMap = ['','','','','','','','','','']\nfunction formatDigit(value){\n  const str = String(value)\n  if(props.lang !== 'ar') return str\n  return str.replace(/[0-9]/g, d => digitsMap[Number(d)])\n}\nfunction formatNumber(value, options={}){ return new Intl.NumberFormat(locale.value, options).format(value) }\n\nonMounted(buildPuzzle)\nwatch(() => props.lang, () => { if(toast.value && solved.value) return; toast.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c2 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"rule\">{{ copy[L].rule }}</p>\n    </header>\n\n    <section class=\"board\">\n      <div class=\"cards\">\n        <div\n          v-for=\"card in cards\"\n          :key=\"card.id\"\n          class=\"card\"\n          :class=\"'color-' + card.color\"\n        >\n          <div class=\"drop\" @dragover=\"allowDrop\" @drop=\"onDrop($event, card.id)\">\n            <span v-if=\"answer[card.id] != null\" class=\"num\">{{ formatDigit(answer[card.id]) }}</span>\n            <span v-else class=\"placeholder\"></span>\n          </div>\n\n          <input\n            class=\"manual-entry\"\n            type=\"number\"\n            inputmode=\"numeric\"\n            :value=\"manualDrafts[card.id] ?? ''\"\n            @input=\"onManualInput(card.id, $event.target.value)\"\n            @change=\"commitManual(card.id)\"\n            @blur=\"commitManual(card.id)\"\n            :placeholder=\"copy[L].manualPlaceholder\"\n          />\n\n          <button class=\"clear\" @click=\"clearCard(card.id)\">\n            <Eraser class=\"ic\" /> {{ copy[L].clear }}\n          </button>\n        </div>\n      </div>\n\n      <aside class=\"facts\">\n        <h3>{{ props.lang==='ar' ? ' ' : 'Given facts' }}</h3>\n        <ul>\n          <li><strong>{{ copy[L].hints.sum }}:</strong> {{ formatNumber(hints.sum) }}</li>\n          <li><strong>{{ copy[L].hints.mean }}:</strong> {{ formatNumber(hints.mean, { maximumFractionDigits:2 }) }}</li>\n          <li><strong>{{ copy[L].hints.median }}:</strong> {{ formatNumber(hints.median) }}</li>\n          <li><strong>{{ copy[L].hints.range }}:</strong> {{ formatNumber(hints.range) }}</li>\n        </ul>\n      </aside>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"item in bankList\"\n          :key=\"item.key\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, item.value)\"\n        >\n          {{ formatDigit(item.value) }}\n        </button>\n      </div>\n    </section>\n\n    <section class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn primary\" @click=\"checkNow\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"buildPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n/* =========================\n   Theme tokens\n   (Everything reads from these; dark-mode overrides below)\n========================= */\n.lvl3c2{\n  --fg:#172554;\n  --muted:#475569;\n  --bg:#f6f7ff;\n\n  --panel:#ffffff;\n  --panel-bd:#cbd5f5;\n  --shadow:0 12px 32px rgba(23,37,84,.08);\n\n  --drop-bg:rgba(15,23,42,.04);\n  --drop-bd:rgba(15,23,42,.28);\n\n  --chip-bg:#ffffff;\n  --chip-bd:#cbd5f5;\n\n  --btn-bg:#ffffff;\n  --btn-bd:#cbd5f5;\n  --btn-fg:#172554;\n  --btn-primary-bg:#0ea5e9;\n  --btn-primary-fg:#ffffff;\n\n  --toast-err-bg:#fee2e2; --toast-err-fg:#991b1b; --toast-err-bd:#fecaca;\n  --toast-ok-bg:#dcfce7;  --toast-ok-fg:#166534;  --toast-ok-bd:#bbf7d0;\n\n  color:var(--fg);\n  background:var(--bg);\n  padding:24px; border-radius:18px; box-shadow:var(--shadow);\n}\n\n/* Dark mode: higher contrast panels, tints, and borders */\n[data-theme=\"dark\"] .lvl3c2{\n  --fg:#e5e7eb;\n  --muted:#9ca3af;\n  --bg:#0b1220;\n\n  --panel:#0f172a;\n  --panel-bd:#334155;\n  --shadow:0 14px 36px rgba(0,0,0,.55);\n\n  --drop-bg:rgba(99,102,241,.18);   /* indigo tint clearly visible */\n  --drop-bd:#64748b;\n\n  --chip-bg:#111827;\n  --chip-bd:#475569;\n\n  --btn-bg:#111827;\n  --btn-bd:#475569;\n  --btn-fg:#e5e7eb;\n  --btn-primary-bg:#38bdf8;\n  --btn-primary-fg:#0b1220;\n\n  --toast-err-bg:rgba(248,113,113,.16); --toast-err-fg:#fecaca; --toast-err-bd:rgba(248,113,113,.45);\n  --toast-ok-bg:rgba(34,197,94,.22);    --toast-ok-fg:#bbf7d0;  --toast-ok-bd:rgba(34,197,94,.5);\n}\n\n/* =========================\n   Header\n========================= */\n.head{ margin-bottom:18px }\n.title{ margin:0 0 8px; font-size:1.5rem; font-weight:800 }\n.rule{ margin:0; color:var(--muted); line-height:1.5 }\n\n/* =========================\n   Layout\n========================= */\n.board{ display:flex; flex-wrap:wrap; gap:24px; margin-bottom:24px }\n.cards{ display:flex; flex-wrap:wrap; gap:16px; flex:2 }\n.facts{\n  flex:1; min-width:220px; background:var(--panel); border-radius:16px; padding:18px; border:1px solid var(--panel-bd);\n  box-shadow:0 8px 20px rgba(0,0,0,.08)\n}\n.facts h3{ margin:0 0 12px; font-size:1.05rem }\n.facts ul{ list-style:none; padding:0; margin:0; display:grid; gap:8px }\n.facts li{ display:flex; justify-content:space-between; gap:12px; font-variant-numeric:tabular-nums; color:var(--fg) }\n\n/* =========================\n   Cards & drop areas\n========================= */\n.card{\n  width:170px; min-height:170px;\n  border-radius:18px; padding:16px;\n  display:flex; flex-direction:column; gap:12px;\n  background:var(--panel); border:2px solid transparent;\n  box-shadow:0 10px 24px rgba(0,0,0,.10)\n}\n.card .drop{\n  width:100%; height:80px; border:2px dashed var(--drop-bd);\n  border-radius:12px; display:flex; align-items:center; justify-content:center;\n  background:var(--drop-bg); color:var(--fg);\n  transition: box-shadow .15s, border-color .15s\n}\n.card .drop:hover{ border-color:rgba(56,189,248,.55); box-shadow:0 0 0 4px rgba(56,189,248,.20) inset }\n.placeholder{ opacity:.55 }\n\n/* Keep digits LTR even in Arabic UI */\n.num, .manual-entry{ direction:ltr; unicode-bidi:isolate }\n\n/* Inputs */\n.manual-entry{\n  width:100%; padding:.45rem .6rem; border-radius:.6rem;\n  border:1px solid var(--panel-bd); font-size:.95rem;\n  background:var(--panel); color:var(--fg)\n}\n.manual-entry:focus{ outline:none; border-color:#22c55e; box-shadow:0 0 0 3px rgba(34,197,94,.18) }\n\n/* Clear button on card */\n.clear{\n  display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px;\n  border:1px solid var(--panel-bd); background:var(--panel); color:var(--fg); cursor:pointer; font-size:.8rem\n}\n.ic{ width:16px; height:16px }\n\n/* =========================\n   Bank\n========================= */\n.bank{ background:var(--panel); border-radius:16px; padding:18px; border:1px solid var(--panel-bd); margin-bottom:20px }\n.bank-title{ font-weight:700; margin-bottom:12px; color:var(--muted) }\n.bank-items{ display:flex; gap:10px; flex-wrap:wrap }\n.chip{\n  padding:8px 14px; border-radius:999px; border:1px solid var(--chip-bd); background:var(--chip-bg); color:var(--fg);\n  cursor:grab; font-weight:700; box-shadow:0 6px 16px rgba(0,0,0,.12); min-width:44px; text-align:center\n}\n.chip:active{ cursor:grabbing }\n\n/* =========================\n   Actions / toasts\n========================= */\n.actions{ display:flex; flex-wrap:wrap; gap:12px }\n.btn{\n  display:inline-flex; align-items:center; gap:8px;\n  padding:10px 18px; border-radius:12px;\n  border:1px solid var(--btn-bd); background:var(--btn-bg); color:var(--btn-fg);\n  cursor:pointer; transition:.15s; font-weight:700\n}\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(0,0,0,.14) }\n.btn.primary{ background:var(--btn-primary-bg); color:var(--btn-primary-fg); border-color:transparent }\n\n.toast{\n  margin-top:18px; padding:12px 18px; border-radius:12px; text-align:center; font-weight:800;\n  border:1px solid var(--toast-err-bd); background:var(--toast-err-bg); color:var(--toast-err-fg)\n}\n.toast.ok{ border-color:var(--toast-ok-bd); background:var(--toast-ok-bg); color:var(--toast-ok-fg) }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n\n/* =========================\n   Card colour frames (light) + dark variants\n========================= */\n.color-green{ border-color:#4ade80; background:linear-gradient(160deg,rgba(34,197,94,.18), var(--panel)) }\n.color-gold{ border-color:#facc15; background:linear-gradient(160deg,rgba(250,204,21,.22), var(--panel)) }\n.color-teal{ border-color:#2dd4bf; background:linear-gradient(160deg,rgba(45,212,191,.18), var(--panel)) }\n.color-magenta{ border-color:#f472b6; background:linear-gradient(160deg,rgba(244,114,182,.18), var(--panel)) }\n.color-sky{ border-color:#38bdf8; background:linear-gradient(160deg,rgba(56,189,248,.20), var(--panel)) }\n.color-orange{ border-color:#fb923c; background:linear-gradient(160deg,rgba(251,146,60,.20), var(--panel)) }\n.color-crimson{ border-color:#f87171; background:linear-gradient(160deg,rgba(248,113,113,.20), var(--panel)) }\n\n[data-theme=\"dark\"] .lvl3c2 .color-green{ border-color:#22c55e; background:linear-gradient(160deg,rgba(22,163,74,.28), var(--panel)) }\n[data-theme=\"dark\"] .lvl3c2 .color-gold{ border-color:#eab308; background:linear-gradient(160deg,rgba(202,138,4,.28), var(--panel)) }\n[data-theme=\"dark\"] .lvl3c2 .color-teal{ border-color:#14b8a6; background:linear-gradient(160deg,rgba(13,148,136,.30), var(--panel)) }\n[data-theme=\"dark\"] .lvl3c2 .color-magenta{ border-color:#e879f9; background:linear-gradient(160deg,rgba(217,70,239,.28), var(--panel)) }\n[data-theme=\"dark\"] .lvl3c2 .color-sky{ border-color:#38bdf8; background:linear-gradient(160deg,rgba(56,189,248,.28), var(--panel)) }\n[data-theme=\"dark\"] .lvl3c2 .color-orange{ border-color:#f59e0b; background:linear-gradient(160deg,rgba(234,88,12,.30), var(--panel)) }\n[data-theme=\"dark\"] .lvl3c2 .color-crimson{ border-color:#f87171; background:linear-gradient(160deg,rgba(239,68,68,.30), var(--panel)) }\n\n@media (max-width: 900px){\n  .board{ flex-direction:column }\n  .cards{ justify-content:center }\n  .card{ width:150px }\n}\n</style>\n","<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { Check, RotateCcw, RefreshCw } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst copy = {\n  ar:{\n    title:'    3:   ',\n    rule:'      (   )     .',\n    targetLabel:' ', selected:' ',\n    check:'', reset:' ', newQ:' ',\n    needSelection:'  .',\n    wrongLine:'        .',\n    wrongSum:'    .',\n    correct:'!  .',\n  },\n  en:{\n    title:'Level 3  Challenge 3: Decimal Sum Lines',\n    rule:'Pick numbers lying on one straight line (horizontal, vertical, or diagonal) so their sum equals the target.',\n    targetLabel:'Target sum', selected:'Current sum',\n    check:'Check', reset:'Reset selection', newQ:'New puzzle',\n    needSelection:'Select cells first.',\n    wrongLine:'Selections must be contiguous on a straight line.',\n    wrongSum:'The sum does not match the target.',\n    correct:'Great! You found a valid line.',\n  }\n}\nconst L = computed(()=> (copy[props.lang]?props.lang:'ar'))\n\n/* sounds */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst puzzles = [\n  {\n    id: 'p1',\n    target: 10.0,\n    grid: [\n      [1.2, 0.8, 2.5, 1.3, 0.9],\n      [2.1, 3.4, 2.0, 0.6, 1.5],\n      [1.8, 2.2, 1.5, 3.0, 1.1],\n      [0.5, 1.6, 1.7, 2.0, 3.5],\n      [1.4, 1.3, 2.3, 1.8, 2.7],\n    ],\n    solution: [\n      { r:0, c:2 }, { r:1, c:2 }, { r:2, c:2 }, { r:3, c:2 }, { r:4, c:2 }\n    ],\n  },\n  {\n    id: 'p2',\n    target: 10.0,\n    grid: [\n      [0.8, 1.7, 2.1, 0.9, 1.4],\n      [2.6, 1.5, 1.9, 1.1, 2.9],\n      [1.3, 2.4, 1.2, 2.2, 1.6],\n      [0.7, 1.8, 2.5, 1.7, 2.3],\n      [1.9, 0.6, 1.8, 2.6, 0.9],\n    ],\n    solution: [\n      { r:1, c:0 }, { r:1, c:1 }, { r:1, c:2 }, { r:1, c:3 }, { r:1, c:4 }\n    ],\n  },\n  {\n    id: 'p3',\n    target: 10.0,\n    grid: [\n      [2.5, 1.1, 0.8, 1.4, 1.2],\n      [0.9, 2.0, 1.3, 1.7, 1.0],\n      [1.6, 1.2, 1.8, 1.1, 1.3],\n      [1.4, 1.9, 1.5, 1.5, 1.8],\n      [1.3, 1.4, 0.9, 1.6, 2.2],\n    ],\n    solution: [\n      { r:0, c:0 }, { r:1, c:1 }, { r:2, c:2 }, { r:3, c:3 }, { r:4, c:4 }\n    ],\n  },\n  {\n    id: 'p4',\n    target: 10.0,\n    grid: [\n      [1.1, 0.9, 1.7, 1.3, 2.1],\n      [2.0, 1.4, 2.0, 1.1, 1.6],\n      [1.5, 2.2, 1.8, 1.4, 1.3],\n      [0.8, 1.9, 2.3, 1.2, 1.1],\n      [1.6, 1.5, 2.2, 1.7, 0.9],\n    ],\n    solution: [\n      { r:0, c:2 }, { r:1, c:2 }, { r:2, c:2 }, { r:3, c:2 }, { r:4, c:2 }\n    ],\n  },\n  {\n    id: 'p5',\n    target: 10.2,\n    grid: [\n      [1.0, 1.3, 0.9, 1.5, 1.9],\n      [1.6, 1.2, 1.4, 1.8, 1.0],\n      [1.7, 1.1, 2.1, 1.4, 1.2],\n      [2.4, 2.0, 1.5, 1.3, 0.8],\n      [2.4, 1.5, 1.6, 1.1, 0.7],\n    ],\n    solution: [\n      { r:0, c:4 }, { r:1, c:3 }, { r:2, c:2 }, { r:3, c:1 }, { r:4, c:0 }\n    ],\n  },\n  {\n    id: 'p6',\n    target: 9.0,\n    grid: [\n      [1.8, 2.2, 1.6, 1.5, 1.9],\n      [1.3, 0.9, 2.1, 2.5, 1.1],\n      [1.4, 1.7, 1.2, 1.8, 1.6],\n      [1.0, 2.3, 1.5, 1.4, 2.2],\n      [1.6, 1.1, 2.0, 1.7, 0.8],\n    ],\n    solution: [\n      { r:0, c:0 }, { r:0, c:1 }, { r:0, c:2 }, { r:0, c:3 }, { r:0, c:4 }\n    ],\n  },\n  {\n    id: 'p7',\n    target: 9.3,\n    grid: [\n      [1.2, 1.5, 2.1, 1.0, 1.4],\n      [0.9, 2.0, 1.7, 1.9, 1.2],\n      [1.3, 1.8, 2.2, 1.6, 1.1],\n      [1.5, 1.9, 1.4, 1.7, 2.3],\n      [1.0, 2.1, 1.5, 1.2, 1.8],\n    ],\n    solution: [\n      { r:0, c:1 }, { r:1, c:1 }, { r:2, c:1 }, { r:3, c:1 }, { r:4, c:1 }\n    ],\n  },\n  {\n    id: 'p8',\n    target: 9.0,\n    grid: [\n      [1.4, 1.2, 2.0, 1.6, 0.9],\n      [1.1, 1.8, 1.4, 2.3, 1.5],\n      [2.2, 1.3, 1.7, 1.2, 1.1],\n      [1.5, 2.4, 1.6, 1.5, 1.9],\n      [2.0, 1.7, 1.5, 1.4, 2.6],\n    ],\n    solution: [\n      { r:0, c:0 }, { r:1, c:1 }, { r:2, c:2 }, { r:3, c:3 }, { r:4, c:4 }\n    ],\n  },\n  {\n    id: 'p9',\n    target: 10.0,\n    grid: [\n      [1.6, 1.0, 1.2, 1.9, 2.1],\n      [1.3, 1.5, 2.2, 1.8, 1.1],\n      [2.0, 1.8, 1.4, 1.5, 1.7],\n      [1.2, 2.3, 1.6, 1.7, 1.0],\n      [2.4, 1.9, 1.5, 1.2, 0.8],\n    ],\n    solution: [\n      { r:0, c:4 }, { r:1, c:3 }, { r:2, c:2 }, { r:3, c:1 }, { r:4, c:0 }\n    ],\n  },\n  {\n    id: 'p10',\n    target: 9.0,\n    grid: [\n      [1.0, 1.7, 1.3, 2.1, 1.6],\n      [1.5, 1.1, 2.4, 1.6, 1.8],\n      [1.9, 2.0, 1.5, 1.2, 1.3],\n      [1.4, 1.9, 1.7, 2.0, 1.1],\n      [2.1, 2.0, 1.8, 1.5, 1.6],\n    ],\n    solution: [\n      { r:4, c:0 }, { r:4, c:1 }, { r:4, c:2 }, { r:4, c:3 }, { r:4, c:4 }\n    ],\n  },\n]\n\nconst currentPuzzle = ref(puzzles[0])\nconst lastPuzzleId = ref(null)\nconst selected = ref(new Set())\nconst solved = ref(false)\nconst feedback = ref(null)\n\nfunction coordKey(r,c){ return `${r},${c}` }\n\nfunction pickNextPuzzle(){\n  if(puzzles.length === 1){\n    lastPuzzleId.value = puzzles[0].id\n    return puzzles[0]\n  }\n  let candidate\n  do{\n    candidate = puzzles[Math.floor(Math.random() * puzzles.length)]\n  }while(candidate.id === lastPuzzleId.value)\n  lastPuzzleId.value = candidate.id\n  return candidate\n}\n\nfunction resetSelection(){\n  selected.value = new Set()\n  solved.value = false\n  feedback.value = null\n}\n\nfunction pickPuzzle(){\n  const next = pickNextPuzzle()\n  currentPuzzle.value = next\n  resetSelection()\n}\n\nfunction toggleCell(r,c){\n  const key = coordKey(r,c)\n  const set = new Set(selected.value)\n  if(set.has(key)) set.delete(key)\n  else set.add(key)\n  selected.value = set\n  solved.value = false\n  feedback.value = null\n}\n\nconst selectedList = computed(()=> Array.from(selected.value).map(item => {\n  const [r,c] = item.split(',').map(Number)\n  return { r, c }\n}))\n\nconst selectedSum = computed(()=> selectedList.value.reduce((total, cell)=> total + currentPuzzle.value.grid[cell.r][cell.c], 0))\n\nfunction isLine(cells){\n  if(cells.length < 2) return true\n  const rows = cells.map(c=>c.r)\n  const cols = cells.map(c=>c.c)\n  const sameRow = rows.every(r=>r===rows[0])\n  const sameCol = cols.every(c=>c===cols[0])\n  const diag1 = rows.every((r,idx)=> r - cols[idx] === rows[0] - cols[0])\n  const diag2 = rows.every((r,idx)=> r + cols[idx] === rows[0] + cols[0])\n\n  if(!sameRow && !sameCol && !diag1 && !diag2) return false\n\n  const sorted = [...cells]\n  if(sameRow){\n    sorted.sort((a,b)=> a.c - b.c)\n    for(let i=1;i<sorted.length;i++) if(sorted[i].c - sorted[i-1].c !== 1) return false\n    return true\n  }\n  if(sameCol){\n    sorted.sort((a,b)=> a.r - b.r)\n    for(let i=1;i<sorted.length;i++) if(sorted[i].r - sorted[i-1].r !== 1) return false\n    return true\n  }\n  if(diag1){\n    sorted.sort((a,b)=> a.r - b.r)\n    for(let i=1;i<sorted.length;i++){\n      if(sorted[i].r - sorted[i-1].r !== 1) return false\n      if(sorted[i].c - sorted[i-1].c !== 1) return false\n    }\n    return true\n  }\n  // diag2\n  sorted.sort((a,b)=> a.r - b.r)\n  for(let i=1;i<sorted.length;i++){\n    if(sorted[i].r - sorted[i-1].r !== 1) return false\n    if(sorted[i-1].c - sorted[i].c !== 1) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'})\n  }catch{}\n}\n\nasync function checkLine(){\n  if(!selected.value.size){\n    feedback.value = copy[L.value].needSelection\n    sWrong && sWrong.play()\n    return\n  }\n  const cells = selectedList.value\n  if(!isLine(cells)){\n    feedback.value = copy[L.value].wrongLine\n    sWrong && sWrong.play()\n    return\n  }\n  const sum = selectedSum.value\n  if(Math.abs(sum - currentPuzzle.value.target) > 1e-6){\n    feedback.value = copy[L.value].wrongSum\n    sWrong && sWrong.play()\n    return\n  }\n  solved.value = true\n  feedback.value = copy[L.value].correct\n  sOK && sOK.play(); sClap && sClap.play()\n  await addPoint()\n}\n\nfunction isSolutionCell(r,c){\n  return currentPuzzle.value.solution.some(cell => cell.r===r && cell.c===c)\n}\n\nonMounted(() => {\n  pickPuzzle()\n})\n</script>\n\n<template>\n  <div class=\"lvl3c3 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"rule\">{{ copy[L].rule }}</p>\n    </header>\n\n    <section class=\"status\">\n      <div class=\"chip target\">{{ copy[L].targetLabel }}: <strong>{{ currentPuzzle.target.toFixed(1) }}</strong></div>\n      <div class=\"chip sum\">{{ copy[L].selected }}: <strong>{{ selectedSum.toFixed(1) }}</strong></div>\n    </section>\n\n    <section class=\"grid\">\n      <div\n        v-for=\"(row,r) in currentPuzzle.grid\"\n        :key=\"r\"\n        class=\"row\"\n      >\n        <button\n          v-for=\"(value,c) in row\"\n          :key=\"c\"\n          class=\"cell\"\n          :class=\"{ selected: selected.has(coordKey(r,c)), success: solved && isSolutionCell(r,c) }\"\n          @click=\"toggleCell(r,c)\"\n        >\n          {{ value.toFixed(1) }}\n        </button>\n      </div>\n    </section>\n\n    <section class=\"actions\">\n      <button class=\"btn\" @click=\"checkLine\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetSelection\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"pickPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c3{ --fg:#0f172a; --bg:#f8fafc; --panel:#ffffff; --bd:#dbeafe; --accent:#dc2626;\n  padding:24px; border-radius:18px; background:var(--bg); color:var(--fg); box-shadow:0 12px 28px rgba(15,23,42,.08) }\n[data-theme=\"dark\"] .lvl3c3{ --fg:#e2e8f0; --bg:#0b1220; --panel:#111a2b; --bd:#1e293b; --accent:#fb7185 }\n\n.head{ margin-bottom:18px }\n.title{ margin:0 0 8px; font-size:1.5rem; font-weight:700 }\n.rule{ margin:0; opacity:.75 }\n\n.status{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:20px }\n.chip{ padding:8px 14px; border-radius:999px; background:var(--panel); border:1px solid var(--bd);\n  box-shadow:0 6px 16px rgba(15,23,42,.08); font-size:.95rem }\n.chip strong{ font-weight:700 }\n\n.grid{ display:flex; flex-direction:column; gap:6px; margin-bottom:20px }\n.row{ display:grid; grid-template-columns:repeat(auto-fit, minmax(70px,1fr)); gap:6px }\n.cell{ padding:16px 0; border-radius:12px; border:1px solid var(--bd); background:var(--panel);\n  font-size:1.2rem; font-weight:600; cursor:pointer; transition:.15s; font-variant-numeric:tabular-nums }\n.cell:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(15,23,42,.12) }\n.cell.selected{ background:rgba(59,130,246,.15); border-color:#60a5fa }\n.cell.success{ background:rgba(74,222,128,.18); border-color:#22c55e }\n\n.actions{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:18px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px;\n  border:1px solid var(--bd); background:var(--panel); cursor:pointer; transition:.15s; font-weight:600 }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(15,23,42,.12) }\n.ic{ width:18px; height:18px }\n\n.feedback{ padding:12px 18px; border-radius:12px; border:1px solid #fee2e2; background:#fff1f2; color:#b91c1c; font-weight:600 }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(239,68,68,.15); border-color:rgba(239,68,68,.4); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.2); border-color:rgba(34,197,94,.45); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\n/* ===== copy ===== */\nconst copy = {\n  ar:{\n    title:'    4:   ',\n    intro:[\n      '       .',\n      '     .            .'\n    ],\n    check:'', reset:' ', newQ:' ',\n    incomplete:'   .', wrong:'   .', correct:'!   .',\n    bank:' ', clear:''\n  },\n  en:{\n    title:'Level 3  Challenge 4: Replace the red dot',\n    intro:[\n      'These equations practice decimal operations.',\n      'Each red dot  hides a single digit. Drag the correct digit from the number bank to make every equation true.'\n    ],\n    check:'Check', reset:'Clear all', newQ:'New puzzle',\n    incomplete:'Fill every blank first.', wrong:'One or more equations are incorrect.', correct:'Great! All equations are valid.',\n    bank:'Number bank', clear:'Clear'\n  }\n}\nconst L = computed(()=> (copy[props.lang]?props.lang:'ar'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== number formatting for Arabic clarity ===== */\nconst digitsMap = ['','','','','','','','','','']\nconst LRI = '\\u2066', PDI = '\\u2069', NNBSP = '\\u202F' // isolate + thin-space\n\nfunction toArabicNumber(value, decimals){\n  let s = typeof value === 'number'\n    ? (decimals!=null ? value.toFixed(decimals) : String(value))\n    : String(value)\n  const out = s.replace(/[0-9]/g, d => digitsMap[+d]).replace(/\\./g, `${NNBSP}${NNBSP}`)\n  return LRI + out + PDI\n}\nfunction formatDigit(value){\n  const s = String(value)\n  return props.lang==='ar'\n    ? (LRI + s.replace(/[0-9]/g, d => digitsMap[+d]) + PDI)\n    : s\n}\n\n/* ===== equation builders (single-digit slots only) ===== */\n/* token types in template:\n   - string: printed as-is\n   - {num:true,text:string}: numeric literal already formatted\n   - {slot:'name'}: droppable slot\n*/\nfunction makeEqA({ multiplier, offset, aDigit, bDigit }){\n  const multAr = toArabicNumber(multiplier, 1)\n  const multEn = multiplier.toFixed(1)\n  const offStr = offset.toFixed(2)           \n  const offEnSuffix = offStr.slice(1)        \n  const offArSuffix = toArabicNumber(offEnSuffix)\n  return {\n    id:'eqA',\n    slots:{ a:aDigit, b:bDigit },\n    order:['a','b'],\n    template:{\n      ar:['. ', {num:true,text:multAr}, '  ', {num:true,text:''}, '', {slot:'a'}, ' = ', {slot:'b'}, {num:true,text:offArSuffix}],\n      en:['A. ', {num:true,text:multEn}, '  0.', {slot:'a'}, ' = ', {slot:'b'}, offEnSuffix]\n    },\n    evaluate(v){\n      const left  = multiplier * (v.a/10)\n      const right = v.b + offset\n      return Math.abs(left - right) < 1e-6\n    }\n  }\n}\nfunction makeEqB({ baseLeft, baseRight, cDigit, dDigit, result, decimals = 2 }){\n  const blAr = toArabicNumber(baseLeft,0), brAr = toArabicNumber(baseRight,0)\n  const blEn = `${baseLeft}`, brEn = `${baseRight}`\n  const resEn = decimals!=null ? result.toFixed(decimals) : String(result)\n  const resAr = toArabicNumber(resEn)\n  return {\n    id:'eqB',\n    slots:{ c:cDigit, d:dDigit },\n    order:['c','d'],\n    template:{\n      ar:['. ', {num:true,text:blAr}, '', {slot:'c'}, '  ', {num:true,text:brAr}, '', {slot:'d'}, ' = ', {num:true,text:resAr}],\n      en:['B. ', {num:true,text:blEn}, '.', {slot:'c'}, '  ', {num:true,text:brEn}, '.', {slot:'d'}, ' = ', resEn]\n    },\n    evaluate(v){\n      const left = (baseLeft + v.c/10) * (baseRight + v.d/10)\n      return Math.abs(left - result) < 1e-6\n    }\n  }\n}\nfunction makeEqC({ secondBase, eDigit, fDigit, result, decimals = 2 }){\n  const sbAr = toArabicNumber(secondBase,0)\n  const sbEn = `${secondBase}`\n  const resEn = decimals!=null ? result.toFixed(decimals) : String(result)\n  const resAr = toArabicNumber(resEn)\n  return {\n    id:'eqC',\n    slots:{ e:eDigit, f:fDigit },\n    order:['e','f'],\n    template:{\n      // ar:['. ', {slot:'e'}, '', {num:true,text:toArabicNumber(9,0).slice(1,-1)}, '  ', {num:true,text:sbAr}, '', {slot:'f'}, ' = ', {num:true,text:resAr}],\n      ar:['. ', {slot:'e'}, '', {num:true,text:toArabicNumber(9,0)}, '  ', {num:true,text:sbAr}, '', {slot:'f'}, ' = ', {num:true,text:resAr}],\n      en:['C. ', {slot:'e'}, '.9  ', {num:true,text:sbEn}, '.', {slot:'f'}, ' = ', resEn]\n    },\n    evaluate(v){\n      const left = (v.e + 0.9) * (secondBase + v.f/10)\n      return Math.abs(left - result) < 1e-6\n    }\n  }\n}\nfunction makeEqD({ gDigit, hDigit }){\n  return {\n    id:'eqD',\n    slots:{ g:gDigit, h:hDigit },\n    order:['g','h'],\n    template:{\n      ar:['. ', {num:true,text:''}, '', {slot:'g'}, ' + ', {num:true,text:''}, ' = ', {num:true,text:''}, '', {slot:'h'}, {num:true,text:''}],\n      en:['D. 4.', {slot:'g'}, ' + 1.25 = 5.', {slot:'h'}, '5']\n    },\n    evaluate(v){\n      const left  = (4 + v.g/10) + 1.25\n      const right = 5 + v.h/10 + 0.05\n      return Math.abs(left - right) < 1e-6\n    }\n  }\n}\n\n/* ===== fixed puzzle bank (all slots are correct single digits) ===== */\nconst puzzleBank = [\n  {\n    id:'p1',\n    equations:[\n      makeEqA({ multiplier:9.3, offset:0.44, aDigit:8, bDigit:7 }),\n      makeEqB({ baseLeft:2, baseRight:2, cDigit:4, dDigit:9, result:6.96, decimals:2 }),\n      makeEqC({ secondBase:3, eDigit:4, fDigit:7, result:18.13, decimals:2 }),\n      makeEqD({ gDigit:7, hDigit:9 })\n    ]\n  },\n  {\n    id:'p2',\n    equations:[\n      makeEqA({ multiplier:8.6, offset:0.16, aDigit:6, bDigit:5 }),\n      makeEqB({ baseLeft:2, baseRight:2, cDigit:1, dDigit:6, result:5.46, decimals:2 }),\n      makeEqC({ secondBase:3, eDigit:2, fDigit:5, result:10.15, decimals:2 }),\n      makeEqD({ gDigit:3, hDigit:5 })\n    ]\n  },\n  {\n    id:'p3',\n    equations:[\n      makeEqA({ multiplier:7.8, offset:0.24, aDigit:8, bDigit:6 }),\n      makeEqB({ baseLeft:2, baseRight:2, cDigit:5, dDigit:2, result:5.50, decimals:2 }),\n      makeEqC({ secondBase:3, eDigit:3, fDigit:6, result:14.04, decimals:2 }),\n      makeEqD({ gDigit:2, hDigit:4 })\n    ]\n  },\n  {\n    id:'p4',\n    equations:[\n      makeEqA({ multiplier:6.4, offset:0.28, aDigit:2, bDigit:1 }),\n      makeEqB({ baseLeft:2, baseRight:2, cDigit:8, dDigit:3, result:6.44, decimals:2 }),\n      makeEqC({ secondBase:3, eDigit:5, fDigit:2, result:18.88, decimals:2 }),\n      makeEqD({ gDigit:4, hDigit:6 })\n    ]\n  },\n  {\n    id:'p5',\n    equations:[\n      makeEqA({ multiplier:6.4, offset:0.12, aDigit:8, bDigit:5 }),\n      makeEqB({ baseLeft:2, baseRight:2, cDigit:0, dDigit:9, result:5.80, decimals:2 }),\n      makeEqC({ secondBase:3, eDigit:6, fDigit:1, result:21.39, decimals:2 }),\n      makeEqD({ gDigit:1, hDigit:3 })\n    ]\n  }\n]\n\n/* ===== state ===== */\nconst currentPuzzle = ref(puzzleBank[0])\nconst lastPuzzleId = ref(null)\nconst answers = reactive({})\nconst totalCounts = reactive({})\nconst bankCounts = reactive({})\nconst slotsMeta = ref([])\nconst feedback = ref(null)\nconst solved = ref(false)\n\n/* ===== helpers ===== */\nfunction shuffle(a){ return a.slice().sort(()=>Math.random()-0.5) }\nfunction pickNextPuzzle(){\n  if(puzzleBank.length===1){ lastPuzzleId.value=puzzleBank[0].id; return puzzleBank[0] }\n  let c\n  do{ c = puzzleBank[Math.floor(Math.random()*puzzleBank.length)] }while(c.id===lastPuzzleId.value)\n  lastPuzzleId.value = c.id\n  return c\n}\n\n/* ===== init puzzle, bank = exact correct digits ===== */\nfunction initPuzzle(){\n  const puzzle = pickNextPuzzle()\n  currentPuzzle.value = puzzle\n  feedback.value = null\n  solved.value = false\n\n  Object.keys(answers).forEach(k=>delete answers[k])\n  Object.keys(totalCounts).forEach(k=>delete totalCounts[k])\n  Object.keys(bankCounts).forEach(k=>delete bankCounts[k])\n\n  const meta = []\n  puzzle.equations.forEach(eq=>{\n    eq.order.forEach(slotName=>{\n      const key = `${eq.id}-${slotName}`\n      meta.push({ key, eq, slotName })\n      answers[key] = null\n      const d = eq.slots[slotName]\n      totalCounts[d] = (totalCounts[d]||0) + 1\n      bankCounts[d]  = (bankCounts[d]||0) + 1\n    })\n  })\n  slotsMeta.value = meta\n}\n\n/* ===== DnD ===== */\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction onDrop(ev, key){\n  ev.preventDefault()\n  const val = Number(ev.dataTransfer.getData('text/plain'))\n  if(Number.isNaN(val)) return\n  if((bankCounts[val]||0) <= 0 && answers[key] !== val) return\n\n  if(answers[key]!=null){\n     const prev=answers[key];\n    bankCounts[prev]=(bankCounts[prev]||0)+1\n   }\n  if(answers[key] !== val){\n    bankCounts[val] = (bankCounts[val] || 0) - 1;\n    if (bankCounts[val] < 0) bankCounts[val] = 0;\n  }\n\n  answers[key]=val; feedback.value=null; solved.value=false\n}\nfunction clearSlot(key){\n  if(answers[key]!=null){\n    const prev=answers[key]; bankCounts[prev]=(bankCounts[prev]||0)+1\n    answers[key]=null; feedback.value=null; solved.value=false\n  }\n}\nconst bankList = computed(()=>{\n  const list=[]\n  for(const [d,c] of Object.entries(bankCounts)){\n    for(let i=0;i<c;i++) list.push({ value:Number(d), key:`${d}-${i}` })\n  }\n  return shuffle(list)\n})\n\n/* ===== check ===== */\nfunction allFilled(){ return slotsMeta.value.every(s=>answers[s.key]!=null) }\nasync function addPoint(){ try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{} }\nasync function checkAll(){\n  if(!allFilled()){ feedback.value=copy[L.value].incomplete; sWrong&&sWrong.play(); return }\n  const { equations } = currentPuzzle.value\n  for(const eq of equations){\n    const v={}\n    for(const name of eq.order){ v[name]=answers[`${eq.id}-${name}`] }\n    if(!eq.evaluate(v)){ feedback.value=copy[L.value].wrong; sWrong&&sWrong.play(); return }\n  }\n  feedback.value=copy[L.value].correct; solved.value=true; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint()\n}\nfunction resetAll(){\n  slotsMeta.value.forEach(s=>{ if(answers[s.key]!=null){ const prev=answers[s.key]; bankCounts[prev]=(bankCounts[prev]||0)+1; answers[s.key]=null } })\n  feedback.value=null; solved.value=false\n}\n\n/* ===== lifecycle ===== */\nonMounted(initPuzzle)\nwatch(()=>props.lang, ()=>{ if(!solved.value) feedback.value=null })\n</script>\n\n<template>\n  <div class=\"lvl3c4 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p v-for=\"(line,idx) in copy[L].intro\" :key=\"idx\" class=\"intro\">{{ line }}</p>\n    </header>\n\n    <section class=\"equations\">\n      <div v-for=\"eq in currentPuzzle.equations\" :key=\"eq.id\" class=\"card\">\n        <div class=\"expression\">\n          <span\n            v-for=\"(token, idx) in (props.lang==='ar' ? eq.template.ar : eq.template.en)\"\n            :key=\"idx\"\n          >\n            <template v-if=\"typeof token==='string'\">\n              {{ token }}\n            </template>\n            <template v-else-if=\"token.num\">\n              <span class=\"num\" v-html=\"token.text\"></span>\n            </template>\n            <template v-else>\n              <span class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, eq.id + '-' + token.slot)\">\n                <span v-if=\"answers[eq.id + '-' + token.slot] != null\" class=\"digit\" v-html=\"formatDigit(answers[eq.id + '-' + token.slot])\"></span>\n                <span v-else class=\"placeholder\"></span>\n              </span>\n              <button class=\"clear\" @click=\"clearSlot(eq.id + '-' + token.slot)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n            </template>\n          </span>\n        </div>\n      </div>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"item in bankList\"\n          :key=\"item.key\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, item.value)\"\n          v-html=\"formatDigit(item.value)\"\n        />\n      </div>\n    </section>\n\n    <section class=\"actions\">\n      <button class=\"btn\" @click=\"checkAll\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c4{ --fg:#111827; --bg:#fdf5f3; --panel:#ffffff; --bd:#fcd6c3; --accent:#ef4444;\n  padding:24px; border-radius:18px; color:var(--fg); background:var(--bg); box-shadow:0 16px 32px rgba(244,114,182,.12) }\n[data-theme=\"dark\"] .lvl3c4{ --fg:#f8fafc; --bg:#1b1325; --panel:#201830; --bd:#3b2c4b; --accent:#fb7185 }\n\n.head{ margin-bottom:18px }\n.title{ margin:0 0 12px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0 0 6px; line-height:1.6 }\n\n.equations{ display:grid; gap:18px }\n.card{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px 18px; box-shadow:0 12px 24px rgba(17,24,39,.08) }\n.expression{\n  display:flex; align-items:center; flex-wrap:wrap; gap:10px;\n  font-size:1.15rem; font-weight:600; direction: rtl;\n}\n.num,.digit{ direction:ltr; unicode-bidi:isolate; font-variant-numeric:tabular-nums }\n.slot{\n  min-width:36px; min-height:36px; border-radius:12px; border:2px dashed rgba(239,68,68,.45);\n  display:inline-flex; align-items:center; justify-content:center; background:rgba(254,226,226,.5); padding:4px 8px\n}\n[data-theme=\"dark\"] .slot{ background:rgba(239,68,68,.12); border-color:rgba(248,113,113,.55) }\n.placeholder{ color:var(--accent); font-size:1.4rem }\n.clear{ border:none; background:transparent; color:var(--accent); cursor:pointer; display:inline-flex; align-items:center; gap:4px; font-size:.8rem }\n.ic{ width:16px; height:16px }\n\n.bank{ margin:22px 0; background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px; box-shadow:0 12px 24px rgba(17,24,39,.08) }\n.bank-title{ font-weight:700; margin-bottom:12px }\n.bank-items{ display:flex; flex-wrap:wrap; gap:10px }\n.chip{\n  padding:8px 14px; border-radius:999px; border:1px solid var(--bd); background:var(--panel);\n  cursor:grab; font-weight:700; box-shadow:0 8px 20px rgba(17,24,39,.08)\n}\n.chip:active{ cursor:grabbing }\n\n.actions{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:18px }\n.btn{\n  display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px;\n  border:1px solid var(--bd); background:var(--panel); cursor:pointer; font-weight:700; transition:.15s\n}\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(17,24,39,.12) }\n\n.feedback{ padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700 }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst copy = {\n  ar:{\n    title:'    5:   ',\n    intro:[\n      '                 .',\n      '             .'\n    ],\n    bank:' ',\n    check:'', reset:' ', newQ:' ', clear:'',\n    needAll:'   .', wrong:'     .', correct:'!   .'\n  },\n  en:{\n    title:'Level 3  Challenge 5: Missing Fraction Cards',\n    intro:[\n      'Use the cards labelled 1 through 9 exactly once to build two fractions whose sum matches the target.',\n      'Drag each digit into the correct numerator or denominator, then check your result.'\n    ],\n    bank:'Available cards',\n    check:'Check', reset:'Reset selection', newQ:'New challenge', clear:'Clear',\n    needAll:'Fill every slot first.', wrong:'The equation is not satisfiedtry another arrangement.', correct:'Great! The fractions are correct.'\n  }\n}\nconst L = computed(()=> (copy[props.lang]?props.lang:'ar'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== puzzle definitions ===== */\nconst slotTemplate = {\n  n1:['n1a','n1b'],\n  d1:['d1a','d1b'],\n  n2:['n2a','n2b'],\n  d2:['d2a','d2b'],\n  res:['res']\n}\n\nconst puzzles = [\n  {\n    id:'p1',\n    solution:{\n      n1:['2','9'],\n      d1:['1','6'],\n      n2:['5','7'],\n      d2:['4','8'],\n      res:['3']\n    }\n  },\n  {\n    id:'p2',\n    solution:{\n      n1:['3','9'],\n      d1:['2','7'],\n      n2:['6','4'],\n      d2:['1','8'],\n      res:['5']\n    }\n  },\n  {\n    id:'p3',\n    solution:{\n      n1:['5','7'],\n      d1:['1','3'],\n      n2:['9','4'],\n      d2:['2','6'],\n      res:['8']\n    }\n  }\n]\n\nconst currentPuzzle = ref(puzzles[0])\nconst placements = reactive({})\nconst expectedDigits = reactive({})\nconst bankCounts = reactive({})\nconst feedback = ref(null)\nconst solved = ref(false)\nconst digitsPool = ['1','2','3','4','5','6','7','8','9']\nconst digitsMap = ['','','','','','','','','','']\n\nfunction formatDigit(value){\n  if(value == null) return ''\n  const str = String(value)\n  return props.lang==='ar' ? str.replace(/[0-9]/g, d => digitsMap[Number(d)]) : str\n}\n\nfunction resetMaps(){\n  Object.keys(placements).forEach(k => delete placements[k])\n  Object.keys(expectedDigits).forEach(k => delete expectedDigits[k])\n  Object.keys(bankCounts).forEach(k => delete bankCounts[k])\n}\n\nfunction initPuzzle(){\n  const puzzle = puzzles[Math.floor(Math.random()*puzzles.length)]\n  currentPuzzle.value = puzzle\n  resetMaps()\n  feedback.value = null\n  solved.value = false\n\n  digitsPool.forEach(d => {\n    bankCounts[d] = 1\n  })\n\n  for(const [group, keys] of Object.entries(slotTemplate)){\n    const digits = puzzle.solution[group]\n    if(!digits) continue\n    keys.forEach((key, idx) => {\n      placements[key] = null\n      expectedDigits[key] = digits[idx]\n    })\n  }\n}\n\nfunction allowDrop(ev){ ev.preventDefault() }\n\nfunction onDragStart(ev, digit){ ev.dataTransfer.setData('text/plain', digit) }\n\nfunction onDrop(ev, key){\n  ev.preventDefault()\n  const digit = ev.dataTransfer.getData('text/plain')\n  if(!digit) return\n  if((bankCounts[digit] || 0) <= 0 && placements[key] !== digit) return\n\n  if(placements[key] != null){\n    const prev = placements[key]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n\n  if(placements[key] !== digit){\n    bankCounts[digit] = (bankCounts[digit] || 0) - 1\n    if(bankCounts[digit] < 0) bankCounts[digit] = 0\n  }\n\n  placements[key] = digit\n  feedback.value = null\n  solved.value = false\n}\n\nfunction clearSlot(key){\n  if(placements[key] != null){\n    const digit = placements[key]\n    bankCounts[digit] = (bankCounts[digit] || 0) + 1\n    placements[key] = null\n    feedback.value = null\n    solved.value = false\n  }\n}\n\nconst bankList = computed(()=> {\n  const list=[]\n  for(const [digit,count] of Object.entries(bankCounts)){\n    for(let i=0;i<count;i++) list.push({ digit, key:`${digit}-${i}` })\n  }\n  return list\n})\n\nfunction allFilled(){\n  return Object.keys(expectedDigits).every(key => placements[key] != null)\n}\n\nfunction valueOf(group){\n  const keys = slotTemplate[group]\n  const digits = keys.map(k => placements[k])\n  return Number(digits.join(''))\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\n\nasync function checkSolution(){\n  if(!allFilled()){\n    feedback.value = copy[L.value].needAll\n    sWrong && sWrong.play()\n    return\n  }\n  const n1 = valueOf('n1')\n  const d1 = valueOf('d1')\n  const n2 = valueOf('n2')\n  const d2 = valueOf('d2')\n  const res = Number(placements['res'])\n  if(!d1 || !d2){\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n    return\n  }\n  const sum = n1/d1 + n2/d2\n  if(Math.abs(sum - res) < 1e-6){\n    feedback.value = copy[L.value].correct\n    solved.value = true\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\n\nfunction resetSelection(){\n  for(const key of Object.keys(placements)){\n    if(placements[key] != null){\n      const digit = placements[key]\n      bankCounts[digit] = (bankCounts[digit] || 0) + 1\n      placements[key] = null\n    }\n  }\n  feedback.value = null\n  solved.value = false\n}\n\nonMounted(initPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c5 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p v-for=\"(line, idx) in copy[L].intro\" :key=\"idx\" class=\"intro\">{{ line }}</p>\n    </header>\n\n    <section class=\"equation\">\n      <div class=\"fraction\">\n        <div class=\"row\">\n          <div v-for=\"key in slotTemplate.n1\" :key=\"key\" class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, key)\">\n            <span v-if=\"placements[key]\" class=\"digit\">{{ formatDigit(placements[key]) }}</span>\n            <span v-else class=\"placeholder\">?</span>\n          </div>\n        </div>\n        <div class=\"bar\"></div>\n        <div class=\"row\">\n          <div v-for=\"key in slotTemplate.d1\" :key=\"key\" class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, key)\">\n            <span v-if=\"placements[key]\" class=\"digit\">{{ formatDigit(placements[key]) }}</span>\n            <span v-else class=\"placeholder\">?</span>\n          </div>\n        </div>\n      </div>\n\n      <span class=\"op\">+</span>\n\n      <div class=\"fraction\">\n        <div class=\"row\">\n          <div v-for=\"key in slotTemplate.n2\" :key=\"key\" class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, key)\">\n            <span v-if=\"placements[key]\" class=\"digit\">{{ formatDigit(placements[key]) }}</span>\n            <span v-else class=\"placeholder\">?</span>\n          </div>\n        </div>\n        <div class=\"bar\"></div>\n        <div class=\"row\">\n          <div v-for=\"key in slotTemplate.d2\" :key=\"key\" class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, key)\">\n            <span v-if=\"placements[key]\" class=\"digit\">{{ formatDigit(placements[key]) }}</span>\n            <span v-else class=\"placeholder\">?</span>\n          </div>\n        </div>\n      </div>\n\n      <span class=\"op\">=</span>\n\n      <div class=\"target-slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, 'res')\">\n        <span v-if=\"placements.res\" class=\"digit\">{{ formatDigit(placements.res) }}</span>\n        <span v-else class=\"placeholder\">?</span>\n      </div>\n    </section>\n\n    <section class=\"controls\">\n      <button class=\"btn\" @click=\"checkSolution\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetSelection\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"item in bankList\"\n          :key=\"item.key\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, item.digit)\"\n        >\n          {{ formatDigit(item.digit) }}\n        </button>\n      </div>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c5{ --fg:#1f2937; --bg:#fffaf3; --panel:#ffffff; --bd:#facc15; --accent:#f59e0b;\n  padding:24px; border-radius:18px; color:var(--fg); background:var(--bg); box-shadow:0 16px 36px rgba(245,158,11,.15) }\n[data-theme=\"dark\"] .lvl3c5{ --fg:#f1f5f9; --bg:#271c12; --panel:#312310; --bd:#facc15; --accent:#fbbf24 }\n\n.head{ margin-bottom:20px }\n.title{ margin:0 0 10px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0 0 6px; line-height:1.55 }\n\n.equation{ display:flex; align-items:center; justify-content:center; gap:18px; margin-bottom:20px; flex-wrap:wrap }\n.fraction{ display:flex; flex-direction:column; align-items:center; gap:6px; background:var(--panel); padding:12px 16px; border:2px solid var(--bd); border-radius:16px; box-shadow:0 10px 28px rgba(15,23,42,.1) }\n.row{ display:flex; gap:8px }\n.slot{ width:44px; height:44px; border-radius:12px; border:2px dashed rgba(245,158,11,.55); display:flex; align-items:center; justify-content:center; background:rgba(253,230,138,.4); cursor:pointer }\n.placeholder{ font-size:1.4rem; color:var(--accent); opacity:.8 }\n.digit{ font-size:1.35rem; font-weight:700 }\n.bar{ width:100%; height:2px; background:var(--bd) }\n.target-slot{ width:56px; height:56px; border-radius:14px; border:2px dashed rgba(245,158,11,.6); display:flex; align-items:center; justify-content:center; background:rgba(253,230,138,.35) }\n.op{ font-size:1.6rem; font-weight:700; color:var(--accent) }\n\n.controls{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-bottom:18px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); cursor:pointer; font-weight:700; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(15,23,42,.12) }\n.ic{ width:18px; height:18px }\n\n.bank{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:18px; box-shadow:0 12px 24px rgba(15,23,42,.08) }\n.bank-title{ font-weight:700; margin-bottom:12px }\n.bank-items{ display:flex; flex-wrap:wrap; gap:10px }\n.chip{ padding:10px 16px; border-radius:12px; border:1px solid var(--bd); background:rgba(253,230,138,.45); font-weight:700; cursor:grab; transition:.12s }\n.chip:active{ cursor:grabbing }\n\n.feedback{ margin-top:18px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700; text-align:center }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n\n@media(max-width: 720px){\n  .fraction{ padding:10px 12px }\n  .slot{ width:40px; height:40px }\n  .target-slot{ width:48px; height:48px }\n}\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\nconst copy = {\n  ar:{\n    title:'    6:  ',\n    intro:'             .',\n    decimals:' ', fraction:' ', bank:' ',\n    check:'', reset:'', newQ:' ', clear:'',\n    needAll:'   .', wrong:'     .', correct:'!  .'\n  },\n  en:{\n    title:'Level 3  Challenge 6: Equivalent Fractions',\n    intro:'Drag the available digits into the slots so the fraction equals the given decimal value.',\n    decimals:'Decimal value', fraction:'Equivalent fraction', bank:'Available cards',\n    check:'Check', reset:'Clear', newQ:'New challenge', clear:'Clear',\n    needAll:'Fill every slot first.', wrong:'Values are not equivalent. Try another arrangement.', correct:'Great! They are equivalent.'\n  }\n}\nconst L = computed(() => (copy[props.lang] ? props.lang : 'ar'))\n\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst puzzles = [\n  {\n    id:'p1',\n    decimal:{ slots:['dec1','dec2'], digits:['2','5'] }, // 0.25\n    fraction:{ num:{ slots:['num1'], digits:['1'] }, den:{ slots:['den1'], digits:['4'] } },\n    digits:['1','2','4','5']\n  },\n  {\n    id:'p2',\n    decimal:{ slots:['dec1','dec2'], digits:['7','5'] }, // 0.75\n    fraction:{ num:{ slots:['num1'], digits:['3'] }, den:{ slots:['den1'], digits:['4'] } },\n    digits:['3','4','5','7']\n  },\n  {\n    id:'p3',\n    decimal:{ slots:['dec1'], digits:['6'] }, // 0.6\n    fraction:{ num:{ slots:['num1'], digits:['3'] }, den:{ slots:['den1'], digits:['5'] } },\n    digits:['3','5','6']\n  },\n  {\n    id:'p4',\n    decimal:{ slots:['dec1','dec2'], digits:['3','3'] }, // 0.33 -> 1/3\n    fraction:{ num:{ slots:['num1'], digits:['1'] }, den:{ slots:['den1'], digits:['3'] } },\n    digits:['1','3']\n  }\n]\n\nconst currentPuzzle = ref(puzzles[0])\nconst placements = reactive({})\nconst requirements = reactive({})\nconst bankCounts = reactive({})\nconst feedback = ref(null)\nconst solved = ref(false)\n\nfunction resetMaps(){\n  Object.keys(placements).forEach(k => delete placements[k])\n  Object.keys(requirements).forEach(k => delete requirements[k])\n  Object.keys(bankCounts).forEach(k => delete bankCounts[k])\n}\n\nfunction initPuzzle(){\n  const puzzle = puzzles[Math.floor(Math.random() * puzzles.length)]\n  currentPuzzle.value = puzzle\n  resetMaps()\n  feedback.value = null\n  solved.value = false\n\n  // build slots and requirements\n  const { decimal, fraction } = puzzle\n  decimal.slots.forEach((slot, idx) => {\n    placements[slot] = null\n    requirements[slot] = decimal.digits[idx]\n  })\n  fraction.num.slots.forEach((slot, idx) => {\n    placements[slot] = null\n    requirements[slot] = fraction.num.digits[idx]\n  })\n  fraction.den.slots.forEach((slot, idx) => {\n    placements[slot] = null\n    requirements[slot] = fraction.den.digits[idx]\n  })\n\n  puzzle.digits.forEach(d => {\n    bankCounts[d] = (bankCounts[d] || 0) + 1\n  })\n}\n\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDragStart(ev, digit){ ev.dataTransfer.setData('text/plain', digit) }\n\nfunction onDrop(ev, slot){\n  ev.preventDefault()\n  const digit = ev.dataTransfer.getData('text/plain')\n  if(!digit) return\n  if((bankCounts[digit] || 0) <= 0 && placements[slot] !== digit) return\n\n  if(placements[slot] != null){\n    const prev = placements[slot]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n\n  if(placements[slot] !== digit){\n    bankCounts[digit] = (bankCounts[digit] || 0) - 1\n    if(bankCounts[digit] < 0) bankCounts[digit] = 0\n  }\n\n  placements[slot] = digit\n  solved.value = false\n  feedback.value = null\n}\n\nfunction clearSlot(slot){\n  if(placements[slot] != null){\n    const digit = placements[slot]\n    bankCounts[digit] = (bankCounts[digit] || 0) + 1\n    placements[slot] = null\n    solved.value = false\n    feedback.value = null\n  }\n}\n\nconst bankList = computed(()=>{\n  const list=[]\n  for(const [digit,count] of Object.entries(bankCounts)){\n    for(let i=0;i<count;i++) list.push({ digit, key:`${digit}-${i}` })\n  }\n  return list\n})\n\nfunction slotsFilled(){\n  return Object.keys(requirements).every(key => placements[key] != null)\n}\n\nfunction decimalValue(){\n  const digits = currentPuzzle.value.decimal.slots.map(slot => placements[slot])\n  const decimalPart = digits.join('')\n  return Number(`0.${decimalPart}`)\n}\n\nfunction fractionValue(){\n  const { fraction } = currentPuzzle.value\n  const numDigits = fraction.num.slots.map(slot => placements[slot]).join('')\n  const denDigits = fraction.den.slots.map(slot => placements[slot]).join('')\n  const numerator = Number(numDigits)\n  const denominator = Number(denDigits)\n  if(!denominator) return null\n  return numerator / denominator\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{ method:'GET', credentials:'include' }) }catch{}\n}\n\nasync function checkSolution(){\n  if(!slotsFilled()){\n    feedback.value = copy[L.value].needAll\n    sWrong && sWrong.play()\n    return\n  }\n  const dec = decimalValue()\n  const frac = fractionValue()\n  if(frac == null){\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n    return\n  }\n  if(Math.abs(dec - frac) < 1e-6){\n    feedback.value = copy[L.value].correct\n    solved.value = true\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\n\nfunction resetSelection(){\n  Object.keys(placements).forEach(slot => {\n    if(placements[slot] != null){\n      const digit = placements[slot]\n      bankCounts[digit] = (bankCounts[digit] || 0) + 1\n      placements[slot] = null\n    }\n  })\n  solved.value = false\n  feedback.value = null\n}\n\nonMounted(initPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c6 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"intro\">{{ copy[L].intro }}</p>\n    </header>\n\n    <section class=\"problem\">\n      <div class=\"decimal-card\">\n        <div class=\"label\">{{ copy[L].decimals }}</div>\n        <div class=\"decimal-display\">\n          <span class=\"fixed\">0.</span>\n          <div class=\"slots\">\n            <div\n              v-for=\"slot in currentPuzzle.decimal.slots\"\n              :key=\"slot\"\n              class=\"slot\"\n              @dragover=\"allowDrop\"\n              @drop=\"onDrop($event, slot)\"\n            >\n              <span v-if=\"placements[slot]\" class=\"digit\">{{ placements[slot] }}</span>\n              <span v-else class=\"placeholder\">?</span>\n              <button class=\"clear\" @click=\"clearSlot(slot)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <span class=\"equals\">=</span>\n\n      <div class=\"fraction-card\">\n        <div class=\"label\">{{ copy[L].fraction }}</div>\n        <div class=\"fraction\">\n          <div class=\"row\">\n            <div\n              v-for=\"slot in currentPuzzle.fraction.num.slots\"\n              :key=\"slot\"\n              class=\"slot\"\n              @dragover=\"allowDrop\"\n              @drop=\"onDrop($event, slot)\"\n            >\n              <span v-if=\"placements[slot]\" class=\"digit\">{{ placements[slot] }}</span>\n              <span v-else class=\"placeholder\">?</span>\n              <button class=\"clear\" @click=\"clearSlot(slot)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n            </div>\n          </div>\n          <div class=\"bar\"></div>\n          <div class=\"row\">\n            <div\n              v-for=\"slot in currentPuzzle.fraction.den.slots\"\n              :key=\"slot\"\n              class=\"slot\"\n              @dragover=\"allowDrop\"\n              @drop=\"onDrop($event, slot)\"\n            >\n              <span v-if=\"placements[slot]\" class=\"digit\">{{ placements[slot] }}</span>\n              <span v-else class=\"placeholder\">?</span>\n              <button class=\"clear\" @click=\"clearSlot(slot)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <section class=\"controls\">\n      <button class=\"btn\" @click=\"checkSolution\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetSelection\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"item in bankList\"\n          :key=\"item.key\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, item.digit)\"\n        >\n          {{ item.digit }}\n        </button>\n      </div>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c6{ --fg:#1f2937; --bg:#f8fafc; --panel:#ffffff; --bd:#c4d4f8; --accent:#2563eb;\n  padding:24px; border-radius:18px; background:var(--bg); color:var(--fg); box-shadow:0 14px 32px rgba(37,99,235,.12) }\n[data-theme=\"dark\"] .lvl3c6{ --fg:#e2e8f0; --bg:#0f172a; --panel:#111c34; --bd:#1e3a8a; --accent:#60a5fa }\n\n.head{ margin-bottom:20px }\n.title{ margin:0 0 10px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0; line-height:1.5; opacity:.85 }\n\n.problem{ display:flex; align-items:center; justify-content:center; gap:24px; flex-wrap:wrap; margin-bottom:22px }\n.decimal-card, .fraction-card{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px 20px; box-shadow:0 12px 28px rgba(15,23,42,.08); min-width:220px }\n.label{ font-weight:700; margin-bottom:12px; text-align:center }\n.decimal-display{ display:flex; align-items:center; gap:10px; justify-content:center }\n.fixed{ font-size:1.5rem; font-weight:700 }\n.slots{ display:flex; gap:10px }\n.slot{ min-width:46px; min-height:54px; border-radius:12px; border:2px dashed rgba(37,99,235,.35); display:flex; align-items:center; justify-content:center; position:relative; background:rgba(191,219,254,.35) }\n.placeholder{ font-size:1.5rem; color:var(--accent); opacity:.75 }\n.digit{ font-size:1.45rem; font-weight:700 }\n.clear{ position:absolute; bottom:-30px; left:50%; transform:translateX(-50%); background:transparent; border:none; color:var(--accent); cursor:pointer; font-size:.75rem; display:flex; align-items:center; gap:4px }\n.ic{ width:16px; height:16px }\n\n.fraction{ display:flex; flex-direction:column; gap:12px; align-items:center }\n.row{ display:flex; gap:10px }\n.bar{ width:100%; height:3px; background:var(--accent); border-radius:999px }\n.equals{ font-size:1.8rem; font-weight:700; color:var(--accent) }\n\n.controls{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-bottom:18px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); font-weight:700; cursor:pointer; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(15,23,42,.12) }\n\n.bank{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:18px; box-shadow:0 12px 24px rgba(15,23,42,.08) }\n.bank-title{ font-weight:700; margin-bottom:12px }\n.bank-items{ display:flex; flex-wrap:wrap; gap:10px }\n.chip{ padding:9px 14px; border-radius:12px; border:1px solid var(--bd); background:rgba(191,219,254,.45); font-weight:700; cursor:grab; transition:.15s }\n.chip:active{ cursor:grabbing }\n\n.feedback{ margin-top:20px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700; text-align:center }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n\n@media (max-width: 720px){\n  .slot{ min-width:42px; min-height:48px }\n  .clear{ bottom:-26px }\n}\n</style>\n","<script setup>\nimport { ref, computed, reactive, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\nconst copy = {\n  ar:{\n    title:'    7:  ',\n    intro:'                    .',\n    target:' ', current:' ',\n    check:'', reset:'  ', newQ:' ', clearAll:' ',\n    needStart:'   .', invalid:'   .', wrong:'       .', correct:'!    .'\n  },\n  en:{\n    title:'Level 3  Challenge 7: Multiplication Path',\n    intro:'Start at point A and travel along connected nodes to reach B so the product of edge values equals the required target.',\n    target:'Target product', current:'Current product',\n    check:'Check', reset:'Undo last', newQ:'New challenge', clearAll:'Clear path',\n    needStart:'Start from node A.', invalid:'Pick a connected node.', wrong:'Path does not meet the targettry again.', correct:'Great! The path matches the target.'\n  }\n}\nconst L = computed(() => (copy[props.lang] ? props.lang : 'ar'))\n\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst puzzles = [\n  {\n    id:'p1',\n    target:5,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'', x:420, y:150, type:'start' },\n      { id:'B', label:'', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:90 },\n      { id:'RB', x:340, y:210 },\n      { id:'CT', x:260, y:70 },\n      { id:'C',  x:260, y:150 },\n      { id:'CB', x:260, y:230 },\n      { id:'LT', x:180, y:90 },\n      { id:'LB', x:180, y:210 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:0.5 },\n      { from:'RT', to:'CT', value:1.0 },\n      { from:'CT', to:'C', value:0.5 },\n      { from:'C', to:'LT', value:2.0 },\n      { from:'LT', to:'B', value:2.5 },\n      { from:'A', to:'RB', value:2.0 },\n      { from:'RB', to:'CB', value:1.25 },\n      { from:'CB', to:'C', value:1.0 },\n      { from:'C', to:'LB', value:1.0 },\n      { from:'LB', to:'B', value:2.0 },\n      { from:'CT', to:'CB', value:2.0 },\n      { from:'RT', to:'C', value:1.4 },\n      { from:'C', to:'LT', value:1.6 }\n    ]\n  },\n  {\n    id:'p2',\n    target:6,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'', x:420, y:150, type:'start' },\n      { id:'B', label:'', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:100 },\n      { id:'RB', x:340, y:200 },\n      { id:'CT', x:260, y:60 },\n      { id:'C',  x:260, y:150 },\n      { id:'CB', x:260, y:240 },\n      { id:'LT', x:180, y:100 },\n      { id:'LB', x:180, y:200 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.5 },\n      { from:'RT', to:'CT', value:2.0 },\n      { from:'CT', to:'C', value:1.0 },\n      { from:'C', to:'LT', value:1.0 },\n      { from:'LT', to:'B', value:2.0 },\n      { from:'A', to:'RB', value:0.5 },\n      { from:'RB', to:'CB', value:1.2 },\n      { from:'CB', to:'C', value:2.0 },\n      { from:'C', to:'LB', value:1.0 },\n      { from:'LB', to:'B', value:2.0 },\n      { from:'RT', to:'C', value:1.2 },\n      { from:'C', to:'LT', value:1.5 }\n    ]\n  },\n  {\n    id:'p3',\n    target:5.4,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'', x:420, y:150, type:'start' },\n      { id:'B', label:'', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:90 },\n      { id:'RB', x:340, y:210 },\n      { id:'CT', x:260, y:70 },\n      { id:'C',  x:260, y:150 },\n      { id:'CB', x:260, y:230 },\n      { id:'LT', x:180, y:90 },\n      { id:'LB', x:180, y:210 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.2 },\n      { from:'RT', to:'CT', value:1.5 },\n      { from:'CT', to:'C', value:1.0 },\n      { from:'C', to:'LT', value:1.5 },\n      { from:'LT', to:'B', value:2.0 },\n      { from:'A', to:'RB', value:1.4 },\n      { from:'RB', to:'CB', value:1.1 },\n      { from:'CB', to:'C', value:1.2 },\n      { from:'C', to:'LB', value:1.3 },\n      { from:'LB', to:'B', value:1.8 },\n      { from:'RT', to:'C', value:1.3 },\n      { from:'CT', to:'CB', value:1.4 }\n    ]\n  },\n  {\n    id:'p4',\n    target:4.5,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'', x:420, y:150, type:'start' },\n      { id:'B', label:'', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:110 },\n      { id:'RB', x:340, y:210 },\n      { id:'CT', x:260, y:90 },\n      { id:'C',  x:260, y:160 },\n      { id:'CB', x:260, y:240 },\n      { id:'LT', x:180, y:120 },\n      { id:'LB', x:180, y:210 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.1 },\n      { from:'RT', to:'CT', value:1.3 },\n      { from:'CT', to:'C', value:1.2 },\n      { from:'C', to:'LT', value:1.25 },\n      { from:'LT', to:'B', value:2.0 },\n      { from:'A', to:'RB', value:1.5 },\n      { from:'RB', to:'CB', value:1.2 },\n      { from:'CB', to:'C', value:1.0 },\n      { from:'C', to:'LB', value:1.4 },\n      { from:'LB', to:'B', value:1.8 },\n      { from:'RT', to:'C', value:1.4 },\n      { from:'CT', to:'CB', value:1.1 }\n    ]\n  },\n  {\n    id:'p5',\n    target:7.2,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'', x:420, y:150, type:'start' },\n      { id:'B', label:'', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:95 },\n      { id:'RB', x:340, y:205 },\n      { id:'CT', x:260, y:65 },\n      { id:'C',  x:260, y:150 },\n      { id:'CB', x:260, y:235 },\n      { id:'LT', x:180, y:105 },\n      { id:'LB', x:180, y:205 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.2 },\n      { from:'RT', to:'CT', value:1.5 },\n      { from:'CT', to:'C', value:1.0 },\n      { from:'C', to:'LT', value:1.2 },\n      { from:'LT', to:'B', value:1.6 },\n      { from:'A', to:'RB', value:0.9 },\n      { from:'RB', to:'CB', value:1.4 },\n      { from:'CB', to:'C', value:1.3 },\n      { from:'C', to:'LB', value:2.0 },\n      { from:'LB', to:'B', value:2.0 },\n      { from:'RT', to:'C', value:1.3 },\n      { from:'CT', to:'CB', value:1.2 }\n    ]\n  },\n  {\n    id:'p6',\n    target:4.8,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'', x:420, y:150, type:'start' },\n      { id:'B', label:'', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:105 },\n      { id:'RB', x:340, y:215 },\n      { id:'CT', x:260, y:75 },\n      { id:'C',  x:260, y:155 },\n      { id:'CB', x:260, y:235 },\n      { id:'LT', x:180, y:110 },\n      { id:'LB', x:180, y:215 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.3 },\n      { from:'RT', to:'CT', value:1.2 },\n      { from:'CT', to:'C', value:1.1 },\n      { from:'C', to:'LT', value:1.4 },\n      { from:'LT', to:'B', value:1.7 },\n      { from:'A', to:'RB', value:1.25 },\n      { from:'RB', to:'CB', value:1.2 },\n      { from:'CB', to:'C', value:1.0 },\n      { from:'C', to:'LB', value:1.6 },\n      { from:'LB', to:'B', value:2.0 },\n      { from:'RT', to:'C', value:1.2 },\n      { from:'CT', to:'CB', value:1.3 }\n    ]\n  }\n]\n\nfunction withCoords(edge, nodes){\n  const from = nodes.find(n => n.id === edge.from)\n  const to = nodes.find(n => n.id === edge.to)\n  return { ...edge, x1: from.x, y1: from.y, x2: to.x, y2: to.y, midX:(from.x+to.x)/2, midY:(from.y+to.y)/2 }\n}\n\nconst currentPuzzle = ref(puzzles[0])\nconst lastPuzzleId = ref(null)\nconst path = ref([]) // array of node ids\nconst feedback = ref(null)\nconst solved = ref(false)\n\nconst nodes = computed(() => currentPuzzle.value.nodes)\nconst edges = computed(() => currentPuzzle.value.edges.map(e => withCoords(e, nodes.value)))\n\nconst selectedEdges = computed(() => {\n  const e = []\n  for(let i=0;i<path.value.length-1;i++){\n    const a = path.value[i]\n    const b = path.value[i+1]\n    const edge = edges.value.find(ed => (ed.from===a && ed.to===b) || (ed.from===b && ed.to===a))\n    if(edge) e.push(edge)\n  }\n  return e\n})\n\nconst product = computed(() => selectedEdges.value.reduce((acc, ed) => acc * ed.value, 1))\n\nfunction hasEdge(a,b){\n  return edges.value.some(ed => (ed.from===a && ed.to===b) || (ed.from===b && ed.to===a))\n}\n\nfunction pickNextPuzzle(){\n  if(puzzles.length === 1){\n    lastPuzzleId.value = puzzles[0].id\n    return puzzles[0]\n  }\n  let candidate\n  do{\n    candidate = puzzles[Math.floor(Math.random() * puzzles.length)]\n  }while(candidate.id === lastPuzzleId.value)\n  lastPuzzleId.value = candidate.id\n  return candidate\n}\n\nfunction resetPath(){\n  path.value = []\n  solved.value = false\n  feedback.value = null\n}\n\nfunction undoLast(){\n  if(path.value.length > 0){\n    path.value = path.value.slice(0, -1)\n    solved.value = false\n    feedback.value = null\n  }\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\n\nfunction onNodeClick(node){\n  const { start, end } = currentPuzzle.value\n  if(!path.value.length){\n    if(node.id !== start){\n      feedback.value = copy[L.value].needStart\n      sWrong && sWrong.play()\n      return\n    }\n    path.value = [node.id]\n    feedback.value = null\n    return\n  }\n  const last = path.value[path.value.length-1]\n  if(node.id === last) return\n  if(!hasEdge(last, node.id)){\n    feedback.value = copy[L.value].invalid\n    sWrong && sWrong.play()\n    return\n  }\n  const newPath = path.value.slice()\n  newPath.push(node.id)\n  path.value = newPath\n  feedback.value = null\n  if(node.id === end){\n    checkPath()\n  }\n}\n\nasync function checkPath(){\n  const { end, target } = currentPuzzle.value\n  if(path.value[path.value.length-1] !== end){\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n    return\n  }\n  if(Math.abs(product.value - target) < 1e-6){\n    feedback.value = copy[L.value].correct\n    solved.value = true\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    feedback.value = copy[L.value].wrong\n    solved.value = false\n    sWrong && sWrong.play()\n  }\n}\n\nfunction initPuzzle(){\n  const puzzle = pickNextPuzzle()\n  currentPuzzle.value = puzzle\n  resetPath()\n}\n\nonMounted(initPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c8 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"intro\">{{ copy[L].intro }}</p>\n    </header>\n\n    <section class=\"status\">\n      <div class=\"chip\">{{ copy[L].target }}: <strong>{{ currentPuzzle.target }}</strong></div>\n      <div class=\"chip\">{{ copy[L].current }}: <strong>{{ product.toFixed(3) }}</strong></div>\n    </section>\n\n    <section class=\"graph\">\n      <svg viewBox=\"0 0 500 300\">\n        <g v-for=\"edge in edges\" :key=\"edge.from + edge.to\">\n          <line :x1=\"edge.x1\" :y1=\"edge.y1\" :x2=\"edge.x2\" :y2=\"edge.y2\" :class=\"['edge', { active: selectedEdges.includes(edge) }]\" />\n          <text :x=\"edge.midX\" :y=\"edge.midY\" class=\"edge-label\">{{ edge.value }}</text>\n        </g>\n        <g v-for=\"node in nodes\" :key=\"node.id\" class=\"node\" @click=\"onNodeClick(node)\">\n          <circle :cx=\"node.x\" :cy=\"node.y\" :r=\"node.type ? 20 : 12\" :class=\"['point', node.type, { selected: path.includes(node.id) }]\" />\n          <text :x=\"node.x\" :y=\"node.y + 4\" class=\"node-label\">{{ node.label || '' }}</text>\n        </g>\n      </svg>\n    </section>\n\n    <section class=\"controls\">\n      <button class=\"btn\" @click=\"checkPath\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"undoLast\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"resetPath\"><RefreshCw class=\"ic\" /> {{ copy[L].clearAll }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c8{ --fg:#111827; --bg:#f0f9ff; --panel:#ffffff; --bd:#bae6fd; --accent:#2563eb;\n  padding:24px; border-radius:18px; background:var(--bg); color:var(--fg); box-shadow:0 16px 36px rgba(37,99,235,.12) }\n[data-theme=\"dark\"] .lvl3c8{ --fg:#e2e8f0; --bg:#0b1424; --panel:#12203b; --bd:#1d4ed8; --accent:#60a5fa }\n\n.head{ margin-bottom:20px }\n.title{ margin:0 0 10px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0; opacity:.85; line-height:1.55 }\n\n.status{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:18px }\n.chip{ padding:8px 14px; border-radius:999px; background:var(--panel); border:1px solid var(--bd); box-shadow:0 6px 16px rgba(15,23,42,.08); font-weight:600 }\n.chip strong{ font-weight:700 }\n\n.graph{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px; box-shadow:0 12px 28px rgba(15,23,42,.12); margin-bottom:20px }\nsvg{ width:100%; height:auto }\n.edge{ stroke:#3b82f6; stroke-width:4; stroke-linecap:round; opacity:.6; transition:.15s }\n.edge.active{ stroke:#2563eb; opacity:1 }\n.edge-label{ fill:var(--fg); font-size:12px; text-anchor:middle; dominant-baseline:middle; font-weight:600 }\n.node{ cursor:pointer }\n.point{ fill:#1d4ed8; stroke:#fff; stroke-width:2; transition:.15s }\n.point.start, .point.end{ fill:#fde68a; stroke:#fbbf24; stroke-width:3 }\n.point.selected{ stroke:var(--accent); stroke-width:4 }\n.node-label{ fill:var(--fg); font-weight:700; font-size:14px; text-anchor:middle }\n\n.controls{ display:flex; gap:12px; flex-wrap:wrap }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); font-weight:700; cursor:pointer; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(15,23,42,.12) }\n.ic{ width:18px; height:18px }\n\n.feedback{ margin-top:18px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700; text-align:center }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n</style>\n","<script setup>\nimport { ref, computed, reactive, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\nconst copy = {\n  ar:{\n    title:'    8:  ',\n    intro:'                    .',\n    target:' ', current:' ',\n    check:'', reset:'  ', newQ:' ', clearAll:' ',\n    needStart:'   .', invalid:'   .', wrong:'       .', correct:'!    .'\n  },\n  en:{\n    title:'Level 3  Challenge 8: Multiplication Path',\n    intro:'Start at point A and travel along connected nodes to reach B so the product of edge values equals the required target.',\n    target:'Target product', current:'Current product',\n    check:'Check', reset:'Undo last', newQ:'New challenge', clearAll:'Clear path',\n    needStart:'Start from node A.', invalid:'Pick a connected node.', wrong:'Path does not meet the targettry again.', correct:'Great! The path matches the target.'\n  }\n}\nconst L = computed(() => (copy[props.lang] ? props.lang : 'ar'))\n\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst puzzles = [\n  {\n    id:'p1',\n    target:5,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'', x:420, y:150, type:'start' },\n      { id:'B', label:'', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:90 },\n      { id:'RB', x:340, y:210 },\n      { id:'CT', x:260, y:70 },\n      { id:'C',  x:260, y:150 },\n      { id:'CB', x:260, y:230 },\n      { id:'LT', x:180, y:90 },\n      { id:'LB', x:180, y:210 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:0.5 },\n      { from:'RT', to:'CT', value:1.0 },\n      { from:'CT', to:'C', value:0.5 },\n      { from:'C', to:'LT', value:2.0 },\n      { from:'LT', to:'B', value:2.5 },\n      { from:'A', to:'RB', value:2.0 },\n      { from:'RB', to:'CB', value:1.25 },\n      { from:'CB', to:'C', value:1.0 },\n      { from:'C', to:'LB', value:1.0 },\n      { from:'LB', to:'B', value:2.0 },\n      { from:'CT', to:'CB', value:2.0 },\n      { from:'RT', to:'C', value:1.4 },\n      { from:'C', to:'LT', value:1.6 }\n    ]\n  },\n  {\n    id:'p2',\n    target:6,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'', x:420, y:150, type:'start' },\n      { id:'B', label:'', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:100 },\n      { id:'RB', x:340, y:200 },\n      { id:'CT', x:260, y:60 },\n      { id:'C',  x:260, y:150 },\n      { id:'CB', x:260, y:240 },\n      { id:'LT', x:180, y:100 },\n      { id:'LB', x:180, y:200 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.5 },\n      { from:'RT', to:'CT', value:2.0 },\n      { from:'CT', to:'C', value:1.0 },\n      { from:'C', to:'LT', value:1.0 },\n      { from:'LT', to:'B', value:2.0 },\n      { from:'A', to:'RB', value:0.5 },\n      { from:'RB', to:'CB', value:1.2 },\n      { from:'CB', to:'C', value:2.0 },\n      { from:'C', to:'LB', value:1.0 },\n      { from:'LB', to:'B', value:2.0 },\n      { from:'RT', to:'C', value:1.2 },\n      { from:'C', to:'LT', value:1.5 }\n    ]\n  },\n  {\n    id:'p3',\n    target:5.4,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'', x:420, y:150, type:'start' },\n      { id:'B', label:'', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:90 },\n      { id:'RB', x:340, y:210 },\n      { id:'CT', x:260, y:70 },\n      { id:'C',  x:260, y:150 },\n      { id:'CB', x:260, y:230 },\n      { id:'LT', x:180, y:90 },\n      { id:'LB', x:180, y:210 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.2 },\n      { from:'RT', to:'CT', value:1.5 },\n      { from:'CT', to:'C', value:1.0 },\n      { from:'C', to:'LT', value:1.5 },\n      { from:'LT', to:'B', value:2.0 },\n      { from:'A', to:'RB', value:1.4 },\n      { from:'RB', to:'CB', value:1.1 },\n      { from:'CB', to:'C', value:1.2 },\n      { from:'C', to:'LB', value:1.3 },\n      { from:'LB', to:'B', value:1.8 },\n      { from:'RT', to:'C', value:1.3 },\n      { from:'CT', to:'CB', value:1.4 }\n    ]\n  },\n  {\n    id:'p4',\n    target:4.5,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'', x:420, y:150, type:'start' },\n      { id:'B', label:'', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:110 },\n      { id:'RB', x:340, y:210 },\n      { id:'CT', x:260, y:90 },\n      { id:'C',  x:260, y:160 },\n      { id:'CB', x:260, y:240 },\n      { id:'LT', x:180, y:120 },\n      { id:'LB', x:180, y:210 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.1 },\n      { from:'RT', to:'CT', value:1.3 },\n      { from:'CT', to:'C', value:1.2 },\n      { from:'C', to:'LT', value:1.25 },\n      { from:'LT', to:'B', value:2.0 },\n      { from:'A', to:'RB', value:1.5 },\n      { from:'RB', to:'CB', value:1.2 },\n      { from:'CB', to:'C', value:1.0 },\n      { from:'C', to:'LB', value:1.4 },\n      { from:'LB', to:'B', value:1.8 },\n      { from:'RT', to:'C', value:1.4 },\n      { from:'CT', to:'CB', value:1.1 }\n    ]\n  },\n  {\n    id:'p5',\n    target:7.2,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'', x:420, y:150, type:'start' },\n      { id:'B', label:'', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:95 },\n      { id:'RB', x:340, y:205 },\n      { id:'CT', x:260, y:65 },\n      { id:'C',  x:260, y:150 },\n      { id:'CB', x:260, y:235 },\n      { id:'LT', x:180, y:105 },\n      { id:'LB', x:180, y:205 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.2 },\n      { from:'RT', to:'CT', value:1.5 },\n      { from:'CT', to:'C', value:1.0 },\n      { from:'C', to:'LT', value:1.2 },\n      { from:'LT', to:'B', value:1.6 },\n      { from:'A', to:'RB', value:0.9 },\n      { from:'RB', to:'CB', value:1.4 },\n      { from:'CB', to:'C', value:1.3 },\n      { from:'C', to:'LB', value:2.0 },\n      { from:'LB', to:'B', value:2.0 },\n      { from:'RT', to:'C', value:1.3 },\n      { from:'CT', to:'CB', value:1.2 }\n    ]\n  },\n  {\n    id:'p6',\n    target:4.8,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'', x:420, y:150, type:'start' },\n      { id:'B', label:'', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:105 },\n      { id:'RB', x:340, y:215 },\n      { id:'CT', x:260, y:75 },\n      { id:'C',  x:260, y:155 },\n      { id:'CB', x:260, y:235 },\n      { id:'LT', x:180, y:110 },\n      { id:'LB', x:180, y:215 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.3 },\n      { from:'RT', to:'CT', value:1.2 },\n      { from:'CT', to:'C', value:1.1 },\n      { from:'C', to:'LT', value:1.4 },\n      { from:'LT', to:'B', value:1.7 },\n      { from:'A', to:'RB', value:1.25 },\n      { from:'RB', to:'CB', value:1.2 },\n      { from:'CB', to:'C', value:1.0 },\n      { from:'C', to:'LB', value:1.6 },\n      { from:'LB', to:'B', value:2.0 },\n      { from:'RT', to:'C', value:1.2 },\n      { from:'CT', to:'CB', value:1.3 }\n    ]\n  }\n]\n\nfunction withCoords(edge, nodes){\n  const from = nodes.find(n => n.id === edge.from)\n  const to = nodes.find(n => n.id === edge.to)\n  return { ...edge, x1: from.x, y1: from.y, x2: to.x, y2: to.y, midX:(from.x+to.x)/2, midY:(from.y+to.y)/2 }\n}\n\nconst currentPuzzle = ref(puzzles[0])\nconst lastPuzzleId = ref(null)\nconst path = ref([]) // array of node ids\nconst feedback = ref(null)\nconst solved = ref(false)\n\nconst nodes = computed(() => currentPuzzle.value.nodes)\nconst edges = computed(() => currentPuzzle.value.edges.map(e => withCoords(e, nodes.value)))\n\nconst selectedEdges = computed(() => {\n  const e = []\n  for(let i=0;i<path.value.length-1;i++){\n    const a = path.value[i]\n    const b = path.value[i+1]\n    const edge = edges.value.find(ed => (ed.from===a && ed.to===b) || (ed.from===b && ed.to===a))\n    if(edge) e.push(edge)\n  }\n  return e\n})\n\nconst product = computed(() => selectedEdges.value.reduce((acc, ed) => acc * ed.value, 1))\n\nfunction hasEdge(a,b){\n  return edges.value.some(ed => (ed.from===a && ed.to===b) || (ed.from===b && ed.to===a))\n}\n\nfunction pickNextPuzzle(){\n  if(puzzles.length === 1){\n    lastPuzzleId.value = puzzles[0].id\n    return puzzles[0]\n  }\n  let candidate\n  do{\n    candidate = puzzles[Math.floor(Math.random() * puzzles.length)]\n  }while(candidate.id === lastPuzzleId.value)\n  lastPuzzleId.value = candidate.id\n  return candidate\n}\n\nfunction resetPath(){\n  path.value = []\n  solved.value = false\n  feedback.value = null\n}\n\nfunction undoLast(){\n  if(path.value.length > 0){\n    path.value = path.value.slice(0, -1)\n    solved.value = false\n    feedback.value = null\n  }\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\n\nfunction onNodeClick(node){\n  const { start, end } = currentPuzzle.value\n  if(!path.value.length){\n    if(node.id !== start){\n      feedback.value = copy[L.value].needStart\n      sWrong && sWrong.play()\n      return\n    }\n    path.value = [node.id]\n    feedback.value = null\n    return\n  }\n  const last = path.value[path.value.length-1]\n  if(node.id === last) return\n  if(!hasEdge(last, node.id)){\n    feedback.value = copy[L.value].invalid\n    sWrong && sWrong.play()\n    return\n  }\n  const newPath = path.value.slice()\n  newPath.push(node.id)\n  path.value = newPath\n  feedback.value = null\n  if(node.id === end){\n    checkPath()\n  }\n}\n\nasync function checkPath(){\n  const { end, target } = currentPuzzle.value\n  if(path.value[path.value.length-1] !== end){\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n    return\n  }\n  if(Math.abs(product.value - target) < 1e-6){\n    feedback.value = copy[L.value].correct\n    solved.value = true\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    feedback.value = copy[L.value].wrong\n    solved.value = false\n    sWrong && sWrong.play()\n  }\n}\n\nfunction initPuzzle(){\n  const puzzle = pickNextPuzzle()\n  currentPuzzle.value = puzzle\n  resetPath()\n}\n\nonMounted(initPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c8 challenge-surface\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"intro\">{{ copy[L].intro }}</p>\n    </header>\n\n    <section class=\"status\">\n      <div class=\"chip\">{{ copy[L].target }}: <strong>{{ currentPuzzle.target }}</strong></div>\n      <div class=\"chip\">{{ copy[L].current }}: <strong>{{ product.toFixed(3) }}</strong></div>\n    </section>\n\n    <section class=\"graph\">\n      <svg viewBox=\"0 0 500 300\">\n        <g v-for=\"edge in edges\" :key=\"edge.from + edge.to\">\n          <line :x1=\"edge.x1\" :y1=\"edge.y1\" :x2=\"edge.x2\" :y2=\"edge.y2\" :class=\"['edge', { active: selectedEdges.includes(edge) }]\" />\n          <text :x=\"edge.midX\" :y=\"edge.midY\" class=\"edge-label\">{{ edge.value }}</text>\n        </g>\n        <g v-for=\"node in nodes\" :key=\"node.id\" class=\"node\" @click=\"onNodeClick(node)\">\n          <circle :cx=\"node.x\" :cy=\"node.y\" :r=\"node.type ? 20 : 12\" :class=\"['point', node.type, { selected: path.includes(node.id) }]\" />\n          <text :x=\"node.x\" :y=\"node.y + 4\" class=\"node-label\">{{ node.label || '' }}</text>\n        </g>\n      </svg>\n    </section>\n\n    <section class=\"controls\">\n      <button class=\"btn\" @click=\"checkPath\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"undoLast\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"resetPath\"><RefreshCw class=\"ic\" /> {{ copy[L].clearAll }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c8{ --fg:#111827; --bg:#f0f9ff; --panel:#ffffff; --bd:#bae6fd; --accent:#2563eb;\n  padding:24px; border-radius:18px; background:var(--bg); color:var(--fg); box-shadow:0 16px 36px rgba(37,99,235,.12) }\n[data-theme=\"dark\"] .lvl3c8{ --fg:#e2e8f0; --bg:#0b1424; --panel:#12203b; --bd:#1d4ed8; --accent:#60a5fa }\n\n.head{ margin-bottom:20px }\n.title{ margin:0 0 10px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0; opacity:.85; line-height:1.55 }\n\n.status{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:18px }\n.chip{ padding:8px 14px; border-radius:999px; background:var(--panel); border:1px solid var(--bd); box-shadow:0 6px 16px rgba(15,23,42,.08); font-weight:600 }\n.chip strong{ font-weight:700 }\n\n.graph{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px; box-shadow:0 12px 28px rgba(15,23,42,.12); margin-bottom:20px }\nsvg{ width:100%; height:auto }\n.edge{ stroke:#3b82f6; stroke-width:4; stroke-linecap:round; opacity:.6; transition:.15s }\n.edge.active{ stroke:#2563eb; opacity:1 }\n.edge-label{ fill:var(--fg); font-size:12px; text-anchor:middle; dominant-baseline:middle; font-weight:600 }\n.node{ cursor:pointer }\n.point{ fill:#1d4ed8; stroke:#fff; stroke-width:2; transition:.15s }\n.point.start, .point.end{ fill:#fde68a; stroke:#fbbf24; stroke-width:3 }\n.point.selected{ stroke:var(--accent); stroke-width:4 }\n.node-label{ fill:var(--fg); font-weight:700; font-size:14px; text-anchor:middle }\n\n.controls{ display:flex; gap:12px; flex-wrap:wrap }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); font-weight:700; cursor:pointer; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(15,23,42,.12) }\n.ic{ width:18px; height:18px }\n\n.feedback{ margin-top:18px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700; text-align:center }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n</style>","const EVENT_NAME = 'ml-toast'\n\nexport function emitToast({ message, type = 'info', duration = 2600 } = {}) {\n  if (!message) return\n  window.dispatchEvent(new CustomEvent(EVENT_NAME, {\n    detail: {\n      message,\n      type,\n      duration,\n      id: crypto.randomUUID?.() || Math.random().toString(36).slice(2),\n      timestamp: Date.now(),\n    },\n  }))\n}\n\nexport function onToast(listener) {\n  window.addEventListener(EVENT_NAME, listener)\n  return () => window.removeEventListener(EVENT_NAME, listener)\n}\n","import { ref } from 'vue'\nimport { emitToast } from '@/utils/toastBus'\n\nconst score = ref(null)\nconst rank = ref(null)\nconst totalPlayers = ref(null)\nconst bestScore = ref(null)\nconst loading = ref(false)\nconst error = ref(null)\nconst lastUpdated = ref(0)\nconst profileImage = ref(null)\nconst username = ref(null)\nconst gameUserName = ref(null)\n\nasync function fetchScore(force = false) {\n  const now = Date.now()\n  if (!force && score.value !== null && now - lastUpdated.value < 60_000) {\n    return\n  }\n  if (loading.value) return\n\n  loading.value = true\n  error.value = null\n  try {\n    const res = await fetch('/api/method/mathematics_leaders.api.game_points.get_points', {\n      method: 'GET',\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' },\n    })\n    const data = await res.json()\n    if (!res.ok || !data?.message?.ok) {\n      throw new Error(data?.message || 'Unable to load score')\n    }\n    const payload = data.message\n    score.value = Number(payload.points || 0)\n    rank.value = payload.rank || 1\n    totalPlayers.value = payload.players || 1\n    bestScore.value = Number(payload.best || payload.points || 0)\n    profileImage.value = payload.profile_image || null\n    username.value = payload.username || null\n    gameUserName.value = payload.game_user_name || null\n    lastUpdated.value = now\n  } catch (err) {\n    error.value = err instanceof Error ? err.message : String(err)\n    emitToast({ message: error.value, type: 'danger' })\n  } finally {\n    loading.value = false\n  }\n}\n\nexport function useGameScore() {\n  return {\n    score,\n    rank,\n    totalPlayers,\n    bestScore,\n    loading,\n    error,\n    lastUpdated,\n    profileImage,\n    username,\n    gameUserName,\n    refresh: fetchScore,\n  }\n}\n","<script setup>\nimport { computed, onMounted, onUnmounted, ref } from 'vue'\nimport { RefreshCw, TrendingUp, Award, Activity, Target } from 'lucide-vue-next'\nimport { useGameScore } from '@/composables/useGameScore'\n\nconst {\n  score,\n  rank,\n  totalPlayers,\n  bestScore,\n  loading,\n  error,\n  lastUpdated,\n  refresh,\n} = useGameScore()\n\nconst detectLang = () => {\n  const htmlLang = (document.documentElement.lang || '').toLowerCase()\n  if (htmlLang.startsWith('en')) return 'en'\n  const stored = (localStorage.getItem('ml_lang') || '').toLowerCase()\n  return stored.startsWith('en') ? 'en' : 'ar'\n}\nconst detectTheme = () => (localStorage.getItem('ml_theme') || 'light')\n\nconst langState = ref(detectLang())\nconst theme = ref(detectTheme())\n\nconst isRTL = computed(() => langState.value === 'ar')\nconst strings = computed(() => langState.value === 'ar' ? {\n  totalPoints: ' ',\n  progressLabel: '   ',\n  refresh: ' ',\n  lastUpdated: ' ',\n  insightHeading: ' ',\n  scoreTrendTitle: ' ',\n  scoreTrendCopy: '      .',\n  percentRankTitle: '  ',\n  topTierCopy: '    !   .',\n  nextTierLabel: '   ',\n  recordTitle: '  ',\n  sparkLabel: '  ( )',\n  metricsHeading: ' ',\n  playersLabel: ' ',\n  rankLabel: '',\n  recordLabel: ' ',\n  minutesAgo: ' ',\n  justNow: '',\n} : {\n  totalPoints: 'Total points',\n  progressLabel: 'Progress to next tier',\n  refresh: 'Refresh score',\n  lastUpdated: 'Last updated',\n  insightHeading: 'Quick insights',\n  scoreTrendTitle: 'Performance trend',\n  scoreTrendCopy: 'Your recent attempts show an upward trend.',\n  percentRankTitle: 'Position among players',\n  topTierCopy: 'You already sit at the highest tierkeep shining!',\n  nextTierLabel: 'To reach the next tier',\n  recordTitle: 'Best recorded score',\n  sparkLabel: 'Score changes (recent sessions)',\n  metricsHeading: 'Key metrics',\n  playersLabel: 'Players',\n  rankLabel: 'Your rank',\n  recordLabel: 'Personal best',\n  minutesAgo: 'minutes ago',\n  justNow: 'just now',\n})\n\nconst tiers = [\n  { threshold: 0, title: { ar: ' ', en: 'Number Novice' } },\n  { threshold: 25, title: { ar: ' ', en: 'Pattern Explorer' } },\n  { threshold: 75, title: { ar: ' ', en: 'Math Maestro' } },\n  { threshold: 150, title: { ar: ' ', en: 'Challenge Legend' } },\n]\n\nconst scoreValue = computed(() => Number(score.value || 0))\nconst bestValue = computed(() => Number(bestScore.value || 0))\n\nconst tierIndex = computed(() => {\n  let idx = 0\n  tiers.forEach((tier, i) => {\n    if (scoreValue.value >= tier.threshold) idx = i\n  })\n  return idx\n})\n\nconst currentTier = computed(() => tiers[tierIndex.value])\nconst nextTier = computed(() => tiers[tierIndex.value + 1] || null)\nconst tierLabel = computed(() => currentTier.value?.title?.[langState.value] || currentTier.value?.title?.en || '')\n\nconst progress = computed(() => {\n  if (!nextTier.value) return 1\n  const span = nextTier.value.threshold - currentTier.value.threshold\n  if (span <= 0) return 1\n  return Math.min(1, (scoreValue.value - currentTier.value.threshold) / span)\n})\n\nconst intl = new Intl.NumberFormat('en-US', { maximumFractionDigits: 0 })\n\nconst formattedScore = computed(() => intl.format(scoreValue.value))\nconst formattedBest = computed(() => intl.format(bestValue.value))\nconst formattedRank = computed(() => (rank.value != null ? `#${rank.value}` : '--'))\nconst totalPlayersLabel = computed(() => (totalPlayers.value != null ? intl.format(totalPlayers.value) : '--'))\n\nconst lastUpdatedLabel = computed(() => {\n  if (!lastUpdated.value) return '--'\n  const delta = Date.now() - lastUpdated.value\n  if (delta < 60_000) return strings.value.justNow\n  const minutes = Math.round(delta / 60_000)\n  return `${minutes} ${strings.value.minutesAgo}`\n})\n\nconst sparkSteps = 9\nconst trendPoints = computed(() => {\n  const peak = Math.max(scoreValue.value, bestValue.value, 1)\n  const baseline = Math.max(10, peak * 0.45)\n  const result = []\n  for (let i = 0; i < sparkSteps; i += 1) {\n    const ratio = sparkSteps === 1 ? 1 : i / (sparkSteps - 1)\n    const wave = Math.sin((scoreValue.value + i) * 0.35) * peak * 0.05\n    const val = Math.max(0, baseline + (peak - baseline) * ratio + wave)\n    result.push(Math.round(val))\n  }\n  result[result.length - 1] = Math.max(scoreValue.value, 0)\n  return result\n})\n\nconst sparklineGeometry = computed(() => {\n  const pts = trendPoints.value\n  if (!pts.length) return []\n  const width = 180\n  const height = 54\n  const max = Math.max(...pts)\n  const min = Math.min(...pts)\n  const range = max - min || 1\n  return pts.map((value, index) => {\n    const x = pts.length === 1 ? width : (width / (pts.length - 1)) * index\n    const y = height - ((value - min) / range) * height\n    return { x: Number(x.toFixed(2)), y: Number(y.toFixed(2)), value }\n  })\n})\n\nconst sparklinePath = computed(() => {\n  const pts = sparklineGeometry.value\n  if (!pts.length) return ''\n  return pts.map((pt, idx) => `${idx === 0 ? 'M' : 'L'}${pt.x},${pt.y}`).join(' ')\n})\n\nconst sparklineArea = computed(() => {\n  const pts = sparklineGeometry.value\n  if (!pts.length) return ''\n  const height = 54\n  const first = pts[0]\n  const last = pts[pts.length - 1]\n  const line = pts.map((pt, idx) => `${idx === 0 ? 'L' : 'L'}${pt.x},${pt.y}`).join(' ')\n  return `M${first.x},${height} ${line} L${last.x},${height} Z`\n})\n\nconst trendDelta = computed(() => {\n  const pts = trendPoints.value\n  if (pts.length < 2) return 0\n  return pts[pts.length - 1] - pts[0]\n})\n\nconst donutRadius = 58\nconst donutCircumference = 2 * Math.PI * donutRadius\nconst donutOffset = computed(() => donutCircumference * (1 - progress.value))\nconst progressPercent = computed(() => Math.round(progress.value * 100))\n\nconst percentile = computed(() => {\n  if (!rank.value || !totalPlayers.value) return null\n  const pct = Math.max(0, 100 - Math.round(((rank.value - 1) / totalPlayers.value) * 100))\n  return pct\n})\n\nconst iconLibrary = { trend: TrendingUp, award: Award, activity: Activity, target: Target }\n\nconst insightCards = computed(() => {\n  const cards = []\n  if (nextTier.value) {\n    const remaining = Math.max(0, nextTier.value.threshold - scoreValue.value)\n    cards.push({\n      icon: 'target',\n      title: strings.value.nextTierLabel,\n      body: langState.value === 'ar'\n        ? ` ${intl.format(remaining)}    ${nextTier.value.title.ar}.`\n        : `${intl.format(remaining)} pts to unlock ${nextTier.value.title.en}.`,\n    })\n  } else {\n    cards.push({\n      icon: 'target',\n      title: strings.value.nextTierLabel,\n      body: langState.value === 'ar' ? strings.value.topTierCopy : strings.value.topTierCopy,\n    })\n  }\n\n  cards.push({\n    icon: 'trend',\n    title: strings.value.scoreTrendTitle,\n    body: langState.value === 'ar'\n      ? `${strings.value.scoreTrendCopy} (+${intl.format(Math.max(0, trendDelta.value))}).`\n      : `${strings.value.scoreTrendCopy} (+${intl.format(Math.max(0, trendDelta.value))}).`,\n  })\n\n  if (percentile.value != null) {\n    cards.push({\n      icon: 'award',\n      title: strings.value.percentRankTitle,\n      body: langState.value === 'ar'\n        ? `   ${percentile.value}%  .`\n        : `You currently outperform ${percentile.value}% of players.`,\n    })\n  }\n\n  cards.push({\n    icon: 'activity',\n    title: strings.value.recordTitle,\n    body: langState.value === 'ar'\n      ? `    ${formattedBest.value} .`\n      : `Your personal best sits at ${formattedBest.value} pts.`,\n  })\n\n  return cards\n})\n\nconst metrics = computed(() => [\n  { label: strings.value.rankLabel, value: formattedRank.value },\n  { label: strings.value.playersLabel, value: totalPlayersLabel.value },\n  { label: strings.value.recordLabel, value: formattedBest.value },\n])\n\nfunction handleRefresh() {\n  refresh(true)\n}\n\nlet langObserver = null\nlet themeObserver = null\nlet storageHandler = null\n\nonMounted(() => {\n  refresh(true)\n\n  const updateLang = () => { langState.value = detectLang() }\n  const updateTheme = () => { theme.value = detectTheme() }\n\n  langObserver = new MutationObserver(updateLang)\n  langObserver.observe(document.documentElement, { attributes: true, attributeFilter: ['lang'] })\n\n  themeObserver = new MutationObserver(updateTheme)\n  themeObserver.observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] })\n\n  storageHandler = () => {\n    updateLang()\n    updateTheme()\n  }\n  window.addEventListener('storage', storageHandler)\n})\n\nonUnmounted(() => {\n  if (langObserver) langObserver.disconnect()\n  if (themeObserver) themeObserver.disconnect()\n  if (storageHandler) window.removeEventListener('storage', storageHandler)\n})\n</script>\n\n<template>\n  <div\n    class=\"scores-page\"\n    :dir=\"isRTL ? 'rtl' : 'ltr'\"\n    :data-theme=\"theme\"\n  >\n    <section class=\"overview\">\n      <article class=\"panel donut-panel\">\n        <header class=\"panel__header\">\n          <span class=\"tier-chip\">{{ tierLabel }}</span>\n          <button class=\"refresh\" data-ripple :disabled=\"loading\" @click=\"handleRefresh\">\n            <RefreshCw class=\"ic\" :class=\"{ spin: loading }\" />\n            {{ strings.refresh }}\n          </button>\n        </header>\n\n        <div class=\"donut\">\n          <svg viewBox=\"0 0 160 160\" aria-hidden=\"true\">\n            <defs>\n              <linearGradient id=\"donutGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n                <stop offset=\"0%\" stop-color=\"#c8a03b\" />\n                <stop offset=\"100%\" stop-color=\"#0f8a3e\" />\n              </linearGradient>\n            </defs>\n            <circle class=\"track\" cx=\"80\" cy=\"80\" :r=\"donutRadius\" />\n            <circle\n              class=\"progress\"\n              cx=\"80\"\n              cy=\"80\"\n              :r=\"donutRadius\"\n              :style=\"{ strokeDasharray: `${donutCircumference}px`, strokeDashoffset: `${donutOffset}px` }\"\n            />\n          </svg>\n          <div class=\"donut__label\">\n            <strong>{{ formattedScore }}</strong>\n            <span>{{ strings.totalPoints }}</span>\n          </div>\n        </div>\n\n        <footer class=\"panel__footer\">\n          <div class=\"progress-caption\">\n            <span>{{ strings.progressLabel }}</span>\n            <span>{{ progressPercent }}%</span>\n          </div>\n          <div class=\"timestamp\">{{ strings.lastUpdated }}  {{ lastUpdatedLabel }}</div>\n        </footer>\n      </article>\n\n      <article class=\"panel spark-panel\">\n        <header class=\"panel__header\">\n          <span class=\"panel__title\">{{ strings.sparkLabel }}</span>\n        </header>\n        <div class=\"spark\">\n          <svg viewBox=\"0 0 180 72\" aria-hidden=\"true\">\n            <defs>\n              <linearGradient id=\"sparkFill\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n                <stop offset=\"0%\" stop-color=\"rgba(15,138,62,0.35)\" />\n                <stop offset=\"100%\" stop-color=\"rgba(200,160,59,0.05)\" />\n              </linearGradient>\n            </defs>\n            <path v-if=\"sparklineArea\" class=\"spark__area\" :d=\"sparklineArea\" fill=\"url(#sparkFill)\" />\n            <path v-if=\"sparklinePath\" class=\"spark__path\" :d=\"sparklinePath\" />\n          </svg>\n          <div class=\"spark__meta\">\n            <span class=\"spark__delta\" :class=\"{ up: trendDelta >= 0 }\">\n              {{ trendDelta >= 0 ? '+' : '' }}{{ intl.format(trendDelta) }}\n            </span>\n            <span class=\"spark__hint\">{{ strings.scoreTrendCopy }}</span>\n          </div>\n        </div>\n\n        <div class=\"metrics\">\n          <div v-for=\"metric in metrics\" :key=\"metric.label\" class=\"metric\">\n            <span class=\"metric__label\">{{ metric.label }}</span>\n            <strong class=\"metric__value\">{{ metric.value }}</strong>\n          </div>\n        </div>\n      </article>\n    </section>\n\n    <section class=\"insights\">\n      <h3>{{ strings.insightHeading }}</h3>\n      <div class=\"insights__grid\">\n        <article\n          v-for=\"(card, index) in insightCards\"\n          :key=\"index\"\n          class=\"insight-card\"\n        >\n          <div class=\"insight-card__icon\">\n            <component :is=\"iconLibrary[card.icon]\" class=\"glyph\" />\n          </div>\n          <div class=\"insight-card__body\">\n            <h4>{{ card.title }}</h4>\n            <p>{{ card.body }}</p>\n          </div>\n        </article>\n      </div>\n      <p v-if=\"error\" class=\"error\">{{ error }}</p>\n    </section>\n  </div>\n</template>\n\n<style scoped>\n.scores-page{\n  display:flex;\n  flex-direction:column;\n  gap:28px;\n  width:min(1100px,100%);\n  margin:0 auto;\n  padding:24px 20px 48px;\n  color:var(--color-neutral-900);\n}\n.scores-page[data-theme=\"dark\"]{\n  color:var(--color-neutral-900);\n}\n\n.overview{\n  display:grid;\n  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));\n  gap:20px;\n}\n\n.panel{\n  position:relative;\n  display:flex;\n  flex-direction:column;\n  gap:18px;\n  padding:22px 24px;\n  border-radius:26px;\n  background:linear-gradient(135deg,rgba(15,138,62,0.08),rgba(200,160,59,0.12));\n  border:1px solid rgba(200,160,59,0.25);\n  box-shadow:0 28px 52px rgba(15,138,62,0.18);\n  overflow:hidden;\n}\n[data-theme=\"dark\"] .panel{\n  background:linear-gradient(135deg,rgba(15,138,62,0.32),rgba(21,32,43,0.82));\n  border-color:rgba(200,160,59,0.32);\n  box-shadow:0 30px 60px rgba(0,0,0,0.55);\n}\n\n.panel::after{\n  content:\"\";\n  position:absolute;\n  inset:-40% -20% auto -20%;\n  height:70%;\n  background:radial-gradient(circle at top,rgba(255,255,255,0.48),transparent 60%);\n  opacity:.4;\n  pointer-events:none;\n}\n\n.panel__header{\n  display:flex;\n  align-items:center;\n  justify-content:space-between;\n  gap:12px;\n  position:relative;\n  z-index:1;\n}\n\n.panel__title{font-weight:700;font-size:1.08rem}\n\n.panel__footer{\n  display:flex;\n  flex-direction:column;\n  gap:10px;\n  position:relative;\n  z-index:1;\n}\n\n.tier-chip{\n  display:inline-flex;\n  align-items:center;\n  gap:6px;\n  padding:6px 16px;\n  border-radius:999px;\n  background:rgba(200,160,59,0.18);\n  color:#0f8a3e;\n  font-weight:700;\n  letter-spacing:.08em;\n  text-transform:uppercase;\n}\n[data-theme=\"dark\"] .tier-chip{\n  background:rgba(200,160,59,0.36);\n  color:#f4d67c;\n}\n\n.refresh{\n  display:inline-flex;\n  align-items:center;\n  gap:6px;\n  border-radius:999px;\n  border:1px solid rgba(200,160,59,0.4);\n  background:rgba(255,255,255,0.2);\n  color:#0f8a3e;\n  padding:8px 14px;\n  font-weight:600;\n  cursor:pointer;\n  transition:transform .2s ease, box-shadow .2s ease;\n}\n.refresh:disabled{opacity:.6;cursor:wait}\n.refresh:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 14px 28px rgba(15,138,62,0.18)}\n[data-theme=\"dark\"] .refresh{background:rgba(21,32,43,0.6);color:#f4d67c;border-color:rgba(200,160,59,0.45)}\n\n.ic{width:18px;height:18px}\n.spin{animation:spin 1.1s linear infinite}\n\n.donut{\n  position:relative;\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  width:100%;\n  min-height:200px;\n  z-index:1;\n}\n.donut svg{width:200px;height:200px;transform:rotate(-90deg)}\n.track{fill:none;stroke:rgba(200,160,59,0.18);stroke-width:14;stroke-linecap:round}\n.progress{fill:none;stroke:url(#donutGradient);stroke-width:14;stroke-linecap:round;transition:stroke-dashoffset .9s cubic-bezier(.22,1,.36,1)}\n\n.donut__label{\n  position:absolute;\n  display:flex;\n  flex-direction:column;\n  align-items:center;\n  justify-content:center;\n  gap:6px;\n  color:#0f8a3e;\n}\n.donut__label strong{font-size:2.8rem;line-height:1;font-weight:800;text-shadow:0 12px 26px rgba(15,138,62,0.28)}\n.donut__label span{font-weight:600;letter-spacing:.04em}\n[data-theme=\"dark\"] .donut__label{color:#f4d67c;text-shadow:0 14px 32px rgba(0,0,0,0.55)}\n\n.progress-caption{\n  display:flex;\n  justify-content:space-between;\n  font-weight:600;\n  color:rgba(17,24,39,0.75);\n}\n[data-theme=\"dark\"] .progress-caption{color:rgba(255,255,255,0.72)}\n.timestamp{font-size:.82rem;opacity:.7}\n\n.spark{display:flex;flex-direction:column;gap:10px;position:relative;z-index:1}\n.spark svg{width:100%;max-width:220px}\n.spark__area{stroke:none;opacity:.9}\n.spark__path{fill:none;stroke:#0f8a3e;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;filter:drop-shadow(0 10px 16px rgba(15,138,62,0.25))}\n.spark__meta{display:flex;align-items:center;gap:10px;font-size:.9rem}\n.spark__delta{font-weight:700;color:#0f8a3e}\n.spark__delta.up::before{content:'';margin-inline-end:4px}\n[data-theme=\"dark\"] .spark__delta{color:#f4d67c}\n.spark__hint{opacity:.7}\n\n.metrics{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px}\n.metric{position:relative;padding:14px 16px;border-radius:18px;background:rgba(255,255,255,0.78);border:1px solid rgba(200,160,59,0.25);box-shadow:0 16px 26px rgba(15,138,62,0.12)}\n.metric__label{display:block;font-size:.85rem;opacity:.75;font-weight:600}\n.metric__value{display:block;font-size:1.6rem;font-weight:800;color:#0f8a3e}\n[data-theme=\"dark\"] .metric{background:rgba(21,32,43,0.85);border-color:rgba(200,160,59,0.3);box-shadow:0 20px 42px rgba(0,0,0,0.55)}\n[data-theme=\"dark\"] .metric__value{color:#f4d67c}\n\n.insights{display:flex;flex-direction:column;gap:18px}\n.insights h3{margin:0;font-size:1.3rem;font-weight:800}\n.insights__grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}\n\n.insight-card{\n  position:relative;\n  display:flex;\n  gap:14px;\n  padding:18px 20px;\n  border-radius:22px;\n  background:rgba(255,255,255,0.92);\n  border:1px solid rgba(200,160,59,0.25);\n  box-shadow:0 18px 36px rgba(15,138,62,0.16);\n  overflow:hidden;\n}\n.insight-card::after{\n  content:\"\";\n  position:absolute;\n  inset:auto -30% -50% 0;\n  height:140px;\n  background:linear-gradient(135deg,rgba(200,160,59,0.18),transparent);\n  opacity:.4;\n}\n[data-theme=\"dark\"] .insight-card{background:rgba(21,32,43,0.88);border-color:rgba(200,160,59,0.28);box-shadow:0 26px 48px rgba(0,0,0,0.6)}\n\n.insight-card__icon{width:40px;height:40px;border-radius:14px;background:linear-gradient(135deg,#c8a03b,#0f8a3e);display:flex;align-items:center;justify-content:center;flex-shrink:0;animation:float 3.2s ease-in-out infinite}\n[data-theme=\"dark\"] .insight-card__icon{background:linear-gradient(135deg,#f4d67c,#0f8a3e)}\n.glyph{width:22px;height:22px;color:#fff}\n\n.insight-card__body{position:relative;z-index:1;display:flex;flex-direction:column;gap:6px}\n.insight-card__body h4{margin:0;font-size:1.05rem;font-weight:700}\n.insight-card__body p{margin:0;opacity:.78;line-height:1.45}\n[data-theme=\"dark\"] .insight-card__body p{color:rgba(255,255,255,0.78)}\n\n.error{color:#dc2626;font-weight:600}\n\n@keyframes spin{to{transform:rotate(360deg)}}\n@keyframes float{0%,100%{transform:translateY(0);}50%{transform:translateY(-6px);}}\n\n@media (max-width: 720px){\n  .panel{padding:18px}\n  .metrics{grid-template-columns:repeat(auto-fit,minmax(140px,1fr))}\n  .insight-card{padding:16px}\n  .scores-page{padding:20px 16px 36px}\n}\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, onUnmounted } from 'vue'\nimport { Image as ImageIcon, Upload, Check, KeyRound, RefreshCw, ShieldCheck, Sparkles, Loader2 } from 'lucide-vue-next'\nimport { useGameScore } from '@/composables/useGameScore'\nimport { emitToast } from '@/utils/toastBus'\n\nconst store = useGameScore()\n\nconst detectLang = () => {\n  const doc = (document.documentElement.lang || '').toLowerCase()\n  if (doc.startsWith('en')) return 'en'\n  const stored = (localStorage.getItem('ml_lang') || '').toLowerCase()\n  return stored.startsWith('en') ? 'en' : 'ar'\n}\nconst detectTheme = () => localStorage.getItem('ml_theme') || 'light'\n\nconst lang = ref(detectLang())\nconst theme = ref(detectTheme())\nconst isRTL = computed(() => lang.value === 'ar')\n\nconst strings = computed(() => lang.value === 'ar'\n  ? {\n      title: ' ',\n      avatarTitle: ' ',\n      avatarHint: '     ( 2 .).',\n      chooseFile: ' ',\n      cancel: ' ',\n      upload: ' ',\n      loading: ' ...',\n      changeSuccess: '   .',\n      changeError: '    .',\n      passwordTitle: '  ',\n      formHint: '        .',\n      currentPassword: '  ',\n      newPassword: '  ',\n      confirmPassword: '  ',\n      verify: '',\n      verified: '    .',\n      verifyError: '     .',\n      savePassword: '  ',\n      reset: ' ',\n      passwordSuccess: '    .',\n      passwordError: '      .',\n      selectImageFirst: '  .',\n      notImage: '  .',\n      tooLarge: '   2 ..',\n      missingPlayer: '   .',\n    }\n  : {\n      title: 'Account settings',\n      avatarTitle: 'Profile picture',\n      avatarHint: 'Upload a crisp square image (up to 2 MB).',\n      chooseFile: 'Choose image',\n      cancel: 'Remove selection',\n      upload: 'Save avatar',\n      loading: 'Uploading...',\n      changeSuccess: 'Profile picture updated successfully.',\n      changeError: 'We could not update your picture. Try again later.',\n      passwordTitle: 'Change password',\n      formHint: 'Use a strong password that mixes letters, numbers, and symbols.',\n      currentPassword: 'Current password',\n      newPassword: 'New password',\n      confirmPassword: 'Confirm password',\n      verify: 'Verify',\n      verified: 'Password verified.',\n      verifyError: 'Verify your current password first.',\n      savePassword: 'Save password',\n      reset: 'Reset form',\n      passwordSuccess: 'Password updated successfully.',\n      passwordError: 'Unable to change password. Check your entries.',\n      selectImageFirst: 'Select an image first.',\n      notImage: 'The selected file is not an image.',\n      tooLarge: 'Image size exceeds 2 MB.',\n      missingPlayer: 'Unable to identify player record.',\n    })\n\nconst avatarFile = ref(null)\nconst avatarPreview = ref('')\nconst avatarStatus = reactive({ loading: false, message: '', error: '' })\n\nconst passwordForm = reactive({ current: '', next: '', confirm: '' })\nconst verifyState = reactive({ loading: false, verified: false, message: '', error: '' })\nconst passwordStatus = reactive({ loading: false, message: '', error: '' })\n\nconst displayName = computed(() => store.username.value || 'Player')\nconst fallbackInitial = computed(() => displayName.value.trim().charAt(0).toUpperCase() || 'P')\nconst avatarUrl = computed(() => avatarPreview.value || store.profileImage.value || null)\n\nfunction handleFileChange(event) {\n  avatarStatus.message = ''\n  avatarStatus.error = ''\n  const file = event.target.files?.[0]\n  if (!file) {\n    clearSelection()\n    return\n  }\n  if (!file.type.startsWith('image/')) {\n    avatarStatus.error = strings.value.notImage\n    return\n  }\n  if (file.size > 2 * 1024 * 1024) {\n    avatarStatus.error = strings.value.tooLarge\n    return\n  }\n  if (avatarPreview.value) URL.revokeObjectURL(avatarPreview.value)\n  avatarFile.value = file\n  avatarPreview.value = URL.createObjectURL(file)\n}\n\nfunction clearSelection() {\n  if (avatarPreview.value) URL.revokeObjectURL(avatarPreview.value)\n  avatarFile.value = null\n  avatarPreview.value = ''\n  avatarStatus.message = ''\n  avatarStatus.error = ''\n}\n\nasync function uploadAvatar() {\n  if (!avatarFile.value) {\n    avatarStatus.error = strings.value.selectImageFirst\n    return\n  }\n  if (!store.gameUserName.value) await store.refresh(true)\n  const docname = store.gameUserName.value\n  if (!docname) {\n    avatarStatus.error = strings.value.missingPlayer\n    return\n  }\n  avatarStatus.loading = true\n  avatarStatus.error = ''\n  avatarStatus.message = ''\n  try {\n    const fd = new FormData()\n    fd.append('file', avatarFile.value)\n    fd.append('filename', avatarFile.value.name)\n    fd.append('is_private', '0')\n    fd.append('attached_to_doctype', 'Game Users')\n    fd.append('attached_to_name', docname)\n\n    const uploadRes = await fetch('/api/method/upload_file', {\n      method: 'POST',\n      credentials: 'include',\n      body: fd,\n    })\n    const uploadData = await uploadRes.json()\n    if (!uploadRes.ok || !uploadData?.message?.file_url) {\n      throw new Error(uploadData?._server_messages || uploadData?.message || 'Upload failed')\n    }\n    const fileUrl = uploadData.message.file_url\n    const saveRes = await fetch('/api/method/mathematics_leaders.api.profile.set_profile_image', {\n      method: 'POST',\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ file_url: fileUrl }),\n    })\n    const saveData = await saveRes.json()\n    if (!saveRes.ok || !saveData?.message?.ok) {\n      throw new Error(saveData?.message || 'Unable to store profile image')\n    }\n    avatarStatus.message = strings.value.changeSuccess\n    emitToast({ message: strings.value.changeSuccess, type: 'success' })\n    await store.refresh(true)\n    clearSelection()\n  } catch (err) {\n    avatarStatus.error = err instanceof Error ? err.message : strings.value.changeError\n    emitToast({ message: avatarStatus.error, type: 'danger' })\n  } finally {\n    avatarStatus.loading = false\n  }\n}\n\nasync function verifyCurrent() {\n  verifyState.loading = true\n  verifyState.error = ''\n  verifyState.message = ''\n  try {\n    if (!passwordForm.current) {\n      throw new Error(strings.value.verifyError)\n    }\n    const res = await fetch('/api/method/mathematics_leaders.api.profile.verify_current_password', {\n      method: 'POST',\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ current_password: passwordForm.current }),\n    })\n    const data = await res.json()\n    if (!res.ok || !data?.message?.ok) {\n      throw new Error(data?.message || strings.value.verifyError)\n    }\n    verifyState.verified = true\n    verifyState.message = strings.value.verified\n    passwordStatus.error = ''\n  } catch (err) {\n    verifyState.verified = false\n    verifyState.error = err instanceof Error ? err.message : strings.value.verifyError\n  } finally {\n    verifyState.loading = false\n  }\n}\n\nasync function updatePassword() {\n  if (!verifyState.verified) {\n    verifyState.error = strings.value.verifyError\n    return\n  }\n  passwordStatus.loading = true\n  passwordStatus.message = ''\n  passwordStatus.error = ''\n  const { current, next, confirm } = passwordForm\n  try {\n    if (!current || !next || !confirm) {\n      throw new Error(lang.value === 'ar' ? '  .' : 'Fill in every field.')\n    }\n    if (next !== confirm) {\n      throw new Error(lang.value === 'ar' ? '   .' : 'Passwords do not match.')\n    }\n    if (next.length < 8) {\n      throw new Error(lang.value === 'ar' ? '     8   .' : 'Password must be at least 8 characters.')\n    }\n    const res = await fetch('/api/method/mathematics_leaders.api.profile.change_password', {\n      method: 'POST',\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ current_password: current, new_password: next }),\n    })\n    const data = await res.json()\n    if (!res.ok || !data?.message?.ok) {\n      throw new Error(data?.message || strings.value.passwordError)\n    }\n    passwordStatus.message = strings.value.passwordSuccess\n    emitToast({ message: strings.value.passwordSuccess, type: 'success' })\n    passwordForm.current = ''\n    passwordForm.next = ''\n    passwordForm.confirm = ''\n    verifyState.verified = false\n    verifyState.message = ''\n  } catch (err) {\n    passwordStatus.error = err instanceof Error ? err.message : strings.value.passwordError\n    emitToast({ message: passwordStatus.error, type: 'danger' })\n  } finally {\n    passwordStatus.loading = false\n  }\n}\n\nfunction resetPasswordForm() {\n  passwordForm.current = ''\n  passwordForm.next = ''\n  passwordForm.confirm = ''\n  verifyState.loading = false\n  verifyState.verified = false\n  verifyState.message = ''\n  verifyState.error = ''\n  passwordStatus.loading = false\n  passwordStatus.message = ''\n  passwordStatus.error = ''\n}\n\nlet langObserver = null\nlet themeObserver = null\nlet storageHandler = null\n\nonMounted(() => {\n  if (store.score.value == null) store.refresh(true)\n\n  const updateLang = () => { lang.value = detectLang() }\n  const updateTheme = () => { theme.value = detectTheme() }\n\n  langObserver = new MutationObserver(updateLang)\n  langObserver.observe(document.documentElement, { attributes: true, attributeFilter: ['lang'] })\n\n  themeObserver = new MutationObserver(updateTheme)\n  themeObserver.observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] })\n\n  storageHandler = () => {\n    updateLang()\n    updateTheme()\n  }\n  window.addEventListener('storage', storageHandler)\n})\n\nonUnmounted(() => {\n  if (avatarPreview.value) URL.revokeObjectURL(avatarPreview.value)\n  if (langObserver) langObserver.disconnect()\n  if (themeObserver) themeObserver.disconnect()\n  if (storageHandler) window.removeEventListener('storage', storageHandler)\n})\n</script>\n\n<template>\n  <div class=\"settings\" :dir=\"isRTL ? 'rtl' : 'ltr'\" :data-theme=\"theme\">\n    <header class=\"settings__header\">\n      <Sparkles class=\"heading-icon\" />\n      <h1 class=\"page-title\">{{ strings.title }}</h1>\n    </header>\n\n    <div class=\"settings__grid\">\n      <section class=\"settings-card profile-card\">\n        <header class=\"card-header\">\n          <div class=\"title\">\n            <ImageIcon class=\"icon\" />\n            <div>\n              <h2>{{ strings.avatarTitle }}</h2>\n              <p>{{ strings.avatarHint }}</p>\n            </div>\n          </div>\n        </header>\n        <div class=\"card-body\">\n          <div class=\"avatar-stack\">\n            <div class=\"avatar-orbit\">\n              <div class=\"avatar-ring\">\n                <img v-if=\"avatarUrl\" :src=\"avatarUrl\" alt=\"avatar preview\" />\n                <span v-else>{{ fallbackInitial }}</span>\n              </div>\n            </div>\n            <span class=\"display-name\">{{ displayName }}</span>\n          </div>\n\n          <div class=\"controls\">\n            <label class=\"btn ghost\" data-ripple>\n              <Upload class=\"icon\" />\n              <span>{{ strings.chooseFile }}</span>\n              <input type=\"file\" accept=\"image/*\" @change=\"handleFileChange\" hidden />\n            </label>\n            <button v-if=\"avatarFile\" type=\"button\" class=\"btn subtle\" data-ripple @click=\"clearSelection\">{{ strings.cancel }}</button>\n            <button type=\"button\" class=\"btn solid\" data-ripple :disabled=\"avatarStatus.loading\" @click=\"uploadAvatar\">\n              <Loader2 v-if=\"avatarStatus.loading\" class=\"icon spinner\" />\n              <ImageIcon v-else class=\"icon\" />\n              <span>{{ avatarStatus.loading ? strings.loading : strings.upload }}</span>\n            </button>\n          </div>\n\n          <transition name=\"fade-slide\" mode=\"out-in\">\n            <p v-if=\"avatarStatus.message\" key=\"avatar-ok\" class=\"status success\">\n              <ShieldCheck class=\"icon\" />\n              <span>{{ avatarStatus.message }}</span>\n            </p>\n          </transition>\n          <transition name=\"fade-slide\" mode=\"out-in\">\n            <p v-if=\"avatarStatus.error\" key=\"avatar-err\" class=\"status error\">{{ avatarStatus.error }}</p>\n          </transition>\n        </div>\n      </section>\n\n      <section class=\"settings-card password-card\">\n        <header class=\"card-header\">\n          <div class=\"title\">\n            <KeyRound class=\"icon\" />\n            <div>\n              <h2>{{ strings.passwordTitle }}</h2>\n              <p>{{ strings.formHint }}</p>\n            </div>\n          </div>\n        </header>\n\n        <form class=\"card-body password-form\" @submit.prevent=\"updatePassword\">\n          <div class=\"verify-block\">\n            <label>\n              <span>{{ strings.currentPassword }}</span>\n              <input type=\"password\" v-model=\"passwordForm.current\" autocomplete=\"current-password\" />\n            </label>\n            <button type=\"button\" class=\"btn solid\" data-ripple :disabled=\"verifyState.loading\" @click=\"verifyCurrent\">\n              <Loader2 v-if=\"verifyState.loading\" class=\"icon spinner\" />\n              <Check v-else class=\"icon\" />\n              <span>{{ verifyState.loading ? strings.loading : strings.verify }}</span>\n            </button>\n            <transition name=\"fade-slide\" mode=\"out-in\">\n              <p v-if=\"verifyState.message\" key=\"verify-ok\" class=\"status success\">\n                <ShieldCheck class=\"icon\" />\n                <span>{{ verifyState.message }}</span>\n              </p>\n            </transition>\n            <transition name=\"fade-slide\" mode=\"out-in\">\n              <p v-if=\"verifyState.error\" key=\"verify-err\" class=\"status error\">{{ verifyState.error }}</p>\n            </transition>\n          </div>\n\n          <transition name=\"panel-grow\">\n            <div v-if=\"verifyState.verified\" class=\"password-fields\">\n              <label>\n                <span>{{ strings.newPassword }}</span>\n                <input type=\"password\" v-model=\"passwordForm.next\" autocomplete=\"new-password\" required />\n              </label>\n              <label>\n                <span>{{ strings.confirmPassword }}</span>\n                <input type=\"password\" v-model=\"passwordForm.confirm\" autocomplete=\"new-password\" required />\n              </label>\n              <div class=\"form-actions\">\n                <button class=\"btn success\" data-ripple type=\"submit\" :disabled=\"passwordStatus.loading\">\n                  <Loader2 v-if=\"passwordStatus.loading\" class=\"icon spinner\" />\n                  <Check v-else class=\"icon\" />\n                  <span>{{ passwordStatus.loading ? strings.loading : strings.savePassword }}</span>\n                </button>\n                <button type=\"button\" class=\"btn subtle\" data-ripple @click=\"resetPasswordForm\">\n                  <RefreshCw class=\"icon\" />\n                  <span>{{ strings.reset }}</span>\n                </button>\n              </div>\n              <transition name=\"fade-slide\" mode=\"out-in\">\n                <p v-if=\"passwordStatus.message\" key=\"pass-ok\" class=\"status success\">\n                  <ShieldCheck class=\"icon\" />\n                  <span>{{ passwordStatus.message }}</span>\n                </p>\n              </transition>\n              <transition name=\"fade-slide\" mode=\"out-in\">\n                <p v-if=\"passwordStatus.error\" key=\"pass-err\" class=\"status error\">{{ passwordStatus.error }}</p>\n              </transition>\n            </div>\n          </transition>\n        </form>\n      </section>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.settings{\n  display:flex;\n  flex-direction:column;\n  gap:28px;\n  width:min(1100px,100%);\n  margin:0 auto;\n  padding:24px 20px 48px;\n}\n.settings__header{display:flex;align-items:center;gap:12px}\n.heading-icon{width:24px;height:24px;color:#c8a03b;filter:drop-shadow(0 6px 12px rgba(200,160,59,0.35))}\n.page-title{margin:0;font-size:2rem;font-weight:800}\n\n.settings__grid{\n  display:grid;\n  gap:24px;\n  grid-template-columns:repeat(auto-fit,minmax(320px,1fr));\n}\n\n.settings-card{\n  position:relative;\n  display:flex;\n  flex-direction:column;\n  gap:18px;\n  padding:24px 26px;\n  border-radius:30px;\n  background:linear-gradient(140deg,rgba(15,138,62,0.1),rgba(200,160,59,0.14));\n  border:1px solid rgba(200,160,59,0.22);\n  box-shadow:0 30px 60px rgba(15,138,62,0.18);\n  overflow:hidden;\n}\n.settings-card::after{\n  content:\"\";\n  position:absolute;\n  inset:auto -30% -40% 0;\n  height:160px;\n  background:linear-gradient(140deg,rgba(200,160,59,0.25),transparent);\n  opacity:.4;\n}\n[data-theme=\"dark\"] .settings-card{\n  background:linear-gradient(140deg,rgba(15,138,62,0.28),rgba(21,32,43,0.82));\n  border-color:rgba(200,160,59,0.32);\n  box-shadow:0 32px 70px rgba(0,0,0,0.55);\n}\n\n.card-header{position:relative;z-index:1;display:flex;flex-direction:column;gap:12px}\n.card-header .title{display:flex;align-items:flex-start;gap:14px}\n.card-header .icon{width:28px;height:28px;color:#0f8a3e}\n.card-header h2{margin:0;font-size:1.4rem;font-weight:700}\n.card-header p{margin:4px 0 0;color:rgba(17,24,39,0.65)}\n[data-theme=\"dark\"] .card-header .icon{color:#f4d67c}\n[data-theme=\"dark\"] .card-header p{color:rgba(255,255,255,0.65)}\n\n.card-body{position:relative;z-index:1;display:flex;flex-direction:column;gap:20px}\n\n.avatar-stack{display:flex;align-items:center;gap:18px}\n.avatar-orbit{position:relative;width:120px;height:120px;display:flex;align-items:center;justify-content:center}\n.avatar-orbit::after{\n  content:\"\";\n  position:absolute;\n  inset:-6px;\n  border-radius:50%;\n  background:radial-gradient(circle,rgba(200,160,59,0.4),transparent 65%);\n  filter:blur(12px);\n  opacity:.65;\n}\n.avatar-ring{\n  position:relative;\n  width:104px;\n  height:104px;\n  border-radius:50%;\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  background:linear-gradient(135deg,rgba(255,255,255,0.9),rgba(248,238,212,0.9));\n  border:3px solid rgba(200,160,59,0.55);\n  box-shadow:0 18px 36px rgba(15,138,62,0.22);\n  overflow:hidden;\n  font-size:2.8rem;\n  font-weight:800;\n  color:#0f8a3e;\n}\n.avatar-ring img{width:100%;height:100%;object-fit:cover}\n[data-theme=\"dark\"] .avatar-ring{background:linear-gradient(135deg,rgba(27,32,38,0.95),rgba(18,21,24,0.92));color:#f4d67c}\n\n.display-name{font-size:1.3rem;font-weight:700}\n\n.controls{display:flex;gap:12px;flex-wrap:wrap}\n.btn{\n  display:inline-flex;\n  align-items:center;\n  gap:8px;\n  padding:10px 16px;\n  border-radius:14px;\n  font-weight:600;\n  cursor:pointer;\n  border:1px solid transparent;\n  transition:transform .2s ease, box-shadow .2s ease, background .2s ease;\n}\n.btn .icon{width:18px;height:18px}\n.btn .spinner{animation:spin .9s linear infinite}\n.btn:disabled{opacity:.6;cursor:not-allowed}\n.btn:hover:not(:disabled){transform:translateY(-2px)}\n\n.btn.ghost{background:rgba(15,138,62,0.12);border-color:rgba(15,138,62,0.18);color:#0f8a3e}\n.btn.ghost:hover{box-shadow:0 14px 28px rgba(15,138,62,0.18)}\n.btn.solid{background:linear-gradient(135deg,#c8a03b,#0f8a3e);color:#fff;box-shadow:0 16px 36px rgba(15,138,62,0.22)}\n.btn.solid:hover{box-shadow:0 22px 44px rgba(15,138,62,0.28)}\n.btn.subtle{background:rgba(255,255,255,0.55);border-color:rgba(200,160,59,0.28);color:#7a5a13}\n.btn.success{background:linear-gradient(135deg,#22c55e,#0f8a3e);color:#fff;border-color:rgba(34,197,94,0.4);box-shadow:0 16px 34px rgba(34,197,94,0.25)}\n[data-theme=\"dark\"] .btn.subtle{background:rgba(21,32,43,0.7);color:#f4d67c}\n[data-theme=\"dark\"] .btn.ghost{background:rgba(200,160,59,0.22);color:#f4d67c}\n\n.status{display:flex;align-items:center;gap:8px;font-weight:600}\n.status.success{color:#0f8a3e}\n.status.error{color:#dc2626}\n[data-theme=\"dark\"] .status.success{color:#f4d67c}\n\n.password-form{display:flex;flex-direction:column;gap:18px}\n.verify-block{display:flex;flex-direction:column;gap:12px;background:rgba(255,255,255,0.38);padding:16px 18px;border-radius:20px;border:1px solid rgba(200,160,59,0.18)}\n.verify-block label{display:flex;flex-direction:column;gap:6px;font-weight:600}\n.verify-block input{border-radius:12px;border:1px solid rgba(17,24,39,0.18);padding:10px 12px;font-size:1rem}\n.verify-block input:focus{outline:none;border-color:#0f8a3e;box-shadow:0 0 0 3px rgba(15,138,62,0.18)}\n[data-theme=\"dark\"] .verify-block{background:rgba(21,32,43,0.72);border-color:rgba(200,160,59,0.28)}\n[data-theme=\"dark\"] .verify-block input{background:rgba(12,18,20,0.92);color:#f4f4f4;border-color:rgba(200,160,59,0.25)}\n\n.password-fields{display:flex;flex-direction:column;gap:16px;padding:8px 0}\n.password-fields label{display:flex;flex-direction:column;gap:6px;font-weight:600}\n.password-fields input{border-radius:12px;border:1px solid rgba(17,24,39,0.18);padding:10px 12px;font-size:1rem}\n.password-fields input:focus{outline:none;border-color:#0f8a3e;box-shadow:0 0 0 3px rgba(15,138,62,0.18)}\n\n.form-actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:4px}\n\n.fade-slide-enter-active,.fade-slide-leave-active{transition:opacity .25s ease, transform .25s ease}\n.fade-slide-enter-from,.fade-slide-leave-to{opacity:0;transform:translateY(6px)}\n\n.panel-grow-enter-active,.panel-grow-leave-active{transition:opacity .28s ease, transform .28s ease}\n.panel-grow-enter-from,.panel-grow-leave-to{opacity:0;transform:scale(.95)}\n\n@keyframes spin{to{transform:rotate(360deg)}}\n\n@media (max-width: 720px){\n  .settings{padding:20px 16px 36px}\n  .settings-card{padding:20px}\n  .avatar-stack{flex-direction:column;align-items:flex-start}\n  .avatar-orbit{width:108px;height:108px}\n  .avatar-ring{width:92px;height:92px}\n}\n</style>\n","<script setup>\nimport { ref, computed, reactive, onMounted, onUnmounted, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport {\n  Target, Settings, LogOut, ChevronDown, Sun, Moon,\n  Hand, ChevronLeft, Menu, Crown, Loader2\n} from 'lucide-vue-next'\n\nimport Challenge1 from '@/pages/challenges/challenge_1.vue'\nimport Challenge2 from '@/pages/challenges/challenge_2.vue'\nimport Challenge3 from '@/pages/challenges/challenge_3.vue'\nimport Challenge4 from '@/pages/challenges/challenge_4.vue'\nimport Challenge5 from '@/pages/challenges/challenge_5.vue'\nimport Challenge6 from '@/pages/challenges/challenge_6.vue'\nimport Challenge7 from '@/pages/challenges/challenge_7.vue'\nimport challenge_level_two_1 from '@/pages/challenges/challenge_level_two_1.vue'\nimport challenge_level_two_2 from '@/pages/challenges/challenge_level_two_2.vue'\nimport challenge_level_two_3 from '@/pages/challenges/challenge_level_two_3.vue'\nimport challenge_level_two_4 from '@/pages/challenges/challenge_level_two_4.vue'\nimport challenge_level_two_5 from '@/pages/challenges/challenge_level_two_5.vue'\nimport challenge_level_two_6 from '@/pages/challenges/challenge_level_two_6.vue'\nimport challenge_level_three_1 from '@/pages/challenges/challenge_level_three_1.vue'\nimport challenge_level_three_2 from '@/pages/challenges/challenge_level_three_2.vue'\nimport challenge_level_three_3 from '@/pages/challenges/challenge_level_three_3.vue'\nimport challenge_level_three_4 from '@/pages/challenges/challenge_level_three_4.vue'\nimport challenge_level_three_5 from '@/pages/challenges/challenge_level_three_5.vue'\nimport challenge_level_three_6 from '@/pages/challenges/challenge_level_three_6.vue'\nimport challenge_level_three_7 from '@/pages/challenges/challenge_level_three_7.vue'\nimport challenge_level_three_8 from '@/pages/challenges/challenge_level_three_8.vue'\nimport MyScores from '@/pages/other/my_scores.vue'\nimport SettingsPage from '@/pages/other/settings.vue'\nimport { useGameScore } from '@/composables/useGameScore'\nimport { onToast } from '@/utils/toastBus'\n\nconst router = useRouter()\nconst props = defineProps({ view: { type: String, default: '' } })\n\nconst levels = [\n  {\n    id: 'level1',\n    label: { ar: ' ', en: 'Level One' },\n    challenges: [\n      { id: 'challenge_1', component: Challenge1, symbol: '', label: { ar: ' 1', en: 'Challenge 1' }, summary: { ar: '     .', en: 'Complete a column addition puzzle with hidden digits.' } },\n      { id: 'challenge_2', component: Challenge2, symbol: '', label: { ar: ' 2', en: 'Challenge 2' }, summary: { ar: '       .', en: 'Fill a number grid that increases by a fixed step.' } },\n      { id: 'challenge_3', component: Challenge3, symbol: '', label: { ar: ' 3', en: 'Challenge 3' }, summary: { ar: '      .', en: 'Pick the number pair that matches the given sum and difference.' } },\n      { id: 'challenge_4', component: Challenge4, symbol: '', label: { ar: ' 4', en: 'Challenge 4' }, summary: { ar: '   .', en: 'Complete the mini multiplication table.' } },\n      { id: 'challenge_5', component: Challenge5, symbol: '', label: { ar: ' 5', en: 'Challenge 5' }, summary: { ar: '    .', en: 'Fill in the edge products of the triangle.' } },\n      { id: 'challenge_6', component: Challenge6, symbol: '', label: { ar: ' 6', en: 'Challenge 6' }, summary: { ar: '        .', en: 'Pick three distinct-row/column cells to reach the target sum.' } },\n      { id: 'challenge_7', component: Challenge7, symbol: '', label: { ar: ' 7', en: 'Challenge 7' }, summary: { ar: '     .', en: 'Complete the sum pyramid with the correct values.' } },\n    ],\n  },\n  {\n    id: 'level2',\n    label: { ar: ' ', en: 'Level Two' },\n    challenges: [\n      { id: 'challenge_level_two_1', component: challenge_level_two_1, symbol: '', label: { ar: ' 1', en: 'Challenge 1' }, summary: { ar: '    1  5  .', en: 'Build an expression that uses digits 15 exactly once.' } },\n      { id: 'challenge_level_two_2', component: challenge_level_two_2, symbol: '', label: { ar: ' 2', en: 'Challenge 2' }, summary: { ar: '    .', en: 'Complete a magic square with equal sums.' } },\n      { id: 'challenge_level_two_3', component: challenge_level_two_3, symbol: '', label: { ar: ' 3', en: 'Challenge 3' }, summary: { ar: '     .', en: 'Match six-digit numbers to divisibility rules.' } },\n      { id: 'challenge_level_two_4', component: challenge_level_two_4, symbol: '', label: { ar: ' 4', en: 'Challenge 4' }, summary: { ar: '     .', en: 'Choose the pair that matches the required sum and difference.' } },\n      { id: 'challenge_level_two_5', component: challenge_level_two_5, symbol: '', label: { ar: ' 5', en: 'Challenge 5' }, summary: { ar: '     .', en: 'Complete the fraction subtraction by placing the right integers.' } },\n      { id: 'challenge_level_two_6', component: challenge_level_two_6, symbol: '', label: { ar: ' 6', en: 'Challenge 6' }, summary: { ar: '    .', en: 'Order the solution steps for the balance puzzle.' } },\n    ],\n  },\n  {\n    id: 'level3',\n    label: { ar: ' ', en: 'Level Three' },\n    challenges: [\n      { id: 'challenge_level_three_1', component: challenge_level_three_1, symbol: '', label: { ar: ' 1', en: 'Challenge 1' }, summary: { ar: '     .', en: 'Rebuild the multiplication pyramid from scattered numbers.' } },\n      { id: 'challenge_level_three_2', component: challenge_level_three_2, symbol: '', label: { ar: ' 2', en: 'Challenge 2' }, summary: { ar: '    .', en: 'An advanced numerical reasoning puzzle.' } },\n      { id: 'challenge_level_three_3', component: challenge_level_three_3, symbol: '', label: { ar: ' 3', en: 'Challenge 3' }, summary: { ar: '    .', en: 'Advanced logic to test your speed.' } },\n      { id: 'challenge_level_three_4', component: challenge_level_three_4, symbol: '', label: { ar: ' 4', en: 'Challenge 4' }, summary: { ar: '    .', en: 'High-level challenge for spotting patterns.' } },\n      { id: 'challenge_level_three_5', component: challenge_level_three_5, symbol: '', label: { ar: ' 5', en: 'Challenge 5' }, summary: { ar: '     .', en: 'A numeric problem that needs careful steps.' } },\n      { id: 'challenge_level_three_6', component: challenge_level_three_6, symbol: '', label: { ar: ' 6', en: 'Challenge 6' }, summary: { ar: '     .', en: 'Strategic puzzle solved step by step.' } },\n      { id: 'challenge_level_three_7', component: challenge_level_three_7, symbol: '', label: { ar: ' 7', en: 'Challenge 7' }, summary: { ar: '   .', en: 'Fast-paced numeric logic test.' } },\n      { id: 'challenge_level_three_8', component: challenge_level_three_8, symbol: '', label: { ar: ' 8', en: 'Challenge 8' }, summary: { ar: '     .', en: 'A final puzzle mixing reasoning with speed.' } },\n    ],\n  },\n]\n\nconst levelAccents = {\n  level1: { primary: 'var(--color-primary)', secondary: 'rgba(15,138,62,0.16)' },\n  level2: { primary: 'var(--color-secondary)', secondary: 'rgba(200,160,59,0.22)' },\n  level3: { primary: 'var(--color-accent)', secondary: 'rgba(13,110,140,0.24)' },\n}\nconst fallbackAccent = { primary: 'var(--color-primary)', secondary: 'rgba(15,138,62,0.15)' }\nconst CARD_SYMBOLS = ['','','','','','','','','','','','','','','','','','','','','']\n\nconst cardSymbol = (levelId, challenge, index) => challenge.symbol || CARD_SYMBOLS[index % CARD_SYMBOLS.length] || ''\nconst cardStyle = (levelId, index) => {\n  const palette = levelAccents[levelId] || fallbackAccent\n  return {\n    '--card-accent': palette.primary,\n    '--card-accent-soft': palette.secondary,\n    '--card-index': index,\n  }\n}\n\nconst scoreStore = useGameScore()\nconst dashTiers = [\n  { threshold: 0, title: { ar: '', en: 'Novice' } },\n  { threshold: 25, title: { ar: '', en: 'Skilled' } },\n  { threshold: 80, title: { ar: '', en: 'Leader' } },\n  { threshold: 160, title: { ar: '', en: 'Legend' } },\n]\n\nconst scoreValue = computed(() => Number(scoreStore.score.value || 0))\nconst tierIndex = computed(() => {\n  let idx = 0\n  dashTiers.forEach((tier, index) => {\n    if (scoreValue.value >= tier.threshold) idx = index\n  })\n  return idx\n})\nconst scoreTier = computed(() => dashTiers[tierIndex.value])\nconst nextTier = computed(() => dashTiers[tierIndex.value + 1] || null)\nconst scoreTierName = computed(() => scoreTier.value?.title?.[lang.value] || scoreTier.value?.title?.en || '')\nconst scoreProgress = computed(() => {\n  if (!nextTier.value) return 1\n  const span = nextTier.value.threshold - scoreTier.value.threshold\n  if (span <= 0) return 1\n  return Math.min(1, (scoreValue.value - scoreTier.value.threshold) / span)\n})\nconst scoreFormatter = new Intl.NumberFormat('en-US', { maximumFractionDigits: 0 })\nconst scoreDisplay = computed(() => scoreFormatter.format(scoreValue.value))\nconst rankDisplay = computed(() => {\n  const rank = scoreStore.rank.value\n  return rank ? `#${rank}` : '--'\n})\nconst totalPlayersDisplay = computed(() => {\n  const total = scoreStore.totalPlayers.value\n  return total ? scoreFormatter.format(total) : '--'\n})\nconst scoreLoading = computed(() => scoreStore.loading.value)\nconst scoreProgressPercent = computed(() => Math.round(scoreProgress.value * 100))\nconst avatarUrl = computed(() => scoreStore.profileImage.value || null)\nconst avatarInitial = computed(() => {\n  const source = fullName.value || scoreStore.username.value || username.value || 'P'\n  return source.trim().charAt(0).toUpperCase() || 'P'\n})\nconst scoreDisplayKey = computed(() => (scoreLoading.value ? 'loading' : `score-${scoreValue.value}`))\nconst progressSpring = ref(0)\nconst scorePulse = ref(false)\n\nwatch(scoreProgress, value => {\n  progressSpring.value = value\n}, { immediate: true })\n\nwatch(() => scoreStore.score.value, (next, prev) => {\n  if (prev == null || Number(next) === Number(prev)) return\n  scorePulse.value = false\n  requestAnimationFrame(() => {\n    scorePulse.value = true\n    setTimeout(() => { scorePulse.value = false }, 720)\n  })\n})\n\nfunction viewScores(){\n  goto('/scores')\n}\n\nconst componentRegistry = {}\nlevels.forEach(level => {\n  level.challenges.forEach(challenge => {\n    componentRegistry[challenge.id] = challenge.component\n  })\n})\nconst specialViews = { scores: MyScores, settings: SettingsPage }\n\n/* =================  ================= */\nconst lang = ref(localStorage.getItem('ml_lang') || 'ar')\nconst dir  = computed(() => (lang.value === 'ar' ? 'rtl' : 'ltr'))\nconst T = {\n  ar: {\n    challenges:' ', challenges2:' ', myScores:'', settings:'', logout:'',\n    hello:'', sub:'   !', challenge:'',\n    brand:' ', tagline:'  ', pickPrompt:'     .',\n    cardCTA:' ',\n    scoreWidgetTitle:'', scoreWidgetSubtitle:'   ',\n    scoreWidgetRank:'', scoreWidgetPlayers:' ',\n    scoreWidgetProgress:'  ', scoreWidgetView:' ',\n    scoreWidgetLoading:'  ...',\n    teacherTitle:' ',\n    teacherSubtitle:'  ',\n    teacherMessage:'                .'\n  },\n  en: {\n    challenges:'Level One', challenges2:'Level Two', myScores:'My Scores', settings:'Settings', logout:'Log out',\n    hello:'Hello', sub:'Pick a challenge and start!', challenge:'Challenge',\n    brand:'Math Leaders', tagline:'Interactive mastery journey', pickPrompt:'Select a challenge from the cards below to get started.',\n    cardCTA:'Start challenge',\n    scoreWidgetTitle:'My points', scoreWidgetSubtitle:'Quick glance at your progress',\n    scoreWidgetRank:'Rank', scoreWidgetPlayers:'Players',\n    scoreWidgetProgress:'To next tier', scoreWidgetView:'View details',\n    scoreWidgetLoading:'Refreshing score...',\n    teacherTitle:'Presented by',\n    teacherSubtitle:'Miyaad Safar Al-Malki',\n    teacherMessage:'A heartfelt thanks to Ms. Miyaad Safar Al-Malki for curating these inspiring challenges.'\n  }\n}\nconst t = (k)=>T[lang.value][k]\nconst extraView = computed(() => props.view || '')\nwatch(lang, v=>{\n  localStorage.setItem('ml_lang', v)\n  document.documentElement.dir = dir.value\n  document.documentElement.lang = v\n})\n\n/* =================  ================= */\nconst theme = ref(localStorage.getItem('ml_theme') || 'light')\nconst shellTransitioning = ref(false)\nconst isCompact = ref(false)\nconst globalToasts = ref([])\n\nfunction applyTheme(value){\n  document.documentElement.setAttribute('data-ml-theme', value)\n}\n\nlet disposeToastListener = null\n\nfunction animateShell(){\n  shellTransitioning.value = true\n  window.clearTimeout(animateShell.timer)\n  animateShell.timer = window.setTimeout(() => {\n    shellTransitioning.value = false\n  }, 360)\n}\n\nfunction dismissToast(id){\n  globalToasts.value = globalToasts.value.filter(toast => toast.id !== id)\n}\n\nfunction switchLang(){\n  animateShell()\n  lang.value = lang.value === 'ar' ? 'en' : 'ar'\n}\n\nfunction switchTheme(){\n  animateShell()\n  theme.value = theme.value === 'light' ? 'dark' : 'light'\n}\n\nwatch(theme, v=>{\n  localStorage.setItem('ml_theme', v)\n  applyTheme(v)\n})\n\nfunction handleViewportChange(){\n  if (typeof window === 'undefined') return\n  const compact = window.matchMedia('(max-width: 1024px)').matches\n  isCompact.value = compact\n  if (!compact) {\n    sidebarCollapsed.value = false\n  }\n}\n\nfunction handleClickOutside(event){\n  if (!profileRef.value) return\n  if (!profileRef.value.contains(event.target)) {\n    profileOpen.value = false\n  }\n}\n\n/* ================= GET helper ================= */\nasync function get(url, params = {}) {\n  const qs = new URLSearchParams(params).toString()\n  const r  = await fetch(url + (qs ? `?${qs}` : ''), {\n    method: 'GET',\n    credentials: 'include',\n  })\n  const data = await r.json().catch(()=> ({}))\n  if (!r.ok) throw data\n  return data\n}\n\n/* ================= / ================= */\nconst username = ref('player')\nconst fullName = ref('')\n\nasync function fetchMe(){\n  try {\n    const data = await get('/api/method/mathematics_leaders.api.get_my_details.get_me')\n    const msg  = data?.message\n    if (!msg?.ok) { router.replace('/'); return }\n    const prof = msg.profile || {}\n    username.value = prof.username || 'player'\n    fullName.value = prof.full_name || ''\n    if (prof.language && !localStorage.getItem('ml_lang')) lang.value = prof.language\n  } catch {\n    router.replace('/')\n  }\n}\n\n/* =================   ================= */\nconst profileOpen      = ref(false)\nconst profileRef       = ref(null)\nconst sidebarCollapsed = ref(false)\nconst expandedLevels = reactive(Object.fromEntries(levels.map((lvl) => [lvl.id, false])))\nconst selectedLevel = ref(levels[0]?.id || 'level1')\nconst selectedChallenge = ref(null)\n\nfunction toggleSidebar(){\n  sidebarCollapsed.value = !sidebarCollapsed.value\n}\nfunction goto(path){ router.push(path) }\nasync function logout(){\n  await get('/api/method/logout')\n  router.replace('/')\n}\nfunction toggleLevel(levelId){\n  expandedLevels[levelId] = !expandedLevels[levelId]\n}\nfunction isExpanded(levelId){\n  return !!expandedLevels[levelId]\n}\nfunction selectChallenge(levelId, challengeId){\n  expandedLevels[levelId] = true\n  selectedLevel.value = levelId\n  selectedChallenge.value = challengeId\n  if (isCompact.value) {\n    sidebarCollapsed.value = true\n  }\n  if (router.currentRoute.value.path !== '/home') {\n    router.push('/home')\n  }\n}\nfunction isActiveChallenge(levelId, challengeId){\n  return selectedLevel.value === levelId && selectedChallenge.value === challengeId\n}\n\nconst currentSelection = computed(() => {\n  if (props.view && specialViews[props.view]) {\n    return { level: null, challenge: null }\n  }\n  if (!selectedChallenge.value) {\n    const level = levels.find(l => l.id === selectedLevel.value) || null\n    return { level, challenge: null }\n  }\n  for (const level of levels) {\n    const challenge = level.challenges.find(ch => ch.id === selectedChallenge.value)\n    if (challenge) return { level, challenge }\n  }\n  return { level: levels.find(l => l.id === selectedLevel.value) || null, challenge: null }\n})\nconst currentComponent = computed(() => {\n  if (props.view && specialViews[props.view]) {\n    return specialViews[props.view]\n  }\n  const id = selectedChallenge.value\n  return id ? componentRegistry[id] : null\n})\n\n/* =================  ================= */\nonMounted(()=>{\n  document.documentElement.dir  = dir.value\n  document.documentElement.lang = lang.value\n  applyTheme(theme.value)\n  fetchMe()\n  scoreStore.refresh()\n  handleViewportChange()\n  if (isCompact.value) {\n    sidebarCollapsed.value = true\n  }\n  if (typeof window !== 'undefined') {\n    window.addEventListener('resize', handleViewportChange)\n  }\n  document.addEventListener('click', handleClickOutside)\n  disposeToastListener = onToast(event => {\n    const detail = event.detail || {}\n    if (!detail.message) return\n    const toast = {\n      id: detail.id || Math.random().toString(36).slice(2),\n      message: detail.message,\n      type: detail.type || 'info',\n    }\n    globalToasts.value.push(toast)\n    if (globalToasts.value.length > 4) {\n      globalToasts.value.shift()\n    }\n    const lifetime = Math.max(1500, detail.duration || 2600)\n    window.setTimeout(() => dismissToast(toast.id), lifetime)\n  })\n})\n\nonUnmounted(() => {\n  if (disposeToastListener) disposeToastListener()\n  window.clearTimeout(animateShell.timer)\n  if (typeof window !== 'undefined') {\n    window.removeEventListener('resize', handleViewportChange)\n  }\n  document.removeEventListener('click', handleClickOutside)\n})\n\n/*  */\nconst logoUrl = new URL('../assets/images/logo3.jpeg', import.meta.url).href\n</script>\n\n\n<template>\n  <div :class=\"['dashboard', theme, { transitioning: shellTransitioning }]\" :dir=\"dir\">\n    <div class=\"dashboard__background\" aria-hidden=\"true\">\n      <span class=\"glow glow-one\"></span>\n      <span class=\"glow glow-two\"></span>\n      <span class=\"glow glow-three\"></span>\n      <span class=\"mesh\"></span>\n    </div>\n\n    <transition-group name=\"toast-fade\" tag=\"div\" class=\"toasts\" aria-live=\"polite\">\n      <div v-for=\"toast in globalToasts\" :key=\"toast.id\" class=\"toast\" :class=\"toast.type\">\n        <span class=\"toast__dot\"></span>\n        <p>{{ toast.message }}</p>\n        <button type=\"button\" class=\"toast__close\" @click=\"dismissToast(toast.id)\"></button>\n      </div>\n    </transition-group>\n\n    <header class=\"dashboard__topbar\">\n      <div class=\"topbar__left\">\n        <button\n          v-if=\"isCompact\"\n          class=\"topbar__menu\"\n          type=\"button\"\n          @click=\"toggleSidebar\"\n          :aria-expanded=\"!sidebarCollapsed\"\n          :aria-label=\"sidebarCollapsed ? (lang === 'ar' ? '  ' : 'Open challenges') : (lang === 'ar' ? '  ' : 'Hide challenges')\"\n        >\n          <Menu v-if=\"sidebarCollapsed\" />\n          <ChevronLeft v-else :style=\"{ transform: dir === 'rtl' ? 'scaleX(-1)' : '' }\" />\n        </button>\n\n        <div class=\"brand-chip\">\n          <div class=\"brand-chip__logo\">\n            <img :src=\"logoUrl\" alt=\"logo\" />\n          </div>\n          <div class=\"brand-chip__text\">\n            <span class=\"brand-chip__title\">{{ T[lang].brand }}</span>\n            <span class=\"brand-chip__subtitle\">{{ T[lang].tagline }}</span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"topbar__center\">\n        <Hand class=\"wave\" />\n        <div class=\"greet\">\n          <h1>{{ T[lang].hello }} {{ fullName || username }}</h1>\n          <p>{{ t('sub') }}</p>\n        </div>\n      </div>\n\n      <div class=\"topbar__actions\">\n        <button\n          class=\"action-btn\"\n          type=\"button\"\n          :aria-label=\"theme === 'dark' ? (lang === 'ar' ? '   ' : 'Switch to light theme') : (lang === 'ar' ? '   ' : 'Switch to dark theme')\"\n          @click=\"switchTheme\"\n        >\n          <Sun v-if=\"theme === 'light'\" />\n          <Moon v-else />\n        </button>\n\n        <button\n          class=\"action-btn\"\n          type=\"button\"\n          :aria-label=\"lang === 'ar' ? 'Switch to English' : '  '\"\n          @click=\"switchLang\"\n        >\n          {{ lang === 'ar' ? 'EN' : '' }}\n        </button>\n\n        <div class=\"profile\" ref=\"profileRef\" @click.stop=\"profileOpen = !profileOpen\">\n          <div class=\"avatar\">\n            <span v-if=\"avatarUrl\" class=\"avatar__image\" :style=\"{ backgroundImage: `url(${avatarUrl})` }\"></span>\n            <span v-else class=\"avatar__initial\">{{ avatarInitial }}</span>\n          </div>\n          <div class=\"profile__text\">\n            <span class=\"profile__name\">{{ fullName || username }}</span>\n            <span class=\"profile__meta\">{{ T[lang].brand }}</span>\n          </div>\n          <ChevronDown class=\"profile__chevron\" :class=\"{ open: profileOpen }\" />\n          <transition name=\"fade\">\n            <ul v-if=\"profileOpen\" class=\"profile__menu\">\n              <li>\n                <button type=\"button\" @click=\"goto('/settings')\">\n                  <Settings /> <span>{{ T[lang].settings }}</span>\n                </button>\n              </li>\n              <li>\n                <button type=\"button\" class=\"danger\" @click=\"logout\">\n                  <LogOut /> <span>{{ T[lang].logout }}</span>\n                </button>\n              </li>\n            </ul>\n          </transition>\n        </div>\n      </div>\n    </header>\n\n    <main class=\"dashboard__main\">\n      <section class=\"overview-grid\">\n        <article class=\"welcome-card\">\n          <div class=\"welcome-card__icon\">\n            <Crown />\n          </div>\n          <div class=\"welcome-card__copy\">\n            <h2>{{ T[lang].brand }}</h2>\n            <p>{{ T[lang].pickPrompt }}</p>\n          </div>\n          <div class=\"welcome-card__metrics\">\n            <div class=\"metric\">\n              <span class=\"metric__label\">{{ T[lang].scoreWidgetRank }}</span>\n              <strong>{{ scoreRankDisplay }}</strong>\n            </div>\n            <div class=\"metric\">\n              <span class=\"metric__label\">{{ T[lang].scoreWidgetPlayers }}</span>\n              <strong>{{ totalPlayersDisplay }}</strong>\n            </div>\n          </div>\n        </article>\n\n        <article class=\"score-card\" :class=\"{ loading: scoreLoading, pulse: scorePulse }\" :aria-busy=\"scoreLoading\">\n          <div v-if=\"scoreLoading\" class=\"score-card__overlay\" aria-hidden=\"true\">\n            <Loader2 class=\"overlay-spinner\" />\n          </div>\n          <div class=\"score-card__ring\">\n            <svg viewBox=\"0 0 120 120\" role=\"presentation\">\n              <defs>\n                <linearGradient id=\"dashboardScoreGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n                  <stop offset=\"0%\" stop-color=\"#c6a034\" />\n                  <stop offset=\"100%\" stop-color=\"#0f8a3e\" />\n                </linearGradient>\n              </defs>\n              <circle class=\"ring-bg\" cx=\"60\" cy=\"60\" r=\"52\" />\n              <circle class=\"ring-fg\" cx=\"60\" cy=\"60\" r=\"52\" stroke=\"url(#dashboardScoreGradient)\" :style=\"{ '--progress': progressSpring }\" />\n            </svg>\n            <div class=\"score-card__center\">\n              <transition name=\"score-flip\" mode=\"out-in\">\n                <span class=\"score-card__points\" :key=\"scoreDisplayKey\">{{ scoreLoading ? '...' : scoreDisplay }}</span>\n              </transition>\n              <small>{{ T[lang].scoreWidgetTitle }}</small>\n            </div>\n          </div>\n          <div class=\"score-card__details\">\n            <span class=\"score-card__tier\">{{ scoreTierName }}</span>\n            <p class=\"score-card__subtitle\">\n              {{ scoreLoading ? T[lang].scoreWidgetLoading : T[lang].scoreWidgetSubtitle }}\n            </p>\n            <div\n              class=\"progress\"\n              role=\"progressbar\"\n              :aria-valuenow=\"scoreProgressPercent\"\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            >\n              <div class=\"progress__track\">\n                <div class=\"progress__fill\" :style=\"{ '--progress': progressSpring }\"></div>\n              </div>\n              <div class=\"progress__meta\">\n                <span>{{ scoreProgressPercent }}%</span>\n                <button type=\"button\" class=\"progress__link\" @click=\"viewScores\">{{ T[lang].scoreWidgetView }}</button>\n              </div>\n            </div>\n          </div>\n        </article>\n\n        <article class=\"mentor-card\">\n          <div class=\"mentor-card__badge\">{{ T[lang].teacherTitle }}</div>\n          <h3>{{ T[lang].teacherSubtitle }}</h3>\n          <p>{{ T[lang].teacherMessage }}</p>\n        </article>\n      </section>\n\n      <section class=\"challenge-section\">\n        <aside class=\"challenge-list\" :class=\"{ collapsed: sidebarCollapsed && isCompact }\">\n          <header class=\"challenge-list__header\">\n            <h2>{{ T[lang].challenge }}</h2>\n            <p>{{ T[lang].pickPrompt }}</p>\n          </header>\n\n          <div class=\"levels\">\n            <div class=\"level-block\" v-for=\"level in levels\" :key=\"level.id\">\n              <button type=\"button\" class=\"level-head\" @click=\"toggleLevel(level.id)\">\n                <div class=\"level-head__info\">\n                  <Target class=\"level-head__icon\" />\n                  <span class=\"level-head__title\">{{ level.label[lang] }}</span>\n                </div>\n                <span class=\"level-head__count\">{{ level.challenges.length }}</span>\n                <ChevronDown class=\"level-head__chevron\" :class=\"{ open: isExpanded(level.id) }\" />\n              </button>\n              <transition name=\"fade\">\n                <div v-if=\"isExpanded(level.id)\" class=\"challenge-cards\">\n                  <button\n                    v-for=\"challenge in level.challenges\"\n                    :key=\"challenge.id\"\n                    type=\"button\"\n                    class=\"challenge-card\"\n                    :class=\"{ active: isActiveChallenge(level.id, challenge.id) }\"\n                    @click=\"selectChallenge(level.id, challenge.id)\"\n                  >\n                    <span class=\"challenge-card__symbol\">{{ challenge.symbol }}</span>\n                    <div class=\"challenge-card__body\">\n                      <span class=\"challenge-card__title\">{{ challenge.label[lang] }}</span>\n                      <p class=\"challenge-card__summary\">{{ challenge.summary[lang] }}</p>\n                    </div>\n                    <span class=\"challenge-card__cta\">{{ T[lang].cardCTA }}</span>\n                  </button>\n                </div>\n              </transition>\n            </div>\n          </div>\n       \n            <div class=\"logout-block\">\n            <button type=\"button\" class=\"logout-btn\" @click=\"logout\">\n              <LogOut />\n              <span>{{ T[lang].logout }}</span>\n            </button>\n          </div>\n </aside>\n        <div class=\"challenge-preview\">\n          <div class=\"preview-header\">\n            <span v-if=\"currentSelection.level\" class=\"preview-pill\">{{ currentSelection.level.label[lang] }}</span>\n            <div class=\"preview-text\">\n              <h3 v-if=\"extraView === 'scores'\">{{ T[lang].myScores }}</h3>\n              <h3 v-else-if=\"extraView === 'settings'\">{{ T[lang].settings }}</h3>\n              <h3 v-else-if=\"currentSelection.challenge\">{{ currentSelection.challenge.label[lang] }}</h3>\n              <h3 v-else>{{ T[lang].brand }}</h3>\n\n              <p v-if=\"currentSelection.challenge\">{{ currentSelection.challenge.summary[lang] }}</p>\n              <p v-else-if=\"extraView === 'scores'\">{{ T[lang].scoreWidgetSubtitle }}</p>\n              <p v-else-if=\"extraView === 'settings'\">{{ T[lang].settings }}</p>\n              <p v-else>{{ T[lang].pickPrompt }}</p>\n            </div>\n          </div>\n\n          <div class=\"preview-surface\">\n            <transition name=\"preview-fade\" mode=\"out-in\">\n              <component\n                v-if=\"currentComponent\"\n                :is=\"currentComponent\"\n                :key=\"extraView || currentSelection.challenge?.id || 'welcome'\"\n                class=\"preview-component\"\n                v-bind=\"{ lang, theme }\"\n              />\n              <div v-else class=\"preview-placeholder\" key=\"placeholder\">\n                <Crown />\n                <p>{{ T[lang].pickPrompt }}</p>\n              </div>\n            </transition>\n          </div>\n        </div>\n      </section>\n    </main>\n  </div>\n</template>\n\n<style scoped>\n.dashboard {\n  position: relative;\n  min-height: 100vh;\n  padding: clamp(28px, 6vw, 64px);\n  display: flex;\n  flex-direction: column;\n  gap: clamp(28px, 5vw, 44px);\n  background: var(--bg-gradient);\n  color: var(--text-primary);\n  transition: background 0.4s ease, color 0.4s ease;\n  overflow-x: hidden;\n  --bg-gradient: linear-gradient(135deg, #fdfcf8 0%, #f2f5ef 45%, #e6efe2 100%);\n  --text-primary: #1f2a24;\n  --text-secondary: #375447;\n  --text-muted: #5f7669;\n  --card-surface: rgba(255, 255, 255, 0.92);\n  --card-soft: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.7));\n  --card-border: rgba(198, 160, 52, 0.28);\n  --card-shadow: 0 28px 58px rgba(31, 42, 36, 0.18);\n  --glass-surface: rgba(255,255,255,0.78);\n  --glass-border: rgba(198,160,52,0.2);\n  --accent-green: #0f8a3e;\n  --accent-green-dark: #1c6b39;\n  --accent-gold: #c6a034;\n  --accent-gold-soft: rgba(198,160,52,0.38);\n  --chip-bg: rgba(15,138,62,0.12);\n  --chip-color: #0f8a3e;\n  --badge-bg: rgba(15,138,62,0.16);\n  --badge-color: #0f8a3e;\n  --outline: rgba(15,138,62,0.35);\n  --grid-color: rgba(31, 42, 36, 0.08);\n  --grid-opacity: 0.4;\n  --control-shadow: 0 18px 32px rgba(15,138,62,0.22);\n  --control-shadow-hover: 0 24px 42px rgba(15,138,62,0.28);\n  --toast-surface: linear-gradient(135deg, rgba(15,138,62,0.92), rgba(198,160,52,0.82));\n}\n\n.dashboard.dark {\n  --bg-gradient: linear-gradient(135deg, #040b07 0%, #102017 45%, #050f0a 100%);\n  --text-primary: #f4f8f5;\n  --text-secondary: #c5ded0;\n  --text-muted: #9eb6a9;\n  --card-surface: rgba(11, 23, 18, 0.9);\n  --card-soft: linear-gradient(135deg, rgba(28,45,35,0.92), rgba(10,22,16,0.82));\n  --card-border: rgba(90, 212, 140, 0.24);\n  --card-shadow: 0 32px 64px rgba(0, 0, 0, 0.48);\n  --glass-surface: rgba(18,32,26,0.78);\n  --glass-border: rgba(90,212,140,0.28);\n  --accent-green: #5ad48c;\n  --accent-green-dark: #2f9a54;\n  --accent-gold: #d6ba68;\n  --accent-gold-soft: rgba(214,186,104,0.48);\n  --chip-bg: rgba(214,186,104,0.18);\n  --chip-color: #f5d98a;\n  --badge-bg: rgba(90,212,140,0.16);\n  --badge-color: #edfaef;\n  --outline: rgba(90,212,140,0.42);\n  --grid-color: rgba(255, 255, 255, 0.08);\n  --grid-opacity: 0.2;\n  --control-shadow: 0 22px 40px rgba(0,0,0,0.45);\n  --control-shadow-hover: 0 30px 52px rgba(0,0,0,0.55);\n  --toast-surface: linear-gradient(135deg, rgba(54,171,110,0.92), rgba(214,186,104,0.86));\n}\n\n.dashboard__background {\n  position: absolute;\n  inset: 0;\n  pointer-events: none;\n  z-index: 0;\n}\n\n.glow {\n  position: absolute;\n  filter: blur(140px);\n  opacity: 0.6;\n  transition: opacity 0.4s ease;\n}\n\n.glow-one {\n  top: -12%;\n  left: 10%;\n  width: 360px;\n  height: 360px;\n  background: rgba(15,138,62,0.42);\n}\n\n.glow-two {\n  bottom: -24%;\n  right: 18%;\n  width: 460px;\n  height: 460px;\n  background: rgba(198,160,52,0.42);\n}\n\n.glow-three {\n  top: 35%;\n  right: 40%;\n  width: 280px;\n  height: 280px;\n  background: rgba(255,255,255,0.4);\n}\n\n.dashboard.dark .glow-three {\n  background: rgba(40,65,52,0.52);\n}\n\n.mesh {\n  position: absolute;\n  inset: 0;\n  background-image: radial-gradient(circle at 1px 1px, var(--grid-color) 1px, transparent 0);\n  background-size: 32px 32px;\n  opacity: var(--grid-opacity);\n}\n\n.toasts {\n  position: fixed;\n  top: clamp(12px, 2vw, 20px);\n  inset-inline: 0;\n  display: grid;\n  justify-content: center;\n  gap: 12px;\n  z-index: 200;\n  pointer-events: none;\n}\n\n.toast {\n  pointer-events: auto;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 18px;\n  border-radius: 999px;\n  background: var(--toast-surface);\n  color: #ffffff;\n  box-shadow: var(--control-shadow);\n  backdrop-filter: blur(10px);\n}\n\n.toast.success {\n  background: linear-gradient(135deg, rgba(34,197,94,0.92), rgba(15,138,62,0.9));\n}\n\n.toast.danger {\n  background: linear-gradient(135deg, rgba(214,76,66,0.92), rgba(143,44,36,0.9));\n}\n\n.toast__dot {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background: rgba(255,255,255,0.82);\n}\n\n.toast__close {\n  border: none;\n  background: transparent;\n  color: inherit;\n  font-size: 18px;\n  cursor: pointer;\n  padding: 0;\n  line-height: 1;\n  opacity: 0.85;\n}\n\n.toast__close:hover {\n  opacity: 1;\n}\n\n.toast-fade-enter-active,\n.toast-fade-leave-active {\n  transition: opacity 0.25s ease, transform 0.25s ease;\n}\n\n.toast-fade-enter-from,\n.toast-fade-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.dashboard__topbar {\n  position: relative;\n  z-index: 5;\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  align-items: center;\n  gap: clamp(16px, 3vw, 24px);\n}\n\n.topbar__left {\n  display: flex;\n  align-items: center;\n  gap: 14px;\n}\n\n.topbar__menu {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 48px;\n  height: 48px;\n  border-radius: 16px;\n  border: none;\n  background: linear-gradient(135deg, var(--accent-green), var(--accent-gold));\n  color: #ffffff;\n  cursor: pointer;\n  box-shadow: var(--control-shadow);\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\n}\n\n.topbar__menu:hover {\n  transform: translateY(-2px);\n  box-shadow: var(--control-shadow-hover);\n}\n\n\n.brand-chip {\n  display: inline-flex;\n  align-items: center;\n  gap: 18px;\n  padding: 18px 24px;\n  border-radius: 32px;\n  background: var(--card-soft);\n  border: 1px solid var(--card-border);\n  box-shadow: 0 24px 48px rgba(15, 23, 42, 0.14);\n  backdrop-filter: blur(20px);\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\n}\n\n.brand-chip:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 30px 60px rgba(15, 23, 42, 0.18);\n}\n\n.brand-chip__logo {\n  width: 78px;\n  height: 78px;\n  border-radius: 24px;\n  background: var(--glass-surface);\n  border: 1px solid var(--glass-border);\n  display: grid;\n  place-items: center;\n  overflow: hidden;\n  box-shadow: 0 18px 32px rgba(15, 138, 62, 0.15);\n}\n\n.brand-chip__logo img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: transform 0.3s ease;\n}\n\n.brand-chip:hover .brand-chip__logo img {\n  transform: scale(1.05);\n}\n\n.brand-chip__text {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.brand-chip__title {\n  font-weight: 800;\n  font-size: 1.1rem;\n  color: var(--text-primary);\n}\n\n.brand-chip__subtitle {\n  font-size: 0.88rem;\n  color: var(--text-muted);\n}\n\n.topbar__center {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.wave {\n  width: 32px;\n  height: 32px;\n  color: var(--accent-gold);\n}\n\n.greet h1 {\n  margin: 0;\n  font-size: clamp(1.1rem, 2.4vw, 1.6rem);\n  font-weight: 700;\n  color: var(--text-primary);\n}\n\n.greet p {\n  margin: 4px 0 0;\n  font-size: 0.92rem;\n  color: var(--text-muted);\n}\n\n.topbar__actions {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.action-btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 48px;\n  height: 48px;\n  border-radius: 16px;\n  border: none;\n  background: linear-gradient(135deg, var(--accent-green), var(--accent-gold));\n  color: #ffffff;\n  cursor: pointer;\n  font-weight: 700;\n  box-shadow: var(--control-shadow);\n  transition: transform 0.25s ease, box-shadow 0.25s ease;\n}\n\n.action-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: var(--control-shadow-hover);\n}\n\n.profile {\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  gap: 12px;\n  padding: 10px 14px;\n  border-radius: 24px;\n  background: var(--card-soft);\n  border: 1px solid var(--card-border);\n  box-shadow: var(--card-shadow);\n  cursor: pointer;\n}\n\n.avatar {\n  width: 42px;\n  height: 42px;\n  border-radius: 14px;\n  overflow: hidden;\n  display: grid;\n  place-items: center;\n  background: var(--chip-bg);\n  color: var(--chip-color);\n  font-weight: 700;\n  letter-spacing: 0.02em;\n}\n\n.avatar__image {\n  width: 100%;\n  height: 100%;\n  background-size: cover;\n  background-position: center;\n}\n\n.avatar__initial {\n  font-size: 1rem;\n}\n\n.profile__text {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.profile__name {\n  font-weight: 700;\n  font-size: 0.95rem;\n  color: var(--text-primary);\n}\n\n.profile__meta {\n  font-size: 0.75rem;\n  color: var(--text-muted);\n}\n\n.profile__chevron {\n  width: 18px;\n  height: 18px;\n  color: var(--accent-gold);\n  transition: transform 0.25s ease;\n}\n\n.profile__chevron.open {\n  transform: rotate(180deg);\n}\n\n.profile__menu {\n  position: absolute;\n  inset-inline-end: 0;\n  top: calc(100% + 12px);\n  display: grid;\n  gap: 8px;\n  padding: 12px;\n  border-radius: 18px;\n  background: var(--glass-surface);\n  border: 1px solid var(--glass-border);\n  box-shadow: var(--card-shadow);\n  backdrop-filter: blur(18px);\n  min-width: 180px;\n  z-index: 20;\n}\n\n.profile__menu li {\n  list-style: none;\n}\n\n.profile__menu button {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  width: 100%;\n  padding: 8px 10px;\n  border: none;\n  border-radius: 12px;\n  background: transparent;\n  color: var(--text-primary);\n  font-weight: 600;\n  cursor: pointer;\n  transition: background 0.2s ease, color 0.2s ease;\n}\n\n.profile__menu button:hover {\n  background: var(--chip-bg);\n  color: var(--chip-color);\n}\n\n.profile__menu button svg {\n  width: 18px;\n  height: 18px;\n}\n\n.profile__menu button.danger {\n  color: #c74b3f;\n}\n\n.dashboard__main {\n  position: relative;\n  /* z-index: 5; */\n  display: flex;\n  flex-direction: column;\n  gap: clamp(24px, 4vw, 36px);\n}\n\n.overview-grid {\n  display: grid;\n  gap: clamp(18px, 3vw, 24px);\n  grid-template-columns: repeat(3, minmax(0, 1fr));\n}\n\n.welcome-card,\n.score-card,\n.mentor-card {\n  position: relative;\n  border-radius: 28px;\n  background: var(--card-surface);\n  border: 1px solid var(--card-border);\n  box-shadow: var(--card-shadow);\n  padding: clamp(20px, 3vw, 28px);\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n  backdrop-filter: blur(18px);\n}\n\n.welcome-card__icon {\n  width: 54px;\n  height: 54px;\n  border-radius: 18px;\n  background: var(--chip-bg);\n  color: var(--chip-color);\n  display: grid;\n  place-items: center;\n  font-size: 1.2rem;\n}\n\n.welcome-card__copy h2 {\n  margin: 0;\n  font-size: 1.4rem;\n  font-weight: 800;\n  color: var(--text-primary);\n}\n\n.welcome-card__copy p {\n  margin: 6px 0 0;\n  color: var(--text-muted);\n  font-size: 0.95rem;\n}\n\n.welcome-card__metrics {\n  display: flex;\n  gap: 18px;\n}\n\n.metric {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.metric__label {\n  font-size: 0.78rem;\n  text-transform: uppercase;\n  letter-spacing: 0.08em;\n  color: var(--text-muted);\n}\n\n.metric strong {\n  font-size: 1.4rem;\n  font-weight: 800;\n  color: var(--accent-green);\n}\n\n.dashboard.dark .metric strong {\n  color: var(--accent-gold);\n}\n\n.score-card {\n  position: relative;\n  overflow: hidden;\n}\n\n.score-card__overlay {\n  position: absolute;\n  inset: 0;\n  display: grid;\n  place-items: center;\n  background: rgba(0, 0, 0, 0.18);\n  z-index: 2;\n}\n\n.overlay-spinner {\n  width: 36px;\n  height: 36px;\n  animation: spin 1s linear infinite;\n}\n\n.score-card__ring {\n  position: relative;\n  display: grid;\n  place-items: center;\n}\n\n.score-card__ring svg {\n  width: clamp(140px, 16vw, 180px);\n  height: clamp(140px, 16vw, 180px);\n  transform: rotate(-90deg);\n}\n\n.ring-bg {\n  fill: none;\n  stroke: rgba(0, 0, 0, 0.08);\n  stroke-width: 10;\n}\n\n.dashboard.dark .ring-bg {\n  stroke: rgba(255, 255, 255, 0.08);\n}\n\n.ring-fg {\n  fill: none;\n  stroke-width: 10;\n  stroke-linecap: round;\n  stroke-dasharray: 327;\n  stroke-dashoffset: calc(327 - (327 * var(--progress, 0)));\n  transition: stroke-dashoffset 0.8s cubic-bezier(0.22, 1, 0.36, 1);\n}\n\n.score-card__center {\n  position: absolute;\n  display: grid;\n  place-items: center;\n  gap: 6px;\n  text-align: center;\n}\n\n.score-card__points {\n  font-size: clamp(1.6rem, 3vw, 2rem);\n  font-weight: 800;\n  color: var(--accent-green);\n}\n\n.dashboard.dark .score-card__points {\n  color: var(--accent-gold);\n}\n\n.score-card__center small {\n  font-size: 0.82rem;\n  color: var(--text-muted);\n}\n\n.score-card__details {\n  display: flex;\n  flex-direction: column;\n  gap: 14px;\n}\n\n.score-card__tier {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 14px;\n  border-radius: 999px;\n  background: var(--chip-bg);\n  color: var(--chip-color);\n  font-weight: 700;\n  letter-spacing: 0.08em;\n  font-size: 0.78rem;\n  text-transform: uppercase;\n  width: max-content;\n}\n\n.score-card__subtitle {\n  margin: 0;\n  color: var(--text-muted);\n  font-size: 0.94rem;\n}\n\n.progress {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.progress__track {\n  position: relative;\n  width: 100%;\n  height: 12px;\n  border-radius: 999px;\n  background: rgba(255, 255, 255, 0.5);\n  overflow: hidden;\n  border: 1px solid rgba(255, 255, 255, 0.7);\n}\n\n.dashboard.dark .progress__track {\n  background: rgba(17, 28, 22, 0.72);\n  border-color: rgba(90, 212, 140, 0.3);\n}\n\n.progress__fill {\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(90deg, var(--accent-green), var(--accent-gold));\n  transform-origin: left center;\n  transform: scaleX(var(--progress, 0));\n  transition: transform 0.8s cubic-bezier(0.22, 1, 0.36, 1);\n}\n\n.progress__meta {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 0.85rem;\n  color: var(--text-muted);\n}\n\n.progress__link {\n  border: none;\n  background: none;\n  color: var(--accent-green);\n  font-weight: 700;\n  cursor: pointer;\n  text-decoration: underline;\n}\n\n.dashboard.dark .progress__link {\n  color: var(--accent-gold);\n}\n\n.score-card.pulse .score-card__points {\n  animation: scorePulse 0.72s ease;\n}\n\n.mentor-card {\n  overflow: hidden;\n}\n\n.mentor-card__badge {\n  align-self: flex-start;\n  padding: 6px 16px;\n  border-radius: 999px;\n  background: var(--badge-bg);\n  color: var(--badge-color);\n  font-size: 0.75rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.08em;\n}\n\n.mentor-card h3 {\n  margin: 0;\n  font-size: 1.2rem;\n  font-weight: 700;\n  color: var(--text-primary);\n}\n\n.mentor-card p {\n  margin: 6px 0 0;\n  color: var(--text-muted);\n  font-size: 0.94rem;\n}\n\n.challenge-section {\n  display: grid;\n  grid-template-columns: minmax(320px, 380px) minmax(0, 1fr);\n  gap: clamp(20px, 4vw, 32px);\n}\n\n.challenge-list {\n  position: relative;\n  border-radius: 32px;\n  background: var(--card-surface);\n  border: 1px solid var(--card-border);\n  box-shadow: var(--card-shadow);\n  padding: clamp(20px, 3vw, 26px);\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  max-height: 720px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  backdrop-filter: blur(18px);\n  scroll-behavior: smooth;\n  transition: background 0.35s ease, border-color 0.35s ease, box-shadow 0.35s ease;\n}\n\n.challenge-list.collapsed {\n  display: none;\n}\n\n.challenge-list__header h2 {\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 800;\n  color: var(--text-primary);\n}\n\n.challenge-list__header p {\n  margin: 6px 0 0;\n  color: var(--text-muted);\n  font-size: 0.92rem;\n}\n\n.level-block {\n  border-radius: 22px;\n  background: var(--glass-surface);\n  border: 1px solid var(--glass-border);\n  overflow: hidden;\n  transition: background 0.3s ease, border-color 0.3s ease;\n}\n\n.level-head {\n  width: 100%;\n  border: none;\n  background: transparent;\n  padding: 16px 18px;\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  cursor: pointer;\n  color: var(--text-primary);\n}\n\n.level-head__info {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  flex: 1;\n}\n\n.level-head__icon {\n  width: 22px;\n  height: 22px;\n  color: var(--accent-green);\n}\n\n.dashboard.dark .level-head__icon {\n  color: var(--accent-gold);\n}\n\n.level-head__title {\n  font-weight: 700;\n  font-size: 1rem;\n}\n\n.level-head__count {\n  font-size: 0.82rem;\n  font-weight: 600;\n  color: var(--text-muted);\n}\n\n.level-head__chevron {\n  width: 18px;\n  height: 18px;\n  transition: transform 0.25s ease;\n  color: var(--accent-gold);\n}\n\n.level-head__chevron.open {\n  transform: rotate(180deg);\n}\n\n.challenge-cards {\n  display: grid;\n  gap: 12px;\n  padding: 0 18px 18px;\n}\n\n.challenge-card {\n  position: relative;\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  gap: 14px;\n  align-items: center;\n  padding: 16px 18px;\n  border-radius: 18px;\n  border: 1px solid rgba(233,236,239,0.65);\n  background: rgba(255,255,255,0.9);\n  color: var(--text-primary);\n  cursor: pointer;\n  transition: transform 0.25s ease, box-shadow 0.25s ease, border 0.25s ease, background 0.25s ease;\n  box-shadow: 0 16px 32px rgba(31,42,36,0.14);\n}\n\n.dashboard.dark .challenge-card {\n  background: rgba(15,23,32,0.85);\n  border-color: rgba(90,212,140,0.2);\n  box-shadow: 0 18px 36px rgba(0,0,0,0.45);\n}\n\n.challenge-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 22px 40px rgba(15,138,62,0.22);\n  border-color: var(--outline);\n}\n\n.challenge-card.active {\n  border-color: var(--accent-gold);\n  box-shadow: 0 24px 42px rgba(15,138,62,0.26);\n}\n\n.challenge-card__symbol {\n  font-size: 1.6rem;\n  font-weight: 800;\n  color: var(--accent-green);\n}\n\n.dashboard.dark .challenge-card__symbol {\n  color: var(--accent-gold);\n}\n\n.challenge-card__body {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n\n.challenge-card__title {\n  font-weight: 700;\n  font-size: 1rem;\n}\n\n.challenge-card__summary {\n  margin: 0;\n  font-size: 0.86rem;\n  color: var(--text-muted);\n  line-height: 1.5;\n}\n\n.challenge-card__cta {\n  font-size: 0.78rem;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 0.08em;\n  color: var(--accent-gold);\n}\n\n.challenge-preview {\n  position: relative;\n  border-radius: 32px;\n  background: var(--card-surface);\n  border: 1px solid var(--card-border);\n  box-shadow: var(--card-shadow);\n  padding: clamp(22px, 3vw, 30px);\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  backdrop-filter: blur(18px);\n  min-height: 520px;\n  transition: background 0.35s ease, border-color 0.35s ease, box-shadow 0.35s ease;\n}\n\n.preview-header {\n  display: flex;\n  gap: 18px;\n  align-items: flex-start;\n  flex-wrap: wrap;\n}\n\n.preview-pill {\n  padding: 6px 16px;\n  border-radius: 999px;\n  background: var(--chip-bg);\n  color: var(--chip-color);\n  font-weight: 700;\n  font-size: 0.78rem;\n  letter-spacing: 0.08em;\n  text-transform: uppercase;\n}\n\n.preview-text h3 {\n  margin: 0;\n  font-size: 1.4rem;\n  font-weight: 800;\n  color: var(--text-primary);\n}\n\n.preview-text p {\n  margin: 8px 0 0;\n  color: var(--text-muted);\n  font-size: 0.95rem;\n  max-width: 640px;\n}\n\n.preview-surface {\n  position: relative;\n  flex: 1;\n  border-radius: 26px;\n  background: rgba(255,255,255,0.82);\n  border: 1px solid rgba(233,236,239,0.8);\n  box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);\n  overflow: hidden;\n  transition: background 0.35s ease, border-color 0.35s ease, box-shadow 0.35s ease;\n}\n\n.dashboard.dark .preview-surface {\n  background: rgba(15,23,32,0.85);\n  border-color: rgba(90,212,140,0.32);\n  box-shadow: inset 0 1px 0 rgba(90,212,140,0.12);\n}\n\n.preview-component {\n  width: 100%;\n  height: 100%;\n  padding: clamp(16px, 3vw, 22px);\n  overflow: auto;\n}\n\n.preview-placeholder {\n  height: 100%;\n  display: grid;\n  place-items: center;\n  gap: 12px;\n  text-align: center;\n  color: var(--text-muted);\n  font-size: 1rem;\n}\n\n.preview-placeholder svg {\n  width: 54px;\n  height: 54px;\n  color: var(--accent-gold);\n}\n\n.fade-enter-active,\n.fade-leave-active,\n.preview-fade-enter-active,\n.preview-fade-leave-active {\n  transition: opacity 0.25s ease, transform 0.25s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to,\n.preview-fade-enter-from,\n.preview-fade-leave-to {\n  opacity: 0;\n  transform: translateY(-6px);\n}\n\n.score-flip-enter-active,\n.score-flip-leave-active {\n  transition: transform 0.28s ease, opacity 0.28s ease;\n}\n\n.score-flip-enter-from {\n  transform: rotateX(-90deg);\n  opacity: 0;\n}\n\n.score-flip-leave-to {\n  transform: rotateX(90deg);\n  opacity: 0;\n}\n.logout-block{\n  margin: 12px; padding-top: 10px; border-top: 1px solid var(--border-color,#ddd);\n}\n.logout-btn{\n  width: 100%; display: flex; align-items: center; gap: 8px;\n  background: transparent; border: 0; padding: 10px 8px; border-radius: 10px;\n  color: #b32020; font-weight: 700; cursor: pointer;\n}\n.logout-btn:hover{ background: rgba(179,32,32,.08); }\n.logout-btn svg{ width: 18px; height: 18px; }\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes scorePulse {\n  0% {\n    transform: scale(1);\n  }\n  40% {\n    transform: scale(1.08);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n\n@media (max-width: 1200px) {\n  .overview-grid {\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n  }\n\n  .mentor-card {\n    grid-column: span 2;\n  }\n}\n\n@media (max-width: 1024px) {\n  .dashboard {\n    padding: clamp(20px, 6vw, 32px);\n  }\n\n  .dashboard__topbar {\n    grid-template-columns: 1fr;\n    justify-items: stretch;\n  }\n\n  .brand-chip {\n    gap: 14px;\n    padding: 14px 18px;\n    border-radius: 26px;\n  }\n\n  .brand-chip__logo {\n    width: 66px;\n    height: 66px;\n  }\n\n  .topbar__left {\n    justify-content: space-between;\n  }\n\n  .topbar__center {\n    justify-content: space-between;\n    flex-wrap: wrap;\n  }\n\n  .topbar__actions {\n    justify-content: flex-end;\n    column-gap: 10px;\n  }\n\n  .overview-grid {\n    grid-template-columns: minmax(0, 1fr);\n  }\n\n  .mentor-card {\n    grid-column: span 1;\n  }\n\n  .challenge-section {\n    grid-template-columns: minmax(0, 1fr);\n  }\n\n  .challenge-list {\n    position: fixed;\n    inset: clamp(16px, 4vw, 24px);\n    inset-inline: clamp(16px, 4vw, 24px);\n    max-width: unset;\n    z-index: 40;\n    max-height: calc(100vh - clamp(32px, 8vw, 48px));\n    overflow-y: auto;\n  }\n\n  .challenge-list.collapsed {\n    display: none;\n  }\n\n  .challenge-preview {\n    min-height: 400px;\n  }\n}\n\n@media (max-width: 720px) {\n  .profile {\n    padding: 8px 12px;\n  }\n\n  .profile__text {\n    display: none;\n  }\n\n  .brand-chip {\n    gap: 12px;\n    padding: 12px 16px;\n  }\n\n  .brand-chip__logo {\n    width: 58px;\n    height: 58px;\n    border-radius: 20px;\n  }\n\n  .overview-grid {\n    gap: 16px;\n  }\n\n  .challenge-list__header h2 {\n    font-size: 1.1rem;\n  }\n\n  .challenge-card {\n    grid-template-columns: auto 1fr;\n    row-gap: 10px;\n  }\n\n  .challenge-card__cta {\n    grid-column: span 2;\n    justify-self: flex-start;\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .action-btn,\n  .topbar__menu,\n  .challenge-card,\n  .score-card__points {\n    transition: none;\n    animation: none;\n  }\n\n  .score-flip-enter-active,\n  .score-flip-leave-active,\n  .preview-fade-enter-active,\n  .preview-fade-leave-active,\n  .fade-enter-active,\n  .fade-leave-active {\n    transition: none;\n  }\n}\n</style>\n","import { createRouter, createWebHashHistory } from 'vue-router'\nimport Login from '@/components/Index.vue'\nimport Home from '@/components/Dashboard.vue'\nconst router = createRouter({\n  history: createWebHashHistory('/math-leaders-games/'),\n  routes: [\n    { path: '/', redirect: '/login' },\n    { path: '/login', component: Login },\n    { path: '/home', component: Home },\n    { path: '/scores', component: () => import('@/pages/other/ScoresView.vue') },\n    { path: '/settings', component: () => import('@/pages/other/SettingsView.vue') },\n  ],\n})\n\nexport default router\n","// import './assets/main.css'\n\n// import { createApp } from 'vue'\n// import App from './App.vue'\n\n// createApp(App).mount('#app')\n\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport './assets/main.css'\n\ncreateApp(App)\n  .use(router)\n  .mount('#app')\n"],"file":"js/platform.js"}