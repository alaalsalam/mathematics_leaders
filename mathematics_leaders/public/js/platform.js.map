{"version":3,"mappings":"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","names":["_hoisted_1","_openBlock","_createElementBlock","_createVNode","_component_RouterView","BASE","lang","ref","dir","computed","t","k","toggleLang","watch","v","onMounted","showSignup","inForm","upForm","submitting","notice","bgUrl","girlUrl","treesUrl","leaf01","leaf02","leaf03","leaf04","leaf01_","leaf02_","leaf03_","leaf04_","leafImgs","get","url","params","qs","r","data","extractErr","e","list","first","goHome","profile","payload","submit","loginRes","_a","_b","err","_createElementVNode","_hoisted_3","_toDisplayString","_hoisted_4","_hoisted_5","_Fragment","_renderList","src","i","_unref","_normalizeClass","_hoisted_10","_hoisted_11","_cache","$event","_vModelText","_hoisted_13","_hoisted_15","_hoisted_17","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_24","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_30","_hoisted_31","toKebabCase","string","toCamelCase","match","p1","p2","toPascalCase","camelCase","mergeClasses","classes","className","index","array","isEmptyString","value","defaultAttributes","Icon","name","iconNode","absoluteStrokeWidth","absoluteStrokeWidthKebabCase","strokeWidth","strokeWidthKebabCase","size","color","props","slots","h","child","createLucideIcon","iconName","attrs","Check","ChevronDown","ChevronLeft","Circle","Diamond","Eraser","Globe","Hand","Image","KeyRound","LogOut","Menu","Moon","RefreshCw","RotateCcw","Scale","Settings","Square","Sun","Target","Triangle","Trophy","Upload","successUrl$3","clapUrl","wrongUrl$5","__props","theme","T","sndSuccess","successUrl","sndClap","sndWrong","wrongUrl","SHAPE_COMP","SHAPE_TYPES","shapeComp","rndInt","a","b","shuffle","q","reactive","rowA","rowB","rowS","newPuzzle","dA","dB","A","B","digitsPresent","n","howMany","hideDigits","typesPicked","d","used","tokenize","str","ch","sh","s","onDigitDragStart","digit","onShapeDrop","shape","checkNow","onDragOver","resetAssign","isFilled","makeNumber","tokens","tok","isCorrect","S","overlay","pushToast","nextQuestion","toasts","msg","type","id","x","_hoisted_2","_createBlock","_resolveDynamicComponent","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_12","_hoisted_14","_hoisted_16","_hoisted_18","_Transition","successUrl$2","wrongUrl$4","L","sOK","sClap","sWrong","stepsPool","j","step","base","grid","blanks","answerMap","bankCounts","solved","toast","titleText","ruleText","keyOf","c","buildGrid","start","stp","g","row","pickBlanks","all","filtered","buildBankCounts","counts","bankList","out","ct","thousands","addPoint","resetAnswers","onDragStart","ev","allowDrop","onDrop","key","old","clearCell","numDir","_createTextVNode","successUrl$1","wrongUrl$3","N","D","questions","solvedCount","allAnswered","makeAns","validPair","mkQuestion","alts","addAlt","y","opts","da","db","newRound","resetRound","pickOption","idx","unjudge","_hoisted_6","op","wrongUrl$2","factorsR","factorsC","valueAt","keyH","pickFactors","bodyCells","shownHelp","candidates","chosen","rebuildBank","tag","rc","_","resetAll","wrongUrl$1","circles","squares","buildTriangle","vals","cl","cr","keys","target","picks","pickedSum","p","rows","cols","permCols","solution","resetPicks","toggleCell","rowsDistinct","rs","colsDistinct","cs","val","baseN","buildPyramid","keep","_normalizeStyle","expr","digits","ops","buildTarget","nums","pick","arr","op1","op2","op3","tries","addToken","backspace","clearAll","usage","u","onlyAllowedChars","usesExactDigits","safeEval","o","M","LO_SHU","symmetries","mat","rot","m","flipH","uniq","seen","SHAPES","buildMagic","off","keepSet","filledMatrix","noDuplicates","sumsOk","bank","answer","isMul2","isMul3","isMul4","isMul5","rand6","predicate","rand6_last","extra","picked","addUnique","a5","a2","a4","a3","core","distract","dropTo","_hoisted_23","options","buildPuzzle","big","small","gen","pair","found","num","d2cand","left","choices","lhs","rhs","canonical","stepsWithIcons","buildSteps","sw","cardId","removeFromSlot","allPlaced","byId","ScaleIc","BallIc","CubeIc","PyrIc","totalCounts","displayRows","cells","usageOf","available","valStr","total","remaining","generatePyramid","built","prev","totals","raw","current","items","cIdx","copy","colourPalette","templates","computeHints","numbers","sorted","sum","acc","mean","median","range","cards","hints","resetReactiveMap","obj","colours","arrangement","clearCard","count","card","item","puzzles","currentPuzzle","selected","feedback","coordKey","resetSelection","pickPuzzle","next","set","selectedList","selectedSum","cell","isLine","sameRow","sameCol","diag1","diag2","checkLine","isSolutionCell","puzzleBank","values","right","answers","slotsMeta","initPuzzle","puzzle","meta","eq","slotName","clearSlot","allFilled","slot","checkAll","equations","valid","line","token","slotTemplate","placements","expectedDigits","digitsPool","resetMaps","group","valueOf","checkSolution","n1","d1","n2","d2","res","_hoisted_25","_hoisted_29","requirements","decimal","fraction","slotsFilled","decimalValue","fractionValue","numDigits","denDigits","numerator","denominator","dec","frac","resetState","part","opt","partId","clearPart","allAssigned","resetSelections","cellParts","map","gridStyle","cellPart","withCoords","edge","nodes","from","to","path","edges","selectedEdges","ed","product","hasEdge","resetPath","undoLast","onNodeClick","node","end","last","newPath","checkPath","assignments","letter","clearAssignment","decodedMessage","code","entry","resetAssignments","score","rank","totalPlayers","bestScore","loading","error","lastUpdated","profileImage","username","gameUserName","fetchScore","force","now","useGameScore","refresh","tiers","detectLang","langState","propsLang","scoreValue","tierIndex","tier","currentTier","nextTier","tierTitle","_d","_c","progress","span","intl","formattedScore","formattedBest","formattedRank","totalPlayersLabel","lastUpdatedLabel","update","observer","onUnmounted","handleRefresh","insights","percentile","store","strings","avatarFile","avatarPreview","avatarStatus","passwordForm","verifyState","passwordStatus","displayName","fallbackInitial","avatarUrl","handleFileChange","event","file","clearSelection","uploadAvatar","docname","fd","uploadRes","uploadData","fileUrl","saveRes","saveData","updatePassword","confirm","verifyCurrent","resetPasswordForm","ImageIcon","router","useRouter","levels","Challenge1","Challenge2","Challenge3","Challenge4","Challenge5","Challenge6","Challenge7","challenge_level_two_1","challenge_level_two_2","challenge_level_two_3","challenge_level_two_4","challenge_level_two_5","challenge_level_two_6","challenge_level_three_1","challenge_level_three_2","challenge_level_three_3","challenge_level_three_4","challenge_level_three_5","challenge_level_three_6","challenge_level_three_7","challenge_level_three_7","challenge_level_three_8","scoreStore","dashTiers","scoreTier","scoreTierName","scoreProgress","scoreFormatter","scoreDisplay","rankDisplay","totalPlayersDisplay","scoreLoading","scoreProgressPercent","fullName","viewScores","goto","componentRegistry","level","challenge","specialViews","MyScores","SettingsPage","fetchMe","prof","profileOpen","sidebarCollapsed","expandedLevels","lvl","selectedLevel","selectedChallenge","toggleSidebar","logout","toggleLevel","levelId","isExpanded","selectChallenge","challengeId","isActiveChallenge","currentSelection","l","currentComponent","logoUrl","_withDirectives","_component_UserCircle2","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","createRouter","createWebHashHistory","Login","Home","__vitePreload","createApp","App"],"ignoreList":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],"sources":["../../../frontend/src/App.vue","../../../frontend/src/components/Index.vue","../../../frontend/node_modules/lucide-vue-next/dist/esm/shared/src/utils.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/defaultAttributes.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/Icon.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/createLucideIcon.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/check.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/chevron-down.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/chevron-left.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/circle.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/diamond.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/eraser.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/globe.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/hand.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/image.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/key-round.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/log-out.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/menu.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/moon.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/refresh-cw.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/rotate-ccw.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/scale.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/settings.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/square.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/sun.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/target.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/triangle.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/trophy.js","../../../frontend/node_modules/lucide-vue-next/dist/esm/icons/upload.js","../../../frontend/src/assets/sounds/success.mp3","../../../frontend/src/assets/sounds/clap.mp3","../../../frontend/src/assets/sounds/wrong.mp3","../../../frontend/src/pages/challenges/challenge_1.vue","../../../frontend/src/assets/sounds/success2.mp3","../../../frontend/src/assets/sounds/wrong2.mp3","../../../frontend/src/pages/challenges/challenge_2.vue","../../../frontend/src/assets/sounds/success3.mp3","../../../frontend/src/assets/sounds/wrong3.mp3","../../../frontend/src/pages/challenges/challenge_3.vue","../../../frontend/src/assets/sounds/success4.mp3","../../../frontend/src/assets/sounds/wrong4.mp3","../../../frontend/src/pages/challenges/challenge_4.vue","../../../frontend/src/assets/sounds/wrong5.mp3","../../../frontend/src/pages/challenges/challenge_5.vue","../../../frontend/src/pages/challenges/challenge_6.vue","../../../frontend/src/pages/challenges/challenge_7.vue","../../../frontend/src/assets/sounds/oh_no.mp3","../../../frontend/src/pages/challenges/challenge_level_two_1.vue","../../../frontend/src/pages/challenges/challenge_level_two_2.vue","../../../frontend/src/pages/challenges/challenge_level_two_3.vue","../../../frontend/src/pages/challenges/challenge_level_two_4.vue","../../../frontend/src/pages/challenges/challenge_level_two_5.vue","../../../frontend/src/pages/challenges/challenge_level_two_6.vue","../../../frontend/src/pages/challenges/challenge_level_three_1.vue","../../../frontend/src/pages/challenges/challenge_level_three_2.vue","../../../frontend/src/pages/challenges/challenge_level_three_3.vue","../../../frontend/src/pages/challenges/challenge_level_three_4.vue","../../../frontend/src/pages/challenges/challenge_level_three_5.vue","../../../frontend/src/pages/challenges/challenge_level_three_6.vue","../../../frontend/src/pages/challenges/challenge_level_three_7.vue","../../../frontend/src/pages/challenges/challenge_level_three_7.vue","../../../frontend/src/pages/challenges/challenge_level_three_8.vue","../../../frontend/src/composables/useGameScore.js","../../../frontend/src/pages/other/my_scores.vue","../../../frontend/src/pages/other/settings.vue","../../../frontend/src/components/Dashboard.vue","../../../frontend/src/router/index.js","../../../frontend/src/main.js"],"sourcesContent":["<script setup>\n</script>\n\n<template>\n  <!-- <div class=\"min-h-screen bg-base-200\">\n\n    <div class=\"navbar bg-base-100 shadow mb-6 px-4\">\n      <div class=\"flex-1 font-semibold\">Mathematics Leaders</div>\n      <div class=\"flex-none gap-2\">\n        <RouterLink class=\"btn btn-ghost\" to=\"/\">Home</RouterLink>\n        <RouterLink class=\"btn btn-ghost\" to=\"/login\">Login</RouterLink>\n        <RouterLink class=\"btn btn-primary\" to=\"/register\">Register</RouterLink>\n      </div>\n    </div> -->\n\n    <!-- Page Content -->\n    <main class=\"p-6\">\n      <!-- <div class=\"p-6\">I render ✔</div> -->\n      <RouterView />\n    </main>\n  <!-- </div> -->\n</template>\n","<!-- <script setup>\nimport { ref, computed, watch, onMounted } from 'vue'\n\n/* ===================== اللغة ===================== */\nconst lang = ref(localStorage.getItem('ml_lang') || 'ar')\nconst dir  = computed(() => (lang.value === 'ar' ? 'rtl' : 'ltr'))\nconst t = (k)=>({\n  en:{signin:'Sign In',signup:'Create Account',username:'Username',password:'Password',confirm:'Confirm Password',\n      login:'Login',register:'Signup',toSignup:'Create account',toSignin:'Back to login',forgot:'Forgot password?'},\n  ar:{signin:'تسجيل الدخول',signup:'إنشاء حساب',username:'اسم المستخدم',password:'كلمة المرور',confirm:'تأكيد كلمة المرور',\n      login:'دخول',register:'تسجيل',toSignup:'إنشاء حساب',toSignin:'العودة لتسجيل الدخول',forgot:'نسيت كلمة المرور؟'}\n}[lang.value][k])\n\nfunction toggleLang(){ lang.value = lang.value==='ar' ? 'en' : 'ar' }\nwatch(lang, v => {\n  localStorage.setItem('ml_lang', v)\n  document.documentElement.dir = dir.value\n  document.documentElement.lang = v\n})\nonMounted(() => {\n  document.documentElement.dir  = dir.value\n  document.documentElement.lang = lang.value\n})\n\n/* ===================== حالة الواجهة ===================== */\nconst showSignup  = ref(false)\nconst inForm      = ref({ username:'', password:'' })\nconst upForm      = ref({ username:'', password:'', confirm:'' })\nconst submitting  = ref(false)\nconst notice      = ref(null)\n\n/* ===================== صور الخلفية والأوراق ===================== */\nconst bgUrl    = new URL('../assets/images/bg.jpg',    import.meta.url).href\nconst girlUrl  = new URL('../assets/images/girl.png',  import.meta.url).href\nconst treesUrl = new URL('../assets/images/trees.png', import.meta.url).href\nconst leaf01   = new URL('../assets/images/leaf_1.png',  import.meta.url).href\nconst leaf02   = new URL('../assets/images/leaf_2.png',  import.meta.url).href\nconst leaf03   = new URL('../assets/images/leaf_3.png',  import.meta.url).href\nconst leaf04   = new URL('../assets/images/leaf_4.png',  import.meta.url).href\nconst leaf01_  = new URL('../assets/images/leaf_1_.png', import.meta.url).href\nconst leaf02_  = new URL('../assets/images/leaf_2_.png', import.meta.url).href\nconst leaf03_  = new URL('../assets/images/leaf_3_.png', import.meta.url).href\nconst leaf04_  = new URL('../assets/images/leaf_4_.png', import.meta.url).href\nconst leafImgs = [leaf01, leaf02, leaf03, leaf04, leaf01_, leaf02_, leaf03_, leaf04_]\n\n/* ===================== أدوات HTTP ===================== */\n/* استخدم نفس الأصل. ترك BASE فارغًا يعني استعمال المسار النسبي */\nconst BASE = ''  // أو: const BASE = window.location.origin\n\nasync function get(url, params = {}) {\n  const qs = new URLSearchParams(params).toString()\n  const r  = await fetch(BASE + url + (qs ? `?${qs}` : ''), {\n    method: 'GET',\n    credentials: 'include',\n  })\n  const data = await r.json().catch(() => ({}))\n  if (!r.ok) throw data\n  return data\n}\n\nfunction extractErr(e){\n  if (typeof e === 'string') return e\n  if (e?._server_messages){\n    try {\n      const list  = JSON.parse(e._server_messages)\n      const first = list?.[0] && JSON.parse(list[0])\n      return first?.message || first?._error_message || 'Invalid Request'\n    } catch {}\n  }\n  return e?.message || e?.exc || 'Invalid Request'\n}\n\nfunction goHome(profile){\n  const payload = profile || { username: inForm.value.username }\n  localStorage.setItem('ml_profile', JSON.stringify({ ...payload, language: lang.value }))\n  window.location.href = '/math-leaders-games/#/home'\n}\n\n/* ===================== إرسال النماذج ===================== */\nasync function submit(){\n  submitting.value = true\n  notice.value = null\n  try{\n    if (showSignup.value){\n      if(!upForm.value.username || !upForm.value.password || !upForm.value.confirm){\n        throw {message: lang.value==='ar'?'الرجاء ملء كل الحقول.':'Please fill all fields.'}\n      }\n      if(upForm.value.password !== upForm.value.confirm){\n        throw {message: lang.value==='ar'?'كلمتا المرور غير متطابقتين.':'Passwords do not match.'}\n      }\n\n      // إنشاء لاعب جديد داخل Game Users فقط (GET لتفادي CSRF)\n      const res = await get('/api/method/mathematics_leaders.api.signup_and_login.signup_user', {\n        username: upForm.value.username,\n        password: upForm.value.password,\n        language: lang.value\n      })\n      goHome(res?.message?.profile || { username: inForm.value.username })\n\n      inForm.value.username = upForm.value.username\n      inForm.value.password = ''\n      showSignup.value = false\n      notice.value = lang.value==='ar'\n        ? 'تم إنشاء الحساب. ادخل بياناتك لتسجيل الدخول.'\n        : 'Account created. Please log in.'\n    } else {\n      // تحقق الدخول على Game Users فقط (بدون جلسة فرابي)\n      const loginRes = await get('/api/method/mathematics_leaders.api.signup_and_login.verify_login', {\n        username: inForm.value.username,\n        password: inForm.value.password\n      })\n\n      // نجاح — الانتقال للواجهة\n      // window.location.href = '/math-leaders-games/#/'\n      goHome(loginRes?.message?.profile || { username: upForm.value.username })\n      // goHome(res?.message?.profile || { username: inForm.value.username })\n\n    }\n  } catch (err){\n    notice.value = extractErr(err)\n  } finally {\n    submitting.value = false\n  }\n}\n</script> -->\n<script setup>\nimport { ref, computed, watch, onMounted } from 'vue'\n\n/* ===================== اللغة ===================== */\nconst lang = ref(localStorage.getItem('ml_lang') || 'ar')\nconst dir  = computed(() => (lang.value === 'ar' ? 'rtl' : 'ltr'))\nconst t = (k)=>({\n  en:{signin:'Sign In',signup:'Create Account',username:'Username',password:'Password',confirm:'Confirm Password',\n      login:'Login',register:'Signup',toSignup:'Create account',toSignin:'Back to login',forgot:'Forgot password?'},\n  ar:{signin:'تسجيل الدخول',signup:'إنشاء حساب',username:'اسم المستخدم',password:'كلمة المرور',confirm:'تأكيد كلمة المرور',\n      login:'دخول',register:'تسجيل',toSignup:'إنشاء حساب',toSignin:'العودة لتسجيل الدخول',forgot:'نسيت كلمة المرور؟'}\n}[lang.value][k])\n\nfunction toggleLang(){ lang.value = lang.value==='ar' ? 'en' : 'ar' }\nwatch(lang, v => {\n  localStorage.setItem('ml_lang', v)\n  document.documentElement.dir = dir.value\n  document.documentElement.lang = v\n})\nonMounted(() => {\n  document.documentElement.dir  = dir.value\n  document.documentElement.lang = lang.value\n})\n\n/* ===================== حالة الواجهة ===================== */\nconst showSignup  = ref(false)\nconst inForm      = ref({ username:'', password:'' })\nconst upForm      = ref({ username:'', password:'', confirm:'' })\nconst submitting  = ref(false)\nconst notice      = ref(null)\n\n/* ===================== صور الخلفية والأوراق ===================== */\nconst bgUrl    = new URL('../assets/images/bg.jpg',    import.meta.url).href\nconst girlUrl  = new URL('../assets/images/girl.png',  import.meta.url).href\nconst treesUrl = new URL('../assets/images/trees.png', import.meta.url).href\nconst leaf01   = new URL('../assets/images/leaf_1.png',  import.meta.url).href\nconst leaf02   = new URL('../assets/images/leaf_2.png',  import.meta.url).href\nconst leaf03   = new URL('../assets/images/leaf_3.png',  import.meta.url).href\nconst leaf04   = new URL('../assets/images/leaf_4.png',  import.meta.url).href\nconst leaf01_  = new URL('../assets/images/leaf_1_.png', import.meta.url).href\nconst leaf02_  = new URL('../assets/images/leaf_2_.png', import.meta.url).href\nconst leaf03_  = new URL('../assets/images/leaf_3_.png', import.meta.url).href\nconst leaf04_  = new URL('../assets/images/leaf_4_.png', import.meta.url).href\nconst leafImgs = [leaf01, leaf02, leaf03, leaf04, leaf01_, leaf02_, leaf03_, leaf04_]\n\n/* ===================== أدوات HTTP ===================== */\n/* استخدم نفس الأصل. ترك BASE فارغًا يعني استعمال المسارات النسبية */\nconst BASE = ''  // أو: const BASE = window.location.origin\n\nasync function get(url, params = {}) {\n  const qs = new URLSearchParams(params).toString()\n  const r  = await fetch(BASE + url + (qs ? `?${qs}` : ''), {\n    method: 'GET',\n    credentials: 'include',\n  })\n  const data = await r.json().catch(() => ({}))\n  if (!r.ok) throw data\n  return data\n}\n\nfunction extractErr(e){\n  if (typeof e === 'string') return e\n  if (e?._server_messages){\n    try {\n      const list  = JSON.parse(e._server_messages)\n      const first = list?.[0] && JSON.parse(list[0])\n      return first?.message || first?._error_message || 'Invalid Request'\n    } catch {}\n  }\n  return e?.message || e?.exc || 'Invalid Request'\n}\n\nfunction goHome(profile){\n  const payload = profile || { username: inForm.value.username }\n  localStorage.setItem('ml_profile', JSON.stringify({ ...payload, language: lang.value }))\n  window.location.href = '/math-leaders-games/#/home'\n}\n\n/* ===================== إرسال النماذج ===================== */\nasync function submit(){\n  submitting.value = true\n  notice.value = null\n  try{\n    if (showSignup.value){\n      if(!upForm.value.username || !upForm.value.password || !upForm.value.confirm){\n        throw {message: lang.value==='ar'?'الرجاء ملء كل الحقول.':'Please fill all fields.'}\n      }\n      if(upForm.value.password !== upForm.value.confirm){\n        throw {message: lang.value==='ar'?'كلمتا المرور غير متطابقتين.':'Passwords do not match.'}\n      }\n\n      // 1) إنشاء حساب (User + Game Users)\n      await get('/api/method/mathematics_leaders.api.signup_and_login.signup_user', {\n        username: upForm.value.username,\n        password: upForm.value.password,\n        language: lang.value\n      })\n\n      // 2) تسجيل الدخول لإنشاء جلسة نظام (sid) – لاحظ usr/pwd\n      const loginRes = await get('/api/method/mathematics_leaders.api.signup_and_login.verify_login', {\n        usr: upForm.value.username,\n        pwd: upForm.value.password\n      })\n\n      goHome(loginRes?.message?.profile || { username: upForm.value.username })\n    } else {\n      // تسجيل الدخول بجلسة نظام\n      const loginRes = await get('/api/method/mathematics_leaders.api.signup_and_login.verify_login', {\n        usr: inForm.value.username,\n        pwd: inForm.value.password\n      })\n      goHome(loginRes?.message?.profile || { username: inForm.value.username })\n    }\n  } catch (err){\n    notice.value = extractErr(err)\n  } finally {\n    submitting.value = false\n  }\n}\n</script>\n\n\n\n<template>\n  <section :dir=\"dir\">\n    <!-- زر تغيير اللغة (ورقة SVG) -->\n    <button class=\"lang-leaf\" :aria-label=\"lang==='ar'?'Switch to English':'التبديل للعربية'\" @click=\"toggleLang\">\n      <svg viewBox=\"0 0 200 200\" class=\"leaf-svg\" aria-hidden=\"true\">\n        <defs>\n          <linearGradient id=\"mlgLeafGrad\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"1\">\n            <stop offset=\"0%\" stop-color=\"#ff7a59\"/><stop offset=\"70%\" stop-color=\"#d64c42\"/><stop offset=\"100%\" stop-color=\"#8f2c24\"/>\n          </linearGradient>\n        </defs>\n        <path d=\"M100 10 C150 20,185 60,175 105 C165 150,120 185,75 185 C40 185,15 150,25 115 C35 80,60 60,100 10 Z\" fill=\"url(#mlgLeafGrad)\"/>\n        <path d=\"M100 25 L85 165\" stroke=\"rgba(255,255,255,.75)\" stroke-width=\"6\" stroke-linecap=\"round\"/>\n      </svg>\n      <span class=\"leaf-label\">{{ lang==='ar'?'EN':'ع' }}</span>\n    </button>\n\n    <!-- أوراق متساقطة -->\n    <div class=\"leaves\">\n      <div class=\"set\">\n        <div class=\"leaf\" v-for=\"(src,i) in leafImgs\" :key=\"i\">\n          <img :src=\"src\" alt=\"\" />\n        </div>\n      </div>\n    </div>\n\n    <!-- الخلفيات -->\n    <img :src=\"bgUrl\"    class=\"bg\"    alt=\"\" />\n    <img :src=\"girlUrl\"  class=\"girl\"  alt=\"\" />\n    <img :src=\"treesUrl\" class=\"trees\" alt=\"\" />\n\n    <!-- البطاقة -->\n    <div class=\"auth-wrapper\" :class=\"{'animate-signIn': showSignup, 'animate-signUp': !showSignup}\">\n      <!-- Signup -->\n      <div class=\"form-panel sign-up\">\n        <form @submit.prevent=\"submit\">\n          <h2>{{ t('signup') }}</h2>\n          <div class=\"inputBox\"><input v-model=\"upForm.username\" type=\"text\"     :placeholder=\"t('username')\" /></div>\n          <div class=\"inputBox\"><input v-model=\"upForm.password\" type=\"password\" :placeholder=\"t('password')\" /></div>\n          <div class=\"inputBox\"><input v-model=\"upForm.confirm\"  type=\"password\" :placeholder=\"t('confirm')\" /></div>\n          <div class=\"inputBox\"><input :disabled=\"submitting\" id=\"btn\" type=\"submit\" :value=\"t('register')\" /></div>\n          <div class=\"group\"><a href=\"#\" @click.prevent=\"showSignup=false\">{{ t('toSignin') }}</a></div>\n          <p v-if=\"notice\" class=\"note\">{{ notice }}</p>\n        </form>\n      </div>\n\n      <!-- Login -->\n      <div class=\"form-panel sign-in\">\n        <form @submit.prevent=\"submit\">\n          <h2>{{ t('signin') }}</h2>\n          <div class=\"inputBox\"><input v-model=\"inForm.username\" type=\"text\"     :placeholder=\"t('username')\" /></div>\n          <div class=\"inputBox\"><input v-model=\"inForm.password\" type=\"password\" :placeholder=\"t('password')\" /></div>\n          <div class=\"forgot\"><a href=\"#\">{{ t('forgot') }}</a></div>\n          <div class=\"inputBox\"><input :disabled=\"submitting\" id=\"btn\" type=\"submit\" :value=\"t('login')\" /></div>\n          <div class=\"group\"><a href=\"#\" @click.prevent=\"showSignup=true\">{{ t('toSignup') }}</a></div>\n          <p v-if=\"notice\" class=\"note\">{{ notice }}</p>\n        </form>\n      </div>\n    </div>\n  </section>\n</template>\n\n<style scoped>\n/* المشهد */\n/* position:relative; */\nsection{display:flex;justify-content:center;align-items:center;width:100%;height:100vh;overflow:hidden;background:#fff;}\n.bg,.trees{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;pointer-events:none;}\n.trees{z-index:100}\n.girl{position:absolute;scale:.65;pointer-events:none;animation:animateGirl 10s linear infinite;}\n@keyframes animateGirl{0%{transform:translateX(calc(100% + 100vw));}\n50%{transform:translateX(calc(-100% - 100vw));}\n50.01%{transform:translateX(calc(-100% - 100vw)) rotateY(180deg);}\n100%{transform:translateX(calc(100% + 100vw)) rotateY(180deg);}}\n\n/* زر اللغة */\n.lang-leaf{position:absolute;top:14px;right:14px;z-index:220;width:64px;height:64px;padding:0;border:none;background:transparent;cursor:pointer}\n.lang-leaf .leaf-svg{width:100%;height:100%;filter:drop-shadow(0 8px 14px rgba(0,0,0,.25))}\n.lang-leaf .leaf-label{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:18px;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.35)}\n\n/* أوراق */\n.leaves{position:absolute;inset:0;overflow:hidden;display:flex;justify-content:center;align-items:center;z-index:1;pointer-events:none}\n.leaves .set{position:absolute;inset:0;pointer-events:none}\n.leaf{position:absolute;display:block}\n.leaf:nth-child(1){left:20%;animation:leafAnim 20s linear infinite}\n.leaf:nth-child(2){left:50%;animation:leafAnim 14s linear infinite}\n.leaf:nth-child(3){left:70%;animation:leafAnim 12s linear infinite}\n.leaf:nth-child(4){left:5%; animation:leafAnim 15s linear infinite}\n.leaf:nth-child(5){left:85%;animation:leafAnim 18s linear infinite}\n.leaf:nth-child(6){left:90%;animation:leafAnim 12s linear infinite}\n.leaf:nth-child(7){left:15%;animation:leafAnim 14s linear infinite}\n.leaf:nth-child(8){left:60%;animation:leafAnim 15s linear infinite}\n@keyframes leafAnim{\n  0%{opacity:0;top:-10%;transform:translateX(20px) rotate(0deg)}\n  10%{opacity:1}\n  20%{transform:translateX(-20px) rotate(45deg)}\n  40%{transform:translateX(-20px) rotate(90deg)}\n  60%{transform:translateX(20px) rotate(180deg)}\n  80%{transform:translateX(-20px) rotate(45deg)}\n  100%{top:110%;transform:translateX(20px) rotate(225deg)}\n}\n.leaf img{display:block;filter:drop-shadow(0 3px 6px rgba(0,0,0,.25))}\n\n/* البطاقة */\n.auth-wrapper{position:relative;--panel-w:520px;width:var(--panel-w);height:560px;z-index:150;--content-w:96%}\n.form-panel{position:absolute;inset:0;display:flex;justify-content:center;align-items:center;background:linear-gradient(180deg,rgba(255,255,255,.28),rgba(255,255,255,.18));backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.7);border-radius:20px;box-shadow:0 25px 50px rgba(0,0,0,.12)}\n.form-panel h2{margin-bottom:10px;font-size:1.9rem;font-weight:700;color:#8f2c24;text-align:center}\n.inputBox{position:relative;width:var(--content-w);margin:10px auto}\n.inputBox input{width:100%;padding:14px 16px;border-radius:12px;border:none;background:#fff;color:#8f2c24;outline:none;box-shadow:0 0 0 1px rgba(0,0,0,.06) inset;font-size:1rem}\n#btn{background:#8f2c24;color:#fff;cursor:pointer;font-size:1.05rem;font-weight:700;transition:.2s;border-radius:12px}\n#btn:hover{background:#d64c42}\n.group{width:var(--content-w);margin:6px auto 0;display:flex;justify-content:space-between}\n.group a{color:#8f2c24;font-weight:600;text-decoration:none}\n.group a:last-child{text-decoration:underline}\n.forgot{width:var(--content-w);margin:2px auto 6px;text-align:end}\n.note{text-align:center;color:#8f2c24;font-weight:600;margin-top:6px}\n\n/* أنيميشن التبديل */\n.auth-wrapper.animate-signUp .form-panel.sign-in{transform:rotate(7deg);animation:animRotate .7s ease-in-out forwards;animation-delay:.3s}\n.auth-wrapper.animate-signIn .form-panel.sign-in{animation:animSignIn 1.5s ease-in-out forwards}\n@keyframes animSignIn{0%{transform:translateX(0)}50%{transform:translateX(calc(var(--panel-w) * -1))}100%{transform:translateX(0) rotate(7deg)}}\n.form-panel.sign-up{transform:rotate(7deg)}\n.auth-wrapper.animate-signIn .form-panel.sign-up{animation:animRotate .7s ease-in-out forwards;animation-delay:.3s}\n@keyframes animRotate{0%{transform:rotate(7deg)}100%{transform:rotate(0);z-index:1}}\n.auth-wrapper.animate-signUp .form-panel.sign-up{animation:animSignUp 1.5s ease-in-out forwards}\n@keyframes animSignUp{0%{transform:translateX(0);z-index:1}50%{transform:translateX(var(--panel-w))}100%{transform:translateX(0) rotate(7deg)}}\n@media(max-width:720px){.auth-wrapper{width:92vw;--panel-w:92vw;height:560px}}\n</style>\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\nconst isEmptyString = (value) => value === \"\";\n\nexport { isEmptyString, mergeClasses, toCamelCase, toKebabCase, toPascalCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  \"stroke-width\": 2,\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport { mergeClasses, toKebabCase, toPascalCase, isEmptyString } from './shared/src/utils.js';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst Icon = ({\n  name,\n  iconNode,\n  absoluteStrokeWidth,\n  \"absolute-stroke-width\": absoluteStrokeWidthKebabCase,\n  strokeWidth,\n  \"stroke-width\": strokeWidthKebabCase,\n  size = defaultAttributes.width,\n  color = defaultAttributes.stroke,\n  ...props\n}, { slots }) => {\n  return h(\n    \"svg\",\n    {\n      ...defaultAttributes,\n      ...props,\n      width: size,\n      height: size,\n      stroke: color,\n      \"stroke-width\": isEmptyString(absoluteStrokeWidth) || isEmptyString(absoluteStrokeWidthKebabCase) || absoluteStrokeWidth === true || absoluteStrokeWidthKebabCase === true ? Number(strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"]) * 24 / Number(size) : strokeWidth || strokeWidthKebabCase || defaultAttributes[\"stroke-width\"],\n      class: mergeClasses(\n        \"lucide\",\n        props.class,\n        ...name ? [`lucide-${toKebabCase(toPascalCase(name))}-icon`, `lucide-${toKebabCase(name)}`] : [\"lucide-icon\"]\n      )\n    },\n    [...iconNode.map((child) => h(...child)), ...slots.default ? [slots.default()] : []]\n  );\n};\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { h } from 'vue';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => (props, { slots, attrs }) => h(\n  Icon,\n  {\n    ...attrs,\n    ...props,\n    iconNode,\n    name: iconName\n  },\n  slots\n);\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"check\", [[\"path\", { d: \"M20 6 9 17l-5-5\", key: \"1gmf2c\" }]]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronDown = createLucideIcon(\"chevron-down\", [\n  [\"path\", { d: \"m6 9 6 6 6-6\", key: \"qrunsl\" }]\n]);\n\nexport { ChevronDown as default };\n//# sourceMappingURL=chevron-down.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronLeft = createLucideIcon(\"chevron-left\", [\n  [\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]\n]);\n\nexport { ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Circle = createLucideIcon(\"circle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n]);\n\nexport { Circle as default };\n//# sourceMappingURL=circle.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Diamond = createLucideIcon(\"diamond\", [\n  [\n    \"path\",\n    {\n      d: \"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z\",\n      key: \"1f1r0c\"\n    }\n  ]\n]);\n\nexport { Diamond as default };\n//# sourceMappingURL=diamond.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Eraser = createLucideIcon(\"eraser\", [\n  [\n    \"path\",\n    {\n      d: \"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21\",\n      key: \"g5wo59\"\n    }\n  ],\n  [\"path\", { d: \"m5.082 11.09 8.828 8.828\", key: \"1wx5vj\" }]\n]);\n\nexport { Eraser as default };\n//# sourceMappingURL=eraser.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Globe = createLucideIcon(\"globe\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20\", key: \"13o1zl\" }],\n  [\"path\", { d: \"M2 12h20\", key: \"9i4pu4\" }]\n]);\n\nexport { Globe as default };\n//# sourceMappingURL=globe.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Hand = createLucideIcon(\"hand\", [\n  [\"path\", { d: \"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2\", key: \"1fvzgz\" }],\n  [\"path\", { d: \"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2\", key: \"1kc0my\" }],\n  [\"path\", { d: \"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8\", key: \"10h0bg\" }],\n  [\n    \"path\",\n    {\n      d: \"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15\",\n      key: \"1s1gnw\"\n    }\n  ]\n]);\n\nexport { Hand as default };\n//# sourceMappingURL=hand.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Image = createLucideIcon(\"image\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", ry: \"2\", key: \"1m3agn\" }],\n  [\"circle\", { cx: \"9\", cy: \"9\", r: \"2\", key: \"af1f0g\" }],\n  [\"path\", { d: \"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\", key: \"1xmnt7\" }]\n]);\n\nexport { Image as default };\n//# sourceMappingURL=image.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst KeyRound = createLucideIcon(\"key-round\", [\n  [\n    \"path\",\n    {\n      d: \"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z\",\n      key: \"1s6t7t\"\n    }\n  ],\n  [\"circle\", { cx: \"16.5\", cy: \"7.5\", r: \".5\", fill: \"currentColor\", key: \"w0ekpg\" }]\n]);\n\nexport { KeyRound as default };\n//# sourceMappingURL=key-round.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst LogOut = createLucideIcon(\"log-out\", [\n  [\"path\", { d: \"m16 17 5-5-5-5\", key: \"1bji2h\" }],\n  [\"path\", { d: \"M21 12H9\", key: \"dn1m92\" }],\n  [\"path\", { d: \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\", key: \"1uf3rs\" }]\n]);\n\nexport { LogOut as default };\n//# sourceMappingURL=log-out.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Menu = createLucideIcon(\"menu\", [\n  [\"path\", { d: \"M4 5h16\", key: \"1tepv9\" }],\n  [\"path\", { d: \"M4 12h16\", key: \"1lakjw\" }],\n  [\"path\", { d: \"M4 19h16\", key: \"1djgab\" }]\n]);\n\nexport { Menu as default };\n//# sourceMappingURL=menu.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Moon = createLucideIcon(\"moon\", [\n  [\n    \"path\",\n    {\n      d: \"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401\",\n      key: \"kfwtm\"\n    }\n  ]\n]);\n\nexport { Moon as default };\n//# sourceMappingURL=moon.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"refresh-cw\", [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RotateCcw = createLucideIcon(\"rotate-ccw\", [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n]);\n\nexport { RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Scale = createLucideIcon(\"scale\", [\n  [\"path\", { d: \"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z\", key: \"7g6ntu\" }],\n  [\"path\", { d: \"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z\", key: \"ijws7r\" }],\n  [\"path\", { d: \"M7 21h10\", key: \"1b0cd5\" }],\n  [\"path\", { d: \"M12 3v18\", key: \"108xh3\" }],\n  [\"path\", { d: \"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2\", key: \"3gwbw2\" }]\n]);\n\nexport { Scale as default };\n//# sourceMappingURL=scale.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"settings\", [\n  [\n    \"path\",\n    {\n      d: \"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915\",\n      key: \"1i5ecw\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Square = createLucideIcon(\"square\", [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }]\n]);\n\nexport { Square as default };\n//# sourceMappingURL=square.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Sun = createLucideIcon(\"sun\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"path\", { d: \"M12 2v2\", key: \"tus03m\" }],\n  [\"path\", { d: \"M12 20v2\", key: \"1lh1kg\" }],\n  [\"path\", { d: \"m4.93 4.93 1.41 1.41\", key: \"149t6j\" }],\n  [\"path\", { d: \"m17.66 17.66 1.41 1.41\", key: \"ptbguv\" }],\n  [\"path\", { d: \"M2 12h2\", key: \"1t8f8n\" }],\n  [\"path\", { d: \"M20 12h2\", key: \"1q8mjw\" }],\n  [\"path\", { d: \"m6.34 17.66-1.41 1.41\", key: \"1m8zz5\" }],\n  [\"path\", { d: \"m19.07 4.93-1.41 1.41\", key: \"1shlcs\" }]\n]);\n\nexport { Sun as default };\n//# sourceMappingURL=sun.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Target = createLucideIcon(\"target\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"6\", key: \"1vlfrh\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"2\", key: \"1c9p78\" }]\n]);\n\nexport { Target as default };\n//# sourceMappingURL=target.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Triangle = createLucideIcon(\"triangle\", [\n  [\n    \"path\",\n    { d: \"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\", key: \"14u9p9\" }\n  ]\n]);\n\nexport { Triangle as default };\n//# sourceMappingURL=triangle.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trophy = createLucideIcon(\"trophy\", [\n  [\"path\", { d: \"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978\", key: \"1n3hpd\" }],\n  [\"path\", { d: \"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978\", key: \"rfe1zi\" }],\n  [\"path\", { d: \"M18 9h1.5a1 1 0 0 0 0-5H18\", key: \"7xy6bh\" }],\n  [\"path\", { d: \"M4 22h16\", key: \"57wxv0\" }],\n  [\"path\", { d: \"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z\", key: \"1mhfuq\" }],\n  [\"path\", { d: \"M6 9H4.5a1 1 0 0 1 0-5H6\", key: \"tex48p\" }]\n]);\n\nexport { Trophy as default };\n//# sourceMappingURL=trophy.js.map\n","/**\n * @license lucide-vue-next v0.544.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"upload\", [\n  [\"path\", { d: \"M12 3v12\", key: \"1x0j5s\" }],\n  [\"path\", { d: \"m17 8-5-5-5 5\", key: \"7q97r8\" }],\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","export default \"__VITE_ASSET__DoDbE3q3__\"","export default \"__VITE_ASSET__DqtGOgnA__\"","export default \"__VITE_ASSET__D8ec1TT4__\"","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Circle, Square, Triangle, Diamond } from 'lucide-vue-next'\n\n/* ===== props ===== */\nconst props = defineProps({\n  lang:  { type: String, default: 'ar' },\n  theme: { type: String, default: 'light' }\n})\nconst lang  = ref(props.lang)\nconst theme = ref(props.theme)\nwatch(()=>props.lang,  v=> lang.value  = v)\nwatch(()=>props.theme, v=> theme.value = v)\n\n/* ===== GET ===== */\nasync function get(url, params = {}) {\n  const qs = new URLSearchParams(params).toString()\n  const r  = await fetch(url + (qs ? `?${qs}` : ''), { method:'GET', credentials:'include' })\n  const data = await r.json().catch(()=> ({}))\n  if(!r.ok) throw data\n  return data\n}\n\n/* ===== i18n ===== */\nconst dir  = computed(() => (lang.value === 'ar' ? 'rtl' : 'ltr'))\nconst T = {\n  ar:{title:'التحدي 1: عملية جمع عمودية بأرقام مفقودة (رموز)',subtitle:'اسحب الأرقام وضعها مكان الرموز حتى تكتمل العملية.',digits:'الأرقام',check:'تحقق',reset:'إعادة ضبط',newQ:'سؤال جديد',correctBig:'أحسنت!',correctSub:'حل صحيح 👏 لقد كسبت نقطة.',wrong:'حاول مرة أخرى 🤔'},\n  en:{title:'Challenge 1: Column addition with missing (symbol) digits',subtitle:'Drag digits onto symbols until the addition becomes correct.',digits:'Digits',check:'Check',reset:'Reset',newQ:'New Question',correctBig:'Great!',correctSub:'Correct 👏 You earned a point.',wrong:'Try again 🤔'}\n}\nconst t = (k)=>T[lang.value][k]\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong.mp3'\n\nconst sndSuccess = new Audio(successUrl)\nconst sndClap    = new Audio(clapUrl)\nconst sndWrong   = new Audio(wrongUrl)\n\nsndSuccess.preload = 'auto'\nsndClap.preload    = 'auto'\nsndWrong.preload   = 'auto'\n\n/* ===== shapes (lucide) ===== */\nconst SHAPE_COMP = { circle: Circle, square: Square, triangle: Triangle, diamond: Diamond }\nconst SHAPE_TYPES = ['circle','square','triangle','diamond']\nconst shapeComp = t => SHAPE_COMP[t] || Circle\n\n/* ===== utils ===== */\nfunction rndInt(a,b){ return a + Math.floor(Math.random()*(b-a+1)) }\nfunction shuffle(a){ return a.slice().sort(()=>Math.random()-0.5) }\n\n/* ===== state ===== */\nconst q     = reactive({ aStr:'', bStr:'', sStr:'', hiddenMap:{}, assignMap:{}, usedShapes:[] })\nconst rowA  = ref([])   // tokens\nconst rowB  = ref([])\nconst rowS  = ref([])\n\n/* ===== generate puzzle ===== */\nfunction newPuzzle(){\n  // 1) أرقام عشوائية\n  const dA = rndInt(2,3), dB = rndInt(2,3)\n  const A  = rndInt(10**(dA-1), 10**dA-1)\n  const B  = rndInt(10**(dB-1), 10**dB-1)\n  const S  = A + B\n  q.aStr = String(A); q.bStr = String(B); q.sStr = String(S)\n\n  // 2) اختر الأرقام المخفية فقط من الأرقام الظاهرة فعلاً\n  const digitsPresent = Array.from(new Set((q.aStr+q.bStr+q.sStr).split('').map(n=>+n)))\n  const howMany       = Math.min(rndInt(2,3), digitsPresent.length)\n  const hideDigits    = shuffle(digitsPresent).slice(0, howMany)\n  const typesPicked   = shuffle(SHAPE_TYPES).slice(0, howMany)\n\n  q.hiddenMap = {}\n  hideDigits.forEach((d,i)=>{ q.hiddenMap[typesPicked[i]] = d })\n\n  // 3) كوّن التوكنز وحدد الأشكال المستخدمة فعلياً\n  const used = new Set()\n  function tokenize(str){\n    return str.split('').map(ch=>{\n      const d  = +ch\n      const sh = Object.entries(q.hiddenMap).find(([k,v])=>v===d)?.[0]\n      if (sh){ used.add(sh); return {t:'shape', v:sh} }\n      return {t:'digit', v:ch}\n    })\n  }\n  rowA.value = tokenize(q.aStr)\n  rowB.value = tokenize(q.bStr)\n  rowS.value = tokenize(q.sStr)\n\n  // 4) لا نعرض إلا الأشكال الموجودة فعلياً\n  q.usedShapes = Array.from(used)\n  q.assignMap  = Object.fromEntries(q.usedShapes.map(s=>[s,null]))\n\n  // ضمان وجود شكل واحد على الأقل\n  if(q.usedShapes.length===0) newPuzzle()\n}\n\n/* ===== DnD ===== */\nfunction onDigitDragStart(e, digit){ e.dataTransfer.setData('text/plain', String(digit)) }\nfunction onShapeDrop(e, shape){\n  const d = Number(e.dataTransfer.getData('text/plain'))\n  if(Number.isNaN(d)) return\n  if(Object.values(q.assignMap).includes(d) && q.assignMap[shape]!==d) return\n  q.assignMap[shape] = d\n  checkNow()\n}\nfunction onDragOver(e){ e.preventDefault() }\nfunction resetAssign(){ Object.keys(q.assignMap).forEach(sh=> q.assignMap[sh]=null) }\n\n/* ===== check ===== */\nconst isFilled = computed(()=> q.usedShapes.every(sh => Number.isInteger(q.assignMap[sh])) )\nfunction makeNumber(tokens){\n  return Number(tokens.map(tok => tok.t==='digit' ? tok.v : (q.assignMap[tok.v] ?? '?')).join(''))\n}\nfunction isCorrect(){\n  if(!isFilled.value) return false\n  const A = makeNumber(rowA.value), B = makeNumber(rowB.value), S = makeNumber(rowS.value)\n  return !([A,B,S].some(v => String(v).includes('?'))) && (A+B===S)\n}\n\nconst overlay = reactive({ open:false, good:true })\nasync function checkNow(){\n  if(!isFilled.value) return\n  if(isCorrect()){\n    try{ sndSuccess.currentTime=0; sndSuccess.play().catch(()=>{}) }catch{}\n    try{ sndClap.currentTime=0; sndClap.play().catch(()=>{}) }catch{}\n    overlay.open = true; overlay.good = true\n    get('/api/method/mathematics_leaders.api.game_points.add_point', { amount: 1 }).catch(()=>{})\n  }else{\n    try{ sndWrong.currentTime=0; sndWrong.play().catch(()=>{}) }catch{}\n    pushToast(t('wrong'),'warn')\n  }\n}\nfunction nextQuestion(){ overlay.open=false; newPuzzle() }\n\n/* ===== Toast ===== */\nconst toasts = ref([])\nfunction pushToast(msg,type='ok'){\n  const id = Math.random().toString(36).slice(2)\n  toasts.value.push({id,msg,type})\n  setTimeout(()=> toasts.value = toasts.value.filter(x=>x.id!==id), 1800)\n}\n\n/* init */\nonMounted(()=> newPuzzle())\n</script>\n\n<template>\n  <section class=\"wrap\" :dir=\"dir\" :data-theme=\"theme\">\n    <header class=\"hdr\">\n      <h2>{{ t('title') }}</h2>\n      <p class=\"sub\">{{ t('subtitle') }}</p>\n    </header>\n\n    <div class=\"board\">\n      <!-- فتحات القيم (تظهر فقط للأشكال الموجودة) -->\n      <div class=\"assign\" dir=\"ltr\">\n        <div v-for=\"sh in q.usedShapes\" :key=\"sh\" class=\"slot\" @drop=\"onShapeDrop($event, sh)\" @dragover=\"onDragOver\">\n          <component :is=\"shapeComp(sh)\" class=\"shape-ico\" :size=\"26\" stroke=\"var(--shape-stroke)\" :stroke-width=\"2\" :style=\"{fill:'var(--shape-fill)'}\" />\n          <div class=\"val\" :class=\"{empty: q.assignMap[sh]==null}\">\n            {{ q.assignMap[sh]==null ? '…' : q.assignMap[sh] }}\n          </div>\n        </div>\n        <div class=\"actions\">\n          <button class=\"ghost\" @click=\"resetAssign\">{{ t('reset') }}</button>\n          <button class=\"primary\" :disabled=\"!isFilled\" @click=\"checkNow\">{{ t('check') }}</button>\n          <button class=\"ghost\" @click=\"newPuzzle\">{{ t('newQ') }}</button>\n        </div>\n      </div>\n\n      <!-- عملية الجمع: اتجاه LTR ثابت للأرقام -->\n      <div class=\"col-sum\" dir=\"ltr\">\n        <div class=\"row\">\n          <span v-for=\"(tok,i) in rowA\" :key=\"'a'+i\" class=\"cell\" :class=\"tok.t\">\n            <span v-if=\"tok.t==='digit'\">{{ tok.v }}</span>\n            <component v-else :is=\"shapeComp(tok.v)\" class=\"shape-ico\" :size=\"26\" stroke=\"var(--shape-stroke)\" :stroke-width=\"2\" :style=\"{fill:'var(--shape-fill)'}\" />\n          </span>\n        </div>\n        <div class=\"row plus\"><span>+</span></div>\n        <div class=\"row\">\n          <span v-for=\"(tok,i) in rowB\" :key=\"'b'+i\" class=\"cell\" :class=\"tok.t\">\n            <span v-if=\"tok.t==='digit'\">{{ tok.v }}</span>\n            <component v-else :is=\"shapeComp(tok.v)\" class=\"shape-ico\" :size=\"26\" stroke=\"var(--shape-stroke)\" :stroke-width=\"2\" :style=\"{fill:'var(--shape-fill)'}\" />\n          </span>\n        </div>\n        <div class=\"line\"></div>\n        <div class=\"row\">\n          <span v-for=\"(tok,i) in rowS\" :key=\"'s'+i\" class=\"cell\" :class=\"tok.t\">\n            <span v-if=\"tok.t==='digit'\">{{ tok.v }}</span>\n            <component v-else :is=\"shapeComp(tok.v)\" class=\"shape-ico\" :size=\"26\" stroke=\"var(--shape-stroke)\" :stroke-width=\"2\" :style=\"{fill:'var(--shape-fill)'}\" />\n          </span>\n        </div>\n      </div>\n\n      <div class=\"digits\" dir=\"ltr\">\n        <h4>{{ t('digits') }}</h4>\n        <div class=\"tiles\">\n          <button v-for=\"d in 10\" :key=\"d-1\" class=\"tile\" draggable=\"true\" @dragstart=\"onDigitDragStart($event, d-1)\">{{ d-1 }}</button>\n        </div>\n      </div>\n    </div>\n\n    <transition name=\"fade\">\n      <div v-if=\"overlay.open\" class=\"overlay\">\n        <div class=\"sheet\">\n          <div class=\"big\">{{ t('correctBig') }}</div>\n          <p>{{ t('correctSub') }}</p>\n          <button class=\"primary\" @click=\"nextQuestion\">{{ t('newQ') }}</button>\n        </div>\n      </div>\n    </transition>\n\n    <div class=\"toasts\">\n      <div v-for=\"t in toasts\" :key=\"t.id\" class=\"toast\" :class=\"t.type\">{{ t.msg }}</div>\n    </div>\n  </section>\n</template>\n\n<style scoped>\n/* ألوان افتراضية (فاتح) */\n.wrap{\n  --shape-fill:#FFC24B; --shape-stroke:#7a2a23;\n  --ink:#2b1a1a; --peach:#ffe7db; --accent:#d64c42;\n  --panel:#ffffff; --bd:#f1d8cf; --bg:linear-gradient(180deg,#fffaf6,#fff4e9);\n  color:var(--ink); background:var(--bg); min-height:100%; padding:24px\n}\n.wrap[data-theme=\"dark\"]{\n  --shape-fill:#ffb84f; --shape-stroke:#ff8c7a;\n  --ink:#f7ebe7; --peach:#2a1714; --accent:#ff8c7a;\n  --panel:rgba(24,15,13,.85); --bd:#3c2722;\n  --bg:linear-gradient(180deg,#1b1412,#241815);\n}\n\n.hdr h2{margin:0;font-weight:800;color:#5a261f}\n.wrap[data-theme=\"dark\"] .hdr h2{color:#ffc3ba}\n.hdr .sub{margin:6px 0 18px;opacity:.75}\n\n.board{display:grid;grid-template-columns:1fr auto 1fr;gap:22px;align-items:start}\n.assign,.col-sum,.digits{background:var(--panel);border:1px solid var(--bd);border-radius:14px;box-shadow:0 10px 24px rgba(214,76,66,.10)}\n.assign{padding:12px}\n.col-sum{padding:18px 22px;min-width:260px}\n.digits{padding:12px}\n\n/* ثبّت اتجاه الأرقام */\n.assign, .col-sum, .digits, .val, .tile { direction:ltr; unicode-bidi:isolate; }\n.cell, .val, .tile { font-variant-numeric: tabular-nums; }\n\n.slot{display:flex;align-items:center;gap:10px;padding:10px;border:1px dashed var(--bd);border-radius:12px;background:#fff;margin-bottom:8px}\n.wrap[data-theme=\"dark\"] .slot{background:#2a1a16}\n.shape-ico{width:26px;height:26px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}\n.val{margin-inline-start:auto;width:40px;height:34px;display:grid;place-items:center;font-weight:800;border-radius:10px;background:#fff4e9;border:1px solid var(--bd)}\n.wrap[data-theme=\"dark\"] .val{background:#1c1512}\n\n.actions{display:flex;gap:10px;margin-top:6px}\nbutton{border:none;cursor:pointer;padding:10px 14px;border-radius:12px;font-weight:700}\nbutton.primary{background:var(--accent);color:#fff}\nbutton.primary:disabled{opacity:.5;cursor:not-allowed}\nbutton.ghost{background:#fff;border:1px solid var(--bd)}\n.wrap[data-theme=\"dark\"] button.ghost{background:#2a1a16}\nbutton.tile{background:#fff;border:1px solid var(--bd);min-width:44px;height:44px;border-radius:12px;font-weight:800}\n.wrap[data-theme=\"dark\"] button.tile{background:#2a1a16}\n\n.row{display:flex;gap:8px;justify-content:flex-end}\n.row.plus{padding:6px 0;opacity:.7}\n.cell{width:28px;height:28px;display:grid;place-items:center;font-weight:800;font-size:20px}\n.line{height:2px;background:#d8b0a8;margin:8px 0 10px}\n\n.digits h4{margin:0 0 10px 0}\n.tiles{display:flex;flex-wrap:wrap;gap:8px}\n\n.overlay{position:fixed;inset:0;background:rgba(0,0,0,.25);display:grid;place-items:center;z-index:40}\n.sheet{width:min(560px,92vw);background:#fff;border-radius:18px;padding:26px;text-align:center;box-shadow:0 18px 40px rgba(0,0,0,.2)}\n.wrap[data-theme=\"dark\"] .sheet{background:#1c1512;color:var(--ink)}\n.big{font-size:32px;font-weight:900;color:#4a2019}\n.wrap[data-theme=\"dark\"] .big{color:#ffc3ba}\n\n.toasts{position:fixed;bottom:18px;inset-inline:0;display:grid;justify-content:center;gap:8px;z-index:50}\n.toast{background:#fff;border:1px solid var(--bd);padding:10px 14px;border-radius:999px;box-shadow:0 8px 20px rgba(0,0,0,.08);font-weight:700}\n.toast.warn{color:#7a2a23}\n.fade-enter-active,.fade-leave-active{transition:opacity .15s}\n.fade-enter-from,.fade-leave-to{opacity:0}\n\n@media (max-width: 900px){\n  .board{grid-template-columns:1fr}\n  .col-sum{order:-1}\n}\n</style>\n","export default \"__VITE_ASSET__DtFZ1X$K__\"","export default \"__VITE_ASSET__DPmZGsGU__\"","<script setup>\nimport { ref, computed, reactive, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{ title:'التحدي 2: شبكة أعداد تزيد بمقدار {STEP}',\n       rule:'كل خانة تزيد {STEP} عن اليسار وعن الأعلى. اسحب الأعداد المفقودة إلى أماكنها.',\n       newQ:'سؤال جديد', check:'تحقّق', reset:'إعادة تعيين', correct:'إجابة صحيحة',\n       wrong:'تحقق من القيم', bank:'لوحة الأعداد', clear:'تفريغ الخلية' },\n  en:{ title:'Challenge 2: Number grid with step {STEP}',\n       rule:'Each cell increases by {STEP} from its left and its top. Drag the missing numbers into place.',\n       newQ:'New puzzle', check:'Check', reset:'Reset', correct:'Correct answer',\n       wrong:'Check your values', bank:'Number bank', clear:'Clear cell' }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n// أصوات\n// const sOK = typeof Audio!=='undefined'?new Audio('/sounds/success.mp3'):null\n// const sClap = typeof Audio!=='undefined'?new Audio('/sounds/clap.mp3'):null\n// const sWrong = typeof Audio!=='undefined'?new Audio('/sounds/wrong.mp3'):null\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\n\nconst sOK   = typeof Audio !== 'undefined' ? new Audio(successUrl) : null\nconst sClap = typeof Audio !== 'undefined' ? new Audio(clapUrl)    : null\nconst sWrong= typeof Audio !== 'undefined' ? new Audio(wrongUrl)   : null\n\nsOK && (sOK.preload = 'auto')\nsClap && (sClap.preload = 'auto')\nsWrong && (sWrong.preload = 'auto')\n\n\n// عشوائي\nconst stepsPool = [100,200,500,1000,2000]        // يمكنك تعديل القائمة\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n// حالة\nconst size = ref(3)\nconst step = ref(1000)          // متغير وعشوائي لكل لغز\nconst base = ref(0)\nconst grid = ref([])            // القيم الصحيحة\nconst blanks = ref(new Set())   // \"r,c\"\nconst answerMap = ref({})       // \"r,c\" -> value\nconst bankCounts = ref({})      // value -> remaining count\nconst solved = ref(false)\nconst toast = ref(null)\n\n// عناوين ديناميكية تظهر الـ step الحالي\nconst titleText = computed(()=> T[L.value].title.replaceAll('{STEP}', step.value))\nconst ruleText  = computed(()=> T[L.value].rule.replaceAll('{STEP}', step.value))\n\nconst keyOf = (r,c)=>`${r},${c}`\n\nfunction buildGrid(n, start, stp){\n  const g=[]\n  for(let r=0;r<n;r++){ const row=[]\n    for(let c=0;c<n;c++){ row.push(start + stp*(r+c)) }\n    g.push(row)\n  } return g\n}\n\nfunction pickBlanks(n){\n  const all=[]\n  for(let r=0;r<n;r++) for(let c=0;c<n;c++) all.push([r,c])\n  const filtered = all.filter(([r,c])=>!(r===0&&c===0))\n  const k=rndInt(3,5)\n  return new Set(shuffle(filtered).slice(0,k).map(([r,c])=>keyOf(r,c)))\n}\n\nfunction buildBankCounts(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const [r,c]=k.split(',').map(Number)\n    const v=grid.value[r][c]\n    counts[v]=(counts[v]||0)+1\n  })\n  bankCounts.value=counts\n}\n\n// مصفوفة عرض للبنك وفق الكميّات الحالية\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}\n  // اختيار step وقاعدة\n  step.value = stepsPool[rndInt(0, stepsPool.length-1)]\n  // اختيار base\n  const thousands = rndInt(5, 19) * 100     // قاعدة لطيفة لأرقام 3–5 خانات\n  base.value = thousands\n  const n=size.value\n  grid.value=buildGrid(n, base.value, step.value)\n  blanks.value=pickBlanks(n)\n  buildBankCounts()\n}\n\nfunction isFilled(){\n  for(const k of blanks.value){ if(answerMap.value[k]==null) return false }\n  return true\n}\nfunction isCorrect(){\n  if(!isFilled()) return false\n  for(const k of blanks.value){\n    const [r,c]=k.split(',').map(Number)\n    if(answerMap.value[k]!==grid.value[r][c]) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value=L.value==='ar'?'أكمل كل الخانات':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\n\nfunction resetAnswers(){\n  answerMap.value={}\n  buildBankCounts()\n  toast.value=null; solved.value=false\n}\n\n// سحب وإفلات بكميّات\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev,key){\n  ev.preventDefault()\n  const v=Number(ev.dataTransfer.getData('text/plain'))\n  // إعادة المخزون لقيمة كانت في الخلية\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  // استهلاك من البنك إن متوفر\n  if((bankCounts.value[v]||0)===0){ return } // لا توجد قطع متاحة\n  bankCounts.value[v]-=1\n  answerMap.value[key]=v\n  toast.value=null\n}\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n}\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>toast.value=null)\n</script>\n\n<template>\n  <div class=\"challenge2\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ titleText }}</h2>\n    <p class=\"rule\">{{ ruleText }}</p>\n\n    <div class=\"layout\">\n      <div class=\"grid\">\n        <div v-for=\"r in size\" :key=\"'r'+r\" class=\"row\">\n          <div v-for=\"c in size\" :key=\"'c'+r+'-'+c\" class=\"cell\">\n            <template v-if=\"!blanks.has(`${r-1},${c-1}`)\">\n              <span class=\"num\" :style=\"numDir\">{{ grid[r-1][c-1] }}</span>\n            </template>\n            <template v-else>\n              <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event, `${r-1},${c-1}`)\">\n                <span v-if=\"answerMap[`${r-1},${c-1}`]!=null\" class=\"num\" :style=\"numDir\">\n                  {{ answerMap[`${r-1},${c-1}`] }}\n                </span>\n                <span v-else class=\"placeholder\">؟</span>\n              </div>\n              <button class=\"clear\" @click=\"clearCell(`${r-1},${c-1}`)\"><Eraser class=\"ic\" /> {{ T[L].clear }}</button>\n            </template>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"bank\">\n        <div class=\"bank-title\">{{ T[L].bank }}</div>\n        <div class=\"bank-items\">\n          <button v-for=\"v in bankList\" :key=\"v + '_' + Math.random()\" class=\"chip\"\n                  draggable=\"true\" @dragstart=\"onDragStart($event, v)\" :style=\"numDir\">\n            {{ v }}\n          </button>\n        </div>\n\n        <div class=\"actions\">\n          <button class=\"btn\" @click=\"resetAnswers\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n          <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n          <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n        </div>\n\n        <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n      </div>\n    </div>\n\n    <div v-if=\"solved\" class=\"overlay\">\n      <div class=\"card\">\n        <div class=\"big\">{{ T[L].correct }}</div>\n        <button class=\"btn\" @click=\"newPuzzle\">{{ T[L].newQ }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* نفس أنماطك تقريباً، مع زر تفريغ */\n.challenge2{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .challenge2{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem } .rule{ color:var(--muted); margin:0 0 1rem }\n.layout{ display:grid; grid-template-columns:1fr 260px; gap:1rem }\n.grid{ background:var(--bg); border:1px solid #e5e7eb22; border-radius:1rem; padding:1rem; box-shadow:0 4px 14px rgba(0,0,0,.06) }\n.row{ display:grid; grid-template-columns:repeat(3,1fr) }\n.cell{ border:1px dashed #cbd5e1; min-height:86px; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.25rem; padding:.25rem }\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.25rem }\n.placeholder{ color:var(--muted); font-size:1.25rem }\n.dropzone{ width:100%; flex:1; display:flex; align-items:center; justify-content:center; background:rgba(99,102,241,.06); border-radius:.5rem }\n.clear{ font-size:.75rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n.bank{ display:flex; flex-direction:column; gap:.75rem }\n.bank-title{ font-weight:600; color:var(--muted) }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ border:1px solid #e5e7eb55; background:var(--bg); padding:.4rem .6rem; border-radius:.75rem; cursor:grab; font-variant-numeric:tabular-nums }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.25rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n.toast{ margin-top:.5rem; padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n.overlay{ position:fixed; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center }\n.card{ background:var(--bg); color:var(--fg); padding:1rem 1.25rem; border-radius:1rem; box-shadow:0 10px 30px rgba(0,0,0,.25); display:flex; flex-direction:column; gap:.75rem; align-items:center }\n.big{ font-size:1.25rem; font-weight:700 }\n</style>\n","export default \"__VITE_ASSET__DjkG8rNr__\"","export default \"__VITE_ASSET__MdmM32dY__\"","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { RefreshCw, RotateCcw, Check } from 'lucide-vue-next'\n\nconst props = defineProps({\n  lang: { type: String, default: 'ar' },\n  theme: { type: String, default: 'light' }\n})\n\nconst T = {\n  ar: {\n    title: 'التحدي 3: إيجاد عددين من المجموع والفرق',\n    rule: 'اختر الزوج الصحيح (أكبر، أصغر) بحيث يكون مجموعهما S والفرق بينهما D.',\n    newQ: 'سؤال جديد',\n    reset: 'إعادة تعيين',\n    check: 'تحقّق',\n    correct: 'إجابة صحيحة',\n    wrong: 'إجابة غير صحيحة',\n    done: 'أكملت هذه الجولة',\n    q: (i, S, D) => `(${i}) جد عددين ناتج جمعهما ${S} والفرق بينهما ${D}`\n  },\n  en: {\n    title: 'Challenge 3: Find two numbers from sum and difference',\n    rule: 'Pick the correct pair (greater, smaller) with sum S and difference D.',\n    newQ: 'New puzzle',\n    reset: 'Reset',\n    check: 'Check',\n    correct: 'Correct',\n    wrong: 'Incorrect',\n    done: 'Round completed',\n    q: (i, S, D) => `(${i}) Find two numbers with sum ${S} and difference ${D}`\n  }\n}\nconst L = computed(() => (T[props.lang] ? props.lang : 'ar'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success3.mp3'\n// import clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'   // تأكد من الاسم الصحيح للملف\n\nconst sOK   = typeof Audio !== 'undefined' ? new Audio(successUrl) : null\n// const sClap = typeof Audio !== 'undefined' ? new Audio(clapUrl)    : null\nconst sWrong= typeof Audio !== 'undefined' ? new Audio(wrongUrl)   : null\n\nsOK && (sOK.preload = 'auto')\n// sClap && (sClap.preload = 'auto')\nsWrong && (sWrong.preload = 'auto')\n\n\n// عشوائي\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n// بنية السؤال\n/**\n * question = {\n *  S, D, ans:[A,B], options:[{a,b,isAns}], pickedIndex:null|number, judged:false, firstTry:true\n * }\n */\nconst N = 4\nconst questions = ref([])\nconst solvedCount = computed(() => questions.value.filter(q => q.judged && q.options[q.pickedIndex]?.isAns).length)\nconst allAnswered = computed(() => questions.value.length>0 && questions.value.every(q => q.judged))\n\nfunction makeAns(S,D){\n  // الشرط: نفس الإشارة parity، و S >= D >= 0\n  // الحل: A=(S+D)/2 ، B=(S-D)/2\n  return [(S + D)/2, (S - D)/2]\n}\nfunction validPair(x){ return Number.isInteger(x) && x>=0 }\nfunction mkQuestion(){\n  // نختار S,D بحيث يعطيان حلين صحيحين صحيحين (A,B)\n  let S,D,A,B\n  while(true){\n    S = rndInt(10, 60)                 // نطاق مجموع معقول\n    D = rndInt(0, 20)                  // نطاق فرق معقول\n    if ((S & 1) !== (D & 1)) continue  // شرط التكافؤ\n    if (S < D) continue\n    ;[A,B] = makeAns(S,D)\n    if (validPair(A) && validPair(B)) break\n  }\n  // البدائل: تبديل طفيف يضلّل بدون كسر المنطق\n  const alts = new Set()\n  const addAlt = (x,y)=>{\n    const k = `${x},${y}`\n    if (x>=0 && y>=0 && Number.isInteger(x) && Number.isInteger(y) && k !== `${A},${B}`) alts.add(k)\n  }\n  addAlt(A+1,B-1)\n  addAlt(A-1,B+1)\n  addAlt(A+2,B-2)\n  addAlt(A-2,B+2)\n  addAlt(A+1,B)    // خطأ في الفرق\n  addAlt(A,B+1)    // خطأ في الفرق\n  const opts = [{a:A,b:B,isAns:true}]\n  for (const k of Array.from(alts).slice(0,3)) {\n    const [a,b] = k.split(',').map(n=>Number(n))\n    opts.push({a,b,isAns:false})\n    if (opts.length===4) break\n  }\n  while(opts.length<4){ // احتياط\n    const da = rndInt(-3,3), db = rndInt(-3,3)\n    const a = Math.max(0, A+da), b = Math.max(0, B+db)\n    if(!(a===A && b===B)) opts.push({a,b,isAns:false})\n  }\n  return {\n    S, D, ans:[A,B],\n    options: shuffle(opts),\n    pickedIndex: null,\n    judged: false,\n    firstTry: true\n  }\n}\n\nfunction newRound(){\n  questions.value = Array.from({length:N}, ()=> mkQuestion())\n}\nfunction resetRound(){\n  for(const q of questions.value){\n    q.pickedIndex = null\n    q.judged = false\n    q.firstTry = true\n  }\n}\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1', {\n      method:'GET', credentials:'include'\n    })\n  }catch{}\n}\nasync function pickOption(q, idx){\n  if(q.judged) return\n  q.pickedIndex = idx\n  q.judged = true\n  const ok = q.options[idx].isAns\n  if(ok){\n    sOK && sOK.play()\n    if(allAnswered.value) sOK && sOK.play()\n    // نقطة واحدة للإجابة الصحيحة من أول محاولة\n    if(q.firstTry) await addPoint()\n  }else{\n    sWrong && sWrong.play()\n  }\n}\nfunction unjudge(q){ // يسمح بالمحاولة مجدداً إن أراد\n  q.judged = false\n  q.firstTry = false\n  q.pickedIndex = null\n}\n\nonMounted(newRound)\nwatch(()=>props.lang,()=>{}) // لا شيء، فقط الحفاظ على توافق الواجهة\n</script>\n\n<template>\n  <div class=\"challenge3\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <div class=\"qs\">\n      <div v-for=\"(q,i) in questions\" :key=\"i\" class=\"qcard\">\n        <div class=\"qtext\">{{ T[L].q(i+1, q.S, q.D) }}</div>\n\n        <div class=\"opts\">\n          <button\n            v-for=\"(op,j) in q.options\"\n            :key=\"j\"\n            class=\"opt\"\n            :class=\"{\n              chosen: q.pickedIndex===j,\n              ok: q.judged && q.options[j].isAns,\n              bad: q.judged && q.pickedIndex===j && !q.options[j].isAns\n            }\"\n            @click=\"pickOption(q, j)\"\n          >\n            ( {{ op.a }} ، {{ op.b }} )\n          </button>\n        </div>\n\n        <div v-if=\"q.judged\" class=\"feedback\" :class=\"{ok: q.options[q.pickedIndex].isAns}\">\n          {{ q.options[q.pickedIndex].isAns ? T[L].correct : T[L].wrong }}\n          <button class=\"retry\" v-if=\"!q.options[q.pickedIndex].isAns\" @click=\"unjudge(q)\">↺</button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"toolbar\">\n      <div class=\"status\">\n        <Check class=\"ic\" /> {{ solvedCount }} / {{ questions.length }}\n        <span v-if=\"allAnswered && solvedCount===questions.length\" class=\"done\"> · {{ T[L].done }}</span>\n      </div>\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetRound\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"newRound\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.challenge3{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .challenge3{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.qs{ display:grid; gap:.75rem }\n.qcard{\n  background:var(--bg);\n  border:1px solid #e5e7eb55; border-radius:1rem;\n  padding:.75rem .9rem; box-shadow:0 4px 14px rgba(0,0,0,.06)\n}\n.qtext{ font-weight:600; margin-bottom:.5rem }\n.opts{ display:flex; flex-wrap:wrap; gap:.5rem }\n.opt{\n  padding:.45rem .7rem; border-radius:.75rem; cursor:pointer;\n  border:1px solid #e5e7ebaa; background:var(--bg);\n  font-variant-numeric:tabular-nums;\n}\n.opt.chosen{ box-shadow:0 0 0 2px rgba(99,102,241,.35) inset }\n.opt.ok{ background:#dcfce7; border-color:#bbf7d0; color:#166534 }\n.opt.bad{ background:#fee2e2; border-color:#fecaca; color:#991b1b }\n\n.feedback{ margin-top:.4rem; font-size:.9rem; color:#991b1b }\n.feedback.ok{ color:#166534 }\n.retry{ margin-inline-start:.5rem; border:none; background:transparent; cursor:pointer }\n\n.toolbar{\n  display:flex; justify-content:space-between; align-items:center; margin-top:1rem\n}\n.status{ color:var(--muted); display:flex; align-items:center; gap:.35rem }\n.done{ color:#166534 }\n.actions{ display:flex; gap:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem;\n      border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n</style>\n","export default \"__VITE_ASSET__ddQL4cG6__\"","export default \"__VITE_ASSET__yY_pt9VM__\"","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'التحدي 4: أكمل جدول الضرب',\n    rule:'جدول ضرب بعناوين صفوف وأعمدة. اسحب القيم الصحيحة من الأسفل إلى الخانات الفارغة.',\n    bank:'لوحة الأعداد', newQ:'سؤال جديد', reset:'إعادة تعيين',\n    check:'تحقّق', correct:'إجابة صحيحة', wrong:'تحقق من القيم', clear:'تفريغ الخلية'\n  },\n  en:{\n    title:'Challenge 4: Complete the multiplication table',\n    rule:'A multiplication table with row/column headers. Drag correct values into the blanks.',\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset',\n    check:'Check', correct:'Correct', wrong:'Check your values', clear:'Clear cell'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n// أصوات اختيارية\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success4.mp3'\n// import clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong4.mp3'   // تأكد من الاسم الصحيح للملف\n\nconst sOK   = typeof Audio !== 'undefined' ? new Audio(successUrl) : null\n// const sClap = typeof Audio !== 'undefined' ? new Audio(clapUrl)    : null\nconst sWrong= typeof Audio !== 'undefined' ? new Audio(wrongUrl)   : null\n\nsOK && (sOK.preload = 'auto')\n// sClap && (sClap.preload = 'auto')\nsWrong && (sWrong.preload = 'auto')\n\n\n// أدوات عشوائية\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n// الحالة\nconst n = 3                                    // جدول 3×3\nconst factorsR = ref([])                       // عناوين الصفوف\nconst factorsC = ref([])                       // عناوين الأعمدة\nconst blanks = ref(new Set())                  // مفاتيح الفراغات\nconst answerMap = ref({})                      // key -> value المُسقَط\nconst bankCounts = ref({})                     // value -> المتبقي\nconst solved = ref(false)\nconst toast = ref(null)\n\n// بناء القيم الصحيحة لكل خانة\nfunction valueAt(r,c){\n  if(r===0 && c===0) return '×'\n  if(r===0) return factorsC.value[c-1]\n  if(c===0) return factorsR.value[r-1]\n  return factorsR.value[r-1] * factorsC.value[c-1]\n}\n\n// مفاتيح الخانات\nconst keyH = (r,c)=> (r===0||c===0)?`h:${r},${c}`:`c:${r},${c}`\n\n// اختيار عوامل بدون تكرار من 1..9\nfunction pickFactors(k){\n  return shuffle([1,2,3,4,5,6,7,8,9]).slice(0,k).sort((a,b)=>a-b)\n}\n\n// اختيار الفراغات\nfunction pickBlanks(){\n  const all=[]\n  for(let r=0;r<=n;r++) for(let c=0;c<=n;c++){\n    if(r===0 && c===0) continue // زاوية × ثابتة\n    all.push([r,c])\n  }\n  // لا نجعل كل الجسم فارغاً؛ نضمن خلية جسم واحدة على الأقل ظاهرة للمساعدة\n  const bodyCells = all.filter(([r,c])=> r>0 && c>0)\n  const shownHelp = shuffle(bodyCells)[0]\n  const candidates = all.filter(([r,c])=> !(r===shownHelp[0] && c===shownHelp[1]))\n  const k = rndInt(5, 8) // عدد الفراغات\n  const chosen = shuffle(candidates).slice(0,k)\n  return new Set(chosen.map(([r,c])=> keyH(r,c)))\n}\n\n// تحضير بنك الأعداد بكميات\nfunction rebuildBank(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const [tag,rc]=k.split(':'); const [r,c]=rc.split(',').map(Number)\n    const v = valueAt(r,c)\n    counts[v]=(counts[v]||0)+1\n  })\n  // إعادة احتساب بعد إسقاط إجابات موجودة\n  for(const [k,v] of Object.entries(answerMap.value)){\n    counts[v]=(counts[v]||0)-1\n  }\n  for(const [v,ct] of Object.entries(counts)){ if(ct<=0) delete counts[v] }\n  bankCounts.value=counts\n}\n\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}\n  factorsR.value = pickFactors(n)\n  factorsC.value = pickFactors(n)\n  blanks.value = pickBlanks()\n  rebuildBank()\n}\n\nfunction isFilled(){\n  for(const k of blanks.value){ if(answerMap.value[k]==null) return false }\n  return true\n}\nfunction isCorrect(){\n  if(!isFilled()) return false\n  for(const k of blanks.value){\n    const [_,rc]=k.split(':'); const [r,c]=rc.split(',').map(Number)\n    if(answerMap.value[k] !== valueAt(r,c)) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar'?'أكمل كل الخانات':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){\n  answerMap.value={}\n  rebuildBank()\n  toast.value=null; solved.value=false\n}\n\n// سحب/إفلات مع كميّات\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev,key){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  // إن كانت الخلية تحتوي قيمة نعيدها للبنك\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  if((bankCounts.value[v]||0)===0) return\n  bankCounts.value[v]-=1\n  answerMap.value[key]=v\n  toast.value=null\n}\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n}\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"challenge4\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <!-- الجدول -->\n    <div class=\"table\">\n      <div class=\"row\" v-for=\"r in (n+1)\" :key=\"'r'+r\">\n        <div\n          class=\"cell header\"\n          v-for=\"c in (n+1)\"\n          :key=\"'c'+r+'-'+c\"\n          :class=\"{ th: r===1 || c===1, corner: r===1 && c===1 }\"\n        >\n          <!-- الزاوية -->\n          <template v-if=\"r===1 && c===1\">\n            ×\n          </template>\n\n          <!-- خلايا غير فارغة -->\n          <template v-else-if=\"!blanks.has((r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`)\">\n            <span class=\"num\" :style=\"numDir\">{{ valueAt(r-1,c-1) }}</span>\n          </template>\n\n          <!-- خلايا فارغة -->\n          <template v-else>\n            <div class=\"dropzone\"\n                 @dragover=\"allowDrop\"\n                 @drop=\"onDrop($event, (r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`)\">\n              <span v-if=\"answerMap[(r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`] != null\"\n                    class=\"num\" :style=\"numDir\">\n                {{ answerMap[(r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`] }}\n              </span>\n              <span v-else class=\"placeholder\">؟</span>\n            </div>\n            <button class=\"clear\" @click=\"clearCell((r===1||c===1)?`h:${r-1},${c-1}`:`c:${r-1},${c-1}`)\">\n              <Eraser class=\"ic\"/> {{ T[L].clear }}\n            </button>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <!-- البنك -->\n    <div class=\"side\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"v in bankList\"\n          :key=\"v + '_' + Math.random()\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, v)\"\n          :style=\"numDir\"\n        >{{ v }}</button>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n\n    <!-- نجاح -->\n    <div v-if=\"solved\" class=\"overlay\">\n      <div class=\"card\">\n        <div class=\"big\">{{ T[L].correct }}</div>\n        <button class=\"btn\" @click=\"newPuzzle\">{{ T[L].newQ }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.challenge4{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6B7280 }\n[data-theme=\"dark\"] .challenge4{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem } .rule{ color:var(--muted); margin:0 0 1rem }\n\n/* الجدول */\n.table{ display:inline-block; background:var(--bg); border-radius:1rem; padding:.75rem; box-shadow:0 4px 14px rgba(0,0,0,.06) }\n.row{ display:grid; grid-template-columns: repeat(4, 110px) }\n.cell{ border:1px dashed #cbd5e1; min-height:72px; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.25rem; padding:.25rem }\n.th{ background:rgba(234,179,8,.12) }\n.corner{ background:rgba(234,179,8,.25); font-weight:700 }\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.15rem }\n.placeholder{ color:var(--muted); font-size:1.15rem }\n.dropzone{ width:100%; flex:1; display:flex; align-items:center; justify-content:center; background:rgba(99,102,241,.06); border-radius:.5rem }\n.clear{ font-size:.75rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n\n/* البنك والعمليات */\n.side{ margin-top:1rem }\n.bank-title{ font-weight:600; color:var(--muted); margin-bottom:.25rem }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ border:1px solid #e5e7eb55; background:var(--bg); padding:.4rem .6rem; border-radius:.75rem; cursor:grab; font-variant-numeric:tabular-nums }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.toast{ margin-top:.5rem; padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n\n/* نجاح */\n.overlay{ position:fixed; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center }\n.card{ background:var(--bg); color:var(--fg); padding:1rem 1.25rem; border-radius:1rem; box-shadow:0 10px 30px rgba(0,0,0,.25); display:flex; flex-direction:column; gap:.75rem; align-items:center }\n.big{ font-size:1.25rem; font-weight:700 }\n</style>\n","export default \"__VITE_ASSET___uDUUqD3__\"","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{ title:'التحدي 5: مخطط مثلث (ضرب)',\n       rule:'كل مربع على الضلع يساوي حاصل ضرب العدديْن في الدائرتيْن المجاورتين له. اسحب القيم المفقودة إلى المربعات.',\n       bank:'لوحة الأعداد', newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n       correct:'إجابة صحيحة', wrong:'تحقق من القيم', clear:'تفريغ الخلية' },\n  en:{ title:'Challenge 5: Triangle product',\n       rule:'Each edge-square equals the product of the two adjacent circles. Drag missing values into the squares.',\n       bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n       correct:'Correct answer', wrong:'Check your values', clear:'Clear cell' }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong5.mp3'   // تأكد من الاسم الصحيح للملف\n\nconst sOK   = typeof Audio !== 'undefined' ? new Audio(successUrl) : null\nconst sClap = typeof Audio !== 'undefined' ? new Audio(clapUrl)    : null\nconst sWrong= typeof Audio !== 'undefined' ? new Audio(wrongUrl)   : null\n\nsOK && (sOK.preload = 'auto')\nsClap && (sClap.preload = 'auto')\nsWrong && (sWrong.preload = 'auto')\n\n// utils\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n// state\nconst circles = ref([2,3,4])         // [top, left, right]\nconst squares = ref({ t:0, l:0, r:0 }) // edge squares: top edge between left-right? define: t=top (left-right base), l=left (top-left), r=right (top-right)\nconst blanks = ref(new Set())        // which of ['t','l','r'] are blank\nconst answerMap = ref({})            // key -> value\nconst bankCounts = ref({})           // value -> remaining copies\nconst solved = ref(false)\nconst toast = ref(null)\n\nfunction buildTriangle(){\n  // choose distinct circle values 2..9\n  const vals = shuffle([2,3,4,5,6,7,8,9]).slice(0,3)\n  circles.value = [vals[0], vals[1], vals[2]]\n  const [ct, cl, cr] = circles.value   // top, left, right\n  // products\n  squares.value = {\n    l: ct * cl, // left edge (top-left)\n    r: ct * cr, // right edge (top-right)\n    t: cl * cr  // base edge (left-right)\n  }\n}\n\nfunction pickBlanks(){\n  const keys = ['l','r','t']\n  const k = rndInt(2,3)\n  blanks.value = new Set(shuffle(keys).slice(0,k))\n}\n\nfunction rebuildBank(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const v = squares.value[k]\n    counts[v]=(counts[v]||0)+1\n  })\n  // subtract placed answers\n  for(const [k,v] of Object.entries(answerMap.value)){\n    counts[v]=(counts[v]||0)-1\n  }\n  for(const [v,ct] of Object.entries(counts)){ if(ct<=0) delete counts[v] }\n  bankCounts.value = counts\n}\n\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}\n  buildTriangle()\n  pickBlanks()\n  rebuildBank()\n}\n\nfunction isFilled(){\n  for(const k of blanks.value){ if(answerMap.value[k]==null) return false }\n  return true\n}\nfunction isCorrect(){\n  if(!isFilled()) return false\n  for(const k of blanks.value){\n    if(answerMap.value[k] !== squares.value[k]) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar'?'أكمل كل الخانات':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){\n  answerMap.value={}\n  rebuildBank()\n  toast.value=null; solved.value=false\n}\n\n// drag & drop\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev,key){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  if((bankCounts.value[v]||0)===0) return\n  bankCounts.value[v]-=1\n  answerMap.value[key]=v\n  toast.value=null\n}\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n}\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"challenge5\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <!-- الرسم -->\n    <div class=\"tri-wrap\">\n      <!-- الروابط -->\n      <svg class=\"links\" viewBox=\"0 0 300 260\" preserveAspectRatio=\"none\">\n        <line x1=\"150\" y1=\"40\" x2=\"60\"  y2=\"140\" />\n        <line x1=\"150\" y1=\"40\" x2=\"240\" y2=\"140\" />\n        <line x1=\"60\"  y1=\"140\" x2=\"240\" y2=\"140\" />\n      </svg>\n\n      <!-- الدوائر -->\n      <div class=\"circle top\" :style=\"numDir\">{{ circles[0] }}</div>\n      <div class=\"circle left\" :style=\"numDir\">{{ circles[1] }}</div>\n      <div class=\"circle right\" :style=\"numDir\">{{ circles[2] }}</div>\n\n      <!-- المربعات على الأضلاع -->\n      <!-- left edge -->\n      <div class=\"square left-sq\">\n        <template v-if=\"!blanks.has('l')\">\n          <span class=\"num\" :style=\"numDir\">{{ squares.l }}</span>\n        </template>\n        <template v-else>\n          <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event,'l')\">\n            <span v-if=\"answerMap['l']!=null\" class=\"num\" :style=\"numDir\">{{ answerMap['l'] }}</span>\n            <span v-else class=\"placeholder\">؟</span>\n          </div>\n          <button class=\"clear\" @click=\"clearCell('l')\"><Eraser class=\"ic\"/> {{ T[L].clear }}</button>\n        </template>\n      </div>\n\n      <!-- right edge -->\n      <div class=\"square right-sq\">\n        <template v-if=\"!blanks.has('r')\">\n          <span class=\"num\" :style=\"numDir\">{{ squares.r }}</span>\n        </template>\n        <template v-else>\n          <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event,'r')\">\n            <span v-if=\"answerMap['r']!=null\" class=\"num\" :style=\"numDir\">{{ answerMap['r'] }}</span>\n            <span v-else class=\"placeholder\">؟</span>\n          </div>\n          <button class=\"clear\" @click=\"clearCell('r')\"><Eraser class=\"ic\"/> {{ T[L].clear }}</button>\n        </template>\n      </div>\n\n      <!-- base edge -->\n      <div class=\"square base-sq\">\n        <template v-if=\"!blanks.has('t')\">\n          <span class=\"num\" :style=\"numDir\">{{ squares.t }}</span>\n        </template>\n        <template v-else>\n          <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event,'t')\">\n            <span v-if=\"answerMap['t']!=null\" class=\"num\" :style=\"numDir\">{{ answerMap['t'] }}</span>\n            <span v-else class=\"placeholder\">؟</span>\n          </div>\n          <button class=\"clear\" @click=\"clearCell('t')\"><Eraser class=\"ic\"/> {{ T[L].clear }}</button>\n        </template>\n      </div>\n    </div>\n\n    <!-- البنك -->\n    <div class=\"side\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button v-for=\"v in bankList\" :key=\"v + '_' + Math.random()\" class=\"chip\"\n                draggable=\"true\" @dragstart=\"onDragStart($event, v)\" :style=\"numDir\">\n          {{ v }}\n        </button>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n\n    <div v-if=\"solved\" class=\"overlay\">\n      <div class=\"card\">\n        <div class=\"big\">{{ T[L].correct }}</div>\n        <button class=\"btn\" @click=\"newPuzzle\">{{ T[L].newQ }}</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.challenge5{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .challenge5{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n/* الرسم */\n.tri-wrap{\n  position:relative;\n  width:360px;            /* أوسع من قبل لتباعد الأضلاع */\n  height:300px;\n  margin:0 auto 1rem;\n  background:var(--bg);\n  border-radius:1rem;\n  box-shadow:0 4px 14px rgba(0,0,0,.06);\n  padding:8px;            /* مساحة إضافية من الداخل */\n}\n\n.links{ position:absolute; inset:0; pointer-events:none }\n.links line{ stroke:#cbd5e1; stroke-width:2 }\n\n.circle{\n  position:absolute; width:58px; height:58px; border-radius:9999px;\n  background:rgba(234,179,8,.22);\n  display:flex; align-items:center; justify-content:center;\n  font-weight:700; font-variant-numeric:tabular-nums;\n}\n.top{   left:151px; top:24px }     /* 180 - 29 */\n.left{  left:51px;  top:168px }\n.right{ right:51px; top:168px }\n\n.square{\n  position:absolute; width:74px; height:60px;\n  background:rgba(99,102,241,.08);\n  border-radius:.75rem; border:1px dashed #cbd5e1;\n  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.25rem;\n}\n.left-sq{  left:70px;  top:88px }  /* أبعدناها عن الوسط */\n.right-sq{ right:70px; top:88px }\n.base-sq{  left:143px; bottom:32px } /* (360-74)/2 لتوسيط القاعدة */\n\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.15rem }\n.placeholder{ color:var(--muted); font-size:1.15rem }\n.dropzone{ width:100%; flex:1; display:flex; align-items:center; justify-content:center; }\n.clear{ font-size:.75rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n\n/* البنك */\n.side{ max-width:420px; margin:0 auto }\n.bank-title{ font-weight:600; color:var(--muted); margin:.25rem 0 }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ border:1px solid #e5e7eb55; background:var(--bg); padding:.4rem .6rem; border-radius:.75rem; cursor:grab; font-variant-numeric:tabular-nums }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.toast{ margin-top:.5rem; padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n\n/* نجاح */\n.overlay{ position:fixed; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center }\n.card{ background:var(--bg); color:var(--fg); padding:1rem 1.25rem; border-radius:1rem; box-shadow:0 10px 30px rgba(0,0,0,.25); display:flex; flex-direction:column; gap:.75rem; align-items:center }\n.big{ font-size:1.25rem; font-weight:700 }\n</style>\n\n","<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { RefreshCw, RotateCcw, Check } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title: 'التحدي 6: اختر ثلاث خلايا من شبكة بحيث لا تكون في الصف أو العمود نفسه ويكون مجموعها الهدف',\n    rule: (n,target)=> `شبكة ${n}×${n}. اختر ثلاث خلايا كلٌّ منها في صف وعمود مختلفين بحيث يساوي مجموعها ${target}.`,\n    newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n    correct:'إجابة صحيحة', wrong:'تحقق من القيود أو من المجموع', picked:'المختار: '\n  },\n  en:{\n    title: 'Challenge 6: Pick 3 cells in different rows and columns to reach the target sum',\n    rule: (n,target)=> `A ${n}×${n} grid. Pick three cells, one per distinct row and column, whose sum equals ${target}.`,\n    newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct', wrong:'Check the constraints or the sum', picked:'Picked: '\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds (approved style) ===== */\nimport successUrl from '@/assets/sounds/success.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\n\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== utils ===== */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n/* ===== state ===== */\nconst n = ref(3)\nconst grid = ref([])             // 2D numbers\nconst target = ref(0)            // target sum (guaranteed solution exists)\nconst picks = ref([])            // [{r,c}]\nconst solved = ref(false)\nconst toast = ref(null)\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\nconst pickedSum = computed(()=> picks.value.reduce((s,p)=> s + grid.value[p.r][p.c], 0))\n\n/* ensure a valid solution exists by constructing it first */\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; picks.value=[]\n  n.value = [3,4][rndInt(0,1)]\n  // fill grid with random 1..9\n  grid.value = Array.from({length:n.value}, ()=> Array.from({length:n.value}, ()=> rndInt(1,9)))\n  // choose 3 distinct rows and 3 distinct cols\n  const rows = shuffle([...Array(n.value).keys()]).slice(0,3)\n  const cols = shuffle([...Array(n.value).keys()]).slice(0,3)\n  // map 1-1 by permutation\n  const permCols = shuffle(cols.slice())\n  const solution = rows.map((r,i)=> ({r, c: permCols[i]}))\n  target.value = solution.reduce((s,p)=> s + grid.value[p.r][p.c], 0)\n}\n\nfunction resetPicks(){ picks.value=[]; toast.value=null; solved.value=false }\n\nfunction toggleCell(r,c){\n  if(solved.value) return\n  const idx = picks.value.findIndex(p=> p.r===r && p.c===c)\n  if(idx>=0){ picks.value.splice(idx,1); return }\n  if(picks.value.length===3) return\n  picks.value.push({r,c})\n}\n\nfunction rowsDistinct(){\n  const rs = picks.value.map(p=>p.r); return new Set(rs).size===picks.value.length\n}\nfunction colsDistinct(){\n  const cs = picks.value.map(p=>p.c); return new Set(cs).size===picks.value.length\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',\n      { method:'GET', credentials:'include' })\n  }catch{}\n}\nasync function checkNow(){\n  if(picks.value.length!==3){ toast.value = L.value==='ar' ? 'اختر ثلاث خلايا' : 'Pick three cells'; sWrong&&sWrong.play(); return }\n  if(!rowsDistinct() || !colsDistinct()){ toast.value=T[L.value].wrong; sWrong&&sWrong.play(); return }\n  if(pickedSum.value===target.value){\n    solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint()\n  }else{\n    toast.value=T[L.value].wrong; sWrong&&sWrong.play()\n  }\n}\n\nonMounted(newPuzzle)\n</script>\n\n<template>\n  <div class=\"challenge6\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(n, target) }}</p>\n\n    <!-- <div class=\"grid\" :style=\"{'--n': n}\">\n      <button\n        v-for=\"(row,r) in grid\" :key=\"'r'+r\"\n        v-for=\"(val,c) in row\" :key=\"r+'-'+c\"\n        class=\"cell\"\n        :class=\"{ picked: picks.some(p=>p.r===r&&p.c===c) }\"\n        @click=\"toggleCell(r,c)\"\n        :style=\"numDir\"\n      >{{ val }}</button>\n    </div> -->\n    <div class=\"grid\" v-for=\"(row,r) in grid\" :key=\"'r'+r\" :style=\"{'--n': n}\">\n  <button\n    v-for=\"(val,c) in row\" :key=\"r+'-'+c\"\n    class=\"cell\"\n    :class=\"{ picked: picks.some(p=>p.r===r && p.c===c) }\"\n    @click=\"toggleCell(r,c)\"\n    :style=\"numDir\"\n  >\n    {{ val }}\n  </button>\n</div>\n\n\n    <div class=\"panel\">\n      <div class=\"status\">\n        {{ T[L].picked }} {{ picks.length }} · {{ pickedSum }}\n      </div>\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetPicks\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.challenge6{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .challenge6{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.grid{\n  --gap: .5rem;\n  display:grid;\n  grid-template-columns: repeat(var(--n), 78px);\n  grid-auto-rows: 78px;\n  gap: var(--gap);\n  background:var(--bg);\n  width:max-content;\n  margin:.25rem 0 1rem;\n  padding:.6rem;\n  border-radius:1rem;\n  box-shadow:0 4px 14px rgba(0,0,0,.06);\n}\n.cell{\n  border:1px solid #e5e7ebaa;\n  background:var(--bg);\n  border-radius:.9rem;\n  font-variant-numeric: tabular-nums;\n  font-weight:700;\n  font-size:1.25rem;\n  cursor:pointer;\n  display:flex; align-items:center; justify-content:center;\n  transition: box-shadow .15s, background .15s, border-color .15s;\n}\n.cell:hover{ box-shadow:0 0 0 3px rgba(99,102,241,.18) inset }\n.cell.picked{\n  background: rgba(59,130,246,.12);\n  border-color: #93c5fd;\n  box-shadow: 0 0 0 3px rgba(59,130,246,.28) inset;\n}\n\n.panel{ display:flex; align-items:center; gap:1rem; flex-wrap:wrap }\n.status{ color:var(--muted) }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap }\n.btn{\n  display:inline-flex; align-items:center; gap:.35rem;\n  padding:.5rem .7rem; border-radius:.75rem;\n  border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer\n}\n.ic{ width:16px; height:16px }\n\n.toast{\n  padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b;\n  border:1px solid #fecaca\n}\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{ title:'التحدي 7: جدار أعداد (هرم جمع)',\n       rule:'كل خانة تساوي مجموع الخليتين اللتين تحتها مباشرة. اسحب القيم المفقودة لإكمال الهرم.',\n       bank:'لوحة الأعداد', newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n       correct:'إجابة صحيحة', wrong:'تحقق من القيم', clear:'تفريغ الخلية' },\n  en:{ title:'Challenge 7: Sum Pyramid',\n       rule:'Each cell equals the sum of the two cells directly below. Drag missing values to complete the pyramid.',\n       bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n       correct:'Correct answer', wrong:'Check your values', clear:'Clear cell' }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds (approved style) ===== */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong.mp3'\n\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== utils ===== */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j]]=[x[j],x[i]]} return x }\n\n/* ===== state ===== */\nconst baseN = ref(4)                 // عدد خلايا القاعدة\nconst rows = ref([])                 // rows[0]=القاعدة، ثم للأعلى\nconst blanks = ref(new Set())        // \"r,c\" حيث r فهرس الصف السفلي=0\nconst answerMap = ref({})            // \"r,c\" -> value\nconst bankCounts = ref({})           // value -> count\nconst solved = ref(false)\nconst toast = ref(null)\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\n\n/* بناء الهرم */\nfunction buildPyramid(n){\n  const rs = []\n  // القاعدة 1..9\n  rs[0] = Array.from({length:n}, ()=> rndInt(1,9))\n  for(let r=1;r<n;r++){\n    rs[r] = Array.from({length:n-r}, (_,c)=> rs[r-1][c] + rs[r-1][c+1])\n  }\n  return rs\n}\n\nfunction keyOf(r,c){ return `${r},${c}` }\n\nfunction pickBlanks(n){\n  const all=[]\n  for(let r=0;r<n;r++){\n    for(let c=0;c<rows.value[r].length;c++){\n      all.push([r,c])\n    }\n  }\n  // دع واحدة على الأقل ظاهرة في كل صف غير القاعدة\n  const keep = new Set()\n  for(let r=1;r<n;r++){\n    const idx = rndInt(0, rows.value[r].length-1)\n    keep.add(keyOf(r, idx))\n  }\n  const candidates = all.filter(([r,c])=> r>0 && !keep.has(keyOf(r,c))) // لا نفرّغ القاعدة كلها\n  const k = rndInt(4, 6)\n  const chosen = shuffle(candidates).slice(0,k)\n  return new Set(chosen.map(([r,c])=> keyOf(r,c)))\n}\n\nfunction rebuildBank(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const [r,c]=k.split(',').map(Number)\n    const v = rows.value[r][c]\n    counts[v]=(counts[v]||0)+1\n  })\n  for(const [k,v] of Object.entries(answerMap.value)){\n    counts[v]=(counts[v]||0)-1\n  }\n  for(const [v,ct] of Object.entries(counts)){ if(ct<=0) delete counts[v] }\n  bankCounts.value=counts\n}\n\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}\n  rows.value = buildPyramid(baseN.value)\n  blanks.value = pickBlanks(baseN.value)\n  rebuildBank()\n}\n\nfunction isFilled(){\n  for(const k of blanks.value){ if(answerMap.value[k]==null) return false }\n  return true\n}\nfunction isCorrect(){\n  if(!isFilled()) return false\n  for(const k of blanks.value){\n    const [r,c]=k.split(',').map(Number)\n    if(answerMap.value[k] !== rows.value[r][c]) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar'?'أكمل كل الخانات':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){\n  answerMap.value={}\n  rebuildBank()\n  toast.value=null; solved.value=false\n}\n\n/* سحب/إفلات */\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev,key){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  if((bankCounts.value[v]||0)===0) return\n  bankCounts.value[v]-=1\n  answerMap.value[key]=v\n  toast.value=null\n}\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n}\n\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"challenge7\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <div class=\"pyramid\">\n      <!-- من الأسفل للأعلى -->\n      <div class=\"prow\" v-for=\"(row,r) in rows\" :key=\"'r'+r\" :style=\"{ '--cols': row.length }\">\n        <div class=\"cell\" v-for=\"(v,c) in row\" :key=\"r+'-'+c\">\n          <template v-if=\"!(blanks.has(`${r},${c}`))\">\n            <span class=\"num\" :style=\"numDir\">{{ v }}</span>\n          </template>\n          <template v-else>\n            <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event, `${r},${c}`)\">\n              <span v-if=\"answerMap[`${r},${c}`]!=null\" class=\"num\" :style=\"numDir\">\n                {{ answerMap[`${r},${c}`] }}\n              </span>\n              <span v-else class=\"placeholder\">؟</span>\n            </div>\n            <button class=\"clear\" @click=\"clearCell(`${r},${c}`)\"><Eraser class=\"ic\" /> {{ T[L].clear }}</button>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"side\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button v-for=\"v in bankList\" :key=\"v + '_' + Math.random()\" class=\"chip\"\n                draggable=\"true\" @dragstart=\"onDragStart($event, v)\" :style=\"numDir\">\n          {{ v }}\n        </button>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.challenge7{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .challenge7{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem } .rule{ color:var(--muted); margin:0 0 1rem }\n\n/* الهرم */\n.pyramid{\n  background:var(--bg);\n  border-radius:1rem;\n  box-shadow:0 4px 14px rgba(0,0,0,.06);\n  padding:1rem;\n  width:max-content;\n  margin-bottom:1rem;\n}\n.prow{\n  display:grid;\n  grid-template-columns: repeat(var(--cols), 88px);\n  gap:.5rem;\n  justify-content:center;\n  margin-top:.5rem;\n}\n.cell{\n  min-height:64px;\n  border:1px dashed #cbd5e1;\n  background:rgba(99,102,241,.06);\n  border-radius:.75rem;\n  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.25rem;\n}\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.15rem }\n.placeholder{ color:var(--muted); font-size:1.15rem }\n.dropzone{ width:100%; height:100%; display:flex; align-items:center; justify-content:center; }\n.clear{ font-size:.75rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n\n/* البنك */\n.side{ max-width:520px }\n.bank-title{ font-weight:600; color:var(--muted); margin:.25rem 0 }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ border:1px solid #e5e7eb55; background:var(--bg); padding:.4rem .6rem; border-radius:.75rem; cursor:grab; font-variant-numeric:tabular-nums }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.toast{ margin-top:.5rem; padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","export default \"__VITE_ASSET__BwH7CfKX__\"","<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { RefreshCw, RotateCcw, Check } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title: 'التحدي 1 (المستوى الثاني): كوّن جملة عددية تستعمل 1،2،3،4،5 دون تكرار',\n    rule: (t)=> `اكتب تعبيراً حسابياً يستخدم الأرقام ١،٢،٣،٤،٥ كلٌّ مرة واحدة فقط ويكون ناتجه ${t}. يمكن استعمال + - × ÷ والأقواس، ولا يُسمح بأي أرقام أخرى أو تكرار.`,\n    inputPH: 'اكتب التعبير هنا… مثل: (5*4)*(3+2)*1',\n    keys: 'لوحة المفاتيح',\n    newQ:'سؤال جديد', reset:'مسح', check:'تحقّق',\n    correct:'إجابة صحيحة', wrong:'تحقق من الشروط أو من النتيجة',\n    used: 'استخدام الأرقام:',\n    note: 'تلميح: يمكنك دائماً استعمال ×1 دون تغيير النتيجة.'\n  },\n  en:{\n    title: 'Level 2 – Challenge 1: Build an expression with 1..5 once each',\n    rule: (t)=> `Write an expression that uses digits 1,2,3,4,5 exactly once and evaluates to ${t}. Allowed: + - * / and parentheses. No other digits or repeats.`,\n    inputPH: 'Type expression… e.g., (5*4)*(3+2)*1',\n    keys: 'Keypad',\n    newQ:'New puzzle', reset:'Clear', check:'Check',\n    correct:'Correct', wrong:'Check constraints or value',\n    used: 'Digits usage:',\n    note: 'Hint: multiplying by 1 keeps the value unchanged.'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds (approved style) ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/oh_no.mp3'\n\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== random helpers ===== */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\n\n/* ===== state ===== */\nconst expr = ref('')\nconst target = ref(0)\nconst toast = ref(null)\nconst solved = ref(false)\n\nconst digits = [1,2,3,4,5]\nconst ops = ['+','-','*','/','(',')']\n\n/* build guaranteed-solvable target:\n   we form E = (a op1 b) op2 (c op3 d) then optionally *1 or +1\n   where {a,b,c,d} is a permutation of {2,3,4,5} and '1' remains available. */\nfunction buildTarget(){\n  const nums = shuffle([2,3,4,5])\n  const [a,b,c,d] = nums\n  const pick = arr => arr[rndInt(0,arr.length-1)]\n  const op1 = pick(['+','-','*','/'])\n  const op2 = pick(['+','-','*','/'])\n  const op3 = pick(['+','-','*','/'])\n  // build safely using Function\n  const val = (x)=>{\n    try{ return Function(`return (${x});`)() }catch{ return null }\n  }\n  let e = `( ${a} ${op1} ${b} ) ${op2} ( ${c} ${op3} ${d} )`\n  let v = val(e)\n  // if invalid (division by zero or non-integer not required), retry a few times\n  let tries=0\n  while((v==null || !isFinite(v)) && tries<20){\n    return buildTarget()\n  }\n  // randomly decide to multiply by 1 or leave as-is but attach *1 so digit 1 is used\n  if(Math.random()<0.7){\n    e = `(${e}) * 1`\n    v = val(e)\n  }else{\n    // if we didn't use *1, add +1 and then subtract 1 using grouping to still use digit 1 once:\n    // ((...)+1) - 1  == original value\n    e = `((${e}) + 1) - 1`\n    v = val(e)\n  }\n  target.value = v\n  // reset input\n  expr.value = ''\n  toast.value = null\n  solved.value = false\n  // we don't show the internal expression to اللاعب\n}\n\n/* keypad helpers */\nfunction addToken(t){ expr.value += t }\nfunction backspace(){ expr.value = expr.value.slice(0,-1) }\nfunction clearAll(){ expr.value=''; toast.value=null; solved.value=false }\n\n/* validators */\nconst usage = computed(()=>{\n  const u = {1:0,2:0,3:0,4:0,5:0}\n  for(const ch of expr.value){\n    if('12345'.includes(ch)) u[ch]++\n  }\n  return u\n})\nfunction onlyAllowedChars(s){\n  return /^[\\d\\+\\-\\*\\/\\(\\)\\s]*$/.test(s)\n}\nfunction usesExactDigits(){\n  // forbid any digit other than 1..5\n  if(/[06789]/.test(expr.value)) return false\n  const u = usage.value\n  return digits.every(d => u[d]===1)\n}\nfunction safeEval(s){\n  try{\n    // prevent dangerous tokens\n    if(!onlyAllowedChars(s)) return null\n    // replace '÷' or '×' if user pasted them\n    s = s.replace(/×/g,'*').replace(/÷/g,'/')\n    // block consecutive digits that create multi-digit numbers not from 1..5\n    // allow numbers 1..5 and parentheses/ops/spaces\n    if(/\\b(?![1-5]\\b)\\d+\\b/.test(s)) return null\n    return Function(`\"use strict\"; return (${s});`)()\n  }catch{ return null }\n}\nasync function checkNow(){\n  const v = safeEval(expr.value)\n  if(v==null || !isFinite(v) || !usesExactDigits()){\n    toast.value = T[L.value].wrong\n    sWrong && sWrong.play()\n    return\n  }\n  if(Math.abs(v - target.value) < 1e-9){\n    solved.value = true\n    toast.value = T[L.value].correct\n    sOK && sOK.play(); sClap && sClap.play()\n    try{\n      await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'})\n    }catch{}\n  }else{\n    toast.value = T[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\n\nonMounted(buildTarget)\n</script>\n\n<template>\n  <div class=\"lvl2c1\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(target) }}</p>\n\n    <div class=\"panel\">\n      <input\n        class=\"expr\"\n        :placeholder=\"T[L].inputPH\"\n        v-model=\"expr\"\n        dir=\"ltr\"\n        inputmode=\"numeric\"\n        autocomplete=\"off\"\n        spellcheck=\"false\"\n      />\n\n      <div class=\"usage\">\n        {{ T[L].used }}\n        <span v-for=\"d in digits\" :key=\"d\" class=\"u\"\n              :class=\"{ok: usage[d]===1, bad: usage[d]>1}\">\n          {{ d }}: {{ usage[d] }}\n        </span>\n      </div>\n\n      <div class=\"keypad\">\n        <div class=\"label\">{{ T[L].keys }}</div>\n        <div class=\"row\">\n          <button class=\"k\" v-for=\"d in digits\" :key=\"'d'+d\" @click=\"addToken(String(d))\">{{ d }}</button>\n          <button class=\"k\" v-for=\"o in ops\" :key=\"'o'+o\" @click=\"addToken(o)\">{{ o }}</button>\n          <button class=\"k wide\" @click=\"backspace\">⌫</button>\n        </div>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"clearAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"buildTarget\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div class=\"hint\">{{ T[L].note }}</div>\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c1{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl2c1{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.panel{\n  background:var(--bg); border-radius:1rem; padding:1rem;\n  box-shadow:0 4px 14px rgba(0,0,0,.06); max-width:720px\n}\n.expr{\n  width:100%; padding:.6rem .75rem; border-radius:.75rem;\n  border:1px solid #e5e7ebaa; background:var(--bg); color:var(--fg);\n  font-size:1.1rem; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", monospace;\n}\n.usage{ margin:.5rem 0; color:var(--muted); display:flex; gap:.6rem; flex-wrap:wrap }\n.u{ padding:.15rem .45rem; border-radius:.5rem; border:1px solid #e5e7ebaa; background:var(--bg) }\n.u.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n.u.bad{ background:#fee2e2; color:#991b1b; border-color:#fecaca }\n\n.keypad{ margin-top:.5rem }\n.keypad .label{ color:var(--muted); margin-bottom:.25rem }\n.keypad .row{ display:flex; flex-wrap:wrap; gap:.4rem }\n.k{\n  padding:.45rem .6rem; border-radius:.6rem; border:1px solid #e5e7ebaa;\n  background:var(--bg); cursor:pointer; min-width:40px\n}\n.k.wide{ min-width:64px }\n\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.6rem }\n.btn{\n  display:inline-flex; align-items:center; gap:.35rem;\n  padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55;\n  background:var(--bg); cursor:pointer\n}\n.ic{ width:16px; height:16px }\n\n.hint{ color:var(--muted); margin-top:.5rem; font-size:.9rem }\n\n.toast{ margin-top:.6rem; padding:.55rem .8rem; border-radius:.75rem;\n        background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'المستوى الثاني – التحدي 2: أكمل مربعاً سحرياً',\n    rule:(M)=>`ضع الأعداد بحيث يكون مجموع كل صف وعمود وقطر مساوياً ${M}. اسحب القيم المفقودة إلى أماكنها. الأعداد جميعها مختلفة.`,\n    bank:'لوحة الأعداد', newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n    correct:'إجابة صحيحة', wrong:'تحقق من المجاميع أو التكرار', clear:'تفريغ الخلية'\n  },\n  en:{\n    title:'Level 2 – Challenge 2: Complete a magic square',\n    rule:(M)=>`Place numbers so each row, column, and diagonal sums to ${M}. Drag the missing values into place. All numbers are distinct.`,\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct answer', wrong:'Check sums or duplicates', clear:'Clear cell'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds (approved style) ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\n\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== utils ===== */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\n\n/* ===== Lo Shu base (1..9, magic sum 15) ===== */\nconst LO_SHU = [\n  [8,1,6],\n  [3,5,7],\n  [4,9,2]\n]\nfunction symmetries(mat){\n  const rot = m => [[m[2][0],m[1][0],m[0][0]],[m[2][1],m[1][1],m[0][1]],[m[2][2],m[1][2],m[0][2]]]\n  const flipH = m => m.map(r=>r.slice().reverse())\n  const s = []\n  let m = mat\n  for(let i=0;i<4;i++){ s.push(m); s.push(flipH(m)); m = rot(m) }\n  // remove duplicates by string\n  const uniq = []; const seen = new Set()\n  for(const k of s){ const t=JSON.stringify(k); if(!seen.has(t)){ uniq.push(k); seen.add(t) } }\n  return uniq\n}\nconst SHAPES = symmetries(LO_SHU)\n\n/* ===== state ===== */\nconst grid = ref([[0,0,0],[0,0,0],[0,0,0]])     // القيم الصحيحة\nconst M = ref(0)                                 // الثابت السحري\nconst blanks = ref(new Set())                    // \"r,c\"\nconst answerMap = ref({})                        // \"r,c\" -> value\nconst bankCounts = ref({})                       // value -> count\nconst solved = ref(false)\nconst toast = ref(null)\n\nconst numDir = computed(()=>({direction:'ltr', unicodeBidi:'isolate'}))\nconst keyOf = (r,c)=> `${r},${c}`\n\n/* نبني مربع سحري عام بالقيمة: a + s*L */\nfunction buildMagic(){\n  const shape = SHAPES[rndInt(0, SHAPES.length-1)]\n  const step = [1,2,3,4,5][rndInt(0,4)]          // فارق بين القيم\n  const off  = rndInt(0, 6)                      // إزاحة صغيرة\n  const g = Array.from({length:3}, ()=> Array(3).fill(0))\n  for(let r=0;r<3;r++) for(let c=0;c<3;c++){\n    g[r][c] = off + step*shape[r][c]\n  }\n  grid.value = g\n  M.value = step*15 + 3*off\n}\n\n/* نختار فراغات */\nfunction pickBlanks(){\n  const all=[]\n  for(let r=0;r<3;r++) for(let c=0;c<3;c++) all.push([r,c])\n  // اترك 3–4 خلايا ظاهرة كمساعدة\n  const keep = shuffle(all).slice(0, rndInt(3,4))\n  const keepSet = new Set(keep.map(([r,c])=>keyOf(r,c)))\n  const chosen = all.filter(([r,c])=> !keepSet.has(keyOf(r,c)))\n  blanks.value = new Set(chosen.map(([r,c])=>keyOf(r,c)))\n}\n\n/* بنك الأعداد */\nfunction rebuildBank(){\n  const counts={}\n  blanks.value.forEach(k=>{\n    const [r,c]=k.split(',').map(Number)\n    const v=grid.value[r][c]\n    counts[v]=(counts[v]||0)+1\n  })\n  for(const [k,v] of Object.entries(answerMap.value)){\n    counts[v]=(counts[v]||0)-1\n  }\n  for(const [v,ct] of Object.entries(counts)){ if(ct<=0) delete counts[v] }\n  bankCounts.value=counts\n}\nconst bankList = computed(()=>{\n  const out=[]\n  for(const [v,ct] of Object.entries(bankCounts.value)){\n    for(let i=0;i<ct;i++) out.push(Number(v))\n  }\n  return shuffle(out)\n})\n\n/* لغز جديد */\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answerMap.value={}\n  buildMagic()\n  pickBlanks()\n  rebuildBank()\n}\n\n/* تحقق */\nfunction isFilled(){ for(const k of blanks.value){ if(answerMap.value[k]==null) return false } return true }\nfunction filledMatrix(){\n  const m = grid.value.map(r=>r.slice())\n  for(const k of blanks.value){\n    const [r,c]=k.split(',').map(Number)\n    m[r][c]=answerMap.value[k]\n  }\n  return m\n}\nfunction noDuplicates(m){\n  const seen=new Set()\n  for(const r of m) for(const v of r){\n    if(seen.has(v)) return false\n    seen.add(v)\n  }\n  return true\n}\nfunction sumsOk(m){\n  const s = (a,b,c)=> a+b+c\n  for(let i=0;i<3;i++){\n    if(s(m[i][0],m[i][1],m[i][2])!==M.value) return false\n    if(s(m[0][i],m[1][i],m[2][i])!==M.value) return false\n  }\n  if(s(m[0][0],m[1][1],m[2][2])!==M.value) return false\n  if(s(m[0][2],m[1][1],m[2][0])!==M.value) return false\n  return true\n}\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value=L.value==='ar'?'أكمل كل الخانات':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  const m = filledMatrix()\n  if(noDuplicates(m) && sumsOk(m)){\n    solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint()\n  }else{\n    toast.value=T[L.value].wrong; sWrong&&sWrong.play()\n  }\n}\nfunction resetAll(){ answerMap.value={}; rebuildBank(); toast.value=null; solved.value=false }\n\n/* سحب/إفلات */\nfunction onDragStart(ev,value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev,key){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n  }\n  if((bankCounts.value[v]||0)===0) return\n  bankCounts.value[v]-=1\n  answerMap.value[key]=v\n  toast.value=null\n}\nfunction clearCell(key){\n  if(answerMap.value[key]!=null){\n    const old=answerMap.value[key]\n    bankCounts.value[old]=(bankCounts.value[old]||0)+1\n    delete answerMap.value[key]\n  }\n}\n\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"lvl2c2\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(M) }}</p>\n\n    <div class=\"board\">\n      <div class=\"row\" v-for=\"r in 3\" :key=\"'r'+r\">\n        <div class=\"cell\" v-for=\"c in 3\" :key=\"'c'+r+'-'+c\">\n          <template v-if=\"!blanks.has(`${r-1},${c-1}`)\">\n            <span class=\"num\" :style=\"numDir\">{{ grid[r-1][c-1] }}</span>\n          </template>\n          <template v-else>\n            <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"onDrop($event, `${r-1},${c-1}`)\">\n              <span v-if=\"answerMap[`${r-1},${c-1}`]!=null\" class=\"num\" :style=\"numDir\">\n                {{ answerMap[`${r-1},${c-1}`] }}\n              </span>\n              <span v-else class=\"placeholder\">؟</span>\n            </div>\n            <button class=\"clear\" @click=\"clearCell(`${r-1},${c-1}`)\"><Eraser class=\"ic\" /> {{ T[L].clear }}</button>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"side\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button v-for=\"v in bankList\" :key=\"v + '_' + Math.random()\" class=\"chip\"\n                draggable=\"true\" @dragstart=\"onDragStart($event, v)\" :style=\"numDir\">\n          {{ v }}\n        </button>\n      </div>\n\n      <div class=\"actions\">\n        <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n        <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n        <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n      </div>\n\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c2{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl2c2{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n/* اللوح */\n.board{\n  display:inline-block; background:var(--bg);\n  padding:1rem; border-radius:1rem; box-shadow:0 4px 14px rgba(0,0,0,.06)\n}\n.row{ display:grid; grid-template-columns:repeat(3, 96px) }\n.cell{\n  border:1px dashed #cbd5e1; min-height:88px; display:flex; flex-direction:column;\n  align-items:center; justify-content:center; gap:.25rem; padding:.25rem\n}\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.25rem }\n.placeholder{ color:var(--muted); font-size:1.25rem }\n.dropzone{ width:100%; height:100%; display:flex; align-items:center; justify-content:center; background:rgba(99,102,241,.06); border-radius:.5rem }\n.clear{ font-size:.75rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n\n/* البنك */\n.side{ margin-top:1rem; max-width:520px }\n.bank-title{ font-weight:600; color:var(--muted); margin:.25rem 0 }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ border:1px solid #e5e7eb55; background:var(--bg); padding:.4rem .6rem; border-radius:.75rem; cursor:grab; font-variant-numeric:tabular-nums }\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.toast{ margin-top:.5rem; padding:.5rem .75rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'المستوى الثاني – التحدي 3: أوصل المسألة بالنتيجة الصحيحة',\n    rule:'اسحب عدداً من ستة أرقام إلى كل خانة بحسب الخاصية المطلوبة: مضاعف 2، 3، 4، 5. كل عدد يُستخدم مرة واحدة.',\n    bank:'لوحة الأعداد', newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n    correct:'إجابة صحيحة', wrong:'تحقق من الخواص', clear:'تفريغ الخلية',\n    lab2:'مضاعفًا للعدد 2', lab3:'مضاعفًا للعدد 3', lab4:'مضاعفًا للعدد 4', lab5:'مضاعفًا للعدد 5'\n  },\n  en:{\n    title:'Level 2 – Challenge 3: Match each rule to a six-digit number',\n    rule:'Drag one six-digit number to each rule: multiple of 2, 3, 4, 5. Each number can be used once.',\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct', wrong:'Check the properties', clear:'Clear cell',\n    lab2:'Multiple of 2', lab3:'Multiple of 3', lab4:'Multiple of 4', lab5:'Multiple of 5'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* sounds (approved style) */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* utils */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n/* state */\nconst bank = ref([])                // numbers to drag\nconst bankCounts = ref({})          // number -> remaining count (always 1 here)\nconst answer = ref({ m2:null, m3:null, m4:null, m5:null })\nconst toast = ref(null)\nconst solved = ref(false)\n\n/* helpers: properties */\nconst isMul2 = n => n%2===0\nconst isMul3 = n => (String(n).split('').reduce((s,d)=>s+ +d,0))%3===0\nconst isMul4 = n => n%100 % 4===0\nconst isMul5 = n => n%10===0 || n%10===5\n\n/* random six-digit generators with constraints */\nfunction rand6(predicate=(n)=>true){\n  // ensure six digits (no leading zero)\n  while(true){\n    const first = rndInt(1,9)\n    let s = String(first)\n    for(let i=0;i<5;i++) s += String(rndInt(0,9))\n    const n = Number(s)\n    if(predicate(n)) return n\n  }\n}\nfunction rand6_last(d, extra=()=>true){\n  // generate with last digit d and extra predicate\n  while(true){\n    const first = rndInt(1,9)\n    let s = String(first)\n    for(let i=0;i<4;i++) s += String(rndInt(0,9))\n    s += String(d)\n    const n = Number(s)\n    if(extra(n)) return n\n  }\n}\n\n/* build puzzle: guarantee at least one valid for each slot */\nfunction newPuzzle(){\n  solved.value=false; toast.value=null\n  answer.value = { m2:null, m3:null, m4:null, m5:null }\n\n  const picked = new Set()\n  const addUnique = (n)=>{\n    const k=String(n); if(picked.has(k)) return false; picked.add(k); return true\n  }\n\n  // One clear candidate for each property\n  // m5: end with 5 (not even)\n  let a5 = rand6_last(5, n=>!isMul3(n) || rndInt(0,1)) // sometimes also mult3\n  while(!addUnique(a5)) a5 = rand6_last(5)\n  // m2: even but not *4 (to reduce ambiguity)\n  let a2 = rand6_last([0,2,4,6,8][rndInt(0,4)], n=>!isMul5(n) && !isMul4(n))\n  while(!addUnique(a2)) a2 = rand6_last([0,2,4,6,8][rndInt(0,4)], n=>!isMul5(n) && !isMul4(n))\n  // m4: divisible by 4 (this is even by nature)\n  let a4 = rand6(n=>isMul4(n))\n  while(!addUnique(a4)) a4 = rand6(n=>isMul4(n))\n  // m3: sum of digits divisible by 3, avoid ending 0/5 to reduce overlap\n  let a3 = rand6(n=>isMul3(n) && !isMul5(n))\n  while(!addUnique(a3)) a3 = rand6(n=>isMul3(n) && !isMul5(n))\n\n  const core = [a2,a3,a4,a5]\n\n  // add distractors that satisfy none of the four props\n  const distract = []\n  while(distract.length<4){\n    let d = rand6(n=> (n%2!==0) && !isMul3(n) && !isMul5(n) && !isMul4(n))\n    if(addUnique(d)) distract.push(d)\n  }\n\n  bank.value = shuffle(core.concat(distract))\n  bankCounts.value = Object.fromEntries(bank.value.map(v=>[v,1]))\n}\n\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction dropTo(key, ev){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  if((bankCounts.value[v]||0)===0) return\n  // return previous value to bank\n  if(answer.value[key]!=null){\n    bankCounts.value[answer.value[key]] = (bankCounts.value[answer.value[key]]||0)+1\n  }\n  answer.value[key] = v\n  bankCounts.value[v]-=1\n  toast.value=null\n}\nfunction clearCell(key){\n  if(answer.value[key]!=null){\n    bankCounts.value[answer.value[key]] = (bankCounts.value[answer.value[key]]||0)+1\n    answer.value[key]=null\n  }\n}\n\nfunction isFilled(){ return ['m2','m3','m4','m5'].every(k=>answer.value[k]!=null) }\nfunction isCorrect(){\n  return  isMul2(answer.value.m2) &&\n          isMul3(answer.value.m3) &&\n          isMul4(answer.value.m4) &&\n          isMul5(answer.value.m5)\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',\n      {method:'GET',credentials:'include'})\n  }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value=L.value==='ar'?'أكمل كل الخانات':'Fill all blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){\n    solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint()\n  }else{ toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){\n  answer.value = { m2:null, m3:null, m4:null, m5:null }\n  // restore counts\n  bankCounts.value = Object.fromEntries(bank.value.map(v=>[v,1]))\n  toast.value=null; solved.value=false\n}\n\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"lvl2c3\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <div class=\"cards\">\n      <div class=\"card\">\n        <div class=\"label\">{{ T[L].lab2 }}</div>\n        <div class=\"drop\"\n             @dragover=\"allowDrop\" @drop=\"dropTo('m2', $event)\">\n          <span v-if=\"answer.m2!=null\" class=\"num\">{{ answer.m2 }}</span>\n          <span v-else class=\"placeholder\">؟</span>\n        </div>\n        <button class=\"clear\" @click=\"clearCell('m2')\"><Eraser class=\"ic\"/>{{ T[L].clear }}</button>\n      </div>\n\n      <div class=\"card\">\n        <div class=\"label\">{{ T[L].lab3 }}</div>\n        <div class=\"drop\"\n             @dragover=\"allowDrop\" @drop=\"dropTo('m3', $event)\">\n          <span v-if=\"answer.m3!=null\" class=\"num\">{{ answer.m3 }}</span>\n          <span v-else class=\"placeholder\">؟</span>\n        </div>\n        <button class=\"clear\" @click=\"clearCell('m3')\"><Eraser class=\"ic\"/>{{ T[L].clear }}</button>\n      </div>\n\n      <div class=\"card\">\n        <div class=\"label\">{{ T[L].lab4 }}</div>\n        <div class=\"drop\"\n             @dragover=\"allowDrop\" @drop=\"dropTo('m4', $event)\">\n          <span v-if=\"answer.m4!=null\" class=\"num\">{{ answer.m4 }}</span>\n          <span v-else class=\"placeholder\">؟</span>\n        </div>\n        <button class=\"clear\" @click=\"clearCell('m4')\"><Eraser class=\"ic\"/>{{ T[L].clear }}</button>\n      </div>\n\n      <div class=\"card\">\n        <div class=\"label\">{{ T[L].lab5 }}</div>\n        <div class=\"drop\"\n             @dragover=\"allowDrop\" @drop=\"dropTo('m5', $event)\">\n          <span v-if=\"answer.m5!=null\" class=\"num\">{{ answer.m5 }}</span>\n          <span v-else class=\"placeholder\">؟</span>\n        </div>\n        <button class=\"clear\" @click=\"clearCell('m5')\"><Eraser class=\"ic\"/>{{ T[L].clear }}</button>\n      </div>\n    </div>\n\n    <div class=\"bank\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button v-for=\"v in bank\"\n                :key=\"v\"\n                class=\"chip\"\n                :disabled=\"(bankCounts[v]||0)===0\"\n                draggable=\"true\"\n                @dragstart=\"onDragStart($event, v)\">\n          {{ v }}\n          <small v-if=\"(bankCounts[v]||0)===0\">✓</small>\n        </button>\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n      <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n      <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n    </div>\n\n    <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c3{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl2c3{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.cards{ display:grid; grid-template-columns: repeat(2, minmax(260px,1fr)); gap:1rem; margin-bottom:.75rem }\n.card{ background:var(--bg); border:1px solid #e5e7eb55; border-radius:1rem; padding:.75rem }\n.label{ color:var(--muted); margin-bottom:.35rem }\n.drop{\n  height:74px; border:1px dashed #cbd5e1; border-radius:.75rem; background:rgba(99,102,241,.06);\n  display:flex; align-items:center; justify-content:center;\n}\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.25rem }\n.placeholder{ color:var(--muted); font-size:1.25rem }\n.clear{ margin-top:.35rem; font-size:.8rem; border:none; background:transparent; color:var(--muted); display:flex; align-items:center; gap:.25rem; cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.bank-title{ font-weight:600; color:var(--muted); margin:.25rem 0 }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{\n  border:1px solid #e5e7eb55; background:var(--bg); padding:.45rem .6rem; border-radius:.75rem; cursor:grab;\n  font-variant-numeric:tabular-nums; min-width:108px; display:flex; justify-content:space-between; align-items:center;\n}\n.chip[disabled]{ opacity:.55; cursor:not-allowed }\n\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n\n.toast{ margin-top:.6rem; padding:.55rem .8rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { RefreshCw, RotateCcw, Check } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'المستوى الثاني – التحدي 4: اختر الإجابة الصحيحة',\n    rule:(S,D)=>`ما العددان اللذان حاصل جمعهما ${S} والفرق بينهما ${D}؟ اختر الزوج الصحيح.`,\n    choices:'الخيارات',\n    newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n    correct:'إجابة صحيحة', wrong:'إجابة غير صحيحة'\n  },\n  en:{\n    title:'Level 2 – Challenge 4: Pick the correct pair',\n    rule:(S,D)=>`Which two numbers have sum ${S} and difference ${D}? Pick the correct pair.`,\n    choices:'Choices',\n    newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct', wrong:'Incorrect'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds (approved style) ===== */\nimport successUrl from '@/assets/sounds/success4.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong4.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* utils */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n/* state */\nconst S = ref(0)           // sum\nconst D = ref(0)           // difference (non-negative)\nconst solution = ref([0,0])// [big, small]\nconst options = ref([])    // array of [big, small]\nconst pick = ref(null)\nconst toast = ref(null)\nconst solved = ref(false)\n\nfunction buildPuzzle(){\n  solved.value=false; toast.value=null; pick.value=null\n  // choose integers with same parity and S>D\n  let a,b\n  // pick base numbers 1..60\n  a = rndInt(6, 60)\n  b = rndInt(1, a-1)\n  // ensure parity constraints automatically satisfied by using a,b to derive S,D\n  const big = Math.max(a,b), small = Math.min(a,b)\n  S.value = big + small\n  D.value = big - small\n  solution.value = [big, small]\n\n  // build distractors\n  const opts = [[big,small]]\n  // 1: swap (still correct for difference? swap gives same pair visually إذا عرضنا \"الكبير ، الصغير\")\n  // لتجنّب التطابق، سنعرض دائماً (الكبير، الصغير). إذن نضيف مشتتات أخرى فقط.\n  const gen = ()=>{\n    // random pair not equal to solution and distinct\n    let x = rndInt(1, 65), y = rndInt(1, 65)\n    if(x<y) [x,y]=[y,x]\n    return [x,y]\n  }\n  while(opts.length<6){\n    let p = gen()\n    // avoid having same sum and diff كليهما\n    if(p[0]+p[1]===S.value && p[0]-p[1]===D.value) continue\n    // sometimes share only sum أو فقط الفرق لإرباك منطقي\n    if(rndInt(0,1)===0){ // same sum, wrong diff\n      const s = S.value\n      const x = rndInt(1, s-1); const y = s-x; const pair=[Math.max(x,y), Math.min(x,y)]\n      if(pair[0]-pair[1]!==D.value) p=pair\n    }else{ // same diff, wrong sum\n      const d = D.value\n      const y = rndInt(1, 50); const x = y + d; const pair=[x,y]\n      if(pair[0]+pair[1]!==S.value) p=pair\n    }\n    if(!opts.some(q=> q[0]===p[0] && q[1]===p[1])) opts.push(p)\n  }\n  options.value = shuffle(opts)\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',\n      {method:'GET',credentials:'include'})\n  }catch{}\n}\n\nasync function checkNow(){\n  if(pick.value==null){ toast.value = L.value==='ar'?'اختر إجابة':'Pick an answer'; sWrong&&sWrong.play(); return }\n  const chosen = options.value[pick.value]\n  const ok = (chosen[0]+chosen[1]===S.value) && (chosen[0]-chosen[1]===D.value)\n  if(ok){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\n\nfunction resetAll(){ pick.value=null; toast.value=null; solved.value=false }\n\nonMounted(buildPuzzle)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"lvl2c4\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(S, D) }}</p>\n\n    <div class=\"choices\">\n      <div class=\"choice\" v-for=\"(op, i) in options\" :key=\"i\" @click=\"pick=i\" :class=\"{sel: pick===i}\">\n        <input type=\"radio\" :checked=\"pick===i\" />\n        <span class=\"pair\">{{ op[0] }} ، {{ op[1] }}</span>\n        <small class=\"hint\">({{ op[0] + op[1] }} ، {{ op[0] - op[1] }})</small>\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n      <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n      <button class=\"btn\" @click=\"buildPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n    </div>\n\n    <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c4{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl2c4{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.choices{\n  display:grid; gap:.5rem;\n  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\n  margin-bottom:.75rem;\n}\n.choice{\n  display:flex; align-items:center; gap:.5rem;\n  padding:.55rem .7rem; border-radius:.75rem;\n  border:1px solid #e5e7ebaa; background:var(--bg);\n  cursor:pointer;\n}\n.choice.sel{ box-shadow:0 0 0 3px rgba(59,130,246,.25) inset; border-color:#93c5fd }\n.pair{ font-variant-numeric:tabular-nums; font-weight:700 }\n.hint{ color:var(--muted) } /* يعرض (المجموع، الفرق) للتحقق الذهني */\n\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{\n  display:inline-flex; align-items:center; gap:.35rem;\n  padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55;\n  background:var(--bg); cursor:pointer\n}\n.ic{ width:16px; height:16px }\n\n.toast{ margin-top:.6rem; padding:.55rem .8rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'المستوى الثاني – التحدي 5: أكمل طرح الكسور',\n    rule:(t)=>`ضع عددًا كليًا في كل مربع لتصبح المعادلة صحيحة:  ${t.num}/${t.den} =  ١/□  −  □/${t.d2}.  اسحب الرقمين من لوحة الأعداد.`,\n    bank:'لوحة الأعداد', newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n    correct:'إجابة صحيحة', wrong:'تحقق من القيم', clear:'تفريغ الخلية'\n  },\n  en:{\n    title:'Level 2 – Challenge 5: Complete the fraction subtraction',\n    rule:(t)=>`Place integers to make the equation true:  ${t.num}/${t.den} =  1/□  −  □/${t.d2}.  Drag the two numbers from the bank.`,\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct answer', wrong:'Check values', clear:'Clear'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* ===== sounds (approved style) ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== utils ===== */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\n\n/* ===== state ===== */\nconst target = ref({num:3, den:10, d2:5})  // t/den = 1/A - N/d2\nconst A = ref(2)   // الحل الصحيح لمقام الكسر الأول\nconst N = ref(1)   // الحل الصحيح لبسط الكسر الثاني\nconst bank = ref([])              // أرقام السحب\nconst answer = ref({ A:null, N:null })\nconst toast = ref(null)\nconst solved = ref(false)\n\nfunction gcd(a,b){ return b?gcd(b,a%b):Math.abs(a) }\nfunction simplify(n,d){ const g=gcd(n,d); return [n/g, d/g] }\n\n/* ابحث عشوائياً عن معادلة سليمة: t/10 مع حلول صحيحة */\nfunction newPuzzle(){\n  solved.value=false; toast.value=null; answer.value={A:null,N:null}\n\n  let found=false\n  for(let tries=0; tries<200 && !found; tries++){\n    const den = 10               // نبقي المقام 10 كالورقة، ويمكن تغييره لاحقاً بسهولة\n    const num = rndInt(1,9)      // 1..9\n    const d2cand = shuffle([4,5,6,8,9,10])[0]  // مقام الكسر الثاني\n    // جرّب قيم A من 2..12 ثم احسب N\n    for(let a=2;a<=12 && !found;a++){\n      const value = 1/a - num/den\n      if(value <= 0) continue\n      const n = Math.round(d2cand * value)\n      if(Math.abs(d2cand*value - n) < 1e-9 && n>=1 && n<d2cand){\n        // تحقق من الصحة النهائية\n        const left = 1/a - n/d2cand\n        if(Math.abs(left - num/den) < 1e-9){\n          target.value = {num, den, d2:d2cand}\n          A.value=a; N.value=n\n          found=true\n        }\n      }\n    }\n  }\n\n  // بنك الأرقام: الإجابتان + مشتتات قريبة\n  const choices = new Set([A.value, N.value])\n  while(choices.size<8){\n    const v = rndInt(1,12)\n    choices.add(v)\n  }\n  bank.value = shuffle([...choices])\n}\n\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction dropTo(key, ev){\n  ev.preventDefault()\n  const v = Number(ev.dataTransfer.getData('text/plain'))\n  answer.value[key] = v\n  toast.value=null\n}\nfunction clearCell(key){ answer.value[key]=null }\n\nfunction isFilled(){ return answer.value.A!=null && answer.value.N!=null }\nfunction isCorrect(){\n  if(!isFilled()) return false\n  const lhs = 1/answer.value.A - answer.value.N/target.value.d2\n  const rhs = target.value.num/target.value.den\n  return Math.abs(lhs - rhs) < 1e-9\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',\n      {method:'GET',credentials:'include'})\n  }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar'?'أكمل الخانتين':'Fill both blanks'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){ answer.value={A:null,N:null}; toast.value=null; solved.value=false }\n\nonMounted(newPuzzle)\n</script>\n\n<template>\n  <div class=\"lvl2c5\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule(target) }}</p>\n\n    <!-- المعادلة -->\n    <div class=\"equation\" dir=\"ltr\">\n      <div class=\"frac\">\n        <div class=\"top\">{{ target.num }}</div>\n        <div class=\"bar\"></div>\n        <div class=\"bot\">{{ target.den }}</div>\n      </div>\n      <span class=\"eq\">=</span>\n\n      <div class=\"frac\">\n        <div class=\"top\">1</div>\n        <div class=\"bar\"></div>\n        <div class=\"bot\">\n          <div class=\"drop\" @dragover=\"allowDrop\" @drop=\"dropTo('A', $event)\">\n            <span v-if=\"answer.A!=null\" class=\"num\">{{ answer.A }}</span>\n            <span v-else class=\"placeholder\">□</span>\n          </div>\n        </div>\n      </div>\n\n      <span class=\"minus\">−</span>\n\n      <div class=\"frac\">\n        <div class=\"top\">\n          <div class=\"drop\" @dragover=\"allowDrop\" @drop=\"dropTo('N', $event)\">\n            <span v-if=\"answer.N!=null\" class=\"num\">{{ answer.N }}</span>\n            <span v-else class=\"placeholder\">□</span>\n          </div>\n        </div>\n        <div class=\"bar\"></div>\n        <div class=\"bot\">{{ target.d2 }}</div>\n      </div>\n    </div>\n\n    <!-- البنك -->\n    <div class=\"bank\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button v-for=\"v in bank\" :key=\"v\" class=\"chip\" draggable=\"true\" @dragstart=\"onDragStart($event, v)\">\n          {{ v }}\n        </button>\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n      <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n      <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n    </div>\n\n    <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c5{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl2c5{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n.equation{\n  display:flex; align-items:center; gap:1rem;\n  background:var(--bg); border-radius:1rem; padding:1rem;\n  box-shadow:0 4px 14px rgba(0,0,0,.06); width:max-content\n}\n.eq,.minus{ font-size:1.4rem; font-weight:700 }\n.frac{ display:grid; grid-template-rows:auto 4px auto; align-items:center; min-width:64px }\n.frac .bar{ height:4px; background:#cbd5e1; border-radius:2px; margin:.15rem 0 }\n.top,.bot{ display:flex; align-items:center; justify-content:center; font-variant-numeric:tabular-nums; font-weight:700; font-size:1.25rem }\n\n.drop{\n  min-width:46px; min-height:36px; border:1px dashed #cbd5e1; border-radius:.5rem;\n  background:rgba(99,102,241,.06); display:flex; align-items:center; justify-content:center;\n}\n.placeholder{ color:#9ca3af; font-size:1.1rem }\n.num{ font-variant-numeric:tabular-nums; font-weight:700; font-size:1.1rem }\n\n.bank-title{ font-weight:600; color:var(--muted); margin:.75rem 0 .25rem }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{\n  border:1px solid #e5e7eb55; background:var(--bg); padding:.45rem .6rem; border-radius:.75rem;\n  cursor:grab; font-variant-numeric:tabular-nums; min-width:46px; text-align:center\n}\n\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{\n  display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem;\n  border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer\n}\n.ic{ width:16px; height:16px }\n\n.toast{ margin-top:.6rem; padding:.55rem .8rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw,\n  Scale as ScaleIc, Circle as BallIc, Square as CubeIc, Triangle as PyrIc } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'المستوى الثاني – التحدي 6: رتّب خطوات الحل الصحيح',\n    rule:'اسحب البطاقات ورتّبها من ١ إلى ٤ لحل المسألة: كم مكعبًا نضع بدل ثلاث كُرَات ليحدث التعادل؟ (المعطى: كرة = مكعبين).',\n    newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n    correct:'ترتيب صحيح', wrong:'ترتيب غير صحيح. عدّل البطاقات.',\n    slots:'خطوات الحل', cards:'البطاقات'\n  },\n  en:{\n    title:'Level 2 – Challenge 6: Order the solution steps',\n    rule:'Order cards 1→4 to solve: how many cubes balance three balls? (Given: ball = two cubes).',\n    newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Correct order', wrong:'Incorrect order. Try again.',\n    slots:'Solution steps', cards:'Cards'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* sounds */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]]} return x }\n\n/* ----- state ----- */\nconst canonical = ref([])\nconst bank = ref([])\nconst slots = ref([null,null,null,null])\nconst toast = ref(null)\nconst solved = ref(false)\n\n/* نصوص الخطوات مع رموز */\nconst stepsWithIcons = () => ([\n  { id:'s0',\n    textAr:'من المعطى: كتلة الكرة = مكعبين.',\n    textEn:'Given: one ball equals two cubes.',\n    icons: ['ball','=','cube','cube'] },\n  { id:'s1',\n    textAr:'كتلة ٣ كرات = ٣ × كتلة الكرة.',\n    textEn:'Mass of 3 balls = 3 × ball.',\n    icons: ['ball','ball','ball'] },\n  { id:'s2',\n    textAr:'بالتعويض: بالمكعبات ٣ × ٢ = ٦.',\n    textEn:'Substitute: 3 × 2 cubes = 6.',\n    icons: ['cube','×','cube','=', '6'] },\n  { id:'s3',\n    textAr:'نضع ٦ مكعبات فتتعادل الكفتان.',\n    textEn:'Put 6 cubes for balance.',\n    icons: ['scale','|','cube','cube','cube','cube','cube','cube'] },\n])\n\nfunction buildSteps(){\n  const sw = stepsWithIcons()\n  canonical.value = [sw[0], sw[1], sw[2], sw[3]]\n  bank.value = shuffle(canonical.value.map(s => ({...s})))\n  slots.value = [null,null,null,null]\n  toast.value = null\n  solved.value = false\n}\n\n/* DnD */\nfunction onDragStart(ev, cardId){ ev.dataTransfer.setData('text/plain', cardId) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev, idx){\n  ev.preventDefault()\n  const id = ev.dataTransfer.getData('text/plain')\n  const old = slots.value.findIndex(x=>x===id)\n  if(old>=0) slots.value[old]=null\n  slots.value[idx]=id\n  toast.value=null\n}\nfunction removeFromSlot(idx){ slots.value[idx]=null }\n\nconst allPlaced = computed(()=> slots.value.every(x=>x!==null))\nfunction isCorrect(){\n  if(!allPlaced.value) return false\n  const byId = Object.fromEntries(canonical.value.map(s=>[s.id,s.id]))\n  for(let i=0;i<4;i++){\n    if(slots.value[i]!==byId['s'+i]) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',\n      {method:'GET', credentials:'include'})\n  }catch{}\n}\nasync function checkNow(){\n  if(!allPlaced.value){ toast.value = L.value==='ar'?'أكمل جميع الخانات':'Fill all slots'; sWrong&&sWrong.play(); return }\n  if(isCorrect()){ solved.value=true; toast.value=T[L.value].correct; sOK&&sOK.play(); sClap&&sClap.play(); await addPoint() }\n  else { toast.value=T[L.value].wrong; sWrong&&sWrong.play() }\n}\nfunction resetAll(){ slots.value=[null,null,null,null]; toast.value=null; solved.value=false }\n\nonMounted(buildSteps)\nwatch(()=>props.lang,()=>{})\n</script>\n\n<template>\n  <div class=\"lvl2c6\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n\n    <!-- مشهد زخرفي: ميزان + أشكال -->\n    <div class=\"scene\">\n      <ScaleIc class=\"scale\" />\n      <div class=\"plate left\">\n        <BallIc class=\"sh\" />\n        <BallIc class=\"sh\" />\n        <BallIc class=\"sh\" />\n      </div>\n      <div class=\"plate right\">\n        <span class=\"qm\">؟</span>\n      </div>\n    </div>\n\n    <!-- خانات الترتيب -->\n    <div class=\"slots\">\n      <div class=\"slot\" v-for=\"(s,idx) in slots\" :key=\"idx\"\n           @dragover=\"allowDrop\" @drop=\"onDrop($event, idx)\">\n        <div class=\"slot-index\">{{ idx+1 }}</div>\n        <template v-if=\"slots[idx]\">\n          <div class=\"card placed\">\n            <div class=\"icons\">\n              <template v-for=\"(k,i) in bank.find(c=>c.id===slots[idx]).icons\" :key=\"i\">\n                <BallIc v-if=\"k==='ball'\" class=\"ic ball\"/>\n                <CubeIc v-else-if=\"k==='cube'\" class=\"ic cube\"/>\n                <PyrIc  v-else-if=\"k==='pyr'\"  class=\"ic pyr\"/>\n                <ScaleIc v-else-if=\"k==='scale'\" class=\"ic scale2\"/>\n                <span v-else class=\"txt\">{{ k }}</span>\n              </template>\n            </div>\n            <div class=\"t\">\n              {{ props.lang==='ar' ? bank.find(c=>c.id===slots[idx]).textAr\n                                   : bank.find(c=>c.id===slots[idx]).textEn }}\n            </div>\n            <button class=\"x\" @click=\"removeFromSlot(idx)\">×</button>\n          </div>\n        </template>\n        <div v-else class=\"placeholder\">— {{ T[L].slots }} —</div>\n      </div>\n    </div>\n\n    <!-- بنك البطاقات -->\n    <div class=\"bank\">\n      <div class=\"bank-title\">{{ T[L].cards }}</div>\n      <div class=\"bank-list\">\n        <div v-for=\"c in bank\" :key=\"c.id\"\n             class=\"card\"\n             draggable=\"true\"\n             @dragstart=\"onDragStart($event, c.id)\">\n          <div class=\"icons\">\n            <template v-for=\"(k,i) in c.icons\" :key=\"i\">\n              <BallIc v-if=\"k==='ball'\" class=\"ic ball\"/>\n              <CubeIc v-else-if=\"k==='cube'\" class=\"ic cube\"/>\n              <PyrIc  v-else-if=\"k==='pyr'\"  class=\"ic pyr\"/>\n              \n              <ScaleIc v-else-if=\"k==='scale'\" class=\"ic scale2\"/>\n              <span v-else class=\"txt\">{{ k }}</span>\n            </template>\n          </div>\n          <div class=\"t\">{{ props.lang==='ar' ? c.textAr : c.textEn }}</div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"icx\" /> {{ T[L].reset }}</button>\n      <button class=\"btn\" @click=\"checkNow\"><Check class=\"icx\" /> {{ T[L].check }}</button>\n      <button class=\"btn\" @click=\"buildSteps\"><RefreshCw class=\"icx\" /> {{ T[L].newQ }}</button>\n    </div>\n\n    <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n  </div>\n</template>\n\n<style scoped>\n.lvl2c6{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl2c6{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ color:var(--muted); margin:0 0 1rem }\n\n/* مشهد الميزان */\n.scene{ position:relative; width:520px; height:110px; margin:0 0 1rem; background:var(--bg);\n  border-radius:1rem; box-shadow:0 4px 14px rgba(0,0,0,.06) }\n.scale{ position:absolute; left:12px; top:10px; width:40px; height:40px; color:#94a3b8 }\n.plate{ position:absolute; bottom:14px; width:180px; height:56px; border:2px solid #cbd5e1; border-radius:12px;\n  display:flex; align-items:center; justify-content:center; gap:6px; background:rgba(203,213,225,.15) }\n.left{ left:16px } .right{ right:16px }\n.qm{ font-size:26px; color:#6b7280 }\n.sh{ width:22px; height:22px; color:#2563eb }\n\n/* الخانات */\n.slots{ display:grid; grid-template-columns: repeat(2, minmax(280px, 1fr)); gap:.75rem; margin-bottom:1rem }\n.slot{ border:1px dashed #cbd5e1; background:rgba(99,102,241,.06); border-radius:.9rem; padding:.6rem; min-height:104px; position:relative }\n.slot-index{ position:absolute; top:.4rem; inset-inline-start:.5rem; width:28px; height:28px; border-radius:9999px; background:#e5e7eb; color:#111827; display:flex; align-items:center; justify-content:center; font-weight:700 }\n.placeholder{ color:var(--muted); text-align:center; padding:1.8rem 0 }\n\n/* البطاقات */\n.bank-title{ font-weight:600; color:var(--muted); margin:.25rem 0 }\n.bank-list{ display:flex; gap:.5rem; flex-wrap:wrap }\n.card{ background:var(--bg); border:1px solid #e5e7ebaa; border-radius:.75rem; padding:.55rem .7rem; cursor:grab; user-select:none; max-width:560px }\n.card.placed{ cursor:default; padding-inline-end:2rem; position:relative }\n.card .x{ position:absolute; top:.35rem; inset-inline-end:.35rem; border:none; background:transparent; cursor:pointer; color:#9ca3af; font-size:1.1rem }\n.icons{ display:flex; align-items:center; gap:6px; margin-bottom:.25rem }\n.ic{ width:20px; height:20px }\n.ic.ball{ color:#2563eb } .ic.cube{ color:#ef4444 } .ic.pyr{ color:#10b981 } .ic.cyl{ color:#f59e0b } .ic.scale2{ color:#94a3b8 }\n.txt{ font-weight:700; color:#475569 }\n.t{ color:var(--fg) }\n\n/* أزرار */\n.actions{ display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .7rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n.icx{ width:16px; height:16px }\n\n/* تنبيه */\n.toast{ margin-top:.6rem; padding:.55rem .8rem; border-radius:.75rem; background:#fee2e2; color:#991b1b; border:1px solid #fecaca }\n.toast.ok{ background:#dcfce7; color:#166534; border-color:#bbf7d0 }\n</style>\n","<script setup>\nimport { ref, computed, reactive, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst T = {\n  ar:{\n    title:'المستوى الثالث – التحدي 1: هرم الضرب',\n    rule:'املأ مربعات الهرم بحيث يساوي كل مربع أعلى حاصل ضرب الخليتين تحته. اسحب الأرقام الصحيحة من اللوحة حتى يكتمل الهرم.',\n    hint:'تذكّر أن كل خطوة نحو الأعلى هي نتيجة ضرب الخليتين في الأسفل مباشرة.',\n    bank:'لوحة الأرقام', newQ:'سؤال جديد', reset:'إعادة تعيين', check:'تحقّق',\n    correct:'أحسنت! اكتمل الهرم.', wrong:'تحقّق مرة أخرى، هناك قيمة في غير مكانها.',\n    clear:'تفريغ الخلية'\n  },\n  en:{\n    title:'Level 3 – Challenge 1: Multiplication Pyramid',\n    rule:'Fill the pyramid so that every cell above equals the product of the two cells directly beneath it. Drag the correct numbers from the bank.',\n    hint:'Remember: each step upward is the product of the two numbers underneath.',\n    bank:'Number bank', newQ:'New puzzle', reset:'Reset', check:'Check',\n    correct:'Great! The pyramid is complete.', wrong:'Something is off. Recheck the placements.',\n    clear:'Clear cell'\n  }\n}\nconst L = computed(()=> (T[props.lang]?props.lang:'ar'))\n\n/* sounds */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* helpers */\nfunction rndInt(a,b){ return Math.floor(Math.random()*(b-a+1))+a }\nfunction shuffle(a){ const x=a.slice(); for(let i=x.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [x[i],x[j]]=[x[j],x[i]] } return x }\nfunction keyOf(r,c){ return `${r},${c}` }\n\n/* state */\nconst rows = ref([])                  // صفوف الهرم من القاعدة للأعلى\nconst blanks = ref(new Set())         // مفاتيح الخلايا الفارغة\nconst answerMap = reactive({})        // key -> value المسحوبة\nconst totalCounts = reactive({})      // العدد الكلي لكل قيمة متاحة\nconst bankCounts = reactive({})       // العدد المتبقي لكل قيمة\nconst toast = ref(null)\nconst solved = ref(false)\n\nconst numDir = computed(()=>({ direction:'ltr', unicodeBidi:'isolate' }))\nconst displayRows = computed(()=> rows.value.map((cells,index)=>({ cells, index })).slice().reverse())\n\nfunction usageOf(val){\n  let used = 0\n  for(const k in answerMap){ if(answerMap[k] === val) used++ }\n  return used\n}\n\nfunction rebuildBank(){\n  const available = {}\n  for(const [valStr,total] of Object.entries(totalCounts)){\n    const val = Number(valStr)\n    const remaining = total - usageOf(val)\n    if(remaining > 0) available[val] = remaining\n  }\n  for(const k in bankCounts){ delete bankCounts[k] }\n  for(const [val,ct] of Object.entries(available)) bankCounts[val] = ct\n}\n\nfunction generatePyramid(){\n  while(true){\n    const base = Array.from({length:4}, ()=> rndInt(2,6))\n    const built = [base]\n    for(let r=1;r<4;r++){\n      const prev = built[r-1]\n      const row = []\n      for(let c=0;c<prev.length-1;c++) row.push(prev[c] * prev[c+1])\n      built.push(row)\n    }\n    const top = built[3][0]\n    if(top <= 50000) return built\n  }\n}\n\nfunction newPuzzle(){\n  solved.value=false\n  toast.value=null\n  const built = generatePyramid()\n  rows.value = built\n  blanks.value = new Set()\n  for(const k in answerMap) delete answerMap[k]\n  for(let r=1;r<rows.value.length;r++){\n    for(let c=0;c<rows.value[r].length;c++) blanks.value.add(keyOf(r,c))\n  }\n  const totals = {}\n  blanks.value.forEach(k=>{\n    const [r,c] = k.split(',').map(Number)\n    const val = rows.value[r][c]\n    totals[val] = (totals[val] || 0) + 1\n  })\n  for(const k in totalCounts) delete totalCounts[k]\n  for(const [val,ct] of Object.entries(totals)) totalCounts[val] = ct\n  rebuildBank()\n}\n\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction dropTo(key, ev){\n  ev.preventDefault()\n  if(!blanks.value.has(key)) return\n  const raw = ev.dataTransfer.getData('text/plain')\n  const val = Number(raw)\n  if(Number.isNaN(val) || !totalCounts[val]) return\n  const current = answerMap[key]\n  if(current === val){ return }\n  const used = usageOf(val)\n  if(used >= totalCounts[val]) return\n  if(current != null) delete answerMap[key]\n  answerMap[key] = val\n  rebuildBank()\n  toast.value=null\n}\nfunction clearCell(key){\n  if(answerMap[key] != null){\n    delete answerMap[key]\n    rebuildBank()\n  }\n}\n\nfunction isFilled(){\n  for(const key of blanks.value){ if(answerMap[key]==null) return false }\n  return true\n}\nfunction isCorrect(){\n  for(const key of blanks.value){\n    const [r,c] = key.split(',').map(Number)\n    if(answerMap[key] !== rows.value[r][c]) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1', { method:'GET', credentials:'include' })\n  }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){ toast.value = L.value==='ar' ? 'أكمل كل الخانات أولاً.' : 'Fill all blanks first.'; sWrong && sWrong.play(); return }\n  if(isCorrect()){\n    solved.value = true\n    toast.value = T[L.value].correct\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    toast.value = T[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\nfunction resetAll(){\n  for(const k in answerMap) delete answerMap[k]\n  solved.value=false\n  toast.value=null\n  rebuildBank()\n}\n\nconst bankList = computed(()=>{\n  const items = []\n  for(const [val,ct] of Object.entries(bankCounts)){\n    for(let i=0;i<ct;i++) items.push(Number(val))\n  }\n  return shuffle(items)\n})\n\nonMounted(newPuzzle)\nwatch(()=>props.lang,()=>{ if(toast.value) toast.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c1\" :data-theme=\"props.theme\">\n    <h2 class=\"title\">{{ T[L].title }}</h2>\n    <p class=\"rule\">{{ T[L].rule }}</p>\n    <p class=\"hint\">{{ T[L].hint }}</p>\n\n    <div class=\"pyramid\" :dir=\"props.lang==='ar' ? 'rtl' : 'ltr'\">\n      <div class=\"p-row\" v-for=\"row in displayRows\" :key=\"row.index\">\n        <div\n          class=\"brick\"\n          v-for=\"(val,cIdx) in row.cells\"\n          :key=\"row.index + '-' + cIdx\"\n        >\n          <template v-if=\"!blanks.has(keyOf(row.index, cIdx))\">\n            <span class=\"num\" :style=\"numDir\">{{ val }}</span>\n          </template>\n          <template v-else>\n            <div class=\"dropzone\" @dragover=\"allowDrop\" @drop=\"dropTo(keyOf(row.index, cIdx), $event)\">\n              <span v-if=\"answerMap[keyOf(row.index, cIdx)] != null\" class=\"num\" :style=\"numDir\">{{ answerMap[keyOf(row.index, cIdx)] }}</span>\n              <span v-else class=\"placeholder\">؟</span>\n            </div>\n            <button class=\"clear\" @click=\"clearCell(keyOf(row.index, cIdx))\"><Eraser class=\"ic\" /> {{ T[L].clear }}</button>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"bank\">\n      <div class=\"bank-title\">{{ T[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"(val, idx) in bankList\"\n          :key=\"val + '_' + idx\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, val)\"\n          :style=\"numDir\"\n        >\n          {{ val }}\n        </button>\n      </div>\n    </div>\n\n    <div class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ T[L].reset }}</button>\n      <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ T[L].check }}</button>\n      <button class=\"btn\" @click=\"newPuzzle\"><RefreshCw class=\"ic\" /> {{ T[L].newQ }}</button>\n    </div>\n\n    <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c1{ --bg:var(--c-bg,#fff); --fg:var(--c-fg,#111827); --muted:#6b7280 }\n[data-theme=\"dark\"] .lvl3c1{ --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af }\n.title{ font-weight:700; margin:0 0 .25rem }\n.rule{ margin:0 0 .35rem; color:var(--muted) }\n.hint{ margin:0 0 1rem; color:var(--muted); font-size:.9rem }\n\n.pyramid{ display:flex; flex-direction:column; align-items:center; gap:.65rem; margin-bottom:1.25rem }\n.p-row{ display:flex; gap:.65rem; justify-content:center }\n.brick{ background:var(--bg); border:1px solid #e5e7ebaa; border-radius:.9rem; padding:.5rem .75rem; min-width:96px; min-height:72px; display:flex; flex-direction:column; align-items:center; justify-content:center; box-shadow:0 4px 12px rgba(0,0,0,.06) }\n[data-theme=\"dark\"] .brick{ border-color:#1f2937; box-shadow:0 4px 12px rgba(0,0,0,.3) }\n\n.num{ font-weight:700; font-size:1.2rem; font-variant-numeric:tabular-nums }\n.placeholder{ color:#cbd5f5; font-size:1.4rem }\n.dropzone{ display:flex; align-items:center; justify-content:center; width:100%; height:100% }\n.dropzone:hover{ box-shadow:0 0 0 3px rgba(59,130,246,.22) inset; border-radius:.6rem }\n.clear{ margin-top:.45rem; align-self:center; display:inline-flex; gap:.3rem; align-items:center; padding:.3rem .55rem; border-radius:.6rem; border:1px solid #e5e7eb88; background:var(--bg); cursor:pointer; font-size:.75rem }\n.ic{ width:16px; height:16px }\n\n.bank{ margin-bottom:1rem }\n.bank-title{ font-weight:600; margin-bottom:.5rem }\n.bank-items{ display:flex; flex-wrap:wrap; gap:.5rem }\n.chip{ padding:.45rem .8rem; border-radius:.8rem; border:1px solid #cbd5f5aa; background:var(--bg); cursor:grab; font-weight:600; font-variant-numeric:tabular-nums }\n.chip:active{ cursor:grabbing }\n\n.actions{ display:flex; gap:.6rem; flex-wrap:wrap; margin-bottom:1rem }\n.btn{ display:inline-flex; align-items:center; gap:.35rem; padding:.5rem .8rem; border-radius:.75rem; border:1px solid #e5e7eb55; background:var(--bg); cursor:pointer }\n\n.toast{ padding:.6rem .9rem; border-radius:.8rem; border:1px solid #fecaca; background:#fee2e2; color:#991b1b }\n.toast.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 2: الأرقام المفقودة على البطاقات',\n    rule:'أمامك بطاقات ملوّنة بأرقام مفقودة. استخدم المعلومات المعطاة (المجموع، المتوسط، الوسيط، المدى) لتحديد الرقم المناسب لكل بطاقة، ثم اسحبه من لوحة الأعداد وضعه في مكانه.',\n    bank:'لوحة الأعداد', newQ:'سؤال جديد', reset:'مسح', check:'تحقّق',\n    correct:'أحسنت! الأرقام صحيحة.', wrong:'تحقّق من القيم مرة أخرى.', clear:'تفريغ البطاقة',\n    hints:{ sum:'المجموع', mean:'المتوسط الحسابي', median:'الوسيط', range:'المدى' }\n  },\n  en:{\n    title:'Level 3 – Challenge 2: Missing numbers on the cards',\n    rule:'Each coloured card is missing its number. Use the given information (sum, mean, median, range) to deduce the correct value for every card, then drag the numbers from the bank to their spots.',\n    bank:'Number bank', newQ:'New puzzle', reset:'Clear', check:'Check',\n    correct:'Great! All numbers are correct.', wrong:'Something is off – recheck the values.', clear:'Clear card',\n    hints:{ sum:'Sum', mean:'Mean', median:'Median', range:'Range' }\n  }\n}\nconst L = computed(() => (copy[props.lang] ? props.lang : 'ar'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== data templates ===== */\nconst colourPalette = ['green','gold','teal','magenta','sky','orange','crimson']\nconst templates = [\n  { numbers:[4,8,12,16,20] },\n  { numbers:[5,9,11,13,22] },\n  { numbers:[7,10,12,18,23] },\n  { numbers:[6,8,15,19,22] },\n  { numbers:[9,11,14,20,26] }\n]\n\nfunction computeHints(numbers){\n  const sorted = numbers.slice().sort((a,b)=>a-b)\n  const sum = sorted.reduce((acc,n)=>acc+n,0)\n  const mean = sum / sorted.length\n  const median = sorted[Math.floor(sorted.length/2)]\n  const range = sorted[sorted.length-1] - sorted[0]\n  return { sum, mean, median, range }\n}\n\n/* ===== state ===== */\nconst cards = ref([])                 // [{id,color,value}]\nconst solution = reactive({})         // id -> value\nconst blanks = ref(new Set())         // ids\nconst totalCounts = reactive({})      // value -> total copies (handles duplicates)\nconst bankCounts = reactive({})       // value -> remaining copies\nconst answer = reactive({})           // id -> chosen value\nconst hints = ref({ sum:0, mean:0, median:0, range:0 })\nconst toast = ref(null)\nconst solved = ref(false)\n\nfunction resetReactiveMap(obj){\n  for (const key of Object.keys(obj)) delete obj[key]\n}\n\nfunction buildPuzzle(){\n  const tpl = templates[Math.floor(Math.random()*templates.length)]\n  const nums = tpl.numbers.slice()\n  const colours = colourPalette.slice(0, nums.length)\n  colours.sort(() => Math.random()-0.5)\n  const arrangement = nums.slice().sort(() => Math.random()-0.5)\n\n  // reset containers\n  cards.value = []\n  resetReactiveMap(solution)\n  blanks.value = new Set()\n  resetReactiveMap(answer)\n  resetReactiveMap(totalCounts)\n  resetReactiveMap(bankCounts)\n\n  arrangement.forEach((value, idx) => {\n    const id = `card-${idx}`\n    cards.value.push({ id, value, color: colours[idx % colours.length] })\n    solution[id] = value\n    blanks.value.add(id)\n    totalCounts[value] = (totalCounts[value] || 0) + 1\n  })\n  for (const [val, ct] of Object.entries(totalCounts)) {\n    bankCounts[val] = ct\n  }\n  hints.value = computeHints(nums)\n  toast.value = null\n  solved.value = false\n}\n\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDrop(ev, cardId){\n  ev.preventDefault()\n  const raw = ev.dataTransfer.getData('text/plain')\n  const val = Number(raw)\n  if(Number.isNaN(val)) return\n  if((bankCounts[val] || 0) <= 0 && answer[cardId] !== val) return\n\n  if(answer[cardId] != null){\n    const prev = answer[cardId]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n\n  if(answer[cardId] !== val){\n    bankCounts[val] = (bankCounts[val] || 0) - 1\n  }\n  if(bankCounts[val] < 0) bankCounts[val] = 0\n\n  answer[cardId] = val\n  toast.value = null\n}\nfunction clearCard(cardId){\n  if(answer[cardId] != null){\n    const prev = answer[cardId]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n    delete answer[cardId]\n  }\n}\n\nfunction isFilled(){\n  for(const id of blanks.value){ if(answer[id]==null) return false }\n  return true\n}\nfunction isCorrect(){\n  for(const id of blanks.value){ if(answer[id] !== solution[id]) return false }\n  return true\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\nasync function checkNow(){\n  if(!isFilled()){\n    toast.value = L.value==='ar' ? 'أكمل كل البطاقات أولاً.' : 'Fill every card first.'\n    sWrong && sWrong.play()\n    return\n  }\n  if(isCorrect()){\n    solved.value = true\n    toast.value = copy[L.value].correct\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    toast.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\nfunction resetAll(){\n  resetReactiveMap(answer)\n  resetReactiveMap(bankCounts)\n  for (const [val, ct] of Object.entries(totalCounts)) bankCounts[val] = ct\n  toast.value = null\n  solved.value = false\n}\n\nconst bankList = computed(() => {\n  const arr = []\n  for(const [val, count] of Object.entries(bankCounts)){\n    for(let i=0;i<count;i++) arr.push({ value:Number(val), key:`${val}-${i}` })\n  }\n  return arr\n})\n\nonMounted(buildPuzzle)\nwatch(() => props.lang, () => { if(toast.value && solved.value) return; toast.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c2\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"rule\">{{ copy[L].rule }}</p>\n    </header>\n\n    <section class=\"board\">\n      <div class=\"cards\">\n        <div\n          v-for=\"card in cards\"\n          :key=\"card.id\"\n          class=\"card\"\n          :class=\"'color-' + card.color\"\n        >\n          <div class=\"drop\" @dragover=\"allowDrop\" @drop=\"onDrop($event, card.id)\">\n            <span v-if=\"answer[card.id]!=null\" class=\"num\">{{ answer[card.id] }}</span>\n            <span v-else class=\"placeholder\">؟</span>\n          </div>\n          <button class=\"clear\" @click=\"clearCard(card.id)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n        </div>\n      </div>\n\n      <aside class=\"facts\">\n        <h3>{{ props.lang==='ar' ? 'المعلومات المتاحة' : 'Given facts' }}</h3>\n        <ul>\n          <li><strong>{{ copy[L].hints.sum }}:</strong> {{ hints.sum }}</li>\n          <li><strong>{{ copy[L].hints.mean }}:</strong> {{ hints.mean }}</li>\n          <li><strong>{{ copy[L].hints.median }}:</strong> {{ hints.median }}</li>\n          <li><strong>{{ copy[L].hints.range }}:</strong> {{ hints.range }}</li>\n        </ul>\n      </aside>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"item in bankList\"\n          :key=\"item.key\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, item.value)\"\n        >\n          {{ item.value }}\n        </button>\n      </div>\n    </section>\n\n    <section class=\"actions\">\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"checkNow\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"buildPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"toast\" class=\"toast\" :class=\"{ ok: solved }\">{{ toast }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c2{ --fg:#172554; --bg:#f6f7ff; --panel:#ffffff; --bd:#cbd5f5; --accent:#d64c42;\n  color:var(--fg); background:var(--bg); padding:24px; border-radius:18px; box-shadow:0 12px 32px rgba(23,37,84,.08) }\n[data-theme=\"dark\"] .lvl3c2{ --fg:#e0e7ff; --bg:#0b1220; --panel:#111a2b; --bd:#1e293b; }\n\n.head{ margin-bottom:18px }\n.title{ margin:0 0 8px; font-size:1.5rem; font-weight:700 }\n.rule{ margin:0; opacity:.75; line-height:1.5 }\n\n.board{ display:flex; flex-wrap:wrap; gap:24px; margin-bottom:24px }\n.cards{ display:flex; flex-wrap:wrap; gap:16px; flex:2 }\n.card{ width:160px; min-height:140px; border-radius:18px; padding:16px; box-shadow:0 10px 24px rgba(0,0,0,.08);\n  display:flex; flex-direction:column; align-items:center; gap:12px; border:2px solid transparent; background:var(--panel) }\n.card .drop{ width:100%; height:80px; border:2px dashed rgba(15,23,42,.25); border-radius:12px;\n  display:flex; align-items:center; justify-content:center; font-size:1.6rem; font-weight:700; color:var(--fg);\n  background:rgba(255,255,255,.55) }\n[data-theme=\"dark\"] .card .drop{ background:rgba(15,23,42,.45); border-color:rgba(226,232,240,.25) }\n.card .drop:hover{ border-color:rgba(214,76,66,.45); box-shadow:0 0 0 4px rgba(214,76,66,.12) }\n.placeholder{ opacity:.45 }\n.clear{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px;\n  border:1px solid rgba(15,23,42,.15); background:rgba(255,255,255,.8); cursor:pointer; font-size:.8rem }\n[data-theme=\"dark\"] .clear{ background:rgba(30,41,59,.6); border-color:rgba(148,163,184,.35) }\n.ic{ width:16px; height:16px }\n\n.facts{ flex:1; min-width:220px; background:var(--panel); border-radius:16px; padding:18px; border:1px solid var(--bd);\n  box-shadow:0 8px 20px rgba(0,0,0,.05) }\n.facts h3{ margin:0 0 12px; font-size:1.05rem }\n.facts ul{ list-style:none; padding:0; margin:0; display:grid; gap:8px }\n.facts li{ display:flex; justify-content:space-between; gap:12px; font-variant-numeric:tabular-nums }\n\n.bank{ background:var(--panel); border-radius:16px; padding:18px; border:1px solid var(--bd); margin-bottom:20px }\n.bank-title{ font-weight:600; margin-bottom:12px }\n.bank-items{ display:flex; gap:10px; flex-wrap:wrap }\n.chip{ padding:8px 14px; border-radius:999px; border:1px solid var(--bd); background:#fff; cursor:grab; font-weight:600;\n  box-shadow:0 6px 16px rgba(15,23,42,.12) }\n[data-theme=\"dark\"] .chip{ background:rgba(15,23,42,.6); border-color:rgba(148,163,184,.3) }\n.chip:active{ cursor:grabbing }\n\n.actions{ display:flex; flex-wrap:wrap; gap:12px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd);\n  background:var(--panel); cursor:pointer; transition:.15s; font-weight:600 }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(0,0,0,.08) }\n\n.toast{ margin-top:18px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#991b1b;\n  font-weight:600; text-align:center }\n.toast.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n\n/* card colours */\n.color-green{ border-color:#4ade80; background:linear-gradient(160deg,#bbf7d0,#f0fff4) }\n.color-gold{ border-color:#facc15; background:linear-gradient(160deg,#fef08a,#fffbe6) }\n.color-teal{ border-color:#2dd4bf; background:linear-gradient(160deg,#99f6e4,#ecfeff) }\n.color-magenta{ border-color:#f472b6; background:linear-gradient(160deg,#fbcfe8,#fff0f8) }\n.color-sky{ border-color:#38bdf8; background:linear-gradient(160deg,#bae6fd,#eff6ff) }\n.color-orange{ border-color:#fb923c; background:linear-gradient(160deg,#ffd7aa,#fff7ed) }\n.color-crimson{ border-color:#f87171; background:linear-gradient(160deg,#fecaca,#fff1f1) }\n\n@media (max-width: 900px){\n  .board{ flex-direction:column }\n  .cards{ justify-content:center }\n  .card{ width:140px }\n}\n</style>\n","<script setup>\nimport { ref, computed, reactive, onMounted } from 'vue'\nimport { Check, RotateCcw, RefreshCw } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 3: خطوط المجموع العشري',\n    rule:'اختر أرقامًا متجاورة على خط مستقيم (أفقي، عمودي أو قطري) بحيث يساوي مجموعها القيمة المطلوبة.',\n    targetLabel:'المجموع المطلوب', selected:'المجموع الحالي',\n    check:'تحقّق', reset:'إعادة اختيار', newQ:'سؤال جديد',\n    needSelection:'اختر خانات أولاً.',\n    wrongLine:'يجب أن تكون الخانات المختارة على خط مستقيم ومتجاورة.',\n    wrongSum:'المجموع لا يساوي القيمة المطلوبة.',\n    correct:'رائع! خط صحيح.',\n  },\n  en:{\n    title:'Level 3 – Challenge 3: Decimal Sum Lines',\n    rule:'Pick numbers lying on one straight line (horizontal, vertical, or diagonal) so their sum equals the target.',\n    targetLabel:'Target sum', selected:'Current sum',\n    check:'Check', reset:'Reset selection', newQ:'New puzzle',\n    needSelection:'Select cells first.',\n    wrongLine:'Selections must be contiguous on a straight line.',\n    wrongSum:'The sum does not match the target.',\n    correct:'Great! You found a valid line.',\n  }\n}\nconst L = computed(()=> (copy[props.lang]?props.lang:'ar'))\n\n/* sounds */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst puzzles = [\n  {\n    id: 'p1',\n    target: 10,\n    grid: [\n      [1.2, 0.8, 2.5, 1.3, 0.9],\n      [2.1, 3.4, 2.0, 0.6, 1.5],\n      [1.8, 2.2, 1.5, 3.0, 1.1],\n      [0.5, 1.6, 1.7, 2.0, 3.5],\n      [1.4, 1.3, 2.3, 1.8, 2.7],\n    ],\n    solution: [\n      { r:0, c:2 }, { r:1, c:2 }, { r:2, c:2 }, { r:3, c:2 }, { r:4, c:2 }\n    ],\n  },\n  {\n    id: 'p2',\n    target: 10,\n    grid: [\n      [0.8, 1.7, 2.1, 0.9, 1.4],\n      [2.6, 1.5, 1.9, 1.1, 2.9],\n      [1.3, 2.4, 1.2, 2.2, 1.6],\n      [0.7, 1.8, 2.5, 1.7, 2.3],\n      [1.9, 0.6, 1.8, 2.6, 0.9],\n    ],\n    solution: [\n      { r:1, c:0 }, { r:1, c:1 }, { r:1, c:2 }, { r:1, c:3 }, { r:1, c:4 }\n    ],\n  },\n  {\n    id: 'p3',\n    target: 10,\n    grid: [\n      [2.5, 1.1, 0.8, 1.4, 1.2],\n      [0.9, 2.0, 1.3, 1.7, 1.0],\n      [1.6, 1.2, 1.8, 1.1, 1.3],\n      [1.4, 1.9, 1.5, 1.5, 1.8],\n      [1.3, 1.4, 0.9, 1.6, 2.2],\n    ],\n    solution: [\n      { r:0, c:0 }, { r:1, c:1 }, { r:2, c:2 }, { r:3, c:3 }, { r:4, c:4 }\n    ],\n  },\n]\n\nconst currentPuzzle = ref(puzzles[0])\nconst selected = ref(new Set())\nconst solved = ref(false)\nconst feedback = ref(null)\n\nfunction coordKey(r,c){ return `${r},${c}` }\n\nfunction resetSelection(){\n  selected.value = new Set()\n  solved.value = false\n  feedback.value = null\n}\n\nfunction pickPuzzle(){\n  const next = puzzles[Math.floor(Math.random()*puzzles.length)]\n  currentPuzzle.value = next\n  resetSelection()\n}\n\nfunction toggleCell(r,c){\n  const key = coordKey(r,c)\n  const set = new Set(selected.value)\n  if(set.has(key)) set.delete(key)\n  else set.add(key)\n  selected.value = set\n  solved.value = false\n  feedback.value = null\n}\n\nconst selectedList = computed(()=> Array.from(selected.value).map(item => {\n  const [r,c] = item.split(',').map(Number)\n  return { r, c }\n}))\n\nconst selectedSum = computed(()=> selectedList.value.reduce((total, cell)=> total + currentPuzzle.value.grid[cell.r][cell.c], 0))\n\nfunction isLine(cells){\n  if(cells.length < 2) return true\n  const rows = cells.map(c=>c.r)\n  const cols = cells.map(c=>c.c)\n  const sameRow = rows.every(r=>r===rows[0])\n  const sameCol = cols.every(c=>c===cols[0])\n  const diag1 = rows.every((r,idx)=> r - cols[idx] === rows[0] - cols[0])\n  const diag2 = rows.every((r,idx)=> r + cols[idx] === rows[0] + cols[0])\n\n  if(!sameRow && !sameCol && !diag1 && !diag2) return false\n\n  const sorted = [...cells]\n  if(sameRow){\n    sorted.sort((a,b)=> a.c - b.c)\n    for(let i=1;i<sorted.length;i++) if(sorted[i].c - sorted[i-1].c !== 1) return false\n    return true\n  }\n  if(sameCol){\n    sorted.sort((a,b)=> a.r - b.r)\n    for(let i=1;i<sorted.length;i++) if(sorted[i].r - sorted[i-1].r !== 1) return false\n    return true\n  }\n  if(diag1){\n    sorted.sort((a,b)=> a.r - b.r)\n    for(let i=1;i<sorted.length;i++){\n      if(sorted[i].r - sorted[i-1].r !== 1) return false\n      if(sorted[i].c - sorted[i-1].c !== 1) return false\n    }\n    return true\n  }\n  // diag2\n  sorted.sort((a,b)=> a.r - b.r)\n  for(let i=1;i<sorted.length;i++){\n    if(sorted[i].r - sorted[i-1].r !== 1) return false\n    if(sorted[i-1].c - sorted[i].c !== 1) return false\n  }\n  return true\n}\n\nasync function addPoint(){\n  try{\n    await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'})\n  }catch{}\n}\n\nasync function checkLine(){\n  if(!selected.size){\n    feedback.value = copy[L.value].needSelection\n    sWrong && sWrong.play()\n    return\n  }\n  const cells = selectedList.value\n  if(!isLine(cells)){\n    feedback.value = copy[L.value].wrongLine\n    sWrong && sWrong.play()\n    return\n  }\n  const sum = selectedSum.value\n  if(Math.abs(sum - currentPuzzle.value.target) > 1e-6){\n    feedback.value = copy[L.value].wrongSum\n    sWrong && sWrong.play()\n    return\n  }\n  solved.value = true\n  feedback.value = copy[L.value].correct\n  sOK && sOK.play(); sClap && sClap.play()\n  await addPoint()\n}\n\nfunction isSolutionCell(r,c){\n  return currentPuzzle.value.solution.some(cell => cell.r===r && cell.c===c)\n}\n</script>\n\n<template>\n  <div class=\"lvl3c3\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"rule\">{{ copy[L].rule }}</p>\n    </header>\n\n    <section class=\"status\">\n      <div class=\"chip target\">{{ copy[L].targetLabel }}: <strong>{{ currentPuzzle.target.toFixed(1) }}</strong></div>\n      <div class=\"chip sum\">{{ copy[L].selected }}: <strong>{{ selectedSum.toFixed(1) }}</strong></div>\n    </section>\n\n    <section class=\"grid\">\n      <div\n        v-for=\"(row,r) in currentPuzzle.grid\"\n        :key=\"r\"\n        class=\"row\"\n      >\n        <button\n          v-for=\"(value,c) in row\"\n          :key=\"c\"\n          class=\"cell\"\n          :class=\"{ selected: selected.has(coordKey(r,c)), success: solved && isSolutionCell(r,c) }\"\n          @click=\"toggleCell(r,c)\"\n        >\n          {{ value.toFixed(1) }}\n        </button>\n      </div>\n    </section>\n\n    <section class=\"actions\">\n      <button class=\"btn\" @click=\"checkLine\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetSelection\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"pickPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c3{ --fg:#0f172a; --bg:#f8fafc; --panel:#ffffff; --bd:#dbeafe; --accent:#dc2626;\n  padding:24px; border-radius:18px; background:var(--bg); color:var(--fg); box-shadow:0 12px 28px rgba(15,23,42,.08) }\n[data-theme=\"dark\"] .lvl3c3{ --fg:#e2e8f0; --bg:#0b1220; --panel:#111a2b; --bd:#1e293b; --accent:#fb7185 }\n\n.head{ margin-bottom:18px }\n.title{ margin:0 0 8px; font-size:1.5rem; font-weight:700 }\n.rule{ margin:0; opacity:.75 }\n\n.status{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:20px }\n.chip{ padding:8px 14px; border-radius:999px; background:var(--panel); border:1px solid var(--bd);\n  box-shadow:0 6px 16px rgba(15,23,42,.08); font-size:.95rem }\n.chip strong{ font-weight:700 }\n\n.grid{ display:flex; flex-direction:column; gap:6px; margin-bottom:20px }\n.row{ display:grid; grid-template-columns:repeat(auto-fit, minmax(70px,1fr)); gap:6px }\n.cell{ padding:16px 0; border-radius:12px; border:1px solid var(--bd); background:var(--panel);\n  font-size:1.2rem; font-weight:600; cursor:pointer; transition:.15s; font-variant-numeric:tabular-nums }\n.cell:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(15,23,42,.12) }\n.cell.selected{ background:rgba(59,130,246,.15); border-color:#60a5fa }\n.cell.success{ background:rgba(74,222,128,.18); border-color:#22c55e }\n\n.actions{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:18px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px;\n  border:1px solid var(--bd); background:var(--panel); cursor:pointer; transition:.15s; font-weight:600 }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(15,23,42,.12) }\n.ic{ width:18px; height:18px }\n\n.feedback{ padding:12px 18px; border-radius:12px; border:1px solid #fee2e2; background:#fff1f2; color:#b91c1c; font-weight:600 }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(239,68,68,.15); border-color:rgba(239,68,68,.4); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.2); border-color:rgba(34,197,94,.45); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 4: أزل النقطة الحمراء',\n    intro:[\n      'هذه المعادلات فرصة للتفكير في العمليات على الأعداد العشرية.',\n      'كل نقطة حمراء ● تمثّل رقمًا ناقصًا. اسحب الرقم الملائم من لوحة الأرقام وضعه مكان النقطة حتى تصبح المعادلة صحيحة.'\n    ],\n    check:'تحقّق', reset:'مسح الكل', newQ:'سؤال جديد',\n    incomplete:'أكمل كل الفراغات أولاً.', wrong:'هناك معادلة غير صحيحة، راجع الأرقام.', correct:'أحسنت! جميع المعادلات صحيحة.',\n    bank:'لوحة الأرقام', clear:'تفريغ'\n  },\n  en:{\n    title:'Level 3 – Challenge 4: Replace the red dot',\n    intro:[\n      'These equations focus on decimal operations.',\n      'Each red dot ● hides a single digit. Drag the correct digit from the number bank to make every equation true.'\n    ],\n    check:'Check', reset:'Clear all', newQ:'New puzzle',\n    incomplete:'Fill every blank first.', wrong:'One or more equations are incorrect. Try again.', correct:'Great! All equations are valid.',\n    bank:'Number bank', clear:'Clear'\n  }\n}\nconst L = computed(()=> (copy[props.lang]?props.lang:'ar'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst puzzleBank = [\n  {\n    id:'p1',\n    equations:[\n      {\n        id:'eqA',\n        slots:{ a:8, b:7 },\n        order:['a','b'],\n        template:{\n          ar:['أ. ٩٫٣ × ٠٫', {slot:'a'}, ' = ', {slot:'b'}, '٫٤٤'],\n          en:['A. 9.3 × 0.', {slot:'a'}, ' = ', {slot:'b'}, '.44']\n        },\n        evaluate(values){\n          const left = 9.3 * (values.a / 10)\n          const right = values.b + 0.44\n          return Math.abs(left - right) < 1e-6\n        }\n      },\n      {\n        id:'eqB',\n        slots:{ c:4, d:9 },\n        order:['c','d'],\n        template:{\n          ar:['ب. ٢٫', {slot:'c'}, ' × ٢٫', {slot:'d'}, ' = ٦٫٩٦'],\n          en:['B. 2.', {slot:'c'}, ' × 2.', {slot:'d'}, ' = 6.96']\n        },\n        evaluate(values){\n          const left = (2 + values.c/10) * (2 + values.d/10)\n          return Math.abs(left - 6.96) < 1e-6\n        }\n      },\n      {\n        id:'eqC',\n        slots:{ e:4, f:7 },\n        order:['e','f'],\n        template:{\n          ar:['ج. ', {slot:'e'}, '٫٩ × ٣٫', {slot:'f'}, ' = ١٨٫١٣'],\n          en:['C. ', {slot:'e'}, '.9 × 3.', {slot:'f'}, ' = 18.13']\n        },\n        evaluate(values){\n          const left = (values.e + 0.9) * (3 + values.f/10)\n          return Math.abs(left - 18.13) < 1e-6\n        }\n      },\n      {\n        id:'eqD',\n        slots:{ g:7, h:9 },\n        order:['g','h'],\n        template:{\n          ar:['د. ٤٫', {slot:'g'}, ' + ١٫٢٥ = ٥٫', {slot:'h'}, '٥'],\n          en:['D. 4.', {slot:'g'}, ' + 1.25 = 5.', {slot:'h'}, '5']\n        },\n        evaluate(values){\n          const left = (4 + values.g/10) + 1.25\n          const right = 5 + values.h/10 + 0.05\n          return Math.abs(left - right) < 1e-6\n        }\n      },\n    ]\n  }\n]\n\nconst currentPuzzle = ref(puzzleBank[0])\nconst answers = reactive({})\nconst totalCounts = reactive({})\nconst bankCounts = reactive({})\nconst slotsMeta = ref([])\nconst feedback = ref(null)\nconst solved = ref(false)\n\nfunction shuffle(arr){\n  return arr.slice().sort(()=>Math.random()-0.5)\n}\n\nfunction initPuzzle(){\n  const puzzle = puzzleBank[Math.floor(Math.random()*puzzleBank.length)]\n  currentPuzzle.value = puzzle\n  feedback.value = null\n  solved.value = false\n  Object.keys(answers).forEach(k => delete answers[k])\n  Object.keys(totalCounts).forEach(k => delete totalCounts[k])\n  Object.keys(bankCounts).forEach(k => delete bankCounts[k])\n  const meta = []\n\n  puzzle.equations.forEach(eq => {\n    eq.order.forEach(slotName => {\n      const key = `${eq.id}-${slotName}`\n      meta.push({ key, eq, slotName })\n      answers[key] = null\n      const digit = eq.slots[slotName]\n      totalCounts[digit] = (totalCounts[digit] || 0) + 1\n      bankCounts[digit] = (bankCounts[digit] || 0) + 1\n    })\n  })\n  slotsMeta.value = meta\n}\n\nfunction allowDrop(ev){ ev.preventDefault() }\n\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\n\nfunction onDrop(ev, key){\n  ev.preventDefault()\n  const raw = ev.dataTransfer.getData('text/plain')\n  const val = Number(raw)\n  if(Number.isNaN(val)) return\n  if((bankCounts[val] || 0) <= 0 && answers[key] !== val) return\n\n  if(answers[key] != null){\n    const prev = answers[key]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n\n  if(answers[key] !== val){\n    bankCounts[val] = (bankCounts[val] || 0) - 1\n    if(bankCounts[val] < 0) bankCounts[val] = 0\n  }\n\n  answers[key] = val\n  feedback.value = null\n  solved.value = false\n}\n\nfunction clearSlot(key){\n  if(answers[key] != null){\n    const prev = answers[key]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n    answers[key] = null\n    feedback.value = null\n    solved.value = false\n  }\n}\n\nconst bankList = computed(()=>{\n  const list = []\n  for(const [digit,count] of Object.entries(bankCounts)){\n    for(let i=0;i<count;i++) list.push({ value:Number(digit), key:`${digit}-${i}` })\n  }\n  return shuffle(list)\n})\n\nfunction allFilled(){\n  return slotsMeta.value.every(slot => answers[slot.key] != null)\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\n\nasync function checkAll(){\n  if(!allFilled()){\n    feedback.value = copy[L.value].incomplete\n    sWrong && sWrong.play()\n    return\n  }\n  const { equations } = currentPuzzle.value\n  for(const eq of equations){\n    const values = {}\n    let valid = true\n    for(const slotName of eq.order){\n      const key = `${eq.id}-${slotName}`\n      values[slotName] = answers[key]\n      if(values[slotName] == null){ valid = false; break }\n    }\n    if(!valid || !eq.evaluate(values)){\n      feedback.value = copy[L.value].wrong\n      sWrong && sWrong.play()\n      return\n    }\n  }\n  feedback.value = copy[L.value].correct\n  solved.value = true\n  sOK && sOK.play(); sClap && sClap.play()\n  await addPoint()\n}\n\nfunction resetAll(){\n  slotsMeta.value.forEach(slot => { if(answers[slot.key]!=null){ const prev=answers[slot.key]; bankCounts[prev]=(bankCounts[prev]||0)+1; answers[slot.key]=null } })\n  feedback.value = null\n  solved.value = false\n}\n\nonMounted(initPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c4\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p v-for=\"(line,idx) in copy[L].intro\" :key=\"idx\" class=\"intro\">{{ line }}</p>\n    </header>\n\n    <section class=\"equations\">\n      <div v-for=\"eq in currentPuzzle.equations\" :key=\"eq.id\" class=\"card\">\n        <div class=\"expression\">\n          <span v-for=\"(token, idx) in (props.lang==='ar' ? eq.template.ar : eq.template.en)\" :key=\"idx\">\n            <template v-if=\"typeof token === 'string'\">{{ token }}</template>\n            <template v-else>\n              <span class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, eq.id + '-' + token.slot)\">\n                <span v-if=\"answers[eq.id + '-' + token.slot] != null\" class=\"digit\">{{ answers[eq.id + '-' + token.slot] }}</span>\n                <span v-else class=\"placeholder\">●</span>\n              </span>\n              <button class=\"clear\" @click=\"clearSlot(eq.id + '-' + token.slot)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n            </template>\n          </span>\n        </div>\n      </div>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"item in bankList\"\n          :key=\"item.key\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, item.value)\"\n        >\n          {{ item.value }}\n        </button>\n      </div>\n    </section>\n\n    <section class=\"actions\">\n      <button class=\"btn\" @click=\"checkAll\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetAll\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c4{ --fg:#111827; --bg:#fdf5f3; --panel:#ffffff; --bd:#fcd6c3; --accent:#ef4444;\n  padding:24px; border-radius:18px; color:var(--fg); background:var(--bg); box-shadow:0 16px 32px rgba(244,114,182,.12) }\n[data-theme=\"dark\"] .lvl3c4{ --fg:#f8fafc; --bg:#1b1325; --panel:#201830; --bd:#3b2c4b; --accent:#fb7185 }\n\n.head{ margin-bottom:18px }\n.title{ margin:0 0 12px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0 0 6px; line-height:1.6 }\n\n.equations{ display:grid; gap:18px }\n.card{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px 18px; box-shadow:0 12px 24px rgba(17,24,39,.08) }\n.expression{ display:flex; align-items:center; flex-wrap:wrap; gap:10px; font-size:1.15rem; font-weight:600 }\n.slot{ min-width:36px; min-height:36px; border-radius:12px; border:2px dashed rgba(239,68,68,.45); display:inline-flex; align-items:center; justify-content:center; background:rgba(254,226,226,.5); padding:4px 8px }\n[data-theme=\"dark\"] .slot{ background:rgba(239,68,68,.12); border-color:rgba(248,113,113,.55) }\n.digit{ font-size:1.2rem; font-weight:700 }\n.placeholder{ color:var(--accent); font-size:1.4rem }\n.clear{ border:none; background:transparent; color:var(--accent); cursor:pointer; display:inline-flex; align-items:center; gap:4px; font-size:.8rem }\n.ic{ width:16px; height:16px }\n\n.bank{ margin:22px 0; background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px; box-shadow:0 12px 24px rgba(17,24,39,.08) }\n.bank-title{ font-weight:700; margin-bottom:12px }\n.bank-items{ display:flex; flex-wrap:wrap; gap:10px }\n.chip{ padding:8px 14px; border-radius:999px; border:1px solid var(--bd); background:var(--panel); cursor:grab; font-weight:700; box-shadow:0 8px 20px rgba(17,24,39,.08) }\n.chip:active{ cursor:grabbing }\n\n.actions{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:18px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); cursor:pointer; font-weight:700; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(17,24,39,.12) }\n\n.feedback{ padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700 }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{type:String,default:'ar'}, theme:{type:String,default:'light'} })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 5: بطاقات الكسر المفقود',\n    intro:[\n      'استخدم البطاقات المرقّمة من ١ إلى ٩ مرة واحدة فقط لتكوين الكسرين بحيث يكون الناتج مساويًا للقيمة المطلوبة.',\n      'اسحب الرقم المناسب إلى كل خانة للبسط أو المقام، ثم تحقّق من صحة الناتج.'\n    ],\n    bank:'البطاقات المتاحة',\n    check:'تحقّق', reset:'مسح الاختيار', newQ:'تحدٍ جديد', clear:'تفريغ',\n    needAll:'املأ كل الخانات أولًا.', wrong:'المعادلة غير صحيحة، جرّب ترتيبًا آخر.', correct:'أحسنت! أنتجت الكسور الصحيحة.'\n  },\n  en:{\n    title:'Level 3 – Challenge 5: Missing Fraction Cards',\n    intro:[\n      'Use the cards labelled 1 through 9 exactly once to build two fractions whose sum matches the target.',\n      'Drag each digit into the correct numerator or denominator, then check your result.'\n    ],\n    bank:'Available cards',\n    check:'Check', reset:'Reset selection', newQ:'New challenge', clear:'Clear',\n    needAll:'Fill every slot first.', wrong:'The equation is not satisfied—try another arrangement.', correct:'Great! The fractions are correct.'\n  }\n}\nconst L = computed(()=> (copy[props.lang]?props.lang:'ar'))\n\n/* ===== sounds ===== */\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\n/* ===== puzzle definitions ===== */\nconst slotTemplate = {\n  n1:['n1a','n1b'],\n  d1:['d1a','d1b'],\n  n2:['n2a','n2b'],\n  d2:['d2a','d2b'],\n  res:['res']\n}\n\nconst puzzles = [\n  {\n    id:'p1',\n    solution:{\n      n1:['2','9'],\n      d1:['1','6'],\n      n2:['5','7'],\n      d2:['4','8'],\n      res:['3']\n    }\n  },\n  {\n    id:'p2',\n    solution:{\n      n1:['3','9'],\n      d1:['2','7'],\n      n2:['6','4'],\n      d2:['1','8'],\n      res:['5']\n    }\n  },\n  {\n    id:'p3',\n    solution:{\n      n1:['5','7'],\n      d1:['1','3'],\n      n2:['9','4'],\n      d2:['2','6'],\n      res:['8']\n    }\n  }\n]\n\nconst currentPuzzle = ref(puzzles[0])\nconst placements = reactive({})\nconst expectedDigits = reactive({})\nconst bankCounts = reactive({})\nconst feedback = ref(null)\nconst solved = ref(false)\nconst digitsPool = ['1','2','3','4','5','6','7','8','9']\n\nfunction resetMaps(){\n  Object.keys(placements).forEach(k => delete placements[k])\n  Object.keys(expectedDigits).forEach(k => delete expectedDigits[k])\n  Object.keys(bankCounts).forEach(k => delete bankCounts[k])\n}\n\nfunction initPuzzle(){\n  const puzzle = puzzles[Math.floor(Math.random()*puzzles.length)]\n  currentPuzzle.value = puzzle\n  resetMaps()\n  feedback.value = null\n  solved.value = false\n\n  digitsPool.forEach(d => {\n    bankCounts[d] = 1\n  })\n\n  for(const [group, keys] of Object.entries(slotTemplate)){\n    const digits = puzzle.solution[group]\n    if(!digits) continue\n    keys.forEach((key, idx) => {\n      placements[key] = null\n      expectedDigits[key] = digits[idx]\n    })\n  }\n}\n\nfunction allowDrop(ev){ ev.preventDefault() }\n\nfunction onDragStart(ev, digit){ ev.dataTransfer.setData('text/plain', digit) }\n\nfunction onDrop(ev, key){\n  ev.preventDefault()\n  const digit = ev.dataTransfer.getData('text/plain')\n  if(!digit) return\n  if((bankCounts[digit] || 0) <= 0 && placements[key] !== digit) return\n\n  if(placements[key] != null){\n    const prev = placements[key]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n\n  if(placements[key] !== digit){\n    bankCounts[digit] = (bankCounts[digit] || 0) - 1\n    if(bankCounts[digit] < 0) bankCounts[digit] = 0\n  }\n\n  placements[key] = digit\n  feedback.value = null\n  solved.value = false\n}\n\nfunction clearSlot(key){\n  if(placements[key] != null){\n    const digit = placements[key]\n    bankCounts[digit] = (bankCounts[digit] || 0) + 1\n    placements[key] = null\n    feedback.value = null\n    solved.value = false\n  }\n}\n\nconst bankList = computed(()=> {\n  const list=[]\n  for(const [digit,count] of Object.entries(bankCounts)){\n    for(let i=0;i<count;i++) list.push({ digit, key:`${digit}-${i}` })\n  }\n  return list\n})\n\nfunction allFilled(){\n  return Object.keys(expectedDigits).every(key => placements[key] != null)\n}\n\nfunction valueOf(group){\n  const keys = slotTemplate[group]\n  const digits = keys.map(k => placements[k])\n  return Number(digits.join(''))\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\n\nasync function checkSolution(){\n  if(!allFilled()){\n    feedback.value = copy[L.value].needAll\n    sWrong && sWrong.play()\n    return\n  }\n  const n1 = valueOf('n1')\n  const d1 = valueOf('d1')\n  const n2 = valueOf('n2')\n  const d2 = valueOf('d2')\n  const res = Number(placements['res'])\n  if(!d1 || !d2){\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n    return\n  }\n  const sum = n1/d1 + n2/d2\n  if(Math.abs(sum - res) < 1e-6){\n    feedback.value = copy[L.value].correct\n    solved.value = true\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\n\nfunction resetSelection(){\n  for(const key of Object.keys(placements)){\n    if(placements[key] != null){\n      const digit = placements[key]\n      bankCounts[digit] = (bankCounts[digit] || 0) + 1\n      placements[key] = null\n    }\n  }\n  feedback.value = null\n  solved.value = false\n}\n\nonMounted(initPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c5\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p v-for=\"(line, idx) in copy[L].intro\" :key=\"idx\" class=\"intro\">{{ line }}</p>\n    </header>\n\n    <section class=\"equation\">\n      <div class=\"fraction\">\n        <div class=\"row\">\n          <div v-for=\"key in slotTemplate.n1\" :key=\"key\" class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, key)\">\n            <span v-if=\"placements[key]\" class=\"digit\">{{ placements[key] }}</span>\n            <span v-else class=\"placeholder\">?</span>\n          </div>\n        </div>\n        <div class=\"bar\"></div>\n        <div class=\"row\">\n          <div v-for=\"key in slotTemplate.d1\" :key=\"key\" class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, key)\">\n            <span v-if=\"placements[key]\" class=\"digit\">{{ placements[key] }}</span>\n            <span v-else class=\"placeholder\">?</span>\n          </div>\n        </div>\n      </div>\n\n      <span class=\"op\">+</span>\n\n      <div class=\"fraction\">\n        <div class=\"row\">\n          <div v-for=\"key in slotTemplate.n2\" :key=\"key\" class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, key)\">\n            <span v-if=\"placements[key]\" class=\"digit\">{{ placements[key] }}</span>\n            <span v-else class=\"placeholder\">?</span>\n          </div>\n        </div>\n        <div class=\"bar\"></div>\n        <div class=\"row\">\n          <div v-for=\"key in slotTemplate.d2\" :key=\"key\" class=\"slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, key)\">\n            <span v-if=\"placements[key]\" class=\"digit\">{{ placements[key] }}</span>\n            <span v-else class=\"placeholder\">?</span>\n          </div>\n        </div>\n      </div>\n\n      <span class=\"op\">=</span>\n\n      <div class=\"target-slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, 'res')\">\n        <span v-if=\"placements.res\" class=\"digit\">{{ placements.res }}</span>\n        <span v-else class=\"placeholder\">?</span>\n      </div>\n    </section>\n\n    <section class=\"controls\">\n      <button class=\"btn\" @click=\"checkSolution\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetSelection\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"item in bankList\"\n          :key=\"item.key\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, item.digit)\"\n        >\n          {{ item.digit }}\n        </button>\n      </div>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c5{ --fg:#1f2937; --bg:#fffaf3; --panel:#ffffff; --bd:#facc15; --accent:#f59e0b;\n  padding:24px; border-radius:18px; color:var(--fg); background:var(--bg); box-shadow:0 16px 36px rgba(245,158,11,.15) }\n[data-theme=\"dark\"] .lvl3c5{ --fg:#f1f5f9; --bg:#271c12; --panel:#312310; --bd:#facc15; --accent:#fbbf24 }\n\n.head{ margin-bottom:20px }\n.title{ margin:0 0 10px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0 0 6px; line-height:1.55 }\n\n.equation{ display:flex; align-items:center; justify-content:center; gap:18px; margin-bottom:20px; flex-wrap:wrap }\n.fraction{ display:flex; flex-direction:column; align-items:center; gap:6px; background:var(--panel); padding:12px 16px; border:2px solid var(--bd); border-radius:16px; box-shadow:0 10px 28px rgba(15,23,42,.1) }\n.row{ display:flex; gap:8px }\n.slot{ width:44px; height:44px; border-radius:12px; border:2px dashed rgba(245,158,11,.55); display:flex; align-items:center; justify-content:center; background:rgba(253,230,138,.4); cursor:pointer }\n.placeholder{ font-size:1.4rem; color:var(--accent); opacity:.8 }\n.digit{ font-size:1.35rem; font-weight:700 }\n.bar{ width:100%; height:2px; background:var(--bd) }\n.target-slot{ width:56px; height:56px; border-radius:14px; border:2px dashed rgba(245,158,11,.6); display:flex; align-items:center; justify-content:center; background:rgba(253,230,138,.35) }\n.op{ font-size:1.6rem; font-weight:700; color:var(--accent) }\n\n.controls{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-bottom:18px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); cursor:pointer; font-weight:700; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(15,23,42,.12) }\n.ic{ width:18px; height:18px }\n\n.bank{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:18px; box-shadow:0 12px 24px rgba(15,23,42,.08) }\n.bank-title{ font-weight:700; margin-bottom:12px }\n.bank-items{ display:flex; flex-wrap:wrap; gap:10px }\n.chip{ padding:10px 16px; border-radius:12px; border:1px solid var(--bd); background:rgba(253,230,138,.45); font-weight:700; cursor:grab; transition:.12s }\n.chip:active{ cursor:grabbing }\n\n.feedback{ margin-top:18px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700; text-align:center }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n\n@media(max-width: 720px){\n  .fraction{ padding:10px 12px }\n  .slot{ width:40px; height:40px }\n  .target-slot{ width:48px; height:48px }\n}\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 6: كسور مكافئة',\n    intro:'اسحب الأرقام المتاحة وضعها في الخانات بحيث يكون الكسر الاعتيادي مساويًا للقيمة العشرية المعطاة.',\n    decimals:'القيمة العشرية', fraction:'الكسر المكافئ', bank:'البطاقات المتاحة',\n    check:'تحقّق', reset:'مسح', newQ:'تحدٍ جديد', clear:'تفريغ',\n    needAll:'املأ كل الخانات أولًا.', wrong:'القيم غير متكافئة، حاول ترتيبًا مختلفًا.', correct:'أحسنت! الكسور مكافئة.'\n  },\n  en:{\n    title:'Level 3 – Challenge 6: Equivalent Fractions',\n    intro:'Drag the available digits into the slots so the fraction equals the given decimal value.',\n    decimals:'Decimal value', fraction:'Equivalent fraction', bank:'Available cards',\n    check:'Check', reset:'Clear', newQ:'New challenge', clear:'Clear',\n    needAll:'Fill every slot first.', wrong:'Values are not equivalent. Try another arrangement.', correct:'Great! They are equivalent.'\n  }\n}\nconst L = computed(() => (copy[props.lang] ? props.lang : 'ar'))\n\nimport successUrl from '@/assets/sounds/success2.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong2.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst puzzles = [\n  {\n    id:'p1',\n    decimal:{ slots:['dec1','dec2'], digits:['2','5'] }, // 0.25\n    fraction:{ num:{ slots:['num1'], digits:['1'] }, den:{ slots:['den1'], digits:['4'] } },\n    digits:['1','2','4','5']\n  },\n  {\n    id:'p2',\n    decimal:{ slots:['dec1','dec2'], digits:['7','5'] }, // 0.75\n    fraction:{ num:{ slots:['num1'], digits:['3'] }, den:{ slots:['den1'], digits:['4'] } },\n    digits:['3','4','5','7']\n  },\n  {\n    id:'p3',\n    decimal:{ slots:['dec1'], digits:['6'] }, // 0.6\n    fraction:{ num:{ slots:['num1'], digits:['3'] }, den:{ slots:['den1'], digits:['5'] } },\n    digits:['3','5','6']\n  },\n  {\n    id:'p4',\n    decimal:{ slots:['dec1','dec2'], digits:['3','3'] }, // 0.33 -> 1/3\n    fraction:{ num:{ slots:['num1'], digits:['1'] }, den:{ slots:['den1'], digits:['3'] } },\n    digits:['1','3']\n  }\n]\n\nconst currentPuzzle = ref(puzzles[0])\nconst placements = reactive({})\nconst requirements = reactive({})\nconst bankCounts = reactive({})\nconst feedback = ref(null)\nconst solved = ref(false)\n\nfunction resetMaps(){\n  Object.keys(placements).forEach(k => delete placements[k])\n  Object.keys(requirements).forEach(k => delete requirements[k])\n  Object.keys(bankCounts).forEach(k => delete bankCounts[k])\n}\n\nfunction initPuzzle(){\n  const puzzle = puzzles[Math.floor(Math.random() * puzzles.length)]\n  currentPuzzle.value = puzzle\n  resetMaps()\n  feedback.value = null\n  solved.value = false\n\n  // build slots and requirements\n  const { decimal, fraction } = puzzle\n  decimal.slots.forEach((slot, idx) => {\n    placements[slot] = null\n    requirements[slot] = decimal.digits[idx]\n  })\n  fraction.num.slots.forEach((slot, idx) => {\n    placements[slot] = null\n    requirements[slot] = fraction.num.digits[idx]\n  })\n  fraction.den.slots.forEach((slot, idx) => {\n    placements[slot] = null\n    requirements[slot] = fraction.den.digits[idx]\n  })\n\n  puzzle.digits.forEach(d => {\n    bankCounts[d] = (bankCounts[d] || 0) + 1\n  })\n}\n\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDragStart(ev, digit){ ev.dataTransfer.setData('text/plain', digit) }\n\nfunction onDrop(ev, slot){\n  ev.preventDefault()\n  const digit = ev.dataTransfer.getData('text/plain')\n  if(!digit) return\n  if((bankCounts[digit] || 0) <= 0 && placements[slot] !== digit) return\n\n  if(placements[slot] != null){\n    const prev = placements[slot]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n\n  if(placements[slot] !== digit){\n    bankCounts[digit] = (bankCounts[digit] || 0) - 1\n    if(bankCounts[digit] < 0) bankCounts[digit] = 0\n  }\n\n  placements[slot] = digit\n  solved.value = false\n  feedback.value = null\n}\n\nfunction clearSlot(slot){\n  if(placements[slot] != null){\n    const digit = placements[slot]\n    bankCounts[digit] = (bankCounts[digit] || 0) + 1\n    placements[slot] = null\n    solved.value = false\n    feedback.value = null\n  }\n}\n\nconst bankList = computed(()=>{\n  const list=[]\n  for(const [digit,count] of Object.entries(bankCounts)){\n    for(let i=0;i<count;i++) list.push({ digit, key:`${digit}-${i}` })\n  }\n  return list\n})\n\nfunction slotsFilled(){\n  return Object.keys(requirements).every(key => placements[key] != null)\n}\n\nfunction decimalValue(){\n  const digits = currentPuzzle.value.decimal.slots.map(slot => placements[slot])\n  const decimalPart = digits.join('')\n  return Number(`0.${decimalPart}`)\n}\n\nfunction fractionValue(){\n  const { fraction } = currentPuzzle.value\n  const numDigits = fraction.num.slots.map(slot => placements[slot]).join('')\n  const denDigits = fraction.den.slots.map(slot => placements[slot]).join('')\n  const numerator = Number(numDigits)\n  const denominator = Number(denDigits)\n  if(!denominator) return null\n  return numerator / denominator\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{ method:'GET', credentials:'include' }) }catch{}\n}\n\nasync function checkSolution(){\n  if(!slotsFilled()){\n    feedback.value = copy[L.value].needAll\n    sWrong && sWrong.play()\n    return\n  }\n  const dec = decimalValue()\n  const frac = fractionValue()\n  if(frac == null){\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n    return\n  }\n  if(Math.abs(dec - frac) < 1e-6){\n    feedback.value = copy[L.value].correct\n    solved.value = true\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n  }\n}\n\nfunction resetSelection(){\n  Object.keys(placements).forEach(slot => {\n    if(placements[slot] != null){\n      const digit = placements[slot]\n      bankCounts[digit] = (bankCounts[digit] || 0) + 1\n      placements[slot] = null\n    }\n  })\n  solved.value = false\n  feedback.value = null\n}\n\nonMounted(initPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c6\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"intro\">{{ copy[L].intro }}</p>\n    </header>\n\n    <section class=\"problem\">\n      <div class=\"decimal-card\">\n        <div class=\"label\">{{ copy[L].decimals }}</div>\n        <div class=\"decimal-display\">\n          <span class=\"fixed\">0.</span>\n          <div class=\"slots\">\n            <div\n              v-for=\"slot in currentPuzzle.decimal.slots\"\n              :key=\"slot\"\n              class=\"slot\"\n              @dragover=\"allowDrop\"\n              @drop=\"onDrop($event, slot)\"\n            >\n              <span v-if=\"placements[slot]\" class=\"digit\">{{ placements[slot] }}</span>\n              <span v-else class=\"placeholder\">?</span>\n              <button class=\"clear\" @click=\"clearSlot(slot)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <span class=\"equals\">=</span>\n\n      <div class=\"fraction-card\">\n        <div class=\"label\">{{ copy[L].fraction }}</div>\n        <div class=\"fraction\">\n          <div class=\"row\">\n            <div\n              v-for=\"slot in currentPuzzle.fraction.num.slots\"\n              :key=\"slot\"\n              class=\"slot\"\n              @dragover=\"allowDrop\"\n              @drop=\"onDrop($event, slot)\"\n            >\n              <span v-if=\"placements[slot]\" class=\"digit\">{{ placements[slot] }}</span>\n              <span v-else class=\"placeholder\">?</span>\n              <button class=\"clear\" @click=\"clearSlot(slot)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n            </div>\n          </div>\n          <div class=\"bar\"></div>\n          <div class=\"row\">\n            <div\n              v-for=\"slot in currentPuzzle.fraction.den.slots\"\n              :key=\"slot\"\n              class=\"slot\"\n              @dragover=\"allowDrop\"\n              @drop=\"onDrop($event, slot)\"\n            >\n              <span v-if=\"placements[slot]\" class=\"digit\">{{ placements[slot] }}</span>\n              <span v-else class=\"placeholder\">?</span>\n              <button class=\"clear\" @click=\"clearSlot(slot)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    <section class=\"controls\">\n      <button class=\"btn\" @click=\"checkSolution\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetSelection\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"item in bankList\"\n          :key=\"item.key\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, item.digit)\"\n        >\n          {{ item.digit }}\n        </button>\n      </div>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c6{ --fg:#1f2937; --bg:#f8fafc; --panel:#ffffff; --bd:#c4d4f8; --accent:#2563eb;\n  padding:24px; border-radius:18px; background:var(--bg); color:var(--fg); box-shadow:0 14px 32px rgba(37,99,235,.12) }\n[data-theme=\"dark\"] .lvl3c6{ --fg:#e2e8f0; --bg:#0f172a; --panel:#111c34; --bd:#1e3a8a; --accent:#60a5fa }\n\n.head{ margin-bottom:20px }\n.title{ margin:0 0 10px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0; line-height:1.5; opacity:.85 }\n\n.problem{ display:flex; align-items:center; justify-content:center; gap:24px; flex-wrap:wrap; margin-bottom:22px }\n.decimal-card, .fraction-card{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px 20px; box-shadow:0 12px 28px rgba(15,23,42,.08); min-width:220px }\n.label{ font-weight:700; margin-bottom:12px; text-align:center }\n.decimal-display{ display:flex; align-items:center; gap:10px; justify-content:center }\n.fixed{ font-size:1.5rem; font-weight:700 }\n.slots{ display:flex; gap:10px }\n.slot{ min-width:46px; min-height:54px; border-radius:12px; border:2px dashed rgba(37,99,235,.35); display:flex; align-items:center; justify-content:center; position:relative; background:rgba(191,219,254,.35) }\n.placeholder{ font-size:1.5rem; color:var(--accent); opacity:.75 }\n.digit{ font-size:1.45rem; font-weight:700 }\n.clear{ position:absolute; bottom:-30px; left:50%; transform:translateX(-50%); background:transparent; border:none; color:var(--accent); cursor:pointer; font-size:.75rem; display:flex; align-items:center; gap:4px }\n.ic{ width:16px; height:16px }\n\n.fraction{ display:flex; flex-direction:column; gap:12px; align-items:center }\n.row{ display:flex; gap:10px }\n.bar{ width:100%; height:3px; background:var(--accent); border-radius:999px }\n.equals{ font-size:1.8rem; font-weight:700; color:var(--accent) }\n\n.controls{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-bottom:18px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); font-weight:700; cursor:pointer; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(15,23,42,.12) }\n\n.bank{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:18px; box-shadow:0 12px 24px rgba(15,23,42,.08) }\n.bank-title{ font-weight:700; margin-bottom:12px }\n.bank-items{ display:flex; flex-wrap:wrap; gap:10px }\n.chip{ padding:9px 14px; border-radius:12px; border:1px solid var(--bd); background:rgba(191,219,254,.45); font-weight:700; cursor:grab; transition:.15s }\n.chip:active{ cursor:grabbing }\n\n.feedback{ margin-top:20px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700; text-align:center }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n\n@media (max-width: 720px){\n  .slot{ min-width:42px; min-height:48px }\n  .clear{ bottom:-26px }\n}\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 7: أجزاء الشكل المكافئة',\n    intro:'ضع الكسر الصحيح لكل جزء من الشكل الهندسي بحيث يمثّل مساحة الجزء بالكامل.',\n    bank:'الكسور المتاحة', assign:'ضع الكسر هنا',\n    check:'تحقّق', reset:'مسح الاختيار', newQ:'تحدٍ جديد',\n    needAll:'اختر كسرًا لكل جزء أولًا.', wrong:'هناك جزء لا يطابق الكسر المعيَّن له.', correct:'أحسنت! الكسور لكل الأجزاء صحيحة.'\n  },\n  en:{\n    title:'Level 3 – Challenge 7: Fraction Areas',\n    intro:'Assign the correct fraction to every highlighted region so it matches the area of that region.',\n    bank:'Fraction cards', assign:'Drop fraction',\n    check:'Check', reset:'Reset', newQ:'New challenge',\n    needAll:'Assign a fraction to every region first.', wrong:'One or more regions have the wrong fraction.', correct:'Great! All regions are correct.'\n  }\n}\nconst L = computed(() => (copy[props.lang] ? props.lang : 'ar'))\n\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst puzzles = [\n  {\n    id:'p1',\n    grid:{ rows:4, cols:4 },\n    parts:[\n      { id:'A', label:'أ', color:'#d1fae5', fraction:'1/4', cells:[0,1,4,5] },\n      { id:'B', label:'ب', color:'#86efac', fraction:'3/4', cells:[2,3,6,7,8,9,10,11,12,13,14,15] },\n    ],\n    options:['1/4','1/2','3/4','2/3']\n  },\n  {\n    id:'p2',\n    grid:{ rows:4, cols:4 },\n    parts:[\n      { id:'A', label:'أ', color:'#dbeafe', fraction:'1/2', cells:[0,1,4,5,8,9,12,13] },\n      { id:'B', label:'ب', color:'#bfdbfe', fraction:'1/4', cells:[2,6,10,14] },\n      { id:'C', label:'ج', color:'#93c5fd', fraction:'1/4', cells:[3,7,11,15] }\n    ],\n    options:['1/2','1/4','1/4','1/3','3/4','1/6']\n  }\n]\n\nconst currentPuzzle = ref(puzzles[0])\nconst placements = reactive({}) // partId -> fraction string\nconst bankCounts = reactive({})\nconst feedback = ref(null)\nconst solved = ref(false)\n\nfunction shuffle(arr){\n  return arr.slice().sort(()=>Math.random()-0.5)\n}\n\nfunction resetState(){\n  Object.keys(placements).forEach(k => delete placements[k])\n  Object.keys(bankCounts).forEach(k => delete bankCounts[k])\n}\n\nfunction initPuzzle(){\n  const puzzle = puzzles[Math.floor(Math.random()*puzzles.length)]\n  currentPuzzle.value = puzzle\n  resetState()\n  feedback.value = null\n  solved.value = false\n\n  puzzle.parts.forEach(part => { placements[part.id] = null })\n  puzzle.options.forEach(opt => {\n    bankCounts[opt] = (bankCounts[opt] || 0) + 1\n  })\n}\n\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', value) }\nfunction onDrop(ev, partId){\n  ev.preventDefault()\n  const value = ev.dataTransfer.getData('text/plain')\n  if(!value) return\n  if((bankCounts[value] || 0) <= 0 && placements[partId] !== value) return\n\n  if(placements[partId] != null){\n    const prev = placements[partId]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n  }\n\n  if(placements[partId] !== value){\n    bankCounts[value] = (bankCounts[value] || 0) - 1\n    if(bankCounts[value] < 0) bankCounts[value] = 0\n  }\n\n  placements[partId] = value\n  solved.value = false\n  feedback.value = null\n}\nfunction clearPart(partId){\n  if(placements[partId] != null){\n    const prev = placements[partId]\n    bankCounts[prev] = (bankCounts[prev] || 0) + 1\n    placements[partId] = null\n    solved.value = false\n    feedback.value = null\n  }\n}\n\nconst bankList = computed(()=>{\n  const list=[]\n  for(const [value,count] of Object.entries(bankCounts)){\n    for(let i=0;i<count;i++) list.push({ value, key:`${value}-${i}` })\n  }\n  return shuffle(list)\n})\n\nfunction allAssigned(){\n  return currentPuzzle.value.parts.every(part => placements[part.id] != null)\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\n\nasync function checkSolution(){\n  if(!allAssigned()){\n    feedback.value = copy[L.value].needAll\n    sWrong && sWrong.play()\n    return\n  }\n  for(const part of currentPuzzle.value.parts){\n    if(placements[part.id] !== part.fraction){\n      feedback.value = copy[L.value].wrong\n      sWrong && sWrong.play()\n      return\n    }\n  }\n  feedback.value = copy[L.value].correct\n  solved.value = true\n  sOK && sOK.play(); sClap && sClap.play()\n  await addPoint()\n}\n\nfunction resetSelections(){\n  currentPuzzle.value.parts.forEach(part => {\n    if(placements[part.id] != null){\n      const prev = placements[part.id]\n      bankCounts[prev] = (bankCounts[prev] || 0) + 1\n      placements[part.id] = null\n    }\n  })\n  feedback.value = null\n  solved.value = false\n}\n\nconst cellParts = computed(()=>{\n  const { rows, cols } = currentPuzzle.value.grid\n  const total = rows * cols\n  const map = Array(total).fill(null)\n  currentPuzzle.value.parts.forEach(part => {\n    part.cells.forEach(idx => { map[idx] = part })\n  })\n  return map\n})\n\nconst gridStyle = computed(()=>{\n  const { rows, cols } = currentPuzzle.value.grid\n  return {\n    gridTemplateRows: `repeat(${rows}, 1fr)`,\n    gridTemplateColumns: `repeat(${cols}, 1fr)`\n  }\n})\n\nonMounted(initPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c7\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"intro\">{{ copy[L].intro }}</p>\n    </header>\n\n    <section class=\"shape\">\n      <div class=\"grid\" :style=\"gridStyle\">\n        <div\n          v-for=\"(cellPart, idx) in cellParts\"\n          :key=\"idx\"\n          class=\"cell\"\n          :style=\"{ background: cellPart ? cellPart.color : '#f3f4f6' }\"\n        ></div>\n      </div>\n    </section>\n\n    <section class=\"assignments\">\n      <div v-for=\"part in currentPuzzle.parts\" :key=\"part.id\" class=\"assignment\">\n        <div class=\"label\">{{ part.label }}</div>\n        <div class=\"drop\" @dragover=\"allowDrop\" @drop=\"onDrop($event, part.id)\">\n          <span v-if=\"placements[part.id]\" class=\"value\">{{ placements[part.id] }}</span>\n          <span v-else class=\"placeholder\">{{ copy[L].assign }}</span>\n        </div>\n        <button class=\"clear\" @click=\"clearPart(part.id)\"><Eraser class=\"ic\" /> {{ copy[L].clear }}</button>\n      </div>\n    </section>\n\n    <section class=\"controls\">\n      <button class=\"btn\" @click=\"checkSolution\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetSelections\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"item in bankList\"\n          :key=\"item.key\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, item.value)\"\n        >\n          {{ item.value }}\n        </button>\n      </div>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c7{ --fg:#111827; --bg:#fefce8; --panel:#ffffff; --bd:#fcd34d; --accent:#f59e0b;\n  padding:24px; border-radius:18px; background:var(--bg); color:var(--fg); box-shadow:0 16px 32px rgba(245,158,11,.15) }\n[data-theme=\"dark\"] .lvl3c7{ --fg:#f8fafc; --bg:#1f1c14; --panel:#2a2418; --bd:#facc15; --accent:#fbbf24 }\n\n.head{ margin-bottom:20px }\n.title{ margin:0 0 10px; font-size:1.6rem; font-weight:700 }\n.intro{ margin:0; opacity:.85; line-height:1.5 }\n\n.shape{ display:flex; justify-content:center; margin:22px 0 }\n.grid{ width:260px; height:260px; display:grid; border:3px solid var(--bd); border-radius:16px; overflow:hidden; box-shadow:0 12px 28px rgba(15,23,42,.15) }\n.cell{ border:1px solid rgba(17,24,39,.08) }\n\n.assignments{ display:flex; flex-wrap:wrap; gap:16px; justify-content:center; margin-bottom:20px }\n.assignment{ background:var(--panel); border:1px solid var(--bd); border-radius:14px; padding:12px 14px; box-shadow:0 10px 24px rgba(15,23,42,.1); min-width:160px; display:flex; flex-direction:column; gap:10px; align-items:center }\n.label{ font-weight:700; font-size:1.1rem }\n.drop{ min-width:120px; min-height:48px; border-radius:10px; border:2px dashed rgba(245,158,11,.45); display:flex; align-items:center; justify-content:center; padding:6px 10px; background:rgba(254,243,199,.6); text-align:center }\n.placeholder{ font-size:.9rem; color:var(--accent); opacity:.8 }\n.value{ font-size:1.2rem; font-weight:700 }\n.clear{ border:none; background:transparent; color:var(--accent); cursor:pointer; display:flex; align-items:center; gap:6px; font-size:.8rem }\n.ic{ width:16px; height:16px }\n\n.controls{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-bottom:18px }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); font-weight:700; cursor:pointer; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(15,23,42,.12) }\n\n.bank{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:18px; box-shadow:0 12px 24px rgba(15,23,42,.08); margin-bottom:18px }\n.bank-title{ font-weight:700; margin-bottom:12px }\n.bank-items{ display:flex; flex-wrap:wrap; gap:10px; justify-content:center }\n.chip{ padding:9px 14px; border-radius:12px; border:1px solid var(--bd); background:rgba(253,230,138,.6); font-weight:700; cursor:grab; transition:.12s }\n.chip:active{ cursor:grabbing }\n\n.feedback{ padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700; text-align:center }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n</style>\n","<script setup>\nimport { ref, computed, reactive, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 8: مسار الضرب',\n    intro:'ابدأ من النقطة أ ثم اختر نقاطًا متصلة للوصول إلى ب بحيث يكون حاصل ضرب الأرقام على الأضلاع مساويًا للقيمة المطلوبة.',\n    target:'القيمة المطلوبة', current:'الحاصل الحالي',\n    check:'تحقّق', reset:'مسح آخر نقطة', newQ:'تحدٍ جديد', clearAll:'إعادة المسار',\n    needStart:'ابدأ من النقطة أ.', invalid:'يجب اختيار نقطة متصلة.', wrong:'المسار لا يعطي القيمة المطلوبة، حاول مرة أخرى.', correct:'أحسنت! المسار يعطي القيمة المطلوبة.'\n  },\n  en:{\n    title:'Level 3 – Challenge 8: Multiplication Path',\n    intro:'Start at point A and travel along connected nodes to reach B so the product of edge values equals the required target.',\n    target:'Target product', current:'Current product',\n    check:'Check', reset:'Undo last', newQ:'New challenge', clearAll:'Clear path',\n    needStart:'Start from node A.', invalid:'Pick a connected node.', wrong:'Path does not meet the target—try again.', correct:'Great! The path matches the target.'\n  }\n}\nconst L = computed(() => (copy[props.lang] ? props.lang : 'ar'))\n\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst puzzles = [\n  {\n    id:'p1',\n    target:5,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'أ', x:420, y:150, type:'start' },\n      { id:'B', label:'ب', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:90 },\n      { id:'RB', x:340, y:210 },\n      { id:'CT', x:260, y:70 },\n      { id:'C',  x:260, y:150 },\n      { id:'CB', x:260, y:230 },\n      { id:'LT', x:180, y:90 },\n      { id:'LB', x:180, y:210 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:0.5 },\n      { from:'RT', to:'CT', value:1.0 },\n      { from:'CT', to:'C', value:0.5 },\n      { from:'C', to:'LT', value:2.0 },\n      { from:'LT', to:'B', value:2.5 },\n      { from:'A', to:'RB', value:2.0 },\n      { from:'RB', to:'CB', value:1.25 },\n      { from:'CB', to:'C', value:1.0 },\n      { from:'C', to:'LB', value:1.0 },\n      { from:'LB', to:'B', value:2.0 },\n      { from:'CT', to:'CB', value:2.0 },\n      { from:'RT', to:'C', value:1.4 },\n      { from:'C', to:'LT', value:1.6 }\n    ]\n  },\n  {\n    id:'p2',\n    target:6,\n    start:'A',\n    end:'B',\n    nodes:[\n      { id:'A', label:'أ', x:420, y:150, type:'start' },\n      { id:'B', label:'ب', x:80, y:150, type:'end' },\n      { id:'RT', x:340, y:100 },\n      { id:'RB', x:340, y:200 },\n      { id:'CT', x:260, y:60 },\n      { id:'C',  x:260, y:150 },\n      { id:'CB', x:260, y:240 },\n      { id:'LT', x:180, y:100 },\n      { id:'LB', x:180, y:200 }\n    ],\n    edges:[\n      { from:'A', to:'RT', value:1.5 },\n      { from:'RT', to:'CT', value:2.0 },\n      { from:'CT', to:'C', value:1.0 },\n      { from:'C', to:'LT', value:1.0 },\n      { from:'LT', to:'B', value:2.0 },\n      { from:'A', to:'RB', value:0.5 },\n      { from:'RB', to:'CB', value:1.2 },\n      { from:'CB', to:'C', value:2.0 },\n      { from:'C', to:'LB', value:1.0 },\n      { from:'LB', to:'B', value:2.0 },\n      { from:'RT', to:'C', value:1.2 },\n      { from:'C', to:'LT', value:1.5 }\n    ]\n  }\n]\n\nfunction withCoords(edge, nodes){\n  const from = nodes.find(n => n.id === edge.from)\n  const to = nodes.find(n => n.id === edge.to)\n  return { ...edge, x1: from.x, y1: from.y, x2: to.x, y2: to.y, midX:(from.x+to.x)/2, midY:(from.y+to.y)/2 }\n}\n\nconst currentPuzzle = ref(puzzles[0])\nconst path = ref([]) // array of node ids\nconst feedback = ref(null)\nconst solved = ref(false)\n\nconst nodes = computed(() => currentPuzzle.value.nodes)\nconst edges = computed(() => currentPuzzle.value.edges.map(e => withCoords(e, nodes.value)))\n\nconst selectedEdges = computed(() => {\n  const e = []\n  for(let i=0;i<path.value.length-1;i++){\n    const a = path.value[i]\n    const b = path.value[i+1]\n    const edge = edges.value.find(ed => (ed.from===a && ed.to===b) || (ed.from===b && ed.to===a))\n    if(edge) e.push(edge)\n  }\n  return e\n})\n\nconst product = computed(() => selectedEdges.value.reduce((acc, ed) => acc * ed.value, 1))\n\nfunction hasEdge(a,b){\n  return edges.value.some(ed => (ed.from===a && ed.to===b) || (ed.from===b && ed.to===a))\n}\n\nfunction resetPath(){\n  path.value = []\n  solved.value = false\n  feedback.value = null\n}\n\nfunction undoLast(){\n  if(path.value.length > 0){\n    path.value = path.value.slice(0, -1)\n    solved.value = false\n    feedback.value = null\n  }\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\n\nfunction onNodeClick(node){\n  const { start, end } = currentPuzzle.value\n  if(!path.value.length){\n    if(node.id !== start){\n      feedback.value = copy[L.value].needStart\n      sWrong && sWrong.play()\n      return\n    }\n    path.value = [node.id]\n    feedback.value = null\n    return\n  }\n  const last = path.value[path.value.length-1]\n  if(node.id === last) return\n  if(!hasEdge(last, node.id)){\n    feedback.value = copy[L.value].invalid\n    sWrong && sWrong.play()\n    return\n  }\n  const newPath = path.value.slice()\n  newPath.push(node.id)\n  path.value = newPath\n  feedback.value = null\n  if(node.id === end){\n    checkPath()\n  }\n}\n\nasync function checkPath(){\n  const { end, target } = currentPuzzle.value\n  if(path.value[path.value.length-1] !== end){\n    feedback.value = copy[L.value].wrong\n    sWrong && sWrong.play()\n    return\n  }\n  if(Math.abs(product.value - target) < 1e-6){\n    feedback.value = copy[L.value].correct\n    solved.value = true\n    sOK && sOK.play(); sClap && sClap.play()\n    await addPoint()\n  }else{\n    feedback.value = copy[L.value].wrong\n    solved.value = false\n    sWrong && sWrong.play()\n  }\n}\n\nfunction initPuzzle(){\n  const puzzle = puzzles[Math.floor(Math.random()*puzzles.length)]\n  currentPuzzle.value = puzzle\n  resetPath()\n}\n\nonMounted(initPuzzle)\nwatch(() => props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c8\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"intro\">{{ copy[L].intro }}</p>\n    </header>\n\n    <section class=\"status\">\n      <div class=\"chip\">{{ copy[L].target }}: <strong>{{ currentPuzzle.target }}</strong></div>\n      <div class=\"chip\">{{ copy[L].current }}: <strong>{{ product.toFixed(3) }}</strong></div>\n    </section>\n\n    <section class=\"graph\">\n      <svg viewBox=\"0 0 500 300\">\n        <g v-for=\"edge in edges\" :key=\"edge.from + edge.to\">\n          <line :x1=\"edge.x1\" :y1=\"edge.y1\" :x2=\"edge.x2\" :y2=\"edge.y2\" :class=\"['edge', { active: selectedEdges.includes(edge) }]\" />\n          <text :x=\"edge.midX\" :y=\"edge.midY\" class=\"edge-label\">{{ edge.value }}</text>\n        </g>\n        <g v-for=\"node in nodes\" :key=\"node.id\" class=\"node\" @click=\"onNodeClick(node)\">\n          <circle :cx=\"node.x\" :cy=\"node.y\" :r=\"node.type ? 20 : 12\" :class=\"['point', node.type, { selected: path.includes(node.id) }]\" />\n          <text :x=\"node.x\" :y=\"node.y + 4\" class=\"node-label\">{{ node.label || '' }}</text>\n        </g>\n      </svg>\n    </section>\n\n    <section class=\"controls\">\n      <button class=\"btn\" @click=\"checkPath\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"undoLast\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"resetPath\"><RefreshCw class=\"ic\" /> {{ copy[L].clearAll }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c8{ --fg:#111827; --bg:#f0f9ff; --panel:#ffffff; --bd:#bae6fd; --accent:#2563eb;\n  padding:24px; border-radius:18px; background:var(--bg); color:var(--fg); box-shadow:0 16px 36px rgba(37,99,235,.12) }\n[data-theme=\"dark\"] .lvl3c8{ --fg:#e2e8f0; --bg:#0b1424; --panel:#12203b; --bd:#1d4ed8; --accent:#60a5fa }\n\n.head{ margin-bottom:20px }\n.title{ margin:0 0 10px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0; opacity:.85; line-height:1.55 }\n\n.status{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:18px }\n.chip{ padding:8px 14px; border-radius:999px; background:var(--panel); border:1px solid var(--bd); box-shadow:0 6px 16px rgba(15,23,42,.08); font-weight:600 }\n.chip strong{ font-weight:700 }\n\n.graph{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px; box-shadow:0 12px 28px rgba(15,23,42,.12); margin-bottom:20px }\nsvg{ width:100%; height:auto }\n.edge{ stroke:#3b82f6; stroke-width:4; stroke-linecap:round; opacity:.6; transition:.15s }\n.edge.active{ stroke:#2563eb; opacity:1 }\n.edge-label{ fill:var(--fg); font-size:12px; text-anchor:middle; dominant-baseline:middle; font-weight:600 }\n.node{ cursor:pointer }\n.point{ fill:#1d4ed8; stroke:#fff; stroke-width:2; transition:.15s }\n.point.start, .point.end{ fill:#fde68a; stroke:#fbbf24; stroke-width:3 }\n.point.selected{ stroke:var(--accent); stroke-width:4 }\n.node-label{ fill:var(--fg); font-weight:700; font-size:14px; text-anchor:middle }\n\n.controls{ display:flex; gap:12px; flex-wrap:wrap }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); font-weight:700; cursor:pointer; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(15,23,42,.12) }\n.ic{ width:18px; height:18px }\n\n.feedback{ margin-top:18px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700; text-align:center }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, watch } from 'vue'\nimport { Check, RotateCcw, RefreshCw, Eraser } from 'lucide-vue-next'\n\nconst props = defineProps({ lang:{ type:String, default:'ar' }, theme:{ type:String, default:'light' } })\n\nconst copy = {\n  ar:{\n    title:'المستوى الثالث – التحدي 9: شيفرة الرموز',\n    intro:'حلّ المعادلات لتحديد قيمة كل رمز، ثم اسحب الحروف/الأرقام إلى مواقعها لفك الشيفرة.',\n    letters:'التحويل الحرفي', equations:'المعادلات', message:'الرسالة المشفّرة',\n    decoded:'الرسالة بعد الفَك', check:'تحقّق', reset:'مسح التعيينات', newQ:'تحدٍ جديد',\n    needAll:'أكمل كل الحروف أولاً.', wrong:'التعيينات غير صحيحة، راجع الحلول.', correct:'رائع! قمت بفك الشيفرة بنجاح.'\n  },\n  en:{\n    title:'Level 3 – Challenge 9: Cipher Grid',\n    intro:'Solve each expression to find the value of every symbol, then drag letters/numbers into place to decode the message.',\n    letters:'Letter mapping', equations:'Expressions', message:'Encoded message',\n    decoded:'Decoded message', check:'Check', reset:'Reset assignments', newQ:'New challenge',\n    needAll:'Assign all letters first.', wrong:'Some assignments are incorrect. Try again.', correct:'Great job! You decoded the cipher.'\n  }\n}\nconst L = computed(() => (copy[props.lang] ? props.lang : 'ar'))\n\nimport successUrl from '@/assets/sounds/success3.mp3'\nimport clapUrl    from '@/assets/sounds/clap.mp3'\nimport wrongUrl   from '@/assets/sounds/wrong3.mp3'\nconst sOK    = typeof Audio!=='undefined' ? new Audio(successUrl) : null\nconst sClap  = typeof Audio!=='undefined' ? new Audio(clapUrl)    : null\nconst sWrong = typeof Audio!=='undefined' ? new Audio(wrongUrl)   : null\nsOK && (sOK.preload='auto'); sClap && (sClap.preload='auto'); sWrong && (sWrong.preload='auto')\n\nconst puzzles = [\n  {\n    id:'p1',\n    equations:[\n      { id:'b', expr:'b + 7 = 15', value:8 },\n      { id:'d', expr:'d - 1 = 10', value:11 },\n      { id:'e', expr:'2e = 30', value:15 },\n      { id:'f', expr:'2g f^2 = 40', value:5 },\n      { id:'h', expr:'3h - 2 = 19', value:7 },\n      { id:'j', expr:'j = 3h - 1', value:20 },\n      { id:'k', expr:'k - 1 = r', value:18 },\n      { id:'m', expr:'m = k - b', value:10 },\n      { id:'n', expr:'½ n = 13', value:26 },\n      { id:'p', expr:'¹⁄₇ p = 3', value:21 },\n      { id:'q', expr:'4q = 9 + 12', value:5 },\n      { id:'r', expr:'r = am + 14 (a=1,m=10)', value:24 },\n      { id:'t', expr:'t = am + 14 (a=1,m=10)', value:24 },\n      { id:'v', expr:'v = a² (a=3)', value:9 },\n      { id:'w', expr:'w = q² (q=5)', value:25 },\n      { id:'x', expr:'x = ⅔ r (r=6)', value:4 } // inconsistent but placeholder\n    ],\n    mappingTable:[\n      { letter:'a', value:5 },\n      { letter:'b', value:23 },\n      { letter:'c', value:14 },\n      { letter:'d', value:12 },\n      { letter:'e', value:18 },\n      { letter:'f', value:13 },\n      { letter:'g', value:17 },\n      { letter:'h', value:9 },\n      { letter:'i', value:22 },\n      { letter:'j', value:27 }\n    ],\n    message:[23,9,15,26,24,15,27]\n  }\n]\n\nconst currentPuzzle = ref(puzzles[0])\nconst assignments = reactive({})\nconst feedback = ref(null)\nconst solved = ref(false)\n\nfunction initPuzzle(){\n  const puzzle = puzzles[0]\n  currentPuzzle.value = puzzle\n  Object.keys(assignments).forEach(k => delete assignments[k])\n  feedback.value = null\n  solved.value = false\n}\n\nconst options = computed(()=> currentPuzzle.value.mappingTable.map(item => item.value))\nconst availableLetters = computed(()=> currentPuzzle.value.mappingTable.map(item => item.letter))\n\nfunction allowDrop(ev){ ev.preventDefault() }\nfunction onDragStart(ev, value){ ev.dataTransfer.setData('text/plain', String(value)) }\nfunction onDrop(ev, letter){\n  ev.preventDefault()\n  const val = ev.dataTransfer.getData('text/plain')\n  if(!val) return\n  assignments[letter] = Number(val)\n  solved.value = false\n  feedback.value = null\n}\nfunction clearAssignment(letter){\n  if(assignments[letter] != null){\n    assignments[letter] = null\n    solved.value = false\n    feedback.value = null\n  }\n}\n\nconst decodedMessage = computed(()=> currentPuzzle.value.message.map(code => {\n  const entry = currentPuzzle.value.mappingTable.find(m => assignments[m.letter] === code)\n  return entry ? entry.letter : '?'\n}).join(''))\n\nfunction allAssigned(){\n  return currentPuzzle.value.mappingTable.every(entry => assignments[entry.letter] != null)\n}\n\nasync function addPoint(){\n  try{ await fetch('/api/method/mathematics_leaders.api.game_points.add_point?amount=1',{method:'GET',credentials:'include'}) }catch{}\n}\n\nasync function checkSolution(){\n  if(!allAssigned()){\n    feedback.value = copy[L.value].needAll\n    sWrong && sWrong.play()\n    return\n  }\n  for(const entry of currentPuzzle.value.mappingTable){\n    if(assignments[entry.letter] !== entry.value){\n      feedback.value = copy[L.value].wrong\n      sWrong && sWrong.play()\n      return\n    }\n  }\n  feedback.value = copy[L.value].correct\n  solved.value = true\n  sOK && sOK.play(); sClap && sClap.play()\n  await addPoint()\n}\n\nfunction resetAssignments(){\n  currentPuzzle.value.mappingTable.forEach(entry => { assignments[entry.letter] = null })\n  feedback.value = null\n  solved.value = false\n}\n\nonMounted(initPuzzle)\nwatch(()=>props.lang, () => { if(!solved.value) feedback.value = null })\n</script>\n\n<template>\n  <div class=\"lvl3c9\" :data-theme=\"props.theme\">\n    <header class=\"head\">\n      <h2 class=\"title\">{{ copy[L].title }}</h2>\n      <p class=\"intro\">{{ copy[L].intro }}</p>\n    </header>\n\n    <section class=\"table\">\n      <div class=\"table-title\">{{ copy[L].letters }}</div>\n      <div class=\"grid\">\n        <template v-for=\"entry in currentPuzzle.mappingTable\" :key=\"entry.letter\">\n          <div class=\"cell letter\">{{ entry.letter }}</div>\n          <div class=\"cell slot\" @dragover=\"allowDrop\" @drop=\"onDrop($event, entry.letter)\">\n            <span v-if=\"assignments[entry.letter] != null\" class=\"value\">{{ assignments[entry.letter] }}</span>\n            <span v-else class=\"placeholder\">?</span>\n            <button class=\"clear\" @click=\"clearAssignment(entry.letter)\"><Eraser class=\"ic\" /></button>\n          </div>\n        </template>\n      </div>\n    </section>\n\n    <section class=\"equations\">\n      <h3>{{ copy[L].equations }}</h3>\n      <ul>\n        <li v-for=\"eq in currentPuzzle.equations\" :key=\"eq.id\">{{ eq.expr }}</li>\n      </ul>\n    </section>\n\n    <section class=\"bank\">\n      <div class=\"bank-title\">{{ copy[L].bank }}</div>\n      <div class=\"bank-items\">\n        <button\n          v-for=\"value in options\"\n          :key=\"value\"\n          class=\"chip\"\n          draggable=\"true\"\n          @dragstart=\"onDragStart($event, value)\"\n        >\n          {{ value }}\n        </button>\n      </div>\n    </section>\n\n    <section class=\"message\">\n      <h3>{{ copy[L].message }}</h3>\n      <div class=\"encoded\">\n        <span v-for=\"(code, idx) in currentPuzzle.message\" :key=\"idx\">{{ code }}</span>\n      </div>\n      <h4>{{ copy[L].decoded }}</h4>\n      <div class=\"decoded\">{{ decodedMessage }}</div>\n    </section>\n\n    <section class=\"controls\">\n      <button class=\"btn\" @click=\"checkSolution\"><Check class=\"ic\" /> {{ copy[L].check }}</button>\n      <button class=\"btn\" @click=\"resetAssignments\"><RotateCcw class=\"ic\" /> {{ copy[L].reset }}</button>\n      <button class=\"btn\" @click=\"initPuzzle\"><RefreshCw class=\"ic\" /> {{ copy[L].newQ }}</button>\n    </section>\n\n    <transition name=\"fade\">\n      <div v-if=\"feedback\" class=\"feedback\" :class=\"{ ok: solved }\">{{ feedback }}</div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n.lvl3c9{ --fg:#1f2937; --bg:#f8fafc; --panel:#ffffff; --bd:#d1d5db; --accent:#2563eb;\n  padding:24px; border-radius:18px; background:var(--bg); color:var(--fg); box-shadow:0 16px 36px rgba(37,99,235,.12) }\n[data-theme=\"dark\"] .lvl3c9{ --fg:#f1f5f9; --bg:#0f172a; --panel:#18223a; --bd:#1e293b; --accent:#60a5fa }\n\n.head{ margin-bottom:20px }\n.title{ margin:0 0 10px; font-size:1.55rem; font-weight:700 }\n.intro{ margin:0; opacity:.85; line-height:1.55 }\n\n.table{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px 18px; margin-bottom:20px; box-shadow:0 12px 28px rgba(15,23,42,.12) }\n.table-title{ font-weight:700; margin-bottom:12px }\n.grid{ display:grid; grid-template-columns:repeat(2, minmax(60px,1fr)); gap:10px }\n.cell{ padding:10px; border-radius:10px; border:1px solid var(--bd); text-align:center; font-weight:600 }\n.letter{ background:rgba(59,130,246,.18) }\n.slot{ position:relative; min-height:44px; display:flex; align-items:center; justify-content:center; background:rgba(191,219,254,.25) }\n.placeholder{ color:var(--accent); opacity:.7 }\n.value{ font-size:1.2rem; font-weight:700 }\n.clear{ position:absolute; right:6px; top:6px; border:none; background:transparent; color:var(--accent); cursor:pointer }\n.ic{ width:16px; height:16px }\n\n.equations{ margin-bottom:20px }\n.equations h3{ margin:0 0 10px; font-size:1.1rem }\n.equations ul{ margin:0; padding-left:18px; columns:2; gap:20px }\n\n.bank{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px; margin-bottom:20px; box-shadow:0 12px 28px rgba(15,23,42,.08) }\n.bank-title{ font-weight:700; margin-bottom:10px }\n.bank-items{ display:flex; gap:10px; flex-wrap:wrap }\n.chip{ padding:8px 14px; border-radius:10px; border:1px solid var(--bd); background:rgba(191,219,254,.45); font-weight:700; cursor:grab }\n.chip:active{ cursor:grabbing }\n\n.message{ background:var(--panel); border:1px solid var(--bd); border-radius:16px; padding:16px; margin-bottom:20px }\n.encoded span{ padding:6px 10px; border-radius:8px; border:1px solid var(--bd); margin-inline-end:6px; display:inline-block }\n.decoded{ margin-top:8px; font-size:1.3rem; font-weight:700 }\n.controls{ display:flex; gap:12px; flex-wrap:wrap }\n.btn{ display:inline-flex; align-items:center; gap:8px; padding:10px 18px; border-radius:12px; border:1px solid var(--bd); background:var(--panel); cursor:pointer; font-weight:700; transition:.15s }\n.btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(15,23,42,.12) }\n\n.feedback{ margin-top:18px; padding:12px 18px; border-radius:12px; border:1px solid #fecaca; background:#fee2e2; color:#b91c1c; font-weight:700; text-align:center }\n.feedback.ok{ border-color:#bbf7d0; background:#dcfce7; color:#166534 }\n[data-theme=\"dark\"] .feedback{ background:rgba(248,113,113,.18); border-color:rgba(248,113,113,.45); color:#fecaca }\n[data-theme=\"dark\"] .feedback.ok{ background:rgba(34,197,94,.22); border-color:rgba(34,197,94,.5); color:#bbf7d0 }\n\n.fade-enter-active,.fade-leave-active{ transition:opacity .2s }\n.fade-enter-from,.fade-leave-to{ opacity:0 }\n\n@media (max-width: 700px){\n  .equations ul{ columns:1 }\n}\n</style>\n","import { ref } from 'vue'\n\nconst score = ref(null)\nconst rank = ref(null)\nconst totalPlayers = ref(null)\nconst bestScore = ref(null)\nconst loading = ref(false)\nconst error = ref(null)\nconst lastUpdated = ref(0)\nconst profileImage = ref(null)\nconst username = ref(null)\nconst gameUserName = ref(null)\n\nasync function fetchScore(force = false) {\n  const now = Date.now()\n  if (!force && score.value !== null && now - lastUpdated.value < 60_000) {\n    return\n  }\n  if (loading.value) return\n\n  loading.value = true\n  error.value = null\n  try {\n    const res = await fetch('/api/method/mathematics_leaders.api.game_points.get_points', {\n      method: 'GET',\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' },\n    })\n    const data = await res.json()\n    if (!res.ok || !data?.message?.ok) {\n      throw new Error(data?.message || 'Unable to load score')\n    }\n    const payload = data.message\n    score.value = Number(payload.points || 0)\n    rank.value = payload.rank || 1\n    totalPlayers.value = payload.players || 1\n    bestScore.value = Number(payload.best || payload.points || 0)\n    profileImage.value = payload.profile_image || null\n    username.value = payload.username || null\n    gameUserName.value = payload.game_user_name || null\n    lastUpdated.value = now\n  } catch (err) {\n    error.value = err instanceof Error ? err.message : String(err)\n  } finally {\n    loading.value = false\n  }\n}\n\nexport function useGameScore() {\n  return {\n    score,\n    rank,\n    totalPlayers,\n    bestScore,\n    loading,\n    error,\n    lastUpdated,\n    profileImage,\n    username,\n    gameUserName,\n    refresh: fetchScore,\n  }\n}\n","<script setup>\nimport { computed, onMounted, onUnmounted, ref } from 'vue'\nimport { RefreshCw } from 'lucide-vue-next'\nimport { useGameScore } from '@/composables/useGameScore'\n\nconst { score, rank, totalPlayers, bestScore, loading, error, lastUpdated, refresh } = useGameScore()\n\nconst tiers = [\n  { threshold: 0, title:{ ar:'مبتدئ الأرقام', en:'Number Novice' } },\n  { threshold: 25, title:{ ar:'مستكشف الأنماط', en:'Pattern Explorer' } },\n  { threshold: 75, title:{ ar:'مايسترو الرياضيات', en:'Math Maestro' } },\n  { threshold: 150, title:{ ar:'أسطورة التحديات', en:'Challenge Legend' } },\n]\nconst detectLang = () => {\n  const fromAttr = (document.documentElement.lang || '').toLowerCase()\n  if (fromAttr.startsWith('en')) return 'en'\n  const stored = (localStorage.getItem('ml_lang') || '').toLowerCase()\n  if (stored.startsWith('en')) return 'en'\n  return 'ar'\n}\nconst langState = ref(detectLang())\nconst propsLang = computed(() => langState.value)\n\nconst scoreValue = computed(() => Number(score.value || 0))\nconst tierIndex = computed(() => {\n  let idx = 0\n  tiers.forEach((tier, i) => {\n    if(scoreValue.value >= tier.threshold) idx = i\n  })\n  return idx\n})\n\nconst currentTier = computed(() => tiers[tierIndex.value])\nconst nextTier = computed(() => tiers[tierIndex.value + 1] || null)\n\nconst tierTitle = computed(() => currentTier.value?.title?.[propsLang.value] || currentTier.value?.title?.en || '')\n\nconst progress = computed(() => {\n  if(!nextTier.value) return 1\n  const span = nextTier.value.threshold - currentTier.value.threshold\n  if(span <= 0) return 1\n  return Math.min(1, (scoreValue.value - currentTier.value.threshold) / span)\n})\n\nconst intl = new Intl.NumberFormat('en-US', { minimumFractionDigits:0, maximumFractionDigits:0 })\n\nconst formattedScore = computed(() => intl.format(scoreValue.value))\nconst formattedBest = computed(() => intl.format(Number(bestScore.value || 0)))\nconst formattedRank = computed(() => rank.value != null ? `#${rank.value}` : '--')\nconst totalPlayersLabel = computed(() => totalPlayers.value != null ? intl.format(totalPlayers.value) : '--')\n\nconst lastUpdatedLabel = computed(() => {\n  if(!lastUpdated.value) return '--'\n  const date = new Date(lastUpdated.value)\n  return date.toLocaleString()\n})\n\nonMounted(() => {\n  refresh(true)\n  const update = () => { langState.value = detectLang() }\n  const observer = new MutationObserver(update)\n  observer.observe(document.documentElement, { attributes: true, attributeFilter: ['lang'] })\n  window.addEventListener('storage', update)\n  onUnmounted(() => {\n    observer.disconnect()\n    window.removeEventListener('storage', update)\n  })\n})\n\nfunction handleRefresh(){ refresh(true) }\n\nconst insights = computed(() => {\n  const items = []\n  if(nextTier.value){\n    const remaining = Math.max(0, nextTier.value.threshold - scoreValue.value)\n    items.push(propsLang.value==='ar'\n      ? `أنت بحاجة إلى ${intl.format(remaining)} نقطة للوصول إلى «${nextTier.value.title.ar}».`\n      : `You need ${intl.format(remaining)} pts to reach “${nextTier.value.title.en}”.`)\n  } else {\n    items.push(propsLang.value==='ar'\n      ? 'لقد بلغت أعلى رتبة حالية! استمر في تحقيق النجاحات.'\n      : 'You are at the top tier—keep the streak going!')\n  }\n  if(rank.value && totalPlayers.value){\n    const percentile = Math.max(0, 100 - Math.round((rank.value - 1) / totalPlayers.value * 100))\n    items.push(propsLang.value==='ar'\n      ? `أنت ضمن أفضل ${percentile}% من اللاعبين النشطين.`\n      : `You are in the top ${percentile}% of active players.`)\n  }\n  items.push(propsLang.value==='ar'\n    ? `أفضل نتيجة مسجلة حاليًا هي ${formattedBest.value} نقطة.`\n    : `The current record stands at ${formattedBest.value} pts.`)\n  return items\n})\n</script>\n\n<template>\n<div class=\"scores-page\" :data-theme=\"propsLang\">\n    <section class=\"hero\">\n      <div class=\"score-card\">\n        <div class=\"badge\">{{ tierTitle }}</div>\n        <div class=\"value\">{{ formattedScore }}</div>\n        <div class=\"label\">{{ propsLang==='ar' ? 'مجموع نقاطك' : 'Total Points' }}</div>\n        <div class=\"meter\">\n          <div class=\"meter-fill\" :style=\"{ '--progress': progress }\"></div>\n        </div>\n        <div class=\"meter-caption\">\n          <span>{{ propsLang==='ar' ? 'تقدمك نحو الرتبة التالية' : 'Progress to next tier' }}</span>\n          <span>{{ Math.round(progress * 100) }}%</span>\n        </div>\n        <button class=\"refresh\" :disabled=\"loading\" @click=\"handleRefresh\">\n          <RefreshCw class=\"ic\" :class=\"{ spin: loading }\" />\n          {{ propsLang==='ar' ? 'تحديث النقاط' : 'Refresh score' }}\n        </button>\n        <small class=\"timestamp\">{{ propsLang==='ar' ? 'آخر تحديث:' : 'Last updated:' }} {{ lastUpdatedLabel }}</small>\n      </div>\n      <div class=\"stats\">\n        <div class=\"stats-card\">\n          <span class=\"label\">{{ propsLang==='ar' ? 'ترتيبك' : 'Your rank' }}</span>\n          <strong class=\"stat\">{{ formattedRank }}</strong>\n        </div>\n        <div class=\"stats-card\">\n          <span class=\"label\">{{ propsLang==='ar' ? 'عدد اللاعبين' : 'Players' }}</span>\n          <strong class=\"stat\">{{ totalPlayersLabel }}</strong>\n        </div>\n        <div class=\"stats-card\">\n          <span class=\"label\">{{ propsLang==='ar' ? 'رقم قياسي' : 'Record' }}</span>\n          <strong class=\"stat\">{{ formattedBest }}</strong>\n        </div>\n      </div>\n    </section>\n\n    <section class=\"insights\">\n      <h3>{{ propsLang==='ar' ? 'ملخص سريع' : 'Quick insights' }}</h3>\n      <ul>\n        <li v-for=\"(line, idx) in insights\" :key=\"idx\">{{ line }}</li>\n      </ul>\n      <p v-if=\"error\" class=\"error\">{{ error }}</p>\n    </section>\n  </div>\n</template>\n\n<style scoped>\n.scores-page{ display:flex; flex-direction:column; gap:20px; padding:0; width:100% }\n.hero{ display:flex; gap:20px; flex-wrap:wrap; justify-content:center }\n.score-card{ position:relative; width:100%; max-width:360px; background:linear-gradient(160deg,#2563eb,#1e3a8a); color:#fff; border-radius:24px; padding:24px; box-shadow:0 18px 36px rgba(30,64,175,.35); display:flex; flex-direction:column; gap:14px; align-items:flex-start }\n.badge{ background:rgba(255,255,255,.18); padding:6px 14px; border-radius:999px; font-weight:600 }\n.value{ font-size:3rem; font-weight:800; letter-spacing:1px }\n.label{ opacity:.9; font-weight:500 }\n.meter{ width:100%; height:10px; border-radius:999px; background:rgba(255,255,255,.25); overflow:hidden }\n.meter-fill{ width:calc(var(--progress) * 100%); height:100%; background:linear-gradient(90deg,#fcd34d,#22c55e) }\n.meter-caption{ width:100%; display:flex; justify-content:space-between; font-size:.85rem; opacity:.85 }\n.refresh{ margin-top:4px; display:inline-flex; align-items:center; gap:6px; border:none; border-radius:10px; background:rgba(15,23,42,.15); color:#fff; padding:8px 14px; cursor:pointer; font-weight:600 }\n.refresh:disabled{ opacity:.6; cursor:wait }\n.ic{ width:18px; height:18px }\n.spin{ animation: spin 1s linear infinite }\n.timestamp{ font-size:.7rem; opacity:.65 }\n\n.stats{ flex:1; min-width:220px; display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:18px }\n.stats-card{ background:var(--panel,#fff); color:var(--fg,#1f2937); border-radius:16px; padding:18px; box-shadow:0 12px 24px rgba(15,23,42,.1); display:flex; flex-direction:column; gap:6px }\n.stats-card .label{ font-size:.9rem; opacity:.75 }\n.stats-card .stat{ font-size:1.8rem; font-weight:700 }\n\n.insights{ background:var(--panel,#fff); border-radius:16px; padding:18px; box-shadow:0 12px 28px rgba(15,23,42,.08) }\n.insights h3{ margin:0 0 12px; font-size:1.2rem; font-weight:700 }\n.insights ul{ margin:0; padding-inline-start:20px; display:grid; gap:8px }\n.error{ margin-top:12px; color:#b91c1c; font-weight:600 }\n\n@keyframes spin{ to{ transform:rotate(360deg) } }\n\n@media(max-width:720px){\n  .hero{ gap:16px }\n}\n</style>\n","<script setup>\nimport { ref, reactive, computed, onMounted, onUnmounted } from 'vue'\nimport { Image as ImageIcon, Upload, Check, KeyRound, RefreshCw } from 'lucide-vue-next'\nimport { useGameScore } from '@/composables/useGameScore'\n\nconst store = useGameScore()\n\nconst detectLang = () => {\n  const doc = (document.documentElement.lang || '').toLowerCase()\n  if (doc.startsWith('en')) return 'en'\n  const stored = (localStorage.getItem('ml_lang') || '').toLowerCase()\n  return stored.startsWith('en') ? 'en' : 'ar'\n}\nconst lang = ref(detectLang())\n\nconst strings = computed(() => ({\n  ar: {\n    title: 'إعدادات الحساب',\n    avatarTitle: 'صورة البروفايل',\n    avatarHint: 'ارفع صورة مربعة للحصول على أفضل نتيجة. الحد الأقصى 2 ميغابايت.',\n    upload: 'رفع صورة',\n    changeSuccess: 'تم تحديث صورة البروفايل.',\n    changeError: 'تعذر تحديث صورة البروفايل، حاول لاحقًا.',\n    passwordTitle: 'تغيير كلمة المرور',\n    currentPassword: 'كلمة المرور الحالية',\n    newPassword: 'كلمة المرور الجديدة',\n    confirmPassword: 'تأكيد كلمة المرور',\n    savePassword: 'حفظ كلمة المرور',\n    passwordSuccess: 'تم تغيير كلمة المرور بنجاح.',\n    passwordError: 'تعذر تغيير كلمة المرور، تحقق من البيانات.',\n    chooseFile: 'اختر ملفًا',\n    cancel: 'إزالة التحديد',\n    loading: 'جاري الحفظ...',\n    verify: 'تحقّق',\n    reset: 'إعادة التعيين',\n    reset: 'إعادة التعيين',\n    formHint: 'استخدم كلمة مرور قوية تتكون من أحرف وأرقام ورموز.',\n  },\n  en: {\n    title: 'Account Settings',\n    avatarTitle: 'Profile picture',\n    avatarHint: 'Upload a square image for the best result. Max 2 MB.',\n    upload: 'Upload image',\n    changeSuccess: 'Profile picture updated successfully.',\n    changeError: 'We could not update your profile picture. Try again later.',\n    passwordTitle: 'Change password',\n    currentPassword: 'Current password',\n    newPassword: 'New password',\n    confirmPassword: 'Confirm password',\n    savePassword: 'Save password',\n    passwordSuccess: 'Password updated successfully.',\n    passwordError: 'Unable to update password. Verify your entries.',\n    chooseFile: 'Choose file',\n    cancel: 'Remove selection',\n    loading: 'Saving...',\n    verify: 'Verify',\n    reset: 'Reset',\n    reset: 'Reset',\n    formHint: 'Use a strong password mixing letters, numbers, and symbols.',\n  },\n}[lang.value]))\n\nconst avatarFile = ref(null)\nconst avatarPreview = ref('')\nconst avatarStatus = reactive({ loading: false, message: '', error: '' })\n\nconst passwordForm = reactive({ current: '', next: '', confirm: '' })\nconst verifyState = reactive({ loading: false, verified: false, message: '', error: '' })\nconst passwordStatus = reactive({ loading: false, message: '', error: '' })\n\nconst displayName = computed(() => store.username.value || 'Player')\nconst fallbackInitial = computed(() => displayName.value.trim().charAt(0).toUpperCase() || 'P')\nconst avatarUrl = computed(() => avatarPreview.value || store.profileImage.value || null)\n\nfunction handleFileChange(event) {\n  avatarStatus.message = ''\n  avatarStatus.error = ''\n  const file = event.target.files?.[0]\n  if (!file) {\n    clearSelection()\n    return\n  }\n  if (!file.type.startsWith('image/')) {\n    avatarStatus.error = lang.value === 'ar' ? 'الملف ليس صورة.' : 'The selected file is not an image.'\n    return\n  }\n  if (file.size > 2 * 1024 * 1024) {\n    avatarStatus.error = lang.value === 'ar' ? 'حجم الصورة يتجاوز 2 ميغابايت.' : 'Image size exceeds 2 MB.'\n    return\n  }\n  if (avatarPreview.value) URL.revokeObjectURL(avatarPreview.value)\n  avatarFile.value = file\n  avatarPreview.value = URL.createObjectURL(file)\n}\n\nfunction clearSelection() {\n  if (avatarPreview.value) URL.revokeObjectURL(avatarPreview.value)\n  avatarFile.value = null\n  avatarPreview.value = ''\n  avatarStatus.message = ''\n  avatarStatus.error = ''\n}\n\nasync function uploadAvatar() {\n  if (!avatarFile.value) {\n    avatarStatus.error = lang.value === 'ar' ? 'اختر صورة أولًا.' : 'Select an image first.'\n    return\n  }\n  if (!store.gameUserName.value) await store.refresh(true)\n  const docname = store.gameUserName.value\n  if (!docname) {\n    avatarStatus.error = lang.value === 'ar' ? 'لا يمكن إيجاد ملف اللاعب.' : 'Unable to identify player record.'\n    return\n  }\n  avatarStatus.loading = true\n  avatarStatus.error = ''\n  avatarStatus.message = ''\n  try {\n    const fd = new FormData()\n    fd.append('file', avatarFile.value)\n    fd.append('filename', avatarFile.value.name)\n    fd.append('is_private', '0')\n    fd.append('attached_to_doctype', 'Game Users')\n    fd.append('attached_to_name', docname)\n\n    const uploadRes = await fetch('/api/method/upload_file', {\n      method: 'POST',\n      credentials: 'include',\n      body: fd,\n    })\n    const uploadData = await uploadRes.json()\n    if (!uploadRes.ok || !uploadData?.message?.file_url) {\n      throw new Error(uploadData?._server_messages || uploadData?.message || 'Upload failed')\n    }\n    const fileUrl = uploadData.message.file_url\n    const saveRes = await fetch('/api/method/mathematics_leaders.api.profile.set_profile_image', {\n      method: 'POST',\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ file_url: fileUrl }),\n    })\n    const saveData = await saveRes.json()\n    if (!saveRes.ok || !saveData?.message?.ok) {\n      throw new Error(saveData?.message || 'Unable to store profile image')\n    }\n    avatarStatus.message = strings.value.changeSuccess\n    await store.refresh(true)\n    clearSelection()\n  } catch (err) {\n    avatarStatus.error = err instanceof Error ? err.message : strings.value.changeError\n  } finally {\n    avatarStatus.loading = false\n  }\n}\n\nasync function updatePassword() {\n  if (!verifyState.verified) {\n    verifyState.error = lang.value === 'ar' ? 'تحقق من كلمة المرور الحالية أولاً.' : 'Verify your current password first.'\n    return\n  }\n  passwordStatus.loading = true\n  passwordStatus.error = ''\n  passwordStatus.message = ''\n  const { current, next, confirm } = passwordForm\n  try {\n    if (!current || !next || !confirm) {\n      throw new Error(lang.value === 'ar' ? 'املأ كل الحقول.' : 'Please fill in all fields.')\n    }\n    if (next !== confirm) {\n      throw new Error(lang.value === 'ar' ? 'كلمتا المرور غير متطابقتين.' : 'Passwords do not match.')\n    }\n    if (next.length < 8) {\n      throw new Error(lang.value === 'ar' ? 'كلمة المرور يجب أن تكون 8 أحرف على الأقل.' : 'Password must be at least 8 characters.')\n    }\n    const res = await fetch('/api/method/mathematics_leaders.api.profile.change_password', {\n      method: 'POST',\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ current_password: current, new_password: next }),\n    })\n    const data = await res.json()\n    if (!res.ok || !data?.message?.ok) {\n      throw new Error(data?.message || strings.value.passwordError)\n    }\n    passwordStatus.message = strings.value.passwordSuccess\n    passwordForm.current = ''\n    passwordForm.next = ''\n    passwordForm.confirm = ''\n    verifyState.verified = false\n    verifyState.message = ''\n  } catch (err) {\n    passwordStatus.error = err instanceof Error ? err.message : strings.value.passwordError\n  } finally {\n    passwordStatus.loading = false\n  }\n}\n\nasync function verifyCurrent() {\n  verifyState.loading = true\n  verifyState.error = ''\n  verifyState.message = ''\n  try {\n    if (!passwordForm.current) {\n      throw new Error(lang.value === 'ar' ? 'أدخل كلمة المرور الحالية.' : 'Enter your current password.')\n    }\n    const res = await fetch('/api/method/mathematics_leaders.api.profile.verify_current_password', {\n      method: 'POST',\n      credentials: 'include',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ current_password: passwordForm.current }),\n    })\n    const data = await res.json()\n    if (!res.ok || !data?.message?.ok) {\n      throw new Error(data?.message || (lang.value === 'ar' ? 'كلمة المرور الحالية غير صحيحة.' : 'Current password is incorrect.'))\n    }\n    verifyState.verified = true\n    verifyState.message = lang.value === 'ar' ? 'تم التحقق من كلمة المرور.' : 'Password verified.'\n    passwordStatus.error = ''\n  } catch (err) {\n    verifyState.error = err instanceof Error ? err.message : (lang.value === 'ar' ? 'تعذر التحقق.' : 'Verification failed.')\n    verifyState.verified = false\n  } finally {\n    verifyState.loading = false\n  }\n}\n\nfunction resetPasswordForm() {\n  passwordForm.current = ''\n  passwordForm.next = ''\n  passwordForm.confirm = ''\n  verifyState.loading = false\n  verifyState.verified = false\n  verifyState.message = ''\n  verifyState.error = ''\n  passwordStatus.loading = false\n  passwordStatus.message = ''\n  passwordStatus.error = ''\n}\n\nonMounted(() => {\n  if (store.score.value == null) store.refresh(true)\n  const update = () => { lang.value = detectLang() }\n  const observer = new MutationObserver(update)\n  observer.observe(document.documentElement, { attributes: true, attributeFilter: ['lang'] })\n  window.addEventListener('storage', update)\n  onUnmounted(() => {\n    observer.disconnect()\n    window.removeEventListener('storage', update)\n  })\n})\n\nonUnmounted(() => {\n  if (avatarPreview.value) URL.revokeObjectURL(avatarPreview.value)\n})\n</script>\n\n<template>\n  <div class=\"settings\" :data-theme=\"lang\">\n    <h1 class=\"page-title\">{{ strings.title }}</h1>\n\n    <section class=\"card\">\n      <header>\n        <ImageIcon class=\"icon\" />\n        <div>\n          <h2>{{ strings.avatarTitle }}</h2>\n          <p>{{ strings.avatarHint }}</p>\n        </div>\n      </header>\n      <div class=\"body\">\n        <div class=\"avatar-preview\">\n          <div class=\"preview-shell\">\n            <img v-if=\"avatarUrl\" :src=\"avatarUrl\" alt=\"avatar preview\" />\n            <span v-else>{{ fallbackInitial }}</span>\n          </div>\n          <span class=\"name\">{{ displayName }}</span>\n        </div>\n        <div class=\"actions\">\n          <label class=\"upload-btn\">\n            <Upload class=\"icon\" />\n            <span>{{ strings.chooseFile }}</span>\n            <input type=\"file\" accept=\"image/*\" @change=\"handleFileChange\" hidden />\n          </label>\n          <button v-if=\"avatarFile\" class=\"ghost\" @click=\"clearSelection\">{{ strings.cancel }}</button>\n          <button class=\"solid\" :disabled=\"avatarStatus.loading\" @click=\"uploadAvatar\">\n            <ImageIcon class=\"icon\" />\n            <span>{{ avatarStatus.loading ? strings.loading : strings.upload }}</span>\n          </button>\n        </div>\n        <p v-if=\"avatarStatus.message\" class=\"success\">{{ avatarStatus.message }}</p>\n        <p v-if=\"avatarStatus.error\" class=\"error\">{{ avatarStatus.error }}</p>\n      </div>\n    </section>\n\n    <section class=\"card\">\n      <header>\n        <KeyRound class=\"icon\" />\n        <div>\n          <h2>{{ strings.passwordTitle }}</h2>\n          <p>{{ strings.formHint }}</p>\n        </div>\n      </header>\n      <form class=\"body form\" @submit.prevent=\"updatePassword\">\n        <div class=\"verify-block\">\n          <label>\n            <span>{{ strings.currentPassword }}</span>\n            <input type=\"password\" v-model=\"passwordForm.current\" autocomplete=\"current-password\" />\n          </label>\n          <div class=\"verify-actions\">\n            <button type=\"button\" class=\"solid\" :disabled=\"verifyState.loading\" @click=\"verifyCurrent\">\n              <Check class=\"icon\" />\n              <span>{{ verifyState.loading ? strings.loading : strings.verify }}</span>\n            </button>\n          </div>\n          <p v-if=\"verifyState.message\" class=\"success\">{{ verifyState.message }}</p>\n          <p v-if=\"verifyState.error\" class=\"error\">{{ verifyState.error }}</p>\n        </div>\n\n        <template v-if=\"verifyState.verified\">\n          <label>\n            <span>{{ strings.newPassword }}</span>\n            <input type=\"password\" v-model=\"passwordForm.next\" autocomplete=\"new-password\" required />\n          </label>\n          <label>\n            <span>{{ strings.confirmPassword }}</span>\n            <input type=\"password\" v-model=\"passwordForm.confirm\" autocomplete=\"new-password\" required />\n          </label>\n          <div class=\"form-actions\">\n            <button class=\"solid\" type=\"submit\" :disabled=\"passwordStatus.loading\">\n              <Check class=\"icon\" />\n              <span>{{ passwordStatus.loading ? strings.loading : strings.savePassword }}</span>\n            </button>\n            <button type=\"button\" class=\"ghost\" @click=\"resetPasswordForm\">\n              <RefreshCw class=\"icon\" />\n              <span>{{ strings.reset }}</span>\n            </button>\n          </div>\n          <p v-if=\"passwordStatus.message\" class=\"success\">{{ passwordStatus.message }}</p>\n          <p v-if=\"passwordStatus.error\" class=\"error\">{{ passwordStatus.error }}</p>\n        </template>\n      </form>\n    </section>\n  </div>\n</template>\n\n<style scoped>\n.settings{ display:flex; flex-direction:column; gap:20px; padding:0; width:100% }\n.page-title{ margin:0; font-size:1.8rem; font-weight:800; color:#1f2937 }\n\n.card{ background:var(--panel,#fff); border-radius:20px; padding:20px 22px; box-shadow:0 16px 32px rgba(15,23,42,.12); display:flex; flex-direction:column; gap:18px }\n.card header{ display:flex; gap:14px; align-items:flex-start }\n.card header .icon{ width:28px; height:28px; color:#2563eb }\n.card header h2{ margin:0; font-size:1.3rem; font-weight:700 }\n.card header p{ margin:4px 0 0; color:rgba(17,24,39,.65) }\n\n.body{ display:flex; flex-direction:column; gap:18px }\n.avatar-preview{ display:flex; align-items:center; gap:16px }\n.preview-shell{ width:96px; height:96px; border-radius:24px; background:linear-gradient(135deg,#1d4ed8,#22c55e); color:#fff; font-size:2.4rem; font-weight:700; display:flex; align-items:center; justify-content:center; overflow:hidden; box-shadow:0 12px 20px rgba(37,99,235,.25) }\n.preview-shell img{ width:100%; height:100%; object-fit:cover }\n.avatar-preview .name{ font-size:1.2rem; font-weight:600 }\n\n.actions{ display:flex; gap:12px; flex-wrap:wrap }\n.upload-btn,.solid,.ghost{ display:inline-flex; align-items:center; gap:8px; border-radius:12px; padding:10px 16px; cursor:pointer; transition:.2s; border:1px solid transparent }\n.upload-btn{ background:rgba(37,99,235,.1); color:#1d4ed8; border-color:rgba(37,99,235,.15) }\n.upload-btn:hover{ background:rgba(37,99,235,.18) }\n.solid{ background:#2563eb; color:#fff }\n.solid:disabled{ opacity:.6; cursor:wait }\n.ghost{ background:transparent; color:#1f2937; border-color:rgba(17,24,39,.15) }\n.ghost:hover{ background:rgba(17,24,39,.05) }\n\n.success{ color:#047857; font-weight:600 }\n.error{ color:#b91c1c; font-weight:600 }\n\n.form{ display:flex; flex-direction:column; gap:16px }\n.form label{ display:flex; flex-direction:column; gap:8px; font-weight:600 }\n.form input{ border-radius:10px; border:1px solid rgba(17,24,39,.15); padding:10px 12px; font-size:1rem }\n.form input:focus{ outline:none; border-color:#2563eb; box-shadow:0 0 0 3px rgba(37,99,235,.15) }\n.verify-block{ display:flex; flex-direction:column; gap:12px; background:rgba(37,99,235,.05); padding:12px 14px; border-radius:14px }\n.verify-actions{ display:flex; gap:12px }\n.verify-actions .solid{ background:#2563eb; border-color:#1d4ed8 }\n.form-actions{ display:flex; gap:12px; flex-wrap:wrap }\n.form-actions .solid{ background:#22c55e; border-color:#16a34a }\n.form-actions .ghost{ color:#1d4ed8; border-color:rgba(37,99,235,.2) }\n\n@media(max-width:720px){\n  .avatar-preview{ flex-direction:column; align-items:flex-start }\n  .preview-shell{ width:84px; height:84px }\n}\n</style>\n","<script setup>\nimport { ref, computed, reactive, onMounted, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport {\n  Target, Trophy, Settings, LogOut, ChevronDown, Globe, Sun, Moon,\n  Hand, ChevronLeft, Menu\n} from 'lucide-vue-next'\n\nimport Challenge1 from '@/pages/challenges/challenge_1.vue'\nimport Challenge2 from '@/pages/challenges/challenge_2.vue'\nimport Challenge3 from '@/pages/challenges/challenge_3.vue'\nimport Challenge4 from '@/pages/challenges/challenge_4.vue'\nimport Challenge5 from '@/pages/challenges/challenge_5.vue'\nimport Challenge6 from '@/pages/challenges/challenge_6.vue'\nimport Challenge7 from '@/pages/challenges/challenge_7.vue'\nimport challenge_level_two_1 from '@/pages/challenges/challenge_level_two_1.vue'\nimport challenge_level_two_2 from '@/pages/challenges/challenge_level_two_2.vue'\nimport challenge_level_two_3 from '@/pages/challenges/challenge_level_two_3.vue'\nimport challenge_level_two_4 from '@/pages/challenges/challenge_level_two_4.vue'\nimport challenge_level_two_5 from '@/pages/challenges/challenge_level_two_5.vue'\nimport challenge_level_two_6 from '@/pages/challenges/challenge_level_two_6.vue'\nimport challenge_level_three_1 from '@/pages/challenges/challenge_level_three_1.vue'\nimport challenge_level_three_2 from '@/pages/challenges/challenge_level_three_2.vue'\nimport challenge_level_three_3 from '@/pages/challenges/challenge_level_three_3.vue'\nimport challenge_level_three_4 from '@/pages/challenges/challenge_level_three_4.vue'\nimport challenge_level_three_5 from '@/pages/challenges/challenge_level_three_5.vue'\nimport challenge_level_three_6 from '@/pages/challenges/challenge_level_three_6.vue'\nimport challenge_level_three_7 from '@/pages/challenges/challenge_level_three_7.vue'\nimport challenge_level_three_7 from '@/pages/challenges/challenge_level_three_7.vue'\nimport challenge_level_three_8 from '@/pages/challenges/challenge_level_three_8.vue'\nimport MyScores from '@/pages/other/my_scores.vue'\nimport SettingsPage from '@/pages/other/settings.vue'\nimport { useGameScore } from '@/composables/useGameScore'\n\nconst router = useRouter()\nconst props = defineProps({ view: { type: String, default: '' } })\n\nconst levels = [\n  {\n    id: 'level1',\n    label: { ar: 'المستوى الأول', en: 'Level One' },\n    challenges: [\n      { id: 'challenge_1', component: Challenge1, label: { ar: 'التحدي 1', en: 'Challenge 1' }, summary: { ar: 'إكمال عملية جمع عمودية بأرقام مخفية.', en: 'Complete a column addition puzzle with hidden digits.' } },\n      { id: 'challenge_2', component: Challenge2, label: { ar: 'التحدي 2', en: 'Challenge 2' }, summary: { ar: 'شبكة أعداد تتزايد بمقدار ثابت، أعد القيم المفقودة.', en: 'Fill a number grid that increases by a fixed step.' } },\n      { id: 'challenge_3', component: Challenge3, label: { ar: 'التحدي 3', en: 'Challenge 3' }, summary: { ar: 'اختر زوج الأعداد الصحيح حسب المجموع والفرق.', en: 'Pick the number pair that matches the given sum and difference.' } },\n      { id: 'challenge_4', component: Challenge4, label: { ar: 'التحدي 4', en: 'Challenge 4' }, summary: { ar: 'استكمل جدول ضرب مصغر.', en: 'Complete the mini multiplication table.' } },\n      { id: 'challenge_5', component: Challenge5, label: { ar: 'التحدي 5', en: 'Challenge 5' }, summary: { ar: 'املأ مثلث الضرب على الأضلاع.', en: 'Fill in the edge products of the triangle.' } },\n      { id: 'challenge_6', component: Challenge6, label: { ar: 'التحدي 6', en: 'Challenge 6' }, summary: { ar: 'اختر ثلاث خلايا مختلفة الصف والعمود لتحقيق مجموع محدد.', en: 'Pick three distinct-row/column cells to reach the target sum.' } },\n      { id: 'challenge_7', component: Challenge7, label: { ar: 'التحدي 7', en: 'Challenge 7' }, summary: { ar: 'أكمل هرم الجمع بإسقاط القيم الصحيحة.', en: 'Complete the sum pyramid with the correct values.' } },\n    ],\n  },\n  {\n    id: 'level2',\n    label: { ar: 'المستوى الثاني', en: 'Level Two' },\n    challenges: [\n      { id: 'challenge_level_two_1', component: challenge_level_two_1, label: { ar: 'التحدي 1', en: 'Challenge 1' }, summary: { ar: 'كوّن تعبيرًا يستخدم الأرقام 1 إلى 5 مرة واحدة.', en: 'Build an expression that uses digits 1–5 exactly once.' } },\n      { id: 'challenge_level_two_2', component: challenge_level_two_2, label: { ar: 'التحدي 2', en: 'Challenge 2' }, summary: { ar: 'أكمل مربّعًا سحريًا بمجاميع متساوية.', en: 'Complete a magic square with equal sums.' } },\n      { id: 'challenge_level_two_3', component: challenge_level_two_3, label: { ar: 'التحدي 3', en: 'Challenge 3' }, summary: { ar: 'طابق أعدادًا سداسية مع خواص القسمة.', en: 'Match six-digit numbers to divisibility rules.' } },\n      { id: 'challenge_level_two_4', component: challenge_level_two_4, label: { ar: 'التحدي 4', en: 'Challenge 4' }, summary: { ar: 'اختر الزوج الذي يطابق المجموع والفرق.', en: 'Choose the pair that matches the required sum and difference.' } },\n      { id: 'challenge_level_two_5', component: challenge_level_two_5, label: { ar: 'التحدي 5', en: 'Challenge 5' }, summary: { ar: 'اكمل طرح الكسور بوضع الأعداد الصحيحة.', en: 'Complete the fraction subtraction by placing the right integers.' } },\n      { id: 'challenge_level_two_6', component: challenge_level_two_6, label: { ar: 'التحدي 6', en: 'Challenge 6' }, summary: { ar: 'رتّب خطوات حل معادلة الموازين.', en: 'Order the solution steps for the balance puzzle.' } },\n    ],\n  },\n  {\n    id: 'level3',\n    label: { ar: 'المستوى الثالث', en: 'Level Three' },\n    challenges: [\n      { id: 'challenge_level_three_1', component: challenge_level_three_1, label: { ar: 'التحدي 1', en: 'Challenge 1' }, summary: { ar: 'ابن هرم الضرب من أرقام مبعثرة.', en: 'Rebuild the multiplication pyramid from scattered numbers.' } },\n      { id: 'challenge_level_three_2', component: challenge_level_three_2, label: { ar: 'التحدي 2', en: 'Challenge 2' }, summary: { ar: 'لغز تفكير متقدم في الأعداد.', en: 'An advanced numerical reasoning puzzle.' } },\n      { id: 'challenge_level_three_3', component: challenge_level_three_3, label: { ar: 'التحدي 3', en: 'Challenge 3' }, summary: { ar: 'لغز منطق متقدم لاختبار السرعة.', en: 'Advanced logic to test your speed.' } },\n      { id: 'challenge_level_three_4', component: challenge_level_three_4, label: { ar: 'التحدي 4', en: 'Challenge 4' }, summary: { ar: 'تحدٍ عالي المستوى لربط الأنماط.', en: 'High-level challenge for spotting patterns.' } },\n      { id: 'challenge_level_three_5', component: challenge_level_three_5, label: { ar: 'التحدي 5', en: 'Challenge 5' }, summary: { ar: 'مسألة حسابية تحتاج إلى خطوات دقيقة.', en: 'A numeric problem that needs careful steps.' } },\n      { id: 'challenge_level_three_6', component: challenge_level_three_6, label: { ar: 'التحدي 6', en: 'Challenge 6' }, summary: { ar: 'إستراتيجية جديدة لبناء الحل خطوة بخطوة.', en: 'Strategic puzzle solved step by step.' } },\n      { id: 'challenge_level_three_7', component: challenge_level_three_7, label: { ar: 'التحدي 7', en: 'Challenge 7' }, summary: { ar: 'هرم جمع متقدّم بقيم أكبر.', en: 'A larger, more demanding sum pyramid.' } },\n      { id: 'challenge_level_three_7', component: challenge_level_three_7, label: { ar: 'التحدي 8', en: 'Challenge 8' }, summary: { ar: 'اختبار المنطق السريع بالأرقام.', en: 'Fast-paced numeric logic test.' } },\n      { id: 'challenge_level_three_8', component: challenge_level_three_8, label: { ar: 'التحدي 9', en: 'Challenge 9' }, summary: { ar: 'لغز أخير يجمع بين التفكير والسرعة.', en: 'A final puzzle mixing reasoning with speed.' } },\n    ],\n  },\n]\n\nconst scoreStore = useGameScore()\nconst dashTiers = [\n  { threshold: 0, title: { ar: 'مبتدئ', en: 'Novice' } },\n  { threshold: 25, title: { ar: 'متقدم', en: 'Skilled' } },\n  { threshold: 80, title: { ar: 'قائد', en: 'Leader' } },\n  { threshold: 160, title: { ar: 'أسطورة', en: 'Legend' } },\n]\n\nconst scoreValue = computed(() => Number(scoreStore.score.value || 0))\nconst tierIndex = computed(() => {\n  let idx = 0\n  dashTiers.forEach((tier, index) => {\n    if (scoreValue.value >= tier.threshold) idx = index\n  })\n  return idx\n})\nconst scoreTier = computed(() => dashTiers[tierIndex.value])\nconst nextTier = computed(() => dashTiers[tierIndex.value + 1] || null)\nconst scoreTierName = computed(() => scoreTier.value?.title?.[lang.value] || scoreTier.value?.title?.en || '')\nconst scoreProgress = computed(() => {\n  if (!nextTier.value) return 1\n  const span = nextTier.value.threshold - scoreTier.value.threshold\n  if (span <= 0) return 1\n  return Math.min(1, (scoreValue.value - scoreTier.value.threshold) / span)\n})\nconst scoreFormatter = new Intl.NumberFormat('en-US', { maximumFractionDigits: 0 })\nconst scoreDisplay = computed(() => scoreFormatter.format(scoreValue.value))\nconst rankDisplay = computed(() => {\n  const rank = scoreStore.rank.value\n  return rank ? `#${rank}` : '--'\n})\nconst totalPlayersDisplay = computed(() => {\n  const total = scoreStore.totalPlayers.value\n  return total ? scoreFormatter.format(total) : '--'\n})\nconst scoreLoading = computed(() => scoreStore.loading.value)\nconst scoreProgressPercent = computed(() => Math.round(scoreProgress.value * 100))\nconst avatarUrl = computed(() => scoreStore.profileImage.value || null)\nconst avatarInitial = computed(() => {\n  const source = fullName.value || scoreStore.username.value || username.value || 'P'\n  return source.trim().charAt(0).toUpperCase() || 'P'\n})\n\nfunction viewScores(){\n  goto('/scores')\n}\n\nconst componentRegistry = {}\nlevels.forEach(level => {\n  level.challenges.forEach(challenge => {\n    componentRegistry[challenge.id] = challenge.component\n  })\n})\nconst specialViews = { scores: MyScores, settings: SettingsPage }\n\n/* ================= اللغة ================= */\nconst lang = ref(localStorage.getItem('ml_lang') || 'ar')\nconst dir  = computed(() => (lang.value === 'ar' ? 'rtl' : 'ltr'))\nconst T = {\n  ar: {\n    challenges:'المستوى الأول', challenges2:'المستوى الثاني', myScores:'درجاتي', settings:'الإعدادات', logout:'خروج',\n    hello:'مرحبًا', sub:'اختر تحديًا وابدأ اللعب!', challenge:'التحدي',\n    brand:'زعماء الرياضيات', pickPrompt:'اختر تحديًا من البطاقات أدناه للبدء.',\n    scoreWidgetTitle:'نقاطي', scoreWidgetSubtitle:'نظرة سريعة على تقدّمك',\n    scoreWidgetRank:'الترتيب', scoreWidgetPlayers:'عدد اللاعبين',\n    scoreWidgetProgress:'نحو الرتبة التالية', scoreWidgetView:'عرض التفاصيل',\n    scoreWidgetLoading:'جار تحديث النقاط...',\n    teacherTitle:'الشريك التربوي',\n    teacherSubtitle:'ميعاد سفر المالكي',\n    teacherMessage:'شكرًا للأستاذة ميعاد سفر المالكي على إعداد هذه التحديات المُلهمة للطلبة.'\n  },\n  en: {\n    challenges:'Level One', challenges2:'Level Two', myScores:'My Scores', settings:'Settings', logout:'Log out',\n    hello:'Hello', sub:'Pick a challenge and start!', challenge:'Challenge',\n    brand:'Math Leaders', pickPrompt:'Select a challenge from the cards below to get started.',\n    scoreWidgetTitle:'My points', scoreWidgetSubtitle:'Quick glance at your progress',\n    scoreWidgetRank:'Rank', scoreWidgetPlayers:'Players',\n    scoreWidgetProgress:'To next tier', scoreWidgetView:'View details',\n    scoreWidgetLoading:'Refreshing score...',\n    teacherTitle:'Presented by',\n    teacherSubtitle:'Miyaad Safar Al-Malki',\n    teacherMessage:'A heartfelt thanks to Ms. Miyaad Safar Al-Malki for curating these inspiring challenges.'\n  }\n}\nconst t = (k)=>T[lang.value][k]\nconst extraView = computed(() => props.view || '')\nwatch(lang, v=>{\n  localStorage.setItem('ml_lang', v)\n  document.documentElement.dir = dir.value\n  document.documentElement.lang = v\n})\n\n/* ================= الثيم ================= */\nconst theme = ref(localStorage.getItem('ml_theme') || 'light')\nwatch(theme, v=>{\n  localStorage.setItem('ml_theme', v)\n})\n\n/* ================= GET helper ================= */\nasync function get(url, params = {}) {\n  const qs = new URLSearchParams(params).toString()\n  const r  = await fetch(url + (qs ? `?${qs}` : ''), {\n    method: 'GET',\n    credentials: 'include',\n  })\n  const data = await r.json().catch(()=> ({}))\n  if (!r.ok) throw data\n  return data\n}\n\n/* ================= المستخدم/الحماية ================= */\nconst username = ref('player')\nconst fullName = ref('')\n\nasync function fetchMe(){\n  try {\n    const data = await get('/api/method/mathematics_leaders.api.get_my_details.get_me')\n    const msg  = data?.message\n    if (!msg?.ok) { router.replace('/'); return }\n    const prof = msg.profile || {}\n    username.value = prof.username || 'player'\n    fullName.value = prof.full_name || ''\n    if (prof.language && !localStorage.getItem('ml_lang')) lang.value = prof.language\n  } catch {\n    router.replace('/')\n  }\n}\n\n/* ================= تنقّل وقائمة ================= */\nconst profileOpen      = ref(false)\nconst sidebarCollapsed = ref(false)\nconst expandedLevels = reactive(Object.fromEntries(levels.map((lvl, idx) => [lvl.id, idx === 0])))\nconst selectedLevel = ref(levels[0]?.id || 'level1')\nconst selectedChallenge = ref(null)\n\nfunction toggleSidebar(){\n  sidebarCollapsed.value = !sidebarCollapsed.value\n}\nfunction goto(path){ router.push(path) }\nasync function logout(){\n  await get('/api/method/logout')\n  router.replace('/')\n}\nfunction toggleLevel(levelId){\n  expandedLevels[levelId] = !expandedLevels[levelId]\n}\nfunction isExpanded(levelId){\n  return !!expandedLevels[levelId]\n}\nfunction selectChallenge(levelId, challengeId){\n  expandedLevels[levelId] = true\n  selectedLevel.value = levelId\n  selectedChallenge.value = challengeId\n  if (router.currentRoute.value.path !== '/home') {\n    router.push('/home')\n  }\n}\nfunction isActiveChallenge(levelId, challengeId){\n  return selectedLevel.value === levelId && selectedChallenge.value === challengeId\n}\n\nconst currentSelection = computed(() => {\n  if (props.view && specialViews[props.view]) {\n    return { level: null, challenge: null }\n  }\n  if (!selectedChallenge.value) {\n    const level = levels.find(l => l.id === selectedLevel.value) || null\n    return { level, challenge: null }\n  }\n  for (const level of levels) {\n    const challenge = level.challenges.find(ch => ch.id === selectedChallenge.value)\n    if (challenge) return { level, challenge }\n  }\n  return { level: levels.find(l => l.id === selectedLevel.value) || null, challenge: null }\n})\nconst currentComponent = computed(() => {\n  if (props.view && specialViews[props.view]) {\n    return specialViews[props.view]\n  }\n  const id = selectedChallenge.value\n  return id ? componentRegistry[id] : null\n})\n\n/* ================= تهيئة ================= */\nonMounted(()=>{\n  document.documentElement.dir  = dir.value\n  document.documentElement.lang = lang.value\n  fetchMe()\n  scoreStore.refresh()\n})\n\n/* شعار */\nconst logoUrl = new URL('../assets/images/logo3.jpeg', import.meta.url).href\n</script>\n\n<template>\n  <div class=\"shell\" :dir=\"dir\" :data-theme=\"theme\">\n    <!-- Sidebar -->\n    <aside class=\"sidebar\" :class=\"{ collapsed: sidebarCollapsed }\">\n      <div class=\"brand\" :title=\"t('brand')\">\n        <img class=\"logo\" :src=\"logoUrl\" alt=\"ML logo\" />\n        <span class=\"brand-name\" v-show=\"!sidebarCollapsed\">{{ t('brand') }}</span>\n      </div>\n\n      <nav class=\"menu\">\n        <div class=\"menu-group\" v-for=\"level in levels\" :key=\"level.id\">\n          <button class=\"menu-item\" @click=\"toggleLevel(level.id)\" :disabled=\"sidebarCollapsed\">\n            <Target class=\"mi\" />\n            <span class=\"mt\" v-show=\"!sidebarCollapsed\">{{ level.label[lang] }}</span>\n            <ChevronDown class=\"chev\" :class=\"{rot: isExpanded(level.id)}\" v-show=\"!sidebarCollapsed\" />\n          </button>\n          <transition name=\"fade\">\n            <ul v-if=\"isExpanded(level.id) && !sidebarCollapsed\" class=\"submenu\">\n              <li v-for=\"challenge in level.challenges\" :key=\"challenge.id\">\n                <a\n                  href=\"javascript:;\"\n                  :class=\"{ active: isActiveChallenge(level.id, challenge.id) }\"\n                  @click=\"selectChallenge(level.id, challenge.id)\"\n                >\n                  {{ challenge.label[lang] }}\n                </a>\n              </li>\n            </ul>\n          </transition>\n        </div>\n\n        <button class=\"menu-item\" @click=\"goto('/scores')\" :title=\"t('myScores')\">\n          <Trophy class=\"mi\" />\n          <span class=\"mt\" v-show=\"!sidebarCollapsed\">{{ t('myScores') }}</span>\n        </button>\n\n        <button class=\"menu-item\" @click=\"goto('/settings')\" :title=\"t('settings')\">\n          <Settings class=\"mi\" />\n          <span class=\"mt\" v-show=\"!sidebarCollapsed\">{{ t('settings') }}</span>\n        </button>\n\n        <button class=\"menu-item danger\" @click=\"logout\" :title=\"t('logout')\">\n          <LogOut class=\"mi\" />\n          <span class=\"mt\" v-show=\"!sidebarCollapsed\">{{ t('logout') }}</span>\n        </button>\n      </nav>\n    </aside>\n\n    <!-- Main -->\n    <main class=\"main\">\n      <header class=\"topbar\">\n        <div class=\"left\">\n          <button class=\"pill ghost toggle\" @click=\"toggleSidebar\" :aria-label=\"sidebarCollapsed ? 'Open sidebar' : 'Collapse sidebar'\">\n            <Menu v-if=\"sidebarCollapsed\" />\n            <ChevronLeft v-else :style=\"{ transform: dir==='rtl' ? 'scaleX(-1)' : '' }\" />\n          </button>\n\n          <div class=\"welcome\">\n            <Hand class=\"wave\" />\n            <strong>{{ T[lang].hello }} {{ fullName || username }}</strong>\n            <small>— {{ t('sub') }}</small>\n          </div>\n        </div>\n\n        <div class=\"right\">\n          <button class=\"pill ghost\" title=\"Language\" @click=\"lang = (lang==='ar'?'en':'ar')\">\n            <Globe style=\"margin-inline-end:6px\" /> {{ lang==='ar' ? 'EN' : 'ع' }}\n          </button>\n          <button class=\"pill ghost\" title=\"Theme\" @click=\"theme = (theme==='light'?'dark':'light')\">\n            <Sun v-if=\"theme==='light'\" /> <Moon v-else />\n          </button>\n\n          <div class=\"avatar\" @click=\"profileOpen=!profileOpen\">\n            <UserCircle2 class=\"avatar-ico\" />\n            <span class=\"name\">{{ fullName || username }}</span>\n            <ChevronDown class=\"chev\" :class=\"{rot: profileOpen}\" />\n\n            <transition name=\"fade\">\n              <ul v-if=\"profileOpen\" class=\"dropdown\">\n                <li><a href=\"javascript:;\" @click=\"goto('/settings')\"><Settings /> <span> {{ T[lang].settings }}</span></a></li>\n                <li><a href=\"javascript:;\" class=\"danger\" @click=\"logout\"><LogOut /> <span> {{ T[lang].logout }}</span></a></li>\n              </ul>\n            </transition>\n          </div>\n        </div>\n      </header>\n\n      <section class=\"content\">\n        <div class=\"score-widget\" :class=\"{ loading: scoreLoading }\">\n          <div class=\"score-main\">\n            <div class=\"score-ring\">\n              <svg viewBox=\"0 0 120 120\">\n                <circle class=\"bg\" cx=\"60\" cy=\"60\" r=\"52\" />\n                <circle class=\"fg\" cx=\"60\" cy=\"60\" r=\"52\" :style=\"{ '--progress': scoreProgress }\" />\n              </svg>\n              <div class=\"center\">\n                <span class=\"points\">{{ scoreLoading ? '...' : scoreDisplay }}</span>\n                <small>{{ T[lang].scoreWidgetTitle }}</small>\n              </div>\n            </div>\n            <div class=\"tier\">\n              <span class=\"tier-name\">{{ scoreTierName }}</span>\n              <p class=\"subtitle\">{{ scoreLoading ? T[lang].scoreWidgetLoading : T[lang].scoreWidgetSubtitle }}</p>\n            </div>\n            <div class=\"progress\">\n              <div class=\"bar\"><div class=\"fill\" :style=\"{ '--progress': scoreProgress }\"></div></div>\n              <div class=\"caption\">\n                <span>{{ T[lang].scoreWidgetProgress }}</span>\n                <span>{{ scoreProgressPercent }}%</span>\n              </div>\n            </div>\n          </div>\n          <div class=\"score-meta\">\n            <div class=\"meta-card\">\n              <span>{{ T[lang].scoreWidgetRank }}</span>\n              <strong>{{ scoreLoading ? '--' : rankDisplay }}</strong>\n            </div>\n            <div class=\"meta-card\">\n              <span>{{ T[lang].scoreWidgetPlayers }}</span>\n              <strong>{{ scoreLoading ? '--' : totalPlayersDisplay }}</strong>\n            </div>\n            <button class=\"meta-link\" @click=\"viewScores\">{{ T[lang].scoreWidgetView }}</button>\n          </div>\n        </div>\n\n        <div class=\"teacher-card\">\n          <div class=\"frame\">\n            <span class=\"label\">{{ T[lang].teacherTitle }}</span>\n            <h3>{{ T[lang].teacherSubtitle }}</h3>\n            <p>{{ T[lang].teacherMessage }}</p>\n          </div>\n        </div>\n\n        <div v-if=\"currentComponent\" class=\"active-panel\">\n          <header class=\"active-header\">\n            <span class=\"level-chip\" v-if=\"currentSelection.level\">{{ currentSelection.level.label[lang] }}</span>\n            <div class=\"titles\" v-if=\"currentSelection.challenge\">\n              <h2 class=\"challenge-title\">{{ currentSelection.challenge.label[lang] }}</h2>\n              <p class=\"challenge-desc\">{{ currentSelection.challenge.summary[lang] }}</p>\n            </div>\n          </header>\n          <component :is=\"currentComponent\" :lang=\"lang\" :theme=\"theme\" />\n        </div>\n        <div v-else class=\"empty-state\">\n          <p>{{ T[lang].pickPrompt }}</p>\n        </div>\n\n        <div class=\"levels-browser\">\n          <section class=\"level-section\" v-for=\"level in levels\" :key=\"level.id\">\n            <div class=\"level-heading\">\n              <h3>{{ level.label[lang] }}</h3>\n              <small>{{ level.challenges.length }}</small>\n            </div>\n            <div class=\"cards\">\n              <div\n                class=\"card\"\n                v-for=\"challenge in level.challenges\"\n                :key=\"challenge.id\"\n                :class=\"{ active: isActiveChallenge(level.id, challenge.id) }\"\n                @click=\"selectChallenge(level.id, challenge.id)\"\n              >\n                <h4>{{ challenge.label[lang] }}</h4>\n                <p>{{ challenge.summary[lang] }}</p>\n              </div>\n            </div>\n          </section>\n        </div>\n      </section>\n    </main>\n  </div>\n</template>\n\n<style scoped>\n.shell{\n  --primary:#8f2c24; --accent:#d64c42; --peach:#ffe7db; --sand:#fff4e9; --ink:#2b1a1a;\n  --bg:linear-gradient(180deg,#fffaf6,#fff4e9);\n  --fg:var(--ink); --side-bg:rgba(255,255,255,.92); --bd:#f1d8cf; --hover:rgba(214,76,66,.08);\n  --glass:rgba(255,255,255,.75); --pill-bg:#fff; --shadow:0 10px 28px rgba(214,76,66,.12);\n  min-height:100vh; background:var(--bg); color:var(--fg); display:flex; transition:background .2s,color .2s\n}\n.shell[data-theme=\"dark\"]{\n  --primary:#ffb4a3; --accent:#ff8c7a; --peach:#2a1714; --sand:#1c1512; --ink:#f7ebe7;\n  --bg:linear-gradient(180deg,#1b1412,#241815);\n  --fg:var(--ink); --side-bg:rgba(24,15,13,.88); --bd:#3c2722; --hover:rgba(255,140,122,.12);\n  --glass:rgba(24,15,13,.55); --pill-bg:#2a1a16; --shadow:0 10px 28px rgba(0,0,0,.35)\n}\n\n.sidebar{width:270px;background:var(--side-bg);backdrop-filter: blur(8px) saturate(1.08);\n  border-inline-end:1px solid var(--bd);display:flex;flex-direction:column;gap:16px;padding:16px 12px;\n  position:sticky;top:0;height:100vh;transition:width .18s ease}\n.sidebar.collapsed{ width:80px; }\n.brand{display:flex;align-items:center;gap:12px;padding:6px 10px;margin-bottom:6px}\n.logo{width:40px;height:40px;border-radius:12px;object-fit:cover;box-shadow:var(--shadow)}\n.brand-name{font-weight:800;letter-spacing:.2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}\n\n.menu{display:flex;flex-direction:column;gap:6px}\n.menu-group{border-radius:14px;background:var(--glass);box-shadow:var(--shadow);padding:6px;border:1px solid var(--bd)}\n.menu-item{width:100%;display:flex;align-items:center;gap:12px;padding:11px 12px;border-radius:12px;\n  border:none;background:transparent;color:inherit;text-align:start;cursor:pointer;transition:.15s}\n.menu-item:hover{background:var(--hover)}\n.menu-item.danger:hover{background:rgba(255,0,0,.06)}\n.mi{width:22px;height:22px}\n.mt{flex:1}\n.chev{opacity:.6;transition:transform .2s}\n.chev.rot{transform:rotate(180deg)}\n.submenu{padding:6px 6px 6px 42px;display:grid;gap:6px}\n.submenu a{display:block;padding:8px 10px;border-radius:9px;text-decoration:none;color:inherit;transition:.15s}\n.submenu a:hover{background:var(--hover)}\n.submenu a.active{background:rgba(214,76,66,.18);font-weight:600}\n\n.main{flex:1;display:flex;flex-direction:column;min-width:0}\n.topbar{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;\n  border-bottom:1px solid var(--bd);backdrop-filter: blur(6px) saturate(1.05)}\n.left{display:flex;align-items:center;gap:10px}\n.welcome{display:flex;align-items:center;gap:10px;font-size:18px}\n.welcome small{opacity:.7}\n.wave{width:22px;height:22px;color:#ffccba}\n.right{display:flex;align-items:center;gap:10px}\n\n.pill{border:1px solid var(--bd);background:var(--pill-bg);color:inherit;border-radius:999px;\n  padding:8px 12px;cursor:pointer;transition:.15s;display:inline-flex;align-items:center;gap:8px}\n.pill.ghost{background:transparent}\n.pill:hover{transform:translateY(-1px);background:var(--hover)}\n.toggle svg{width:20px;height:20px}\n\n.avatar{position:relative;display:flex;align-items:center;gap:10px;padding:6px 10px;border-radius:999px;\n  background:var(--pill-bg);border:1px solid var(--bd);cursor:pointer}\n.avatar-ico{width:24px;height:24px}\n.avatar .name{max-width:160px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}\n.dropdown{position:absolute;inset-inline-end:0;top:calc(100% + 6px);min-width:200px;background:var(--side-bg);\n  border:1px solid var(--bd);border-radius:12px;box-shadow:var(--shadow);padding:6px;z-index:10}\n.dropdown li a{display:flex;align-items:center;gap:8px;padding:10px;border-radius:8px;color:inherit;text-decoration:none}\n.dropdown li a:hover{background:var(--hover)}\n.dropdown .danger{color:#c03}\n\n.content{padding:24px;display:flex;flex-direction:column;gap:28px}\n.score-widget{display:flex;gap:24px;flex-wrap:wrap;align-items:center;background:var(--glass);border:1px solid var(--bd);border-radius:20px;padding:20px;box-shadow:var(--shadow)}\n.score-widget.loading{opacity:.85}\n.score-main{display:flex;flex-direction:column;gap:14px;min-width:260px}\n.score-ring{position:relative;width:140px;height:140px}\n.score-ring svg{width:100%;height:100%;transform:rotate(-90deg)}\n.score-ring circle{fill:none;stroke-width:10px;stroke-linecap:round}\n.score-ring circle.bg{stroke:rgba(214,76,66,.18)}\n.score-ring circle.fg{stroke:var(--accent);stroke-dasharray:327;stroke-dashoffset:calc(327 - 327 * var(--progress,0));transition:stroke-dashoffset .6s ease}\n.score-ring .center{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}\n.score-ring .points{font-size:2.4rem;font-weight:800;color:var(--accent)}\n.score-ring small{font-weight:600;color:var(--fg)}\n.tier-name{font-weight:700;font-size:1.05rem}\n.subtitle{margin:0;color:rgba(0,0,0,.55)}\n[data-theme=\"dark\"] .subtitle{color:rgba(255,255,255,.7)}\n.progress .bar{width:100%;height:10px;border-radius:999px;background:rgba(214,76,66,.15);overflow:hidden}\n.progress .fill{width:calc(var(--progress,0)*100%);height:100%;background:linear-gradient(90deg,var(--accent),#ffb199)}\n.progress .caption{display:flex;justify-content:space-between;font-size:.85rem;opacity:.7;margin-top:4px}\n.score-meta{display:flex;gap:16px;align-items:stretch;flex:1;min-width:220px}\n.meta-card{flex:1;background:var(--panel,#fff);border-radius:16px;border:1px solid var(--bd);box-shadow:0 10px 24px rgba(0,0,0,.08);padding:18px;display:flex;flex-direction:column;gap:6px;font-weight:600}\n.meta-card strong{font-size:1.6rem}\n.meta-link{align-self:flex-start;margin-inline-start:auto;border:none;background:var(--accent);color:#fff;padding:10px 18px;border-radius:12px;cursor:pointer;font-weight:700;box-shadow:0 10px 24px rgba(214,76,66,.2)}\n.meta-link:hover{transform:translateY(-1px)}\n.teacher-card{background:linear-gradient(120deg,rgba(214,76,66,.18),rgba(37,99,235,.18));border-radius:22px;padding:18px 22px;box-shadow:0 14px 30px rgba(0,0,0,.08);position:relative;overflow:hidden}\n.teacher-card::after{content:'';position:absolute;inset:-80px -40px auto auto;width:220px;height:220px;background:radial-gradient(rgba(214,76,66,.45),transparent 65%);transform:rotate(25deg);opacity:.65}\n.teacher-card .frame{position:relative;display:flex;flex-direction:column;gap:8px;z-index:1}\n.teacher-card .label{display:inline-block;padding:6px 12px;border-radius:999px;background:rgba(255,255,255,.65);font-weight:700;color:#8f2c24;width:max-content}\n.teacher-card h3{margin:0;font-size:1.4rem;font-weight:800;color:#8f2c24}\n[data-theme=\"dark\"] .teacher-card h3{color:#ffd0c5}\n.teacher-card p{margin:0;color:#2b1a1a;font-size:.95rem;max-width:520px}\n[data-theme=\"dark\"] .teacher-card p{color:#f7ebe7}\n.active-panel{background:var(--glass);border:1px solid var(--bd);border-radius:18px;padding:20px;box-shadow:var(--shadow)}\n.active-header{display:flex;flex-direction:column;gap:12px;margin-bottom:16px}\n.level-chip{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;\n  background:rgba(214,76,66,.12);color:var(--accent);font-weight:600;font-size:.85rem;width:max-content}\n.challenge-title{margin:0;font-size:1.5rem;font-weight:700}\n.challenge-desc{margin:6px 0 0;opacity:.75}\n.empty-state{background:var(--glass);border:1px dashed var(--bd);border-radius:16px;padding:24px;text-align:center;color:rgba(0,0,0,.6)}\n.shell[data-theme=\"dark\"] .empty-state{color:rgba(255,255,255,.7)}\n\n.levels-browser{display:flex;flex-direction:column;gap:26px}\n.level-section{background:var(--glass);border:1px solid var(--bd);border-radius:18px;padding:18px 20px;box-shadow:var(--shadow)}\n.level-heading{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}\n.level-heading small{background:rgba(0,0,0,.06);padding:4px 10px;border-radius:8px;font-weight:600}\n.shell[data-theme=\"dark\"] .level-heading small{background:rgba(255,255,255,.12)}\n\n.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}\n.card{background:var(--pill-bg);border:1px solid var(--bd);border-radius:16px;padding:18px;box-shadow:var(--shadow);\n  cursor:pointer;transition:.15s;display:flex;flex-direction:column;gap:8px}\n.card:hover{transform:translateY(-2px)}\n.card.active{border-color:var(--accent);box-shadow:0 10px 28px rgba(214,76,66,.22);transform:translateY(-2px)}\n.card h4{margin:0;font-size:1.1rem;font-weight:700}\n.card p{margin:0;opacity:.72}\n\n.fade-enter-active,.fade-leave-active{transition:opacity .15s}\n.fade-enter-from,.fade-leave-to{opacity:0}\n\n@media (max-width: 900px){\n  .sidebar{position:fixed;inset-block:0;inset-inline-start:0;z-index:30}\n  .main{margin-inline-start:270px}\n  .sidebar.collapsed + .main{ margin-inline-start:80px; }\n  .content{padding:20px}\n}\n</style>\n","import { createRouter, createWebHashHistory } from 'vue-router'\nimport Login from '@/components/Index.vue'\nimport Home from '@/components/Dashboard.vue'\nconst router = createRouter({\n  history: createWebHashHistory('/math-leaders-games/'),\n  routes: [\n    { path: '/', redirect: '/login' },\n    { path: '/login', component: Login },\n    { path: '/home', component: Home },\n    { path: '/scores', component: () => import('@/pages/other/ScoresView.vue') },\n    { path: '/settings', component: () => import('@/pages/other/SettingsView.vue') },\n  ],\n})\n\nexport default router\n","// import './assets/main.css'\n\n// import { createApp } from 'vue'\n// import App from './App.vue'\n\n// createApp(App).mount('#app')\n\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport './assets/main.css'\n\ncreateApp(App)\n  .use(router)\n  .mount('#app')\n"],"file":"js/platform.js"}